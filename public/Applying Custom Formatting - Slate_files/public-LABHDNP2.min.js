import{a as CI,b as nT,c as rT}from"https://app.gitbook.com/public/app/chunks/chunk-EQPYNPVW.min.js";import{a as ue,b as tT}from"https://app.gitbook.com/public/app/chunks/chunk-LREF7MGO.min.js";import{c as Nk,d as WC,e as yn,f as df,g as Vn,h as hf,i as hh,j as PI,k as sa,m as ZI,n as eT}from"https://app.gitbook.com/public/app/chunks/chunk-34MPXV3C.min.js";import{a as KI}from"https://app.gitbook.com/public/app/chunks/chunk-UARSUWIJ.min.js";import{a as lg,b as jP}from"https://app.gitbook.com/public/app/chunks/chunk-DRZSCJSE.min.js";import{a as Ix,b as Fx,c as Hx,d as ah,e as vI,f as kI,g as xc,h as II,i as oT}from"https://app.gitbook.com/public/app/chunks/chunk-66Z44KC4.min.js";import{a as ze,b as ri,c as Ph}from"https://app.gitbook.com/public/app/chunks/chunk-YNNRHUHJ.min.js";import{a as $P,b as xI,c as bh,d as WI}from"https://app.gitbook.com/public/app/chunks/chunk-22JZNCB5.min.js";import{a as mI}from"https://app.gitbook.com/public/app/chunks/chunk-FG56YOOJ.min.js";import{a as bf}from"https://app.gitbook.com/public/app/chunks/chunk-WASFCTKM.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-PQQ7ZXKW.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-L5IQJ2I4.min.js";import{a as dh,b as bI,d as Sh,e as _I}from"https://app.gitbook.com/public/app/chunks/chunk-CRMQDH2N.min.js";import{a as ld}from"https://app.gitbook.com/public/app/chunks/chunk-KNBZ3YAN.min.js";import{a as Ot}from"https://app.gitbook.com/public/app/chunks/chunk-KVVFCLYP.min.js";import{a as ia}from"https://app.gitbook.com/public/app/chunks/chunk-DGTBDR5D.min.js";import{a as Nl,b as JI}from"https://app.gitbook.com/public/app/chunks/chunk-RTOMXERV.min.js";import{a as Qx,b as ZN,c as YI,d as $I}from"https://app.gitbook.com/public/app/chunks/chunk-LKNS4ZQ6.min.js";import{A as GI,B as jI,a as Es,b as ve,c as Ht,d as eh,e as pf,f as Zx,g as zC,h as th,i as td,j as oh,k as eI,l as tI,m as nI,n as nh,o as rh,p as rI,q as ih,r as iI,s as aI,t as sI,v as KC,w as RI,x as gf,y as ad}from"https://app.gitbook.com/public/app/chunks/chunk-2IF5M4RY.min.js";import{a as Pi,b as FC,c as wc,d as od,e as cI,f as lI,g as fr,h as uI,i as Rc,j as dI,k as id}from"https://app.gitbook.com/public/app/chunks/chunk-VYDEJZXE.min.js";import{a as Gg}from"https://app.gitbook.com/public/app/chunks/chunk-YW72267A.min.js";import{a as ni,b as qI,c as ud}from"https://app.gitbook.com/public/app/chunks/chunk-E5VTNROO.min.js";import{a as oI,b as uh}from"https://app.gitbook.com/public/app/chunks/chunk-H25N6W2Z.min.js";import{a as lh}from"https://app.gitbook.com/public/app/chunks/chunk-3IDZBK4H.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-A322H47Q.min.js";import{a as MI}from"https://app.gitbook.com/public/app/chunks/chunk-E7GNV77C.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-MK2FLHR5.min.js";import{a as Os}from"https://app.gitbook.com/public/app/chunks/chunk-4PT2Q6P3.min.js";import{a as mf}from"https://app.gitbook.com/public/app/chunks/chunk-6FLBOIXR.min.js";import{a as kh}from"https://app.gitbook.com/public/app/chunks/chunk-DWURBN3A.min.js";import{a as vo,c as Ts,d as St,e as kc,g as UI,h as zI,j as jC}from"https://app.gitbook.com/public/app/chunks/chunk-IHGAHTK6.min.js";import{a as Co,b as ph,d as Bl,f as mh,g as SI,h as _o}from"https://app.gitbook.com/public/app/chunks/chunk-VHMUVRAP.min.js";import{a as Xx}from"https://app.gitbook.com/public/app/chunks/chunk-DOYUNK7K.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-6ORTAGNK.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JE3FFDV2.min.js";import{a as Ch}from"https://app.gitbook.com/public/app/chunks/chunk-XAEGPZ6G.min.js";import{a as wI,b as ra,d as AI,e as BI,f as LI,h as vh,i as Ga,k as FI,m as _l,n as HI}from"https://app.gitbook.com/public/app/chunks/chunk-7UU55NAY.min.js";import{a as Pc}from"https://app.gitbook.com/public/app/chunks/chunk-YPUF5ECY.min.js";import{b as Nr,d as nd,e as sh,f as At,g as ch,h as pI,i as fI,j as gI,k as se,l as hI,m as yI,n as rd,o as ff,p as fe,q as fh,r as gh,s as Ds,u as za}from"https://app.gitbook.com/public/app/chunks/chunk-JB7HTXGR.min.js";import{b as Ml,c as NI,d as wh,e as Ic,f as Rh,g as VI}from"https://app.gitbook.com/public/app/chunks/chunk-62M6SWWN.min.js";import{a as Ma,b as nf,c as Xk,d as Qk}from"https://app.gitbook.com/public/app/chunks/chunk-TCCNHHJO.min.js";import{b as tf,c as of,e as Jk,f as qk}from"https://app.gitbook.com/public/app/chunks/chunk-DCMORTVM.min.js";import{a as Sx,b as Ie}from"https://app.gitbook.com/public/app/chunks/chunk-2ZWAK5AI.min.js";import{b as Zk}from"https://app.gitbook.com/public/app/chunks/chunk-QKYFLOIO.min.js";import{a as Z}from"https://app.gitbook.com/public/app/chunks/chunk-ADWHFZKD.min.js";import{a as Fn,b as yf,c as ot,d as yh,e as cd}from"https://app.gitbook.com/public/app/chunks/chunk-2RIIMTLP.min.js";import{L as GP,M as Qr,N as JP,O as Fu,P as Hu,Q as qP,W as Ug,X as hx,Y as Ft,Z as zg,_ as yx,aa as bx,ca as vx,da as Cx,ea as re,ia as Kg,ja as VC,ka as Ka,la as TI,ma as Ll,na as EI,oa as OI,pa as GC,sa as DI,ta as No,ua as Ei,wa as sd}from"https://app.gitbook.com/public/app/chunks/chunk-BQLJZIHN.min.js";import{a as oi}from"https://app.gitbook.com/public/app/chunks/chunk-XZUCPMNA.min.js";import{a as XP,c as aa}from"https://app.gitbook.com/public/app/chunks/chunk-CUCA4DLB.min.js";import{d as we}from"https://app.gitbook.com/public/app/chunks/chunk-HZYCZCHW.min.js";import{$c as yk,$d as nx,Ac as ck,Ad as V,Af as fx,Bc as mg,Bd as rf,Cc as lk,Cd as MC,Cf as mx,Dc as uk,Dd as ex,Df as Hg,Ec as dk,Ed as Ju,Ef as Wg,Fc as IC,Fd as Mn,Ff as gx,Gc as gc,Gd as qu,Hd as tx,Ic as Uu,Jc as pk,Kb as Vu,Kc as hc,Kd as ox,Lb as vC,Ld as ao,Mb as mc,Mc as Gp,Nb as ys,Nc as fk,Oc as Qi,Pc as mk,Qc as gk,Qd as Va,Sd as oa,Ub as SC,Vb as bs,Xc as hk,Yb as Oa,_d as _g,ac as ug,af as ax,bc as QP,bd as Ag,bf as Fg,cd as Vk,cf as sx,dc as dg,dd as Fk,df as af,e as UP,ec as mn,ed as Ri,f as zP,fc as kl,fd as Hk,g as KP,gc as ZP,gd as Bg,hc as ek,hd as Wk,id as Lg,jd as Uk,kd as zk,lc as tk,ld as Kk,mc as wC,md as Gk,mf as sf,nd as LC,ne as rx,nf as cx,od as jk,pc as ok,pd as Yk,pe as ix,pf as NC,qc as RC,qd as $k,qe as _C,qf as lx,rc as PC,rd as Mg,re as Ng,rf as ux,sc as nk,sd as Zp,sf as dx,td as _a,uc as rk,ud as ef,vd as _r,ve as Vg,wd as Et,xd as pr,yd as Na,zd as hn,zf as px}from"https://app.gitbook.com/public/app/chunks/chunk-NZT4TQPP.min.js";import{b as Ti}from"https://app.gitbook.com/public/app/chunks/chunk-SXPD52ZY.min.js";import{A as en,B as Mx,C as Lo,D as gt,E as Zu,F as Fa,G as Se,H as Mo,J as _x,K as U,M as Nn,N as qg,P as Cc,Q as Wa,R as Sc,S as Wx,T as Ux,U as lf,V as zx,W as Al,X as Xg,Y as Kx,Z as Gx,a as YN,c as F,ca as jx,d as de,da as ed,e as pe,ea as Ii,f as vc,fa as Yx,g as HC,h as wx,ha as Ua,i as Rx,ia as Dt,j as Px,k as kx,l as _n,la as W,m as cf,ma as $x,n as ho,na as Jx,o as Xu,oa as bo,pa as Qg,q as xx,qa as Zg,ra as uf,s as ki,t as Qu,ta as qx,u as Ox,y as UC,z as Dx}from"https://app.gitbook.com/public/app/chunks/chunk-7KGC2ZJT.min.js";import{B as Tx,C as Ex,D as Q,E as Ax,F as b,G as _,H as g,I as C,J as Bx,K as jg,L as Yg,M as $g,O as Xe,P as Jg,Q as yo,R as mt,S as na,T as Lx,U as O,V as Dl,W as Nx,X as Vx,Y as Is,Z as xi,_ as T,aa as Ha,ba as N,ca as j,m as P,n as jN,o as H,q as FP,r as Vt,t as cg,u as HP,v as ar,w as fn,x as qr,y as WP}from"https://app.gitbook.com/public/app/chunks/chunk-BPG4IQYT.min.js";import{b as sr,c as CC}from"https://app.gitbook.com/public/app/chunks/chunk-FWGELWXO.min.js";import{a as dd,b as XI,c as QI}from"https://app.gitbook.com/public/app/chunks/chunk-VDOWUZDR.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-UMNW7V6U.min.js";import{c as Xr,e as QN}from"https://app.gitbook.com/public/app/chunks/chunk-NUWXFME6.min.js";import{$ as Cs,$a as kg,A as Ck,Aa as Rs,Ab as ta,B as bg,Ba as ei,Bb as Lk,C as Tt,Ca as ur,Cb as Mk,D as xl,Da as dr,Db as BC,E as $N,Ea as ti,Eb as ju,Fa as go,Fb as Yu,Ga as Jp,H as Sk,Hb as $u,I as jp,Ia as Ln,Ib as _k,J as yc,Ja as qp,Jb as Dg,Ka as Xp,La as bc,Ma as Cg,Na as Ba,Oa as Ku,Pa as Sg,Q as Yp,Qa as wg,R as wk,Ra as Rg,S as $p,Sa as Ps,T as JN,U as Rk,Ua as He,V as TC,Va as DC,W as cr,Wa as ks,X as Aa,Xa as Ik,Y as Pk,Ya as Qp,Z as Bn,Za as La,_ as vs,_a as Pg,aa as gn,ab as Tk,b as kC,ba as Zi,bb as AC,ca as kk,cb as Ct,d as ik,da as Ue,db as Gu,e as xC,ea as je,eb as xg,f as pg,fa as at,fb as io,g as fg,ga as po,ha as fo,hb as El,i as Wu,ia as $t,ib as Ek,j as wi,ja as mo,jb as Ok,k as ak,ka as Qo,kb as Dk,l as sk,la as be,lb as Ig,ma as Ss,mb as Tg,na as Jt,nb as xs,o as Da,oa as Bo,ob as Eg,p as bk,pa as EC,pb as Ak,q as gg,qa as xk,qb as Zo,ra as OC,rb as Og,s as zu,sa as Il,sb as ea,ta as vg,tb as ft,u as hg,ua as lr,ub as Ol,v as Yt,va as Lr,vb as Bk,w as Ao,wa as Zr,wb as De,xa as ws,xb as qN,y as vk,ya as Tl,yb as XN,z as ke,za as Mr,zb as te}from"https://app.gitbook.com/public/app/chunks/chunk-543EEAU2.min.js";import{a as We}from"https://app.gitbook.com/public/app/chunks/chunk-TFATNSDK.min.js";import{a as Kp}from"https://app.gitbook.com/public/app/chunks/chunk-644MUXOE.min.js";import{b as Ee,c as ge,d as le,e as YP,g as yg}from"https://app.gitbook.com/public/app/chunks/chunk-3RHANNA4.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-H5UJQ2KN.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-UJNORHEK.min.js";import{b as Ne,c as VP,d as v,f as c}from"https://app.gitbook.com/public/app/chunks/chunk-JSCW7V4P.min.js";var w0=Ne((are,S0)=>{c();var jV="Expected a function",v0=NaN,YV="[object Symbol]",$V=/^\s+|\s+$/g,JV=/^[-+]0x[0-9a-f]+$/i,qV=/^0b[01]+$/i,XV=/^0o[0-7]+$/i,QV=parseInt,ZV=typeof window=="object"&&window&&window.Object===Object&&window,e5=typeof self=="object"&&self&&self.Object===Object&&self,t5=ZV||e5||Function("return this")(),o5=Object.prototype,n5=o5.toString,r5=Math.max,i5=Math.min,uS=function(){return t5.Date.now()};function a5(t,o,e){var n,r,i,a,s,l,u=0,d=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(jV);o=C0(o)||0,dS(e)&&(d=!!e.leading,p="maxWait"in e,i=p?r5(C0(e.maxWait)||0,o):i,m="trailing"in e?!!e.trailing:m);function f(A){var I=n,L=r;return n=r=void 0,u=A,a=t.apply(L,I),a}function h(A){return u=A,s=setTimeout(w,o),d?f(A):a}function y(A){var I=A-l,L=A-u,B=o-I;return p?i5(B,i-L):B}function S(A){var I=A-l,L=A-u;return l===void 0||I>=o||I<0||p&&L>=i}function w(){var A=uS();if(S(A))return R(A);s=setTimeout(w,y(A))}function R(A){return s=void 0,m&&n?f(A):(n=r=void 0,a)}function k(){s!==void 0&&clearTimeout(s),u=0,n=l=r=s=void 0}function x(){return s===void 0?a:R(uS())}function E(){var A=uS(),I=S(A);if(n=arguments,r=this,l=A,I){if(s===void 0)return h(l);if(p)return s=setTimeout(w,o),f(l)}return s===void 0&&(s=setTimeout(w,o)),a}return E.cancel=k,E.flush=x,E}function dS(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function s5(t){return!!t&&typeof t=="object"}function c5(t){return typeof t=="symbol"||s5(t)&&n5.call(t)==YV}function C0(t){if(typeof t=="number")return t;if(c5(t))return v0;if(dS(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=dS(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=t.replace($V,"");var e=qV.test(t);return e||XV.test(t)?QV(t.slice(2),e?2:8):JV.test(t)?v0:+t}S0.exports=a5});var k0=Ne((cre,P0)=>{c();var R0=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};P0.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return R0()}try{return __global__||R0()}finally{delete Object.prototype.__global__}}()});var x0=Ne((ure,l5)=>{l5.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var T0=Ne((dre,I0)=>{c();I0.exports=x0().version});var D0=Ne((fre,O0)=>{c();var Hl;if(typeof globalThis=="object")Hl=globalThis;else try{Hl=k0()}catch{}finally{if(!Hl&&typeof window<"u"&&(Hl=window),!Hl)throw new Error("Could not determine global this")}var Pf=Hl.WebSocket||Hl.MozWebSocket,u5=T0();function E0(t,o){var e;return o?e=new Pf(t,o):e=new Pf(t),e}Pf&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(E0,t,{get:function(){return Pf[t]}})});O0.exports={w3cwebsocket:Pf?E0:null,version:u5}});var DE=Ne(wS=>{c();Object.defineProperty(wS,"__esModule",{value:!0});var z5=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},K5="src/index.js",G5=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),EE=P(),j5=$5(EE),Y5=H();function $5(t){return t&&t.__esModule?t:{default:t}}function J5(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function q5(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function TE(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function X5(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var OE=function(t){X5(o,t);function o(){var e,n,r,i;q5(this,o);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(n=(r=TE(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(s))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var p=r.props.locations[d],m="";return p&&(m=" "+p*100+"%"),u+m}).join(",")},n),TE(r,i)}return G5(o,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,s=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,p=n.style,m=n.children,f=J5(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return j5.default.createElement(Y5.View,z5({},f,{style:[p,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:K5,lineNumber:76}}),m)}}]),o}(EE.PureComponent);OE.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};wS.default=OE});var A1=Ne((rme,_F)=>{_F.exports="https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var B1=Ne((ime,NF)=>{NF.exports="https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var L1=Ne((ame,VF)=>{VF.exports="https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var M1=Ne((sme,FF)=>{FF.exports="https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var _1=Ne((cme,HF)=>{HF.exports="https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var N1=Ne((lme,WF)=>{WF.exports="https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var V1=Ne((ume,UF)=>{UF.exports="https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var F1=Ne((dme,zF)=>{zF.exports="https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var H1=Ne((pme,KF)=>{KF.exports="https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var W1=Ne((fme,GF)=>{GF.exports="https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var U1=Ne((mme,jF)=>{jF.exports="https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var z1=Ne((gme,YF)=>{YF.exports="https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var K1=Ne((hme,$F)=>{$F.exports="https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var G1=Ne((yme,JF)=>{JF.exports="https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var j1=Ne((bme,qF)=>{qF.exports="https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var Y1=Ne((vme,XF)=>{XF.exports="https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var $1=Ne((Cme,QF)=>{QF.exports="https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var cD=Ne((bbe,H8)=>{H8.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var dD=Ne((vbe,uD)=>{"use strict";c();var gw=cD();uD.exports=pa;pa.message=gw;pa.code=W8(gw);pa.codes=U8(gw);pa.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};pa.empty={204:!0,205:!0,304:!0};pa.retry={502:!0,503:!0,504:!0};function W8(t){var o={};return Object.keys(t).forEach(function(n){var r=t[n],i=Number(n);o[r.toLowerCase()]=i}),o}function U8(t){return Object.keys(t).map(function(e){return Number(e)})}function z8(t){var o=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(pa.code,o))throw new Error('invalid status message: "'+t+'"');return pa.code[o]}function lD(t){if(!Object.prototype.hasOwnProperty.call(pa.message,t))throw new Error("invalid status code: "+t);return pa.message[t]}function pa(t){if(typeof t=="number")return lD(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var o=parseInt(t,10);return isNaN(o)?z8(t):lD(o)}});var _D=Ne((Qy,MD)=>{c();(function(t,o){typeof define=="function"&&define.amd?define(o):typeof Qy=="object"&&typeof Qy.nodeName!="string"?MD.exports=o():t.RangeFix=o()})(Qy,function(){var t,o={};o.isBroken=function(){var r,i,a,s,l,u,d,p;return t===void 0&&(i=document.createElement("p"),a=document.createElement("span"),s=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),t={},i.appendChild(s),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(s,1),d.setEnd(a,0),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length>1,t.getClientRects||(d.setEnd(l,1),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length===2),t.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),t.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),p=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),t.ieZoom=!!p&&p<=10),t};function e(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,e):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,s=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;s<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,s,s+l)),s+=l;return a}return o.getClientRects=function(r){var i,a,s,l,u,d=this.isBroken();if(d.ieZoom)return e(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],s=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function p(m){for(var f=0;m=m.previousSibling;)f++;return f}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(s,u.getClientRects()),l=p(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,s),i},o.getBoundingClientRect=function(r){var i,a,s,l,u,d,p=this.getClientRects(r);if(p.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return e(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return p[0];for(i=0,a=p.length;i<a;i++)l=p[i],s?(s.left=Math.min(s.left,l.left),s.top=Math.min(s.top,l.top),s.right=Math.max(s.right,l.right),s.bottom=Math.max(s.bottom,l.bottom)):s={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},o})});var PB=Ne((fAe,W7)=>{W7.exports="https://app.gitbook.com/public/app/assets/default-page-cover.raw-ULGNP2PZ.svg"});var yM=Ne((YHe,hM)=>{"use strict";c();var TU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";hM.exports=TU});var SM=Ne((JHe,CM)=>{"use strict";c();var EU=yM();function bM(){}function vM(){}vM.resetWarningCache=bM;CM.exports=function(){function t(n,r,i,a,s,l){if(l!==EU){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function o(){return t}var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:vM,resetWarningCache:bM};return e.PropTypes=e,e}});var RM=Ne((ZHe,wM)=>{c();wM.exports=SM()();var XHe,QHe});var OM=Ne(hR=>{"use strict";c();Object.defineProperty(hR,"__esModule",{value:!0});var mR=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},OU=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),IM=P(),Mm=TM(IM),DU=RM(),jo=TM(DU);function TM(t){return t&&t.__esModule?t:{default:t}}function AU(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function BU(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function LU(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function MU(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var PM={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},_U=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],NU=function(o){return _U.forEach(function(e){return delete o[e]}),o},kM=function(o,e){e.style.fontSize=o.fontSize,e.style.fontFamily=o.fontFamily,e.style.fontWeight=o.fontWeight,e.style.fontStyle=o.fontStyle,e.style.letterSpacing=o.letterSpacing,e.style.textTransform=o.textTransform},EM=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,xM=function(){return EM?"_"+Math.random().toString(36).substr(2,12):void 0},gR=function(t){MU(o,t);function o(e){BU(this,o);var n=LU(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:e.minWidth,inputId:e.id||xM()},n}return OU(o,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||xM()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(kM(n,this.sizer),this.placeHolderSizer&&kM(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return EM&&n?Mm.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(s,l){return s??l}),r=mR({},this.props.style);r.display||(r.display="inline-block");var i=mR({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=AU(this.props,[]);return NU(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,Mm.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),Mm.default.createElement("input",mR({},a,{ref:this.inputRef})),Mm.default.createElement("div",{ref:this.sizerRef,style:PM},n),this.props.placeholder?Mm.default.createElement("div",{ref:this.placeHolderSizerRef,style:PM},this.props.placeholder):null)}}]),o}(IM.Component);gR.propTypes={className:jo.default.string,defaultValue:jo.default.any,extraWidth:jo.default.oneOfType([jo.default.number,jo.default.string]),id:jo.default.string,injectStyles:jo.default.bool,inputClassName:jo.default.string,inputRef:jo.default.func,inputStyle:jo.default.object,minWidth:jo.default.oneOfType([jo.default.number,jo.default.string]),onAutosize:jo.default.func,onChange:jo.default.func,placeholder:jo.default.string,placeholderIsMinWidth:jo.default.bool,style:jo.default.object,value:jo.default.any};gR.defaultProps={minWidth:1,injectStyles:!0};hR.default=gR});var j_=Ne(tP=>{"use strict";c();Object.defineProperty(tP,"__esModule",{value:!0});var Qz={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};tP.default={container:Qz}});var oP=Ne(kp=>{"use strict";c();Object.defineProperty(kp,"__esModule",{value:!0});kp.ImageZoomState=kp.ImageZoomProps=void 0;var Zz=function(){function t(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return t}();kp.ImageZoomProps=Zz;var eK=function(){function t(){this.centerX=.5,this.centerY=.5}return t}();kp.ImageZoomState=eK});var $_=Ne(xu=>{"use strict";c();var tK=xu&&xu.__extends||function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},t(o,e)};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$m=xu&&xu.__assign||function(){return $m=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},$m.apply(this,arguments)};Object.defineProperty(xu,"__esModule",{value:!0});var Kv=P(),eo=H(),oK=j_(),Y_=oP(),nK=function(t){tK(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new Y_.ImageZoomState,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new eo.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new eo.Animated.Value(0),e.scale=1,e.animatedScale=new eo.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.imagePanResponder=eo.PanResponder.create({onStartShouldSetPanResponder:e.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:e.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:e.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=r-e.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}e.longPressTimeout&&clearTimeout(e.longPressTimeout);var a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress({locationX:s,locationY:l,pageX:u,pageY:d})},e.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.doubleClickX=n.nativeEvent.changedTouches[0].pageX,e.doubleClickY=n.nativeEvent.changedTouches[0].pageY,e.props.onDoubleClick&&e.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:e.doubleClickX,pageY:e.doubleClickY}),clearTimeout(e.longPressTimeout),e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var p=e.scale;e.scale=2;var m=e.scale-p;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*m/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*m/e.scale}e.imageDidMove("centerOn"),eo.Animated.parallel([eo.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}),eo.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}),eo.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!e.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=r.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=r.dx,e.lastPositionY=r.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var s=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-s?(e.positionX=-s,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>s&&(e.positionX=s,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,p=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,p=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,p=n.nativeEvent.changedTouches[1].pageY);var m=u-l,f=p-d,h=Math.sqrt(m*m+f*f);if(e.zoomCurrentDistance=Number(h.toFixed(1)),e.zoomLastDistance!==null){var y=(e.zoomCurrentDistance-e.zoomLastDistance)/200,S=e.scale+y;S<(e.props.minScale||0)&&(S=e.props.minScale||0),S>(e.props.maxScale||0)&&(S=e.props.maxScale||0);var w=e.scale;e.scale=S,e.animatedScale.setValue(e.scale);var R=e.scale-w;e.positionX-=e.centerDiffX*R/e.scale,e.positionY-=e.centerDiffY*R/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:s,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(r.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,eo.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,eo.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,eo.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var n=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-n?e.positionY=-n:e.positionY>n&&(e.positionY=n),eo.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var r=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-r?e.positionX=-r:e.positionX>r&&(e.positionX=r),eo.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,eo.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start(),eo.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return o.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},o.prototype.componentDidUpdate=function(e){(this.props.centerOn&&!e.centerOn||this.props.centerOn&&e.centerOn&&this.didCenterOnChange(e.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},o.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},o.prototype.didCenterOnChange=function(e,n){return e.x!==n.x||e.y!==n.y||e.scale!==n.scale},o.prototype.centerOn=function(e){var n=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var r=e.duration||300;eo.Animated.parallel([eo.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),eo.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),eo.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},o.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},o.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},o.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=eo.StyleSheet.flatten(this.props.style);return Kv.createElement(eo.View,{style:$m($m($m({},oK.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},Kv.createElement(eo.Animated.View,{style:e,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},Kv.createElement(eo.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},o.defaultProps=new Y_.ImageZoomProps,o}(Kv.Component);xu.default=nK});var J_=Ne(gl=>{"use strict";c();var rK=gl&&gl.__createBinding||(Object.create?function(t,o,e,n){n===void 0&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return o[e]}})}:function(t,o,e,n){n===void 0&&(n=e),t[n]=o[e]}),iK=gl&&gl.__exportStar||function(t,o){for(var e in t)e!=="default"&&!o.hasOwnProperty(e)&&rK(o,t,e)};Object.defineProperty(gl,"__esModule",{value:!0});var aK=$_();gl.default=aK.default;iK(oP(),gl)});var nP=Ne(Gv=>{"use strict";c();Object.defineProperty(Gv,"__esModule",{value:!0});Gv.default=function(t,o,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:t,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:t,height:o,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:t,height:o,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:t,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:t,height:o},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Gv.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var aP=Ne(jv=>{"use strict";c();Object.defineProperty(jv,"__esModule",{value:!0});var rP=P(),iP=H(),q_=nP(),sK=function(){function t(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(o,e){return rP.createElement(iP.View,{style:q_.simpleStyle.count},rP.createElement(iP.Text,{style:q_.simpleStyle.countText},o+"/"+e))},this.renderImage=function(o){return rP.createElement(iP.Image,o)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return t}();jv.Props=sK;var cK=function(){function t(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return t}();jv.State=cK});var Z_=Ne(ic=>{"use strict";c();var lK=ic&&ic.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n])};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Iu=ic&&ic.__assign||Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},uK=ic&&ic.__rest||function(t,o){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)o.indexOf(n[r])<0&&(e[n[r]]=t[n[r]]);return e};Object.defineProperty(ic,"__esModule",{value:!0});var lt=P(),Te=H(),X_=J_(),Q_=nP(),sP=aP(),dK=function(t){lK(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new sP.State,e.fadeAnim=new Te.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new Te.Animated.Value(0),e.width=0,e.height=0,e.styles=Q_.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(n){e.imageRefs[n]&&e.imageRefs[n].reset()},e.preloadImage=function(n){n<e.state.imageSizes.length&&e.loadImage(n+1)},e.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),e.positionXNumber=e.standardPositionX+n,e.positionX.setValue(e.positionXNumber);var r=Te.I18nManager.isRTL?-n:n;r<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):r>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(n){n===void 0&&(n=0);var r=Te.I18nManager.isRTL?-n:n,i=Te.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=Te.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(r>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(r<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=Te.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,Te.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=Te.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,Te.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(n){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(n)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(n){n.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=n.nativeEvent.layout.width,e.height=n.nativeEvent.layout.height,e.styles=Q_.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(Te.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return o.prototype.componentDidMount=function(){this.init(this.props)},o.getDerivedStateFromProps=function(e,n){return e.index!==n.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},o.prototype.componentDidUpdate=function(e,n){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),Te.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},o.prototype.init=function(e){var n=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new sP.State);var r=[];e.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:r},function(){n.loadImage(e.index||0),n.jumpToCurrentImage(),Te.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!e.useNativeDriver}).start()})},o.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(Te.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},o.prototype.loadImage=function(e){var n=this;if(this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var r=this.props.imageUrls[e],i=Iu({},this.state.imageSizes[e]),a=function(){if(!(n.state.imageSizes[e]&&n.state.imageSizes[e].status!=="loading")){var u=n.state.imageSizes.slice();u[e]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var s=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&Te.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}Te.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=Te.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch{i.status="fail",a()}})}}},o.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,Te.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},o.prototype.getContent=function(){var e=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,s){if((e.state.currentShowIndex||0)>s+1||(e.state.currentShowIndex||0)<s-1)return lt.createElement(Te.View,{key:s,style:{width:n,height:r}});e.handleLongPressWithIndex.has(s)||e.handleLongPressWithIndex.set(s,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[s]&&e.state.imageSizes[s].width,u=e.state.imageSizes[s]&&e.state.imageSizes[s].height,d=e.state.imageSizes[s];if(!d||!d.status)return lt.createElement(Te.View,{key:s,style:{width:n,height:r}});if(l>n){var p=n/l;l*=p,u*=p}if(u>r){var m=r/u;l*=m,u*=m}var f=function(h){var y=h.children,S=uK(h,["children"]);return lt.createElement(X_.default,{cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(s),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval,...S},y)};switch(d.status){case"loading":return lt.createElement(f,{key:s,style:Iu({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:n,imageHeight:r},lt.createElement(Te.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=Iu({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=Iu({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),lt.createElement(X_.default,{key:s,ref:function(h){return e.imageRefs[s]=h},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(s),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return lt.createElement(f,{key:s,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:n,imageHeight:e.props.failImageSource?e.props.failImageSource.height:r},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return lt.createElement(Te.Animated.View,{style:{zIndex:9}},lt.createElement(Te.Animated.View,{style:Iu({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),lt.createElement(Te.View,{style:this.styles.arrowLeftContainer},lt.createElement(Te.TouchableWithoutFeedback,{onPress:this.goBack},lt.createElement(Te.View,null,this.props.renderArrowLeft()))),lt.createElement(Te.View,{style:this.styles.arrowRightContainer},lt.createElement(Te.TouchableWithoutFeedback,{onPress:this.goNext},lt.createElement(Te.View,null,this.props.renderArrowRight()))),lt.createElement(Te.Animated.View,{style:Iu({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&lt.createElement(Te.View,{style:this.styles.watchOrigin},lt.createElement(Te.TouchableOpacity,{style:this.styles.watchOriginTouchable},lt.createElement(Te.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),lt.createElement(Te.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},o.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?lt.createElement(Te.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):lt.createElement(Te.View,{style:this.styles.menuContainer},lt.createElement(Te.View,{style:this.styles.menuShadow}),lt.createElement(Te.View,{style:this.styles.menuContent},lt.createElement(Te.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},lt.createElement(Te.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),lt.createElement(Te.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},lt.createElement(Te.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},o.prototype.render=function(){var e=null;return e=lt.createElement(Te.View,null,this.getContent(),this.getMenu()),lt.createElement(Te.View,{onLayout:this.handleLayout,style:Iu({flex:1,overflow:"hidden"},this.props.style)},e)},o.defaultProps=new sP.Props,o}(lt.Component);ic.default=dK});var t3=Ne(Jm=>{"use strict";c();Object.defineProperty(Jm,"__esModule",{value:!0});var e3=Z_();Jm.ImageViewer=e3.default;var pK=aP();Jm.ImageViewerPropsDefine=pK.Props;Jm.default=e3.default});c();c();(function(){"use strict";var t="ListFormat"in Intl;function o(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function e(K,oe){for(var X=0;X<oe.length;X++){var ne=oe[X];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(K,ne.key,ne)}}function n(K,oe,X){return oe&&e(K.prototype,oe),X&&e(K,X),K}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function s(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(X){return typeof X}:s=function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},s(K)}function l(K){return typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?l=function(X){return s(X)}:l=function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":s(X)},l(K)}function u(K){if(K==null)throw new TypeError("Argument ".concat(K," cannot be converted to an Object"));return typeof K=="boolean"?new Boolean(K):typeof K=="number"?new Number(K):typeof K=="string"?new String(K):l(K)==="symbol"?new Object(K):K}var d;function p(K){d=K}function m(){return d}function f(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,y={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function S(K,oe,X){var ne=h.get(K);ne==null&&(ne=Object.create(null),h.set(K,ne)),ne[oe]=X}function w(K,oe){var X=h.get(K);if(X==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return X[oe]}function R(K,oe){var X=h.get(K);return X!=null&&oe in X}var k=/-u(?:-[0-9a-z]{2,8})+/gi;function x(K){return K.replace(k,"")}function E(K,oe){for(var X=oe;;){if(K.includes(X))return X;var ne=X.lastIndexOf("-");if(ne===-1)return;ne>=2&&X.charAt(ne-2)==="-"&&(ne-=2),X=X.slice(0,ne)}}function A(K,oe){var X=[],ne=!0,he=!1,_e=void 0;try{for(var tt=oe[Symbol.iterator](),Qe;!(ne=(Qe=tt.next()).done);ne=!0){var Ze=Qe.value,it=x(Ze),ut=E(K,it);ut!==void 0&&X.push(Ze)}}catch(uo){he=!0,_e=uo}finally{try{!ne&&tt.return!=null&&tt.return()}finally{if(he)throw _e}}return X}function I(K,oe){return A(K,oe)}function L(K){return typeof K=="string"||l(K)==="symbol"}function B(K,oe){if(l(K)!=="object")throw new TypeError("Given argument ".concat(K," must be of type Object"));if(!L(oe))throw new TypeError("Given argument ".concat(oe," must be a PropertyKey"));return K[oe]}function Y(K){return!!K}function $(K){return K+""}function G(K,oe,X,ne,he){var _e=B(K,oe);if(_e!==void 0){if(X!=="boolean"&&X!=="string")throw new TypeError("Expected type ".concat(X," to be 'boolean' or 'string"));if(X==="boolean"&&(_e=Y(_e)),X==="string"&&(_e=$(_e)),ne!==void 0&&!ne.includes(_e))throw new RangeError("Value ".concat(_e," out of range for options property ").concat(oe));return _e}else return he}function q(K,oe,X){var ne;return X!==void 0?(X=u(X),ne=G(X,"localeMatcher","string",a,"best fit")):ne="best fit",ne==="best fit"?I(K,oe):A(K,oe)}function J(K){var oe=K.availableLocales,X=K.requestedLocales,ne=Object.create(null),he=!0,_e=!1,tt=void 0;try{for(var Qe=X[Symbol.iterator](),Ze;!(he=(Ze=Qe.next()).done);he=!0){var it=Ze.value,ut=x(it),uo=E(oe,ut);if(uo!==void 0){if(ne.locale=uo,it!==ut){var Xo=it.match(k);ne.extension=Xo==null?"":Xo[0]}return ne}}}catch(Ji){_e=!0,tt=Ji}finally{try{!he&&Qe.return!=null&&Qe.return()}finally{if(_e)throw tt}}var An=f();return ne.locale=An,ne}function ie(K){return J(K)}function ye(K,oe,X,ne,he){var _e=X.localeMatcher,tt=_e==="lookup"?J({availableLocales:K,requestedLocales:oe}):ie({availableLocales:K,requestedLocales:oe}),Qe=tt.locale,Ze=Object.create(null);Ze.dataLocale=Qe;var it="-u";if(it.length>2){var ut=String.prototype.indexOf.call(Qe,"-x-");if(ut===-1)Qe="".concat(Qe).concat(it);else{var uo=Qe.slice(0,ut),Xo=Qe.slice(ut);Qe="".concat(uo).concat(it).concat(Xo)}Qe=Intl.getCanonicalLocales(Qe)[0]}return Ze.locale=Qe,Ze}function Pe(K){if(Array.isArray(K)){for(var oe=0,X=new Array(K.length);oe<K.length;oe++)X[oe]=K[oe];return X}}function Je(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function jt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Oo(K){return Pe(K)||Je(K)||jt()}function Or(K){if(K===void 0)return[];var oe=Oo(K);if(oe.some(function(X){return typeof X!="string"}))throw new TypeError("All List items must be strings");return oe}function On(K){return Object.prototype.toString.call(K)==="[object Object]"}function Dr(K){return Array.isArray(K)||On(K)}function ir(K,oe){for(var X=[],ne=String.prototype.indexOf.call(K,"{",0),he=0,_e=K.length;K[ne]!==void 0;){var tt=String.prototype.indexOf.call(K,"}",ne);if(tt<=ne)throw new TypeError("Expected endIndex: ".concat(tt," to be greater than beginIndex: ").concat(ne));if(ne>he){var Qe=K.slice(he,ne);X.push({type:"literal",value:Qe})}var Ze=K.slice(ne+1,tt);if(oe[Number(Ze)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(Ze));var it=oe[Number(Ze)];if(Dr(it.value)){var ut=!0,uo=!1,Xo=void 0;try{for(var An=it.value[Symbol.iterator](),Ji;!(ut=(Ji=An.next()).done);ut=!0){var Mu=Ji.value;X.push(Mu)}}catch(Ta){uo=!0,Xo=Ta}finally{try{!ut&&An.return!=null&&An.return()}finally{if(uo)throw Xo}}}else X.push(it);he=tt+1,ne=String.prototype.indexOf.call(K,"{",he)}if(he<_e){var _u=K.slice(he,_e);X.push({type:"literal",value:_u})}return X}function Do(K,oe){var X,ne=oe.length;if(ne===0)return[];if(ne===2){X=w(K,"templatePair");var he={type:"element",value:oe[0]},_e={type:"element",value:oe[1]},tt={0:he,1:_e};return ir(X,tt)}for(var Qe={type:"element",value:oe[ne-1]},Ze=[Qe],it=ne-2;it>=0;){it===0?X=w(K,"templateStart"):it<ne-2?X=w(K,"templateMiddle"):X=w(K,"templateEnd");var ut={type:"element",value:oe[it]},uo={type:"element",value:Ze},Xo={0:ut,1:uo};Ze=ir(X,Xo),it--}return Ze}function qo(K,oe){var X=Do(K,oe),ne="",he=!0,_e=!1,tt=void 0;try{for(var Qe=X[Symbol.iterator](),Ze;!(he=(Ze=Qe.next()).done);he=!0){var it=Ze.value;ne+=it.value}}catch(ut){_e=!0,tt=ut}finally{try{!he&&Qe.return!=null&&Qe.return()}finally{if(_e)throw tt}}return ne}function dc(K,oe){return Do(K,oe)}var Dn=function(){function K(){o(this,K);var oe=arguments[0],X=arguments[1];if((this instanceof K?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var ne=Intl.getCanonicalLocales(oe);X=X===void 0?Object.create(null):u(X);var he=Object.create(null),_e=G(X,"localeMatcher","string",a,"best fit");he.localeMatcher=_e;var tt=G(X,"type","string",r,"conjunction");S(this,"type",tt);var Qe=G(X,"style","string",i,"long");S(this,"style",Qe);var Ze=y.localeData,it=ye(y.availableLocales,ne,he),ut=it.dataLocale,uo=Ze[ut],Xo=uo.formats[tt],An=Xo[Qe];S(this,"templatePair",An.Pair),S(this,"templateStart",An.Start),S(this,"templateMiddle",An.Middle),S(this,"templateEnd",An.End),S(this,"locale",it.locale),S(this,"initializedListFormat",this)}return n(K,[{key:"format",value:function(X){var ne=this;if(!(ne instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!R(ne,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var he=Or(X);return qo(ne,he)}},{key:"formatToParts",value:function(X){var ne=this;if(!(ne instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!R(ne,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var he=Or(X);return dc(ne,he)}},{key:"resolvedOptions",value:function(){var X=this;if(!(X instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!R(X,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var ne=w(this,"locale"),he=w(this,"type"),_e=w(this,"style");return{locale:ne,type:he,style:_e}}}],[{key:"supportedLocalesOf",value:function(X){var ne=arguments[1],he=y.availableLocales,_e=Intl.getCanonicalLocales(X);return q(he,_e,ne)}},{key:"__addLocaleData",value:function(X){var ne=X.data,he=X.locale,_e=m();_e==null&&p(he),y.localeData[he]=ne,y.availableLocales.includes(he)||y.availableLocales.push(he)}}]),K}();Object.defineProperty(Dn.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function Ar(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=Dn}t||Ar()})();c();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});var LP=v(H());c();c();function iT(){return`https://${Oa.services.content.host}`}c();function aT(t,o){let e=[],n=0;for(;n<t.length;)e.push(t.slice(n,n+o)),n+=o;return e}function sT(t){let o=t.reduce((r,i)=>r+i.length,0),e=new Uint8Array(o),n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e}c();function cT(t){return{type:"link",id:Ma(),edits:{},...t}}c();var vf=100;var YC=200;function lT(t){return t.replace(/(\r\n|\r|\n)/g," ")}function xh(t){return lT(t).trim().slice(0,vf).trim()||"Untitled"}function uT(t){return lT(t).trim().slice(0,YC).trim()}function e4(t){return YP()(["docs","editorial","landing"]).includes(t)}function pd(t){return typeof t.cover?.yPos=="number"}function fd(t){return t?.layout?typeof t.layout=="string"&&e4(t.layout)?t.layout:"custom":"docs"}function md(t){let o=fd(t),e={docs:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!0,outline:!0,pagination:!0},editorial:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!0,pagination:!0},landing:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!1,pagination:!0}};switch(o){case"docs":return e.docs;case"editorial":return e.editorial;case"landing":return e.landing;case"custom":return typeof t?.layout=="object"?t.layout:e.docs;default:Ee(o)}}c();function dT(t,o){let{pageId:e,rename:n=!1}=o;return{...structuredClone(t),id:e,title:n?xh(`Copy of ${t.title}`):t.title,git:void 0,pages:t.type==="link"?void 0:[]}}c();var t4=We("hive:revisions:diff");function $C(t,o){let e=[];return o.forEach(n=>{let r=t[n];if(!r){t4.warning(`Couldn't find page ${n} although it is referenced. This may indicate a bad page tree normalization.`);return}e.push({renderKey:n,page:r,pages:r.type==="link"?[]:$C(t,r.pages)})}),e}c();function pT(t,o){return{edits:Jk([o]),...t,id:t.id||Ma()}}c();function fT(t,o,e,n){if(e.blobId)return new URL(`/content/${o}/blobs/${e.blobId}/${e.name}`,t).toString();if(e.downloadURL)return n?n(e.downloadURL):e.downloadURL;throw new Error("File does not have a download URL")}c();c();function Tc(t,o,e={}){let n;if(e.into){let r=V.getIn(t,["pages",e.into]);if(!r||!Ju(r))throw new Error(`Cannot insert page into ${e.into}`);n=V.get(r,"pages")}else n=V.getIn(t,["rootPages"]);if(!n)throw new Error(`Cannot insert page into ${e.into}`);e.at!==void 0?V.insert(n,e.at,[o.id]):V.push(n,[o.id]),V.setIn(t,["pages",o.id],pr(t)?Na(o):o)}function mT(t,o,e){let n=Mn(t,e),r=n?V.get(n,"pages"):V.get(t,"rootPages"),i=V.findIndex(r,s=>s===e);if(i<0)return{at:i};let a=n?V.get(n,"id"):void 0;return o==="after"?{into:a,at:i+1}:{into:a,at:i}}function gT(t,o,e){let n=mT(t,"before",e);if(!(n.at===void 0||n?.at<0))return Tc(t,o,n)}function Ih(t,o,e){let n=mT(t,"after",e);if(!(n.at===void 0||n?.at<0))return Tc(t,o,n)}c();function ca(t,o,e){let n=V.getIn(t,["pages",o]);if(n)if(typeof e=="function"){e(n);return}else Object.entries(e).forEach(([r,i])=>{V.set(n,r,pr(t)?Na(i):i)})}function hT(t,o,e){ca(t,o,n=>{if(!rf(n))return;let r=md(hn(n));V.set(n,"layout",{...r,...e})})}function yT(t,o,e){ca(t,o,{title:xh(e)})}function bT(t,o,e){ca(t,o,n=>{rf(n)&&V.set(n,"description",uT(e))})}function JC(t,o){let{originalPageId:e,parentPageId:n}=o,r=o.newPageId||Ma(),i=V.getIn(t,["pages",e]);if(!i)return;let a=dT(pr(i)?hn(i):i,{pageId:r,rename:!n});n?Tc(t,a,{into:n}):Ih(t,a,e);let s;if(Ju(i)){let l=V.get(i,"pages");s=V.map(l,u=>{let d=Ma();return JC(t,{originalPageId:u,parentPageId:a.id,newPageId:d}),d})}return ca(t,a.id,{pages:s}),r}c();c();c();function Ec(t,o){let e=tx(t,o),n=[];return e.forEach(r=>{n.push(r),V.get(r,"type")!=="link"&&n.push(...Ec(t,V.get(r,"id")))}),n}function vT(t,o,e){return V.getIn(t,["pages",e])?qu(t,e).some(i=>V.get(i,"id")===o):!1}function Cf(t,o,e={}){let n=V.getIn(t,["pages",o]);if(!n)return;let r=Mn(t,o);if(e.deleteEmptyGroupParent&&r&&V.get(r,"type")==="group"&&V.get(r,"pages").length===1)return Cf(t,V.get(r,"id"));let i=[V.get(n,"id")];V.get(n,"type")!=="link"&&Ec(t,o).forEach(u=>{i.push(V.get(u,"id"))}),[...V.entries(V.get(t,"pages"))].some(([,l])=>rf(l)&&!i.includes(V.get(l,"id")))&&(V.delArrayValue(r?V.get(r,"pages"):V.get(t,"rootPages"),o),i.forEach(l=>{V.del(V.get(t,"pages"),l);let u=V.get(t,"conflicts");u&&V.getIn(u,["pages",l])&&V.delIn(u,["pages",l])}))}function o4(t,o,e){if(o===e)return!1;let n=V.getIn(t,["pages",o]),r=V.getIn(t,["pages",e]);if(!n||!r||ex(r)||MC(n))return!1;let i=qu(t,e);return!(V.findIndex(i,a=>V.get(a,"id")===o)>=0)}function Th(t,o,e,n={}){let r=V.getIn(t,["pages",o]),i=e?V.getIn(t,["pages",e]):void 0;if(i&&!Ju(i))throw new Error("Cannot move page under a link");if(!r||e&&!o4(t,o,e))return;let a=V.get(t,"rootPages"),s=i?V.get(i,"pages"):a,l=typeof n.at=="number"?n.at:s.length,u=Mn(t,o),d=u?V.get(u,"pages"):a,p=V.findIndex(d,f=>f===o),m=u?V.get(u,"id")===e:!e;l===p&&m||(p>=0&&(V.delArrayIndex(d,p,1),m&&(l=p<=l?l-1:l)),V.insert(s,l,[o]),n.deleteEmptyGroupParent&&u&&MC(u)&&V.get(u,"pages").length===0&&Cf(t,V.get(u,"id")))}function CT(t,o,e){let n=Mn(t,e),r=n?V.get(n,"pages"):V.get(t,"rootPages"),i=V.findIndex(r,a=>a===e);return{at:o==="after"?i+1:i,parentId:n?V.get(n,"id"):void 0}}function ST(t,o,e){let{at:n,parentId:r}=CT(t,"before",e);n<0||Th(t,o,r,{at:n})}function wT(t,o,e){let{at:n,parentId:r}=CT(t,"after",e);n<0||Th(t,o,r,{at:n})}c();function RT(t,o){if(V.getIn(t,["files",o.id]))throw new Error("File with same ID already exists in revision");let n=V.get(t,"files");V.set(n,o.id,o)}function PT(t,o){V.delIn(t,["files",o])}function kT(t,o,e){let n=V.getIn(t,["files",o]);if(!n)throw new Error("File doesn't exist in revision");Object.entries(e).forEach(([r,i])=>{V.set(n,r,pr(t)?Na(i):i)})}c();var Oc=We("normalizeRevision");function IT(t){let o=V.get(t,"id"),e=V.get(t,"contentId"),n=V.get(t,"pages"),r=V.get(t,"rootPages"),i=V.get(t,"conflicts"),a=V.values(V.get(t,"parents")),s=new Set(V.keys(n)),l;if(a.length>3)throw new Error(`Revision ${e}/${o} has more than 3 parents`);if(a.includes(o)){let f=a.filter(h=>h!==o);if(f.length===0)throw new Error(`Revision ${e}/${o} has no more parents after removing itself as parent`);V.set(t,"parents",f),Oc.warning(`${e}/${o}: updated parents to remove itself as parent. New parents:`,f)}let u=V.get(t,"customFields");u?xT(u):V.set(t,"customFields",{});let d=f=>{let h=[];if(f.forEach(y=>{p(y)&&h.push(y)}),h.length!==f.length)return h},p=f=>{if(!s.has(f))return!1;s.delete(f);let h=V.get(n,f);if(!h)return!1;let y=V.get(h,"customFields");if(y&&xT(y),V.get(h,"type")==="link")return n4(e,o,f,h),!0;let S=h;l===void 0&&V.get(h,"type")==="document"&&(l=V.get(h,"id"));let w=d(V.get(S,"pages"));return w&&(V.set(S,"pages",w),Oc.warning(`${e}/${o}: updated children for page ${f}. New children pages:`,w)),!0},m=d(r);if(m&&(V.set(t,"rootPages",m),Oc.warning(`${e}/${o}: normalized rootPages. New root pages:`,m)),s.size>0){let f=Array.from(s);V.push(r,f),Oc.warning(`${e}/${o}: made pages with invalid parent into rootPages. Pages:`,f)}if(!l){let f=Xk();Tc(t,f),Oc.warning(`${e}/${o}: created empty page document ${f.id} as none were found. `)}if(i!==void 0){let f=V.get(i,"pages"),h=V.keys(f),y=h.reduce((S,w)=>{let R=V.get(n,w);return!R||V.get(R,"type")==="link"||V.get(R,"type")==="group"?S.add(w):S},new Set);y.size>0&&(y.size===h.length?(V.del(t,"conflicts"),Oc.warning(`${e}/${o}: normalized conflicts. All were invalid and have been removed.`)):(y.forEach(S=>{V.del(f,S)}),Oc.warning(`${e}/${o}: normalized conflicts. New conflicts:`,i)))}}function xT(t){for(let[o,e]of V.entries(t)){let n=V.get(e,"value");typeof n!="string"&&typeof n!="number"&&typeof n!="boolean"&&!Array.isArray(hn(n))&&V.del(t,o)}}function n4(t,o,e,n){let r=V.get(n,"target");(typeof r!="object"||typeof V.get(r,"kind")!="string")&&(Oc.warning(`${t}/${o}: normalized invalid link ${e}, with target ${JSON.stringify(hn(r))}`),V.set(n,"type","document"),V.set(n,"pages",[]),V.del(n,"target"))}c();function TT(t){return V.get(t,"conflicts")!==void 0}function r4(t,o,e){if(!TT(t))return;let n=V.getIn(t,["conflicts","pages"]);n&&V.has(n,o)&&V.set(n,o,e),i4(t)}function i4(t){if(!TT(t))return;let o=V.getIn(t,["conflicts","pages"]);if(o){for(let[,e]of V.entries(o))if(e!==!1)return;V.del(t,"conflicts")}}function ET(t,o){r4(t,o,!1)}c();function OT(t,o,e=void 0){ca(t,o,n=>{if(V.get(n,"type")!=="document")return;let i={ref:e,yPos:0};V.set(n,"cover",pr(t)?Na(i):i)})}function DT(t,o){ca(t,o,e=>{V.get(e,"type")==="document"&&V.del(e,"cover")})}function AT(t,o,e){ca(t,o,n=>{if(V.get(n,"type")!=="document")return;let i=V.get(n,"cover");i&&V.set(i,"yPos",e)})}c();function BT(t,o="Page",e=!1){let n=V.get(t,"pages"),i=V.values(n).map(l=>V.get(l,"title")),a=new Set(i);if(!e&&!a.has(o))return o;let s=l=>{let u=` ${l}`,d=`${o.slice(0,vf-u.length)}${u}`;return a.has(d)?s(l+1):d};return s(1)}c();function LT(t){V.get(t,"customFields")||V.set(t,"customFields",{})}function MT(t,o){LT(t),NT(t,o)}function _T(t,o,e){let n=V.getIn(t,["pages",o]);n&&(LT(n),NT(n,e))}function NT(t,o){Object.entries(o).forEach(([e,n])=>{V.getIn(t,["customFields",e])?V.setIn(t,["customFields",e,"value"],n.value):V.setIn(t,["customFields",e],pr(t)?Na(n):n)})}c();function VT(t,o){let e=V.get(t,"edits");V.set(t,"edits",of(e,Array.isArray(o)?o:[o]))}c();function FT(t,o,e){let n=V.getIn(t,["pages",o,"edits"]);if(!n)return;let r=(()=>Array.isArray(e)?of(n,e):typeof e=="string"?of(n,[e]):qk(n,e))();V.setIn(t,["pages",o,"edits"],r)}c();function Eh(t){return t.getMap("data")}c();var HT=Ri(t=>({id:t.get("id"),type:t.get("type"),contentId:t.get("contentId"),conflicts:hn(t.get("conflicts")),parents:t.get("parents").toArray(),mergedFrom:t.get("mergedFrom"),rolledBackBy:t.get("rolledBackBy"),git:hn(t.get("git")),rootPages:t.get("rootPages").toArray(),pages:a4(t.get("pages")),files:s4(t.get("files")),edits:hn(t.get("edits")),customFields:hn(t.get("customFields"))})),a4=Ri(t=>{let o={};return t.forEach((e,n)=>{o[n]=pr(e)?WT(e):hn(e)}),o}),s4=Ri(t=>{let o={};return t.forEach((e,n)=>{o[n]=pr(e)?WT(e):hn(e)}),o}),WT=Ri(t=>hn(t));c();var UT={insertPage:Tc,insertPageAfter:Ih,insertPageBefore:gT,removePage:Cf,updatePage:ca,updatePageLayout:hT,movePage:Th,movePageAfter:wT,movePageBefore:ST,addPageCover:OT,removePageCover:DT,movePageCover:AT,renamePage:yT,setPageDescription:bT,duplicatePage:JC,resolveConflict:ET,insertFile:RT,removeFile:PT,updateFile:kT,getPageParent:Mn,getUniquePageTitle:BT,updateRevisionCustomFields:MT,updatePageCustomFields:_T,markRevisionAsEdited:VT,markPageAsEdited:FT};function zT(t){let o={revision:t};for(let e in UT)o[e]=(...n)=>UT[e](t,...n);return o}c();var Ac={};VP(Ac,{AckMessage:()=>p4,BlockCompletion:()=>T4,BlockRichTextCompletion:()=>E4,BroadcastOperationMessage:()=>m4,BroadcastPresencesMessage:()=>f4,ContentOperation:()=>v4,ContentOperationStatus:()=>O4,DebugLog:()=>C4,DebugLogUpdate:()=>S4,DocumentCompletions:()=>qC,GenerateBlockCompletionReply:()=>R4,GenerateBlockCompletionRequest:()=>w4,GenerateDiagramReply:()=>I4,GenerateDiagramRequest:()=>x4,GenerateDiagramSuggestionsReply:()=>k4,GenerateDiagramSuggestionsRequest:()=>P4,InitMessage:()=>l4,Message:()=>Dc,Presence:()=>b4,PromptInitMessage:()=>c4,RPCError:()=>y4,RPCReplyMessage:()=>h4,RPCRequestMessage:()=>g4,StoredUpdate:()=>KT,UpdateFormatVersion:()=>ja,UpdateMessage:()=>u4,UpdatePresenceMessage:()=>d4,default:()=>M});c();var Ke=v(JN()),ee=Ke.Reader,Wt=Ke.Writer,D=Ke.util,M=Ke.roots.default||(Ke.roots.default={}),c4=M.PromptInitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.stateVector=D.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.stateVector),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.PromptInitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.stateVector=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("stateVector"))throw D.ProtocolError("missing required 'stateVector'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.stateVector&&typeof e.stateVector.length=="number"||D.isString(e.stateVector)))return"stateVector: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof M.PromptInitMessage)return e;let n=new M.PromptInitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.stateVector!=null&&(typeof e.stateVector=="string"?D.base64.decode(e.stateVector,n.stateVector=D.newBuffer(D.base64.length(e.stateVector)),0):e.stateVector.length>=0&&(n.stateVector=e.stateVector)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.stateVector="":(r.stateVector=[],n.bytes!==Array&&(r.stateVector=D.newBuffer(r.stateVector))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.stateVector!=null&&e.hasOwnProperty("stateVector")&&(r.stateVector=n.bytes===String?D.base64.encode(e.stateVector,0,e.stateVector.length):n.bytes===Array?Array.prototype.slice.call(e.stateVector):e.stateVector),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?M.UpdateFormatVersion[e.version]===void 0?e.version:M.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/PromptInitMessage"},t})(),l4=M.InitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=D.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.InitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof M.InitMessage)return e;let n=new M.InitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?M.UpdateFormatVersion[e.version]===void 0?e.version:M.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/InitMessage"},t})(),u4=M.UpdateMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=D.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.UpdateMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!D.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!D.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof M.UpdateMessage)return e;let n=new M.UpdateMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?M.UpdateFormatVersion[e.version]===void 0?e.version:M.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdateMessage"},t})(),KT=M.StoredUpdate=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.update=D.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(18).bytes(e.update),n.uint32(24).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.StoredUpdate;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 2:{i.update=e.bytes();break}case 3:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("version"))throw D.ProtocolError("missing required 'version'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!(e.update&&typeof e.update.length=="number"||D.isString(e.update)))return"update: buffer expected";switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof M.StoredUpdate)return e;let n=new M.StoredUpdate;switch(e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?M.UpdateFormatVersion[e.version]===void 0?e.version:M.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StoredUpdate"},t})(),d4=M.UpdatePresenceMessage=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.data=D.emptyObject,t.prototype.positions=D.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),n.uint32(8).int32(e.id),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(26).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.UpdatePresenceMessage,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.data[a]=s;break}case 3:{i.positions===D.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",s=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!D.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(e.positions!=null&&e.hasOwnProperty("positions")){if(!D.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||D.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof M.UpdatePresenceMessage)return e;let n=new M.UpdatePresenceMessage;if(e.id!=null&&(n.id=e.id|0),e.data){if(typeof e.data!="object")throw TypeError(".UpdatePresenceMessage.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.positions){if(typeof e.positions!="object")throw TypeError(".UpdatePresenceMessage.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?D.base64.decode(e.positions[r[i]],n.positions[r[i]]=D.newBuffer(D.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults&&(r.id=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?D.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdatePresenceMessage"},t})(),p4=M.AckMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.message=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),n.uint32(16).int32(e.message),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.AckMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.message=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("message"))throw D.ProtocolError("missing required 'message'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isInteger(e.id)?D.isInteger(e.message)?null:"message: integer expected":"id: integer expected"},t.fromObject=function(e){if(e instanceof M.AckMessage)return e;let n=new M.AckMessage;return e.id!=null&&(n.id=e.id|0),e.message!=null&&(n.message=e.message|0),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.message=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AckMessage"},t})(),f4=M.BroadcastPresencesMessage=(()=>{function t(o){if(this.presences={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.presences=D.emptyObject,t.prototype.selfClientId="",t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),n.uint32(8).int32(e.id),e.presences!=null&&Object.hasOwnProperty.call(e,"presences"))for(let r=Object.keys(e.presences),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]),M.Presence.encode(e.presences[r[i]],n.uint32(18).fork()).ldelim().ldelim();return n.uint32(26).string(e.selfClientId),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.BroadcastPresencesMessage,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.presences===D.emptyObject&&(i.presences={});let u=e.uint32()+e.pos;for(a="",s=null;e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=M.Presence.decode(e,e.uint32());break;default:e.skipType(d&7);break}}i.presences[a]=s;break}case 3:{i.selfClientId=e.string();break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("selfClientId"))throw D.ProtocolError("missing required 'selfClientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(e.presences!=null&&e.hasOwnProperty("presences")){if(!D.isObject(e.presences))return"presences: object expected";let n=Object.keys(e.presences);for(let r=0;r<n.length;++r){let i=M.Presence.verify(e.presences[n[r]]);if(i)return"presences."+i}}return D.isString(e.selfClientId)?null:"selfClientId: string expected"},t.fromObject=function(e){if(e instanceof M.BroadcastPresencesMessage)return e;let n=new M.BroadcastPresencesMessage;if(e.id!=null&&(n.id=e.id|0),e.presences){if(typeof e.presences!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences={};for(let r=Object.keys(e.presences),i=0;i<r.length;++i){if(typeof e.presences[r[i]]!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences[r[i]]=M.Presence.fromObject(e.presences[r[i]])}}return e.selfClientId!=null&&(n.selfClientId=String(e.selfClientId)),n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.presences={}),n.defaults&&(r.id=0,r.selfClientId=""),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.presences&&(i=Object.keys(e.presences)).length){r.presences={};for(let a=0;a<i.length;++a)r.presences[i[a]]=M.Presence.toObject(e.presences[i[a]],n)}return e.selfClientId!=null&&e.hasOwnProperty("selfClientId")&&(r.selfClientId=e.selfClientId),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastPresencesMessage"},t})(),m4=M.BroadcastOperationMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.operation=null,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),M.ContentOperation.encode(e.operation,n.uint32(18).fork()).ldelim(),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.BroadcastOperationMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.operation=M.ContentOperation.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("operation"))throw D.ProtocolError("missing required 'operation'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";{let n=M.ContentOperation.verify(e.operation);if(n)return"operation."+n}return null},t.fromObject=function(e){if(e instanceof M.BroadcastOperationMessage)return e;let n=new M.BroadcastOperationMessage;if(e.id!=null&&(n.id=e.id|0),e.operation!=null){if(typeof e.operation!="object")throw TypeError(".BroadcastOperationMessage.operation: object expected");n.operation=M.ContentOperation.fromObject(e.operation)}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.operation=null),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.operation!=null&&e.hasOwnProperty("operation")&&(r.operation=M.ContentOperation.toObject(e.operation,n)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastOperationMessage"},t})(),g4=M.RPCRequestMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.service="",t.prototype.method="",t.prototype.payload=D.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),n.uint32(18).string(e.service),n.uint32(26).string(e.method),n.uint32(34).bytes(e.payload),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.RPCRequestMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.service=e.string();break}case 3:{i.method=e.string();break}case 4:{i.payload=e.bytes();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("service"))throw D.ProtocolError("missing required 'service'",{instance:i});if(!i.hasOwnProperty("method"))throw D.ProtocolError("missing required 'method'",{instance:i});if(!i.hasOwnProperty("payload"))throw D.ProtocolError("missing required 'payload'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isInteger(e.id)?D.isString(e.service)?D.isString(e.method)?e.payload&&typeof e.payload.length=="number"||D.isString(e.payload)?null:"payload: buffer expected":"method: string expected":"service: string expected":"id: integer expected"},t.fromObject=function(e){if(e instanceof M.RPCRequestMessage)return e;let n=new M.RPCRequestMessage;return e.id!=null&&(n.id=e.id|0),e.service!=null&&(n.service=String(e.service)),e.method!=null&&(n.method=String(e.method)),e.payload!=null&&(typeof e.payload=="string"?D.base64.decode(e.payload,n.payload=D.newBuffer(D.base64.length(e.payload)),0):e.payload.length>=0&&(n.payload=e.payload)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.service="",r.method="",n.bytes===String?r.payload="":(r.payload=[],n.bytes!==Array&&(r.payload=D.newBuffer(r.payload)))),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.service!=null&&e.hasOwnProperty("service")&&(r.service=e.service),e.method!=null&&e.hasOwnProperty("method")&&(r.method=e.method),e.payload!=null&&e.hasOwnProperty("payload")&&(r.payload=n.bytes===String?D.base64.encode(e.payload,0,e.payload.length):n.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCRequestMessage"},t})(),h4=M.RPCReplyMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.replyTo=0,t.prototype.payload=D.newBuffer([]),t.prototype.error=null,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.id),n.uint32(16).int32(e.replyTo),e.payload!=null&&Object.hasOwnProperty.call(e,"payload")&&n.uint32(26).bytes(e.payload),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&M.RPCError.encode(e.error,n.uint32(34).fork()).ldelim(),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.RPCReplyMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.replyTo=e.int32();break}case 3:{i.payload=e.bytes();break}case 4:{i.error=M.RPCError.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("replyTo"))throw D.ProtocolError("missing required 'replyTo'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isInteger(e.id))return"id: integer expected";if(!D.isInteger(e.replyTo))return"replyTo: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")&&!(e.payload&&typeof e.payload.length=="number"||D.isString(e.payload)))return"payload: buffer expected";if(e.error!=null&&e.hasOwnProperty("error")){let n=M.RPCError.verify(e.error);if(n)return"error."+n}return null},t.fromObject=function(e){if(e instanceof M.RPCReplyMessage)return e;let n=new M.RPCReplyMessage;if(e.id!=null&&(n.id=e.id|0),e.replyTo!=null&&(n.replyTo=e.replyTo|0),e.payload!=null&&(typeof e.payload=="string"?D.base64.decode(e.payload,n.payload=D.newBuffer(D.base64.length(e.payload)),0):e.payload.length>=0&&(n.payload=e.payload)),e.error!=null){if(typeof e.error!="object")throw TypeError(".RPCReplyMessage.error: object expected");n.error=M.RPCError.fromObject(e.error)}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.replyTo=0,n.bytes===String?r.payload="":(r.payload=[],n.bytes!==Array&&(r.payload=D.newBuffer(r.payload))),r.error=null),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.replyTo!=null&&e.hasOwnProperty("replyTo")&&(r.replyTo=e.replyTo),e.payload!=null&&e.hasOwnProperty("payload")&&(r.payload=n.bytes===String?D.base64.encode(e.payload,0,e.payload.length):n.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),e.error!=null&&e.hasOwnProperty("error")&&(r.error=M.RPCError.toObject(e.error,n)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCReplyMessage"},t})(),y4=M.RPCError=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.code=0,t.prototype.message="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int32(e.code),n.uint32(18).string(e.message),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.RPCError;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.code=e.int32();break}case 2:{i.message=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("code"))throw D.ProtocolError("missing required 'code'",{instance:i});if(!i.hasOwnProperty("message"))throw D.ProtocolError("missing required 'message'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isInteger(e.code)?D.isString(e.message)?null:"message: string expected":"code: integer expected"},t.fromObject=function(e){if(e instanceof M.RPCError)return e;let n=new M.RPCError;return e.code!=null&&(n.code=e.code|0),e.message!=null&&(n.message=String(e.message)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.code=0,r.message=""),e.code!=null&&e.hasOwnProperty("code")&&(r.code=e.code),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/RPCError"},t})(),Dc=M.Message=(()=>{function t(e){if(e)for(let n=Object.keys(e),r=0;r<n.length;++r)e[n[r]]!=null&&(this[n[r]]=e[n[r]])}t.prototype.promptInit=null,t.prototype.init=null,t.prototype.update=null,t.prototype.updatePresence=null,t.prototype.broadcastPresences=null,t.prototype.broadcastOperation=null,t.prototype.ack=null,t.prototype.rpcRequest=null,t.prototype.rpcReply=null;let o;return Object.defineProperty(t.prototype,"message",{get:D.oneOfGetter(o=["promptInit","init","update","updatePresence","broadcastPresences","broadcastOperation","ack","rpcRequest","rpcReply"]),set:D.oneOfSetter(o)}),t.create=function(n){return new t(n)},t.encode=function(n,r){return r||(r=Wt.create()),n.promptInit!=null&&Object.hasOwnProperty.call(n,"promptInit")&&M.PromptInitMessage.encode(n.promptInit,r.uint32(10).fork()).ldelim(),n.init!=null&&Object.hasOwnProperty.call(n,"init")&&M.InitMessage.encode(n.init,r.uint32(18).fork()).ldelim(),n.update!=null&&Object.hasOwnProperty.call(n,"update")&&M.UpdateMessage.encode(n.update,r.uint32(26).fork()).ldelim(),n.updatePresence!=null&&Object.hasOwnProperty.call(n,"updatePresence")&&M.UpdatePresenceMessage.encode(n.updatePresence,r.uint32(34).fork()).ldelim(),n.broadcastPresences!=null&&Object.hasOwnProperty.call(n,"broadcastPresences")&&M.BroadcastPresencesMessage.encode(n.broadcastPresences,r.uint32(42).fork()).ldelim(),n.broadcastOperation!=null&&Object.hasOwnProperty.call(n,"broadcastOperation")&&M.BroadcastOperationMessage.encode(n.broadcastOperation,r.uint32(50).fork()).ldelim(),n.ack!=null&&Object.hasOwnProperty.call(n,"ack")&&M.AckMessage.encode(n.ack,r.uint32(58).fork()).ldelim(),n.rpcRequest!=null&&Object.hasOwnProperty.call(n,"rpcRequest")&&M.RPCRequestMessage.encode(n.rpcRequest,r.uint32(66).fork()).ldelim(),n.rpcReply!=null&&Object.hasOwnProperty.call(n,"rpcReply")&&M.RPCReplyMessage.encode(n.rpcReply,r.uint32(74).fork()).ldelim(),r},t.encodeDelimited=function(n,r){return this.encode(n,r).ldelim()},t.decode=function(n,r){n instanceof ee||(n=ee.create(n));let i=r===void 0?n.len:n.pos+r,a=new M.Message;for(;n.pos<i;){let s=n.uint32();switch(s>>>3){case 1:{a.promptInit=M.PromptInitMessage.decode(n,n.uint32());break}case 2:{a.init=M.InitMessage.decode(n,n.uint32());break}case 3:{a.update=M.UpdateMessage.decode(n,n.uint32());break}case 4:{a.updatePresence=M.UpdatePresenceMessage.decode(n,n.uint32());break}case 5:{a.broadcastPresences=M.BroadcastPresencesMessage.decode(n,n.uint32());break}case 6:{a.broadcastOperation=M.BroadcastOperationMessage.decode(n,n.uint32());break}case 7:{a.ack=M.AckMessage.decode(n,n.uint32());break}case 8:{a.rpcRequest=M.RPCRequestMessage.decode(n,n.uint32());break}case 9:{a.rpcReply=M.RPCReplyMessage.decode(n,n.uint32());break}default:n.skipType(s&7);break}}return a},t.decodeDelimited=function(n){return n instanceof ee||(n=new ee(n)),this.decode(n,n.uint32())},t.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let r={};if(n.promptInit!=null&&n.hasOwnProperty("promptInit")){r.message=1;{let i=M.PromptInitMessage.verify(n.promptInit);if(i)return"promptInit."+i}}if(n.init!=null&&n.hasOwnProperty("init")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.InitMessage.verify(n.init);if(i)return"init."+i}}if(n.update!=null&&n.hasOwnProperty("update")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.UpdateMessage.verify(n.update);if(i)return"update."+i}}if(n.updatePresence!=null&&n.hasOwnProperty("updatePresence")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.UpdatePresenceMessage.verify(n.updatePresence);if(i)return"updatePresence."+i}}if(n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.BroadcastPresencesMessage.verify(n.broadcastPresences);if(i)return"broadcastPresences."+i}}if(n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.BroadcastOperationMessage.verify(n.broadcastOperation);if(i)return"broadcastOperation."+i}}if(n.ack!=null&&n.hasOwnProperty("ack")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.AckMessage.verify(n.ack);if(i)return"ack."+i}}if(n.rpcRequest!=null&&n.hasOwnProperty("rpcRequest")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.RPCRequestMessage.verify(n.rpcRequest);if(i)return"rpcRequest."+i}}if(n.rpcReply!=null&&n.hasOwnProperty("rpcReply")){if(r.message===1)return"message: multiple values";r.message=1;{let i=M.RPCReplyMessage.verify(n.rpcReply);if(i)return"rpcReply."+i}}return null},t.fromObject=function(n){if(n instanceof M.Message)return n;let r=new M.Message;if(n.promptInit!=null){if(typeof n.promptInit!="object")throw TypeError(".Message.promptInit: object expected");r.promptInit=M.PromptInitMessage.fromObject(n.promptInit)}if(n.init!=null){if(typeof n.init!="object")throw TypeError(".Message.init: object expected");r.init=M.InitMessage.fromObject(n.init)}if(n.update!=null){if(typeof n.update!="object")throw TypeError(".Message.update: object expected");r.update=M.UpdateMessage.fromObject(n.update)}if(n.updatePresence!=null){if(typeof n.updatePresence!="object")throw TypeError(".Message.updatePresence: object expected");r.updatePresence=M.UpdatePresenceMessage.fromObject(n.updatePresence)}if(n.broadcastPresences!=null){if(typeof n.broadcastPresences!="object")throw TypeError(".Message.broadcastPresences: object expected");r.broadcastPresences=M.BroadcastPresencesMessage.fromObject(n.broadcastPresences)}if(n.broadcastOperation!=null){if(typeof n.broadcastOperation!="object")throw TypeError(".Message.broadcastOperation: object expected");r.broadcastOperation=M.BroadcastOperationMessage.fromObject(n.broadcastOperation)}if(n.ack!=null){if(typeof n.ack!="object")throw TypeError(".Message.ack: object expected");r.ack=M.AckMessage.fromObject(n.ack)}if(n.rpcRequest!=null){if(typeof n.rpcRequest!="object")throw TypeError(".Message.rpcRequest: object expected");r.rpcRequest=M.RPCRequestMessage.fromObject(n.rpcRequest)}if(n.rpcReply!=null){if(typeof n.rpcReply!="object")throw TypeError(".Message.rpcReply: object expected");r.rpcReply=M.RPCReplyMessage.fromObject(n.rpcReply)}return r},t.toObject=function(n,r){r||(r={});let i={};return n.promptInit!=null&&n.hasOwnProperty("promptInit")&&(i.promptInit=M.PromptInitMessage.toObject(n.promptInit,r),r.oneofs&&(i.message="promptInit")),n.init!=null&&n.hasOwnProperty("init")&&(i.init=M.InitMessage.toObject(n.init,r),r.oneofs&&(i.message="init")),n.update!=null&&n.hasOwnProperty("update")&&(i.update=M.UpdateMessage.toObject(n.update,r),r.oneofs&&(i.message="update")),n.updatePresence!=null&&n.hasOwnProperty("updatePresence")&&(i.updatePresence=M.UpdatePresenceMessage.toObject(n.updatePresence,r),r.oneofs&&(i.message="updatePresence")),n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")&&(i.broadcastPresences=M.BroadcastPresencesMessage.toObject(n.broadcastPresences,r),r.oneofs&&(i.message="broadcastPresences")),n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")&&(i.broadcastOperation=M.BroadcastOperationMessage.toObject(n.broadcastOperation,r),r.oneofs&&(i.message="broadcastOperation")),n.ack!=null&&n.hasOwnProperty("ack")&&(i.ack=M.AckMessage.toObject(n.ack,r),r.oneofs&&(i.message="ack")),n.rpcRequest!=null&&n.hasOwnProperty("rpcRequest")&&(i.rpcRequest=M.RPCRequestMessage.toObject(n.rpcRequest,r),r.oneofs&&(i.message="rpcRequest")),n.rpcReply!=null&&n.hasOwnProperty("rpcReply")&&(i.rpcReply=M.RPCReplyMessage.toObject(n.rpcReply,r),r.oneofs&&(i.message="rpcReply")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message"},t})(),b4=M.Presence=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.data=D.emptyObject,t.prototype.joinTimestamp=D.Long?D.Long.fromBits(0,0,!1):0,t.prototype.updateTimestamp=D.Long?D.Long.fromBits(0,0,!1):0,t.prototype.clientId="",t.prototype.positions=D.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(10).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(n.uint32(16).int64(e.joinTimestamp),n.uint32(24).int64(e.updateTimestamp),n.uint32(34).string(e.clientId),e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(42).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.Presence,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.data===D.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.data[a]=s;break}case 2:{i.joinTimestamp=e.int64();break}case 3:{i.updateTimestamp=e.int64();break}case 4:{i.clientId=e.string();break}case 5:{i.positions===D.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",s=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("joinTimestamp"))throw D.ProtocolError("missing required 'joinTimestamp'",{instance:i});if(!i.hasOwnProperty("updateTimestamp"))throw D.ProtocolError("missing required 'updateTimestamp'",{instance:i});if(!i.hasOwnProperty("clientId"))throw D.ProtocolError("missing required 'clientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!D.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!D.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(!D.isInteger(e.joinTimestamp)&&!(e.joinTimestamp&&D.isInteger(e.joinTimestamp.low)&&D.isInteger(e.joinTimestamp.high)))return"joinTimestamp: integer|Long expected";if(!D.isInteger(e.updateTimestamp)&&!(e.updateTimestamp&&D.isInteger(e.updateTimestamp.low)&&D.isInteger(e.updateTimestamp.high)))return"updateTimestamp: integer|Long expected";if(!D.isString(e.clientId))return"clientId: string expected";if(e.positions!=null&&e.hasOwnProperty("positions")){if(!D.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||D.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof M.Presence)return e;let n=new M.Presence;if(e.data){if(typeof e.data!="object")throw TypeError(".Presence.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.joinTimestamp!=null&&(D.Long?(n.joinTimestamp=D.Long.fromValue(e.joinTimestamp)).unsigned=!1:typeof e.joinTimestamp=="string"?n.joinTimestamp=parseInt(e.joinTimestamp,10):typeof e.joinTimestamp=="number"?n.joinTimestamp=e.joinTimestamp:typeof e.joinTimestamp=="object"&&(n.joinTimestamp=new D.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber())),e.updateTimestamp!=null&&(D.Long?(n.updateTimestamp=D.Long.fromValue(e.updateTimestamp)).unsigned=!1:typeof e.updateTimestamp=="string"?n.updateTimestamp=parseInt(e.updateTimestamp,10):typeof e.updateTimestamp=="number"?n.updateTimestamp=e.updateTimestamp:typeof e.updateTimestamp=="object"&&(n.updateTimestamp=new D.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber())),e.clientId!=null&&(n.clientId=String(e.clientId)),e.positions){if(typeof e.positions!="object")throw TypeError(".Presence.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?D.base64.decode(e.positions[r[i]],n.positions[r[i]]=D.newBuffer(D.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults){if(D.Long){let a=new D.Long(0,0,!1);r.joinTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.joinTimestamp=n.longs===String?"0":0;if(D.Long){let a=new D.Long(0,0,!1);r.updateTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updateTimestamp=n.longs===String?"0":0;r.clientId=""}let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.joinTimestamp!=null&&e.hasOwnProperty("joinTimestamp")&&(typeof e.joinTimestamp=="number"?r.joinTimestamp=n.longs===String?String(e.joinTimestamp):e.joinTimestamp:r.joinTimestamp=n.longs===String?D.Long.prototype.toString.call(e.joinTimestamp):n.longs===Number?new D.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber():e.joinTimestamp),e.updateTimestamp!=null&&e.hasOwnProperty("updateTimestamp")&&(typeof e.updateTimestamp=="number"?r.updateTimestamp=n.longs===String?String(e.updateTimestamp):e.updateTimestamp:r.updateTimestamp=n.longs===String?D.Long.prototype.toString.call(e.updateTimestamp):n.longs===Number?new D.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber():e.updateTimestamp),e.clientId!=null&&e.hasOwnProperty("clientId")&&(r.clientId=e.clientId),e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?D.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Presence"},t})(),v4=M.ContentOperation=(()=>{function t(o){if(this.payload={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id="",t.prototype.status=0,t.prototype.createdAt=D.Long?D.Long.fromBits(0,0,!1):0,t.prototype.updatedAt=D.Long?D.Long.fromBits(0,0,!1):0,t.prototype.updateId=0,t.prototype.expireAfter=0,t.prototype.cursor=0,t.prototype.target=0,t.prototype.payload=D.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),n.uint32(10).string(e.id),n.uint32(16).int32(e.status),n.uint32(24).int64(e.createdAt),n.uint32(32).int64(e.updatedAt),n.uint32(40).int32(e.updateId),n.uint32(48).int32(e.expireAfter),n.uint32(56).int32(e.cursor),n.uint32(64).int32(e.target),e.payload!=null&&Object.hasOwnProperty.call(e,"payload"))for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.uint32(74).fork().uint32(10).string(r[i]).uint32(18).string(e.payload[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.ContentOperation,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.string();break}case 2:{i.status=e.int32();break}case 3:{i.createdAt=e.int64();break}case 4:{i.updatedAt=e.int64();break}case 5:{i.updateId=e.int32();break}case 6:{i.expireAfter=e.int32();break}case 7:{i.cursor=e.int32();break}case 8:{i.target=e.int32();break}case 9:{i.payload===D.emptyObject&&(i.payload={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.payload[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw D.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("status"))throw D.ProtocolError("missing required 'status'",{instance:i});if(!i.hasOwnProperty("createdAt"))throw D.ProtocolError("missing required 'createdAt'",{instance:i});if(!i.hasOwnProperty("updatedAt"))throw D.ProtocolError("missing required 'updatedAt'",{instance:i});if(!i.hasOwnProperty("updateId"))throw D.ProtocolError("missing required 'updateId'",{instance:i});if(!i.hasOwnProperty("expireAfter"))throw D.ProtocolError("missing required 'expireAfter'",{instance:i});if(!i.hasOwnProperty("cursor"))throw D.ProtocolError("missing required 'cursor'",{instance:i});if(!i.hasOwnProperty("target"))throw D.ProtocolError("missing required 'target'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!D.isString(e.id))return"id: string expected";switch(e.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:break}if(!D.isInteger(e.createdAt)&&!(e.createdAt&&D.isInteger(e.createdAt.low)&&D.isInteger(e.createdAt.high)))return"createdAt: integer|Long expected";if(!D.isInteger(e.updatedAt)&&!(e.updatedAt&&D.isInteger(e.updatedAt.low)&&D.isInteger(e.updatedAt.high)))return"updatedAt: integer|Long expected";if(!D.isInteger(e.updateId))return"updateId: integer expected";if(!D.isInteger(e.expireAfter))return"expireAfter: integer expected";if(!D.isInteger(e.cursor))return"cursor: integer expected";if(!D.isInteger(e.target))return"target: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")){if(!D.isObject(e.payload))return"payload: object expected";let n=Object.keys(e.payload);for(let r=0;r<n.length;++r)if(!D.isString(e.payload[n[r]]))return"payload: string{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof M.ContentOperation)return e;let n=new M.ContentOperation;switch(e.id!=null&&(n.id=String(e.id)),e.status){default:if(typeof e.status=="number"){n.status=e.status;break}break;case"STARTING":case 0:n.status=0;break;case"RUNNING":case 1:n.status=1;break;case"SUCCESS":case 2:n.status=2;break;case"ERROR":case 3:n.status=3;break}if(e.createdAt!=null&&(D.Long?(n.createdAt=D.Long.fromValue(e.createdAt)).unsigned=!1:typeof e.createdAt=="string"?n.createdAt=parseInt(e.createdAt,10):typeof e.createdAt=="number"?n.createdAt=e.createdAt:typeof e.createdAt=="object"&&(n.createdAt=new D.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber())),e.updatedAt!=null&&(D.Long?(n.updatedAt=D.Long.fromValue(e.updatedAt)).unsigned=!1:typeof e.updatedAt=="string"?n.updatedAt=parseInt(e.updatedAt,10):typeof e.updatedAt=="number"?n.updatedAt=e.updatedAt:typeof e.updatedAt=="object"&&(n.updatedAt=new D.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber())),e.updateId!=null&&(n.updateId=e.updateId|0),e.expireAfter!=null&&(n.expireAfter=e.expireAfter|0),e.cursor!=null&&(n.cursor=e.cursor|0),e.target!=null&&(n.target=e.target|0),e.payload){if(typeof e.payload!="object")throw TypeError(".ContentOperation.payload: object expected");n.payload={};for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.payload[r[i]]=String(e.payload[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.payload={}),n.defaults){if(r.id="",r.status=n.enums===String?"STARTING":0,D.Long){let a=new D.Long(0,0,!1);r.createdAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.createdAt=n.longs===String?"0":0;if(D.Long){let a=new D.Long(0,0,!1);r.updatedAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updatedAt=n.longs===String?"0":0;r.updateId=0,r.expireAfter=0,r.cursor=0,r.target=0}e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.status!=null&&e.hasOwnProperty("status")&&(r.status=n.enums===String?M.ContentOperationStatus[e.status]===void 0?e.status:M.ContentOperationStatus[e.status]:e.status),e.createdAt!=null&&e.hasOwnProperty("createdAt")&&(typeof e.createdAt=="number"?r.createdAt=n.longs===String?String(e.createdAt):e.createdAt:r.createdAt=n.longs===String?D.Long.prototype.toString.call(e.createdAt):n.longs===Number?new D.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber():e.createdAt),e.updatedAt!=null&&e.hasOwnProperty("updatedAt")&&(typeof e.updatedAt=="number"?r.updatedAt=n.longs===String?String(e.updatedAt):e.updatedAt:r.updatedAt=n.longs===String?D.Long.prototype.toString.call(e.updatedAt):n.longs===Number?new D.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber():e.updatedAt),e.updateId!=null&&e.hasOwnProperty("updateId")&&(r.updateId=e.updateId),e.expireAfter!=null&&e.hasOwnProperty("expireAfter")&&(r.expireAfter=e.expireAfter),e.cursor!=null&&e.hasOwnProperty("cursor")&&(r.cursor=e.cursor),e.target!=null&&e.hasOwnProperty("target")&&(r.target=e.target);let i;if(e.payload&&(i=Object.keys(e.payload)).length){r.payload={};for(let a=0;a<i.length;++a)r.payload[i[a]]=e.payload[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/ContentOperation"},t})(),C4=M.DebugLog=(()=>{function t(o){if(this.updates=[],o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.updates=D.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),e.updates!=null&&e.updates.length)for(let r=0;r<e.updates.length;++r)M.DebugLogUpdate.encode(e.updates[r],n.uint32(10).fork()).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.DebugLog;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.updates&&i.updates.length||(i.updates=[]),i.updates.push(M.DebugLogUpdate.decode(e,e.uint32()));break}default:e.skipType(a&7);break}}return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.updates!=null&&e.hasOwnProperty("updates")){if(!Array.isArray(e.updates))return"updates: array expected";for(let n=0;n<e.updates.length;++n){let r=M.DebugLogUpdate.verify(e.updates[n]);if(r)return"updates."+r}}return null},t.fromObject=function(e){if(e instanceof M.DebugLog)return e;let n=new M.DebugLog;if(e.updates){if(!Array.isArray(e.updates))throw TypeError(".DebugLog.updates: array expected");n.updates=[];for(let r=0;r<e.updates.length;++r){if(typeof e.updates[r]!="object")throw TypeError(".DebugLog.updates: object expected");n.updates[r]=M.DebugLogUpdate.fromObject(e.updates[r])}}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.arrays||n.defaults)&&(r.updates=[]),e.updates&&e.updates.length){r.updates=[];for(let i=0;i<e.updates.length;++i)r.updates[i]=M.DebugLogUpdate.toObject(e.updates[i],n)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/DebugLog"},t})(),S4=M.DebugLogUpdate=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.timestamp=D.Long?D.Long.fromBits(0,0,!1):0,t.prototype.update=D.newBuffer([]),t.prototype.origin="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(8).int64(e.timestamp),n.uint32(18).bytes(e.update),n.uint32(26).string(e.origin),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.DebugLogUpdate;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.timestamp=e.int64();break}case 2:{i.update=e.bytes();break}case 3:{i.origin=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("timestamp"))throw D.ProtocolError("missing required 'timestamp'",{instance:i});if(!i.hasOwnProperty("update"))throw D.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("origin"))throw D.ProtocolError("missing required 'origin'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":!D.isInteger(e.timestamp)&&!(e.timestamp&&D.isInteger(e.timestamp.low)&&D.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":e.update&&typeof e.update.length=="number"||D.isString(e.update)?D.isString(e.origin)?null:"origin: string expected":"update: buffer expected"},t.fromObject=function(e){if(e instanceof M.DebugLogUpdate)return e;let n=new M.DebugLogUpdate;return e.timestamp!=null&&(D.Long?(n.timestamp=D.Long.fromValue(e.timestamp)).unsigned=!1:typeof e.timestamp=="string"?n.timestamp=parseInt(e.timestamp,10):typeof e.timestamp=="number"?n.timestamp=e.timestamp:typeof e.timestamp=="object"&&(n.timestamp=new D.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),e.update!=null&&(typeof e.update=="string"?D.base64.decode(e.update,n.update=D.newBuffer(D.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.origin!=null&&(n.origin=String(e.origin)),n},t.toObject=function(e,n){n||(n={});let r={};if(n.defaults){if(D.Long){let i=new D.Long(0,0,!1);r.timestamp=n.longs===String?i.toString():n.longs===Number?i.toNumber():i}else r.timestamp=n.longs===String?"0":0;n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=D.newBuffer(r.update))),r.origin=""}return e.timestamp!=null&&e.hasOwnProperty("timestamp")&&(typeof e.timestamp=="number"?r.timestamp=n.longs===String?String(e.timestamp):e.timestamp:r.timestamp=n.longs===String?D.Long.prototype.toString.call(e.timestamp):n.longs===Number?new D.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?D.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.origin!=null&&e.hasOwnProperty("origin")&&(r.origin=e.origin),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/DebugLogUpdate"},t})(),qC=M.DocumentCompletions=(()=>{function t(o,e,n){Ke.rpc.Service.call(this,o,e,n)}return(t.prototype=Object.create(Ke.rpc.Service.prototype)).constructor=t,t.create=function(e,n,r){return new this(e,n,r)},Object.defineProperty(t.prototype.generateBlockCompletion=function o(e,n){return this.rpcCall(o,M.GenerateBlockCompletionRequest,M.GenerateBlockCompletionReply,e,n)},"name",{value:"generateBlockCompletion"}),Object.defineProperty(t.prototype.generateDiagramSuggestions=function o(e,n){return this.rpcCall(o,M.GenerateDiagramSuggestionsRequest,M.GenerateDiagramSuggestionsReply,e,n)},"name",{value:"generateDiagramSuggestions"}),Object.defineProperty(t.prototype.generateDiagram=function o(e,n){return this.rpcCall(o,M.GenerateDiagramRequest,M.GenerateDiagramReply,e,n)},"name",{value:"generateDiagram"}),t})(),w4=M.GenerateBlockCompletionRequest=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.nodeKey="",t.prototype.prompt="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(10).string(e.nodeKey),e.prompt!=null&&Object.hasOwnProperty.call(e,"prompt")&&n.uint32(18).string(e.prompt),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateBlockCompletionRequest;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.nodeKey=e.string();break}case 2:{i.prompt=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("nodeKey"))throw D.ProtocolError("missing required 'nodeKey'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isString(e.nodeKey)?e.prompt!=null&&e.hasOwnProperty("prompt")&&!D.isString(e.prompt)?"prompt: string expected":null:"nodeKey: string expected"},t.fromObject=function(e){if(e instanceof M.GenerateBlockCompletionRequest)return e;let n=new M.GenerateBlockCompletionRequest;return e.nodeKey!=null&&(n.nodeKey=String(e.nodeKey)),e.prompt!=null&&(n.prompt=String(e.prompt)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.nodeKey="",r.prompt=""),e.nodeKey!=null&&e.hasOwnProperty("nodeKey")&&(r.nodeKey=e.nodeKey),e.prompt!=null&&e.hasOwnProperty("prompt")&&(r.prompt=e.prompt),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateBlockCompletionRequest"},t})(),R4=M.GenerateBlockCompletionReply=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.completion=null,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),e.completion!=null&&Object.hasOwnProperty.call(e,"completion")&&M.BlockCompletion.encode(e.completion,n.uint32(10).fork()).ldelim(),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateBlockCompletionReply;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.completion=M.BlockCompletion.decode(e,e.uint32());break}default:e.skipType(a&7);break}}return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.completion!=null&&e.hasOwnProperty("completion")){let n=M.BlockCompletion.verify(e.completion);if(n)return"completion."+n}return null},t.fromObject=function(e){if(e instanceof M.GenerateBlockCompletionReply)return e;let n=new M.GenerateBlockCompletionReply;if(e.completion!=null){if(typeof e.completion!="object")throw TypeError(".GenerateBlockCompletionReply.completion: object expected");n.completion=M.BlockCompletion.fromObject(e.completion)}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.completion=null),e.completion!=null&&e.hasOwnProperty("completion")&&(r.completion=M.BlockCompletion.toObject(e.completion,n)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateBlockCompletionReply"},t})(),P4=M.GenerateDiagramSuggestionsRequest=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.nodeKey="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(10).string(e.nodeKey),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateDiagramSuggestionsRequest;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.nodeKey=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("nodeKey"))throw D.ProtocolError("missing required 'nodeKey'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isString(e.nodeKey)?null:"nodeKey: string expected"},t.fromObject=function(e){if(e instanceof M.GenerateDiagramSuggestionsRequest)return e;let n=new M.GenerateDiagramSuggestionsRequest;return e.nodeKey!=null&&(n.nodeKey=String(e.nodeKey)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.nodeKey=""),e.nodeKey!=null&&e.hasOwnProperty("nodeKey")&&(r.nodeKey=e.nodeKey),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramSuggestionsRequest"},t})(),k4=M.GenerateDiagramSuggestionsReply=(()=>{function t(o){if(this.suggestions=[],o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.suggestions=D.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=Wt.create()),e.suggestions!=null&&e.suggestions.length)for(let r=0;r<e.suggestions.length;++r)n.uint32(10).string(e.suggestions[r]);return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateDiagramSuggestionsReply;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.suggestions&&i.suggestions.length||(i.suggestions=[]),i.suggestions.push(e.string());break}default:e.skipType(a&7);break}}return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.suggestions!=null&&e.hasOwnProperty("suggestions")){if(!Array.isArray(e.suggestions))return"suggestions: array expected";for(let n=0;n<e.suggestions.length;++n)if(!D.isString(e.suggestions[n]))return"suggestions: string[] expected"}return null},t.fromObject=function(e){if(e instanceof M.GenerateDiagramSuggestionsReply)return e;let n=new M.GenerateDiagramSuggestionsReply;if(e.suggestions){if(!Array.isArray(e.suggestions))throw TypeError(".GenerateDiagramSuggestionsReply.suggestions: array expected");n.suggestions=[];for(let r=0;r<e.suggestions.length;++r)n.suggestions[r]=String(e.suggestions[r])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.arrays||n.defaults)&&(r.suggestions=[]),e.suggestions&&e.suggestions.length){r.suggestions=[];for(let i=0;i<e.suggestions.length;++i)r.suggestions[i]=e.suggestions[i]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramSuggestionsReply"},t})(),x4=M.GenerateDiagramRequest=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.nodeKey="",t.prototype.prompt="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(10).string(e.nodeKey),n.uint32(18).string(e.prompt),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateDiagramRequest;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.nodeKey=e.string();break}case 2:{i.prompt=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("nodeKey"))throw D.ProtocolError("missing required 'nodeKey'",{instance:i});if(!i.hasOwnProperty("prompt"))throw D.ProtocolError("missing required 'prompt'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isString(e.nodeKey)?D.isString(e.prompt)?null:"prompt: string expected":"nodeKey: string expected"},t.fromObject=function(e){if(e instanceof M.GenerateDiagramRequest)return e;let n=new M.GenerateDiagramRequest;return e.nodeKey!=null&&(n.nodeKey=String(e.nodeKey)),e.prompt!=null&&(n.prompt=String(e.prompt)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.nodeKey="",r.prompt=""),e.nodeKey!=null&&e.hasOwnProperty("nodeKey")&&(r.nodeKey=e.nodeKey),e.prompt!=null&&e.hasOwnProperty("prompt")&&(r.prompt=e.prompt),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramRequest"},t})(),I4=M.GenerateDiagramReply=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.mermaid="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),e.mermaid!=null&&Object.hasOwnProperty.call(e,"mermaid")&&n.uint32(10).string(e.mermaid),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.GenerateDiagramReply;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.mermaid=e.string();break}default:e.skipType(a&7);break}}return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":e.mermaid!=null&&e.hasOwnProperty("mermaid")&&!D.isString(e.mermaid)?"mermaid: string expected":null},t.fromObject=function(e){if(e instanceof M.GenerateDiagramReply)return e;let n=new M.GenerateDiagramReply;return e.mermaid!=null&&(n.mermaid=String(e.mermaid)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.mermaid=""),e.mermaid!=null&&e.hasOwnProperty("mermaid")&&(r.mermaid=e.mermaid),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/GenerateDiagramReply"},t})(),T4=M.BlockCompletion=(()=>{function t(e){if(e)for(let n=Object.keys(e),r=0;r<n.length;++r)e[n[r]]!=null&&(this[n[r]]=e[n[r]])}t.prototype.richText=null;let o;return Object.defineProperty(t.prototype,"completion",{get:D.oneOfGetter(o=["richText"]),set:D.oneOfSetter(o)}),t.create=function(n){return new t(n)},t.encode=function(n,r){return r||(r=Wt.create()),n.richText!=null&&Object.hasOwnProperty.call(n,"richText")&&M.BlockRichTextCompletion.encode(n.richText,r.uint32(10).fork()).ldelim(),r},t.encodeDelimited=function(n,r){return this.encode(n,r).ldelim()},t.decode=function(n,r){n instanceof ee||(n=ee.create(n));let i=r===void 0?n.len:n.pos+r,a=new M.BlockCompletion;for(;n.pos<i;){let s=n.uint32();switch(s>>>3){case 1:{a.richText=M.BlockRichTextCompletion.decode(n,n.uint32());break}default:n.skipType(s&7);break}}return a},t.decodeDelimited=function(n){return n instanceof ee||(n=new ee(n)),this.decode(n,n.uint32())},t.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let r={};if(n.richText!=null&&n.hasOwnProperty("richText")){r.completion=1;{let i=M.BlockRichTextCompletion.verify(n.richText);if(i)return"richText."+i}}return null},t.fromObject=function(n){if(n instanceof M.BlockCompletion)return n;let r=new M.BlockCompletion;if(n.richText!=null){if(typeof n.richText!="object")throw TypeError(".BlockCompletion.richText: object expected");r.richText=M.BlockRichTextCompletion.fromObject(n.richText)}return r},t.toObject=function(n,r){r||(r={});let i={};return n.richText!=null&&n.hasOwnProperty("richText")&&(i.richText=M.BlockRichTextCompletion.toObject(n.richText,r),r.oneofs&&(i.completion="richText")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/BlockCompletion"},t})(),E4=M.BlockRichTextCompletion=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.summary="",t.prototype.markdown="",t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=Wt.create()),n.uint32(10).string(e.summary),n.uint32(18).string(e.markdown),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof ee||(e=ee.create(e));let r=n===void 0?e.len:e.pos+n,i=new M.BlockRichTextCompletion;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.summary=e.string();break}case 2:{i.markdown=e.string();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("summary"))throw D.ProtocolError("missing required 'summary'",{instance:i});if(!i.hasOwnProperty("markdown"))throw D.ProtocolError("missing required 'markdown'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof ee||(e=new ee(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":D.isString(e.summary)?D.isString(e.markdown)?null:"markdown: string expected":"summary: string expected"},t.fromObject=function(e){if(e instanceof M.BlockRichTextCompletion)return e;let n=new M.BlockRichTextCompletion;return e.summary!=null&&(n.summary=String(e.summary)),e.markdown!=null&&(n.markdown=String(e.markdown)),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.summary="",r.markdown=""),e.summary!=null&&e.hasOwnProperty("summary")&&(r.summary=e.summary),e.markdown!=null&&e.hasOwnProperty("markdown")&&(r.markdown=e.markdown),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ke.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BlockRichTextCompletion"},t})(),O4=M.ContentOperationStatus=(()=>{let t={},o=Object.create(t);return o[t[0]="STARTING"]=0,o[t[1]="RUNNING"]=1,o[t[2]="SUCCESS"]=2,o[t[3]="ERROR"]=3,o})(),ja=M.UpdateFormatVersion=(()=>{let t={},o=Object.create(t);return o[t[0]="UNSPECIFIED"]=0,o[t[1]="V1"]=1,o[t[2]="V2"]=2,o})();c();var D4=.9*1024*1024;function GT(t,o=0){let e=o;return{newMessageID:()=>(e+=1,e),write:n=>{if(n.init){let r=n.init;XC(r.update,(i,a,s)=>{t(Oh({init:{...r,index:a,count:s,update:i}}),r.id)})}else if(n.update){let r=n.update;XC(r.update,(i,a,s)=>{t(Oh({update:{...r,index:a,count:s,update:i}}),r.id)})}else if(n.promptInit){let r=n.promptInit;XC(r.stateVector,(i,a,s)=>{t(Oh({promptInit:{...r,index:a,count:s,stateVector:i}}),r.id)})}else t(Oh(n),n[Object.keys(n)[0]].id)}}}function Oh(t){let o=Dc.verify(t);if(o)throw new Error(`ProtoBufObject message is not valid: ${o}`);let e=Dc.create(t);return Dc.encode(e).finish()}function XC(t,o){aT(t,D4).forEach((n,r,i)=>{o(n,r,i.length)})}c();function jT(t){let o=new Map,e=(n,r)=>{if(!n.id||n.index===void 0||n.count===void 0)return r(n);let i=o.get(n.id)||[];if(i.push(n),o.set(n.id,i),i.length===n.count){let a=sT(i.sort((l,u)=>(l.index||0)-(u.index||0)).map(l=>"update"in l?l.update:l.stateVector)),s=r({...n,..."update"in n?{update:a}:{stateVector:a}});return o.delete(n.id),s}};return n=>A4(n,{promptInit:r=>e(r,i=>t.promptInit(i)),init:r=>e(r,i=>t.init(i)),update:r=>e(r,i=>t.update(i)),updatePresence:t.updatePresence,broadcastOperation:t.broadcastOperation,broadcastPresences:t.broadcastPresences,ack:t.ack,rpcReply:t.rpcReply,rpcRequest:t.rpcRequest})}function A4(t,o){let e=Dc.decode(t),n=Dc.toObject(e);if(n.promptInit)return o.promptInit(n.promptInit);if(n.init)return o.init(n.init);if(n.update)return o.update(n.update);if(n.updatePresence)return o.updatePresence(n.updatePresence);if(n.broadcastOperation)return o.broadcastOperation(n.broadcastOperation);if(n.broadcastPresences)return o.broadcastPresences(n.broadcastPresences);if(n.ack)return o.ack(n.ack);if(n.rpcRequest)return o.rpcRequest(n.rpcRequest);if(n.rpcReply)return o.rpcReply(n.rpcReply)}c();var B4={DocumentCompletions:qC},QC=We("hive:datasync:rpc");function YT(t,o,e={}){let{timeout:n=3e4}=e,r=new Map,i=new B4[t]((a,s,l)=>{let u=o.newMessageID(),d={id:u,service:t,method:a.name,payload:s},p=!1,m=setTimeout(()=>{QC.warning(`RPC request ${t}.${a.name} timed out (${n/1e3}s)`),f(new Error(`RPC request ${t}.${a.name} timed out`))},n),f=(h,y)=>{p||(p=!0,clearTimeout(m),r.delete(u),l(h,y))};r.set(u,f),QC.info(`sending RPC request ${t}.${a.name}: ${u}`),o.write({rpcRequest:d})},!1,!1);return{onReplyMessage:a=>{let s=r.get(a.replyTo);if(!s)return!1;if(QC.info(`received RPC reply for ${a.replyTo}`),a.error){let l=Xr.fromStatusCode(a.error.code,a.error.message);s(l)}else ge(a.payload),s(null,a.payload);return!0},service:i}}c();var m$=We("datasync:storage");function ZC(t,o,e,n){switch(o){case null:case void 0:case ja.UNSPECIFIED:case ja.V1:{let r=Array.isArray(e)?$k(e):e;Wk(t,r,n);break}case ja.V2:{let r=Array.isArray(e)?Mg(e):e;Bg(t,r,n);break}default:Ee(o)}}c();var JT=Ri(t=>{let o=t.getAttribute("data");return yc.create({key:t.getAttribute("key"),nodes:Dh(t),data:o?eS(o):void 0})}),Dh=Ri(t=>Da.create(t.toArray().map(o=>{if(o instanceof _r)return qT(o);if(o instanceof Et)return L4(o);throw new Error(`Unknown node type: ${o}`)}))),L4=Ri(t=>{let e=t.toDelta().map(n=>Ck.create({text:n.insert,marks:M4(n.attributes||{})}));return bg.create({key:t.getAttribute("key"),leaves:Da.create(e)})}),qT=Ri(t=>{let o=t.getAttribute("key");switch(t.nodeName){case"block":{let e=t,n=e.getAttribute("data"),r=e.getAttribute("fragments");return Tt.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?eS(n):void 0,nodes:Dh(t),fragments:r?$T(r):void 0})}case"inline":{let e=t,n=e.getAttribute("data"),r=e.getAttribute("fragments");return jp.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?eS(n):void 0,nodes:Dh(t),fragments:r?$T(r):void 0})}case"fragment":{let e=t;return Sk.create({key:o,type:e.getAttribute("type"),fragment:e.getAttribute("fragment"),nodes:Dh(t)})}default:throw new Error(`Unknown object type: ${t.nodeName}`)}}),$T=Ri(t=>bk.create(t.toArray().map(o=>{if(!(o instanceof _r))throw new Error(`Unknown node type: ${o}`);let e=qT(o);return[e.fragmentKey,e]})));function M4(t){return gg.create(Object.keys(t).map(o=>vk.create({type:o,data:t[o]})))}var eS=Ri(t=>zu.create(t.toJSON()));c();function Vl(t){let o=t.object;switch(o){case"block":return N4(t);case"inline":return V4(t);case"text":return H4(t);default:throw new Error(`Unknown node type: ${o}`)}}function _4(t){return t.toArray().map(o=>Vl(o))}function tS(t,o){t.delete(0,t.length),t.insert(0,_4(o))}function N4(t,o=new _r(t.object)){return o.setAttribute("key",t.key),t.isVoid?o.setAttribute("isVoid",t.isVoid):o.removeAttribute("isVoid"),o.setAttribute("type",t.type),Bh(o,t.data),tS(o,t.nodes),XT(o,t.fragments),o}function V4(t,o=new _r(t.object)){return o.setAttribute("key",t.key),t.isVoid?o.setAttribute("isVoid",t.isVoid):o.removeAttribute("isVoid"),o.setAttribute("type",t.type),Bh(o,t.data),tS(o,t.nodes),XT(o,t.fragments),o}function F4(t,o=new ef){return o.delete(0,o.length),t.forEach(e=>{o.push([oS(e)])}),o}function XT(t,o){if(o.size===0){t.removeAttribute("fragments");return}let e=t.getAttribute("fragments");e||(e=new ef,t.setAttribute("fragments",e)),F4(o,e)}function oS(t,o=new _r(t.object)){return o.setAttribute("key",t.key),t.type&&o.setAttribute("type",t.type),t.fragment&&o.setAttribute("fragment",t.fragment),tS(o,t.nodes),o}function H4(t,o=new Et){let e=0;return o.setAttribute("key",t.key),o.delete(0,o.length),t.leaves.forEach(n=>{o.insert(e,n.text,Ah(n.marks)),e+=n.text.length}),o}function Ah(t){if(t.size===0)return{};let o={};return t.forEach(e=>{o[e.type]=e.data.toObject()}),o}function Bh(t,o){if(o.size===0){t.removeAttribute("data");return}let e=t.getAttribute("data");e||(e=new _a,t.setAttribute("data",e)),W4(o,e)}function W4(t,o){return o.clear(),t.forEach((e,n)=>{o.set(n,gd(e))}),o}function gd(t){if(t==null||typeof t=="number"||typeof t=="string"||typeof t=="boolean")return t;if(Array.isArray(t)){let o=new Zp;return t.forEach(e=>{o.push([gd(e)])}),o}else{let o=new _a;return Object.keys(t).forEach(e=>{o.set(e,gd(t[e]))}),o}}c();c();function Hn(t,o){let e=t;for(let n=0;n<o.length;n++){let r=o[n];if(e instanceof Et)throw new Error("Invalid path, expected a node with descendants");if(r<e.length)e=e.get(r);else{let i=e.getAttribute("fragments");i&&(e=i.get(r-e.length))}if(!e)throw new Error("Invalid path, expected a node")}return e}function Fl(t,o){let e=o.slice(0,-1),n=Hn(t,e);if(n instanceof Et)throw new Error("Invalid path, expected a node with descendants");let r=o[o.length-1];return{parent:n,index:r}}function Sf(t,o){let e=t.getAttribute("data");e||(e=new _a,t.setAttribute("data",e));let n=e;for(let r=0;r<o.length;r++){let i=o[r],a=n,s=a.get(i);if(s===void 0){let[l,u]=U4(o.slice(r+1));return a.set(i,l),u}else{if(!(s instanceof _a))throw new Error(`Invalid data path (${o.slice(0,r+1).join(".")}), expected a map`);n=s}}return n}function U4(t){let o=new _a,e=o;for(let n=0;n<t.length;n++){let r=new _a;e.set(t[n],r),e=r}return[o,e]}function nS(t,o){t.operations.forEach(([e,n,r])=>{z4(o,e,n.document,r.document)})}function z4(t,o,e,n){switch(o.type){case"insert_text":K4(t,e,o);break;case"remove_text":G4(t,e,o);break;case"add_mark":j4(t,o);break;case"remove_mark":Y4(t,o);break;case"remove_node":$4(t,o);break;case"insert_node":J4(t,o);break;case"set_node":Z4(t,o);break;case"move_node":q4(t,e,n,o);break;case"split_node":X4(t,e,o);break;case"merge_node":Q4(t,e,o);break;case"insert_fragment":eV(t,o);break;case"remove_fragment":tV(t,o);break;case"set_data":oV(t,o);break;case"remove_data":nV(t,o);break;case"insert_array_data":rV(t,o);break;case"remove_array_data":iV(t,o);break;case"set_selection":break;default:throw new Error(`Unsupported operation type: ${o.type}`)}}function K4(t,o,e){let n=Hn(t,[...e.path]);if(!(n instanceof Et))throw new Error("Invalid operation path, expected a text node");n.insert(e.offset,e.text,Ah(e.marks))}function G4(t,o,e){let n=Hn(t,[...e.path]);if(!(n instanceof Et))throw new Error("Invalid operation path, expected a text node");n.delete(e.offset,e.text.length)}function j4(t,o){let e=Hn(t,[...o.path]);if(!(e instanceof Et))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,Ah(gg.create([o.mark])))}function Y4(t,o){let e=Hn(t,[...o.path]);if(!(e instanceof Et))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,{[o.mark.type]:null})}function $4(t,o){let{parent:e,index:n}=Fl(t,[...o.path]);e.delete(n)}function J4(t,o){let{parent:e,index:n}=Fl(t,[...o.path]);e.insert(n,[Vl(o.node)])}function q4(t,o,e,n){let{parent:r,index:i}=Fl(t,[...n.path]),{parent:a,index:s}=Fl(t,[...n.newPath]),l=e.assertPath(n.path),u=o.assertNode(l.key),d=Vl(u);r.delete(i),a.insert(s,[d])}function X4(t,o,e){let{parent:n,index:r}=Fl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for split_node");let a=i.nodes.get(r);if(!a)throw new Error("Node not found in parent nodes");let s=i.nodes.get(r+1);if(!s)throw new Error("New node not found in parent nodes");n.delete(r),n.insert(r,[Vl(a),Vl(s)])}function Q4(t,o,e){let{parent:n,index:r}=Fl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for merge_node");let a=i.nodes.get(r-1);if(!a)throw new Error("Merged node not found in parent nodes");n.delete(r-1,2),n.insert(r-1,[Vl(a)])}function Z4(t,o){let e=Hn(t,[...o.path]);if(typeof o.properties!="string"){if("key"in o.properties&&o.properties.key!==void 0&&e.setAttribute("key",o.properties.key),"type"in o.properties&&o.properties.type!==void 0&&e.setAttribute("type",o.properties.type),"isVoid"in o.properties&&o.properties.isVoid!==void 0){if(e instanceof Et)throw new Error("Should not set isVoid on a text");e.setAttribute("isVoid",o.properties.isVoid)}if("data"in o.properties&&o.properties.data!==void 0){if(e instanceof Et)throw new Error("Should not set data on a text");Bh(e,zu.create(o.properties.data))}}}function eV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1,i=oS(o.node),a=n.getAttribute("fragments");a||(a=new ef,n.setAttribute("fragments",a)),a.insert(r,[i])}function tV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1;n.getAttribute("fragments").delete(r)}function oV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Should not set data on a text");let n=gd(o.data),r=Sf(e,o.dataPath.slice(0,-1)),i=o.dataPath[o.dataPath.length-1];r.set(i,n)}function nV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Should not set data on a text");let n=Sf(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1];n.delete(r)}function rV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Should not set data on a text");let n=Sf(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof Zp))return;let a=gd(o.data);i.insert(o.dataIndex,[a])}function iV(t,o){let e=Hn(t,[...o.path]);if(e instanceof Et)throw new Error("Should not set data on a text");let n=Sf(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof Zp))return;let a;for(;a=i.toArray().findIndex(s=>s===o.data)!==-1;)i.delete(a)}c();function hd(t){return t.get("data",_r)}c();function e0(t,o,e){let n=hd(o);return xl.isBlockRange(e)?{anchor:e.anchorBlock?ZT(n,t,e.anchorBlock):void 0,focus:e.focusBlock?ZT(n,t,e.focusBlock):void 0}:{anchor:e.anchorKey?QT(n,t,e.anchorKey,e.anchorOffset):void 0,focus:e.focusKey?QT(n,t,e.focusKey,e.focusOffset):void 0}}function t0(t,o){if(!(!o.anchor||!o.focus)){if(o.anchor.type instanceof Et){if(!(o.focus.type instanceof Et))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key");return ke.create({anchorKey:e,anchorOffset:o.anchor.index,focusKey:n,focusOffset:o.focus.index}).normalize(t)}if(o.anchor.type instanceof _r){if(!(o.focus.type instanceof _r))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key"),r=t.getDescendant(e),i=t.getDescendant(n);if(!r||!i||!r.isBlock()||!i.isBlock())return;let a=r.nodes.get(o.anchor.index),s=i.nodes.get(o.focus.index);return!a||!s?void 0:xl.create({anchorBlock:a.key,focusBlock:s?.key}).normalize(t)}}}function QT(t,o,e,n){let r=o.getPath(e);return r?{type:Hn(t,r),index:n,assoc:0}:void 0}function ZT(t,o,e){let n=o.getPath(e);return n?{type:Hn(t,n.slice(0,-1)),index:n[n.length-1],assoc:0}:void 0}c();var aV=We("hive-core:normalizeYDocument");function o0(t){let o=new Set,e=new Set;return n0(t,o,e),e.size>0&&aV.warning(`Found ${e.size} duplicated keys in Y document. This is a bug in Hive.`),e.size}function n0(t,o,e){r0(t,o,e);let n=t.getAttribute("fragments");n&&sV(n,o,e)}function sV(t,o,e){r0(t,o,e)}function r0(t,o,e){let n=0;t.forEach((r,i)=>{let a=r.getAttribute("key");if(o.has(a)){e.add(a),Fk(t),t.delete(i-n),n++;return}o.add(a),!(r instanceof Et)&&n0(r,o,e)})}c();var i0=v(QN());function rS(t,o){iS(t.nodes,o)}function iS(t,o){if(t.size!==o.length)throw new mr(`Nodes size mismatch: ${t.size} !== ${o.length}`);t.forEach((e,n)=>{let r=o.get(n);e.object==="inline"?lV(e,r):e.object==="block"?cV(e,r):uV(e,r)})}function cV(t,o){if(t.key!==o.getAttribute("key"))throw new mr(`Block key mismatch: ${t.key} !== ${o.getAttribute("key")}`);if(t.type!==o.getAttribute("type"))throw new mr(`Block type mismatch: ${t.type} !== ${o.getAttribute("type")}`);a0(t.data,o.getAttribute("data")),iS(t.nodes,o)}function lV(t,o){if(t.key!==o.getAttribute("key"))throw new mr(`Inline key mismatch: ${t.key} !== ${o.getAttribute("key")}`);if(t.type!==o.getAttribute("type"))throw new mr(`Inline type mismatch: ${t.type} !== ${o.getAttribute("type")}`);if(t.nodes.size!==o.length)throw new mr(`Inline nodes size mismatch: ${t.nodes.size} !== ${o.length}`);a0(t.data,o.getAttribute("data")),iS(t.nodes,o)}function uV(t,o){if(t.key!==o.getAttribute("key"))throw new mr(`Text key mismatch: ${t.key} !== ${o.getAttribute("key")}`)}function a0(t,o){if(!(t.size===0&&o===void 0)){if(!o)throw new mr(`Data mismatch: Slate data size is ${t.size} but yData is undefined`);if(t.size!==o.size)throw new mr(`Data size mismatch ${t.size} !== ${o.size}`);t.forEach((e,n)=>{let r=hn(o.get(n));if(!(0,i0.default)(e,r))throw new mr(`Data value ${n} mismatch`,JSON.stringify(e),JSON.stringify(r))})}}var mr=class extends Error{constructor(e,n,r){super(`YDocumentCheckFail: ${e}`);this.slateValue=n,this.yValue=r}};c();c();c();c();c();c();c();var bn=crypto;var As=new TextEncoder,ii=new TextDecoder,EJ=2**32;var s0=t=>{let o=atob(t),e=new Uint8Array(o.length);for(let n=0;n<o.length;n++)e[n]=o.charCodeAt(n);return e},Bc=t=>{let o=t;o instanceof Uint8Array&&(o=ii.decode(o)),o=o.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return s0(o)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};c();c();c();var Lh=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(o){var e;super(o),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(e=Error.captureStackTrace)===null||e===void 0||e.call(Error,this,this.constructor)}};var Vr=class extends Lh{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};c();c();var Mh=bn.getRandomValues.bind(bn);c();c();c();c();c();c();c();c();function yV(t){return typeof t=="object"&&t!==null}function gr(t){if(!yV(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let o=t;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(t)===o}c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();var DV=Symbol();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();var cS=Bc;c();function lS(t){if(typeof t!="string")throw new Vr("JWTs must use Compact JWS serialization, JWT must be a string");let{1:o,length:e}=t.split(".");if(e===5)throw new Vr("Only JWTs using Compact JWS serialization can be decoded");if(e!==3)throw new Vr("Invalid JWT");if(!o)throw new Vr("JWTs must contain a payload");let n;try{n=cS(o)}catch{throw new Vr("Failed to parse the base64url encoded payload")}let r;try{r=JSON.parse(ii.decode(n))}catch{throw new Vr("Failed to parse the decoded payload as JSON")}if(!gr(r))throw new Vr("Invalid JWT Claims Set");return r}c();c();c();c();function b0(t){let o=lS(t);return{expiration:o.exp?o.exp*1e3:Date.now()+6*60*60*1e3,payload:{userId:o.userId,content:o.content}}}c();var Yh=v(P());c();var L0=v(Kp(),1),M0=v(w0(),1);c();var A0=v(Kp(),1),B0=v(D0(),1);var _s=We("hive:socket");var Vh=class{constructor(o){this.state="closed";this.destroyed=!1;this.openBackoffDelay=1e3;this.pendingMessages=[];this.events=new A0.EventEmitter;this.getSocketURL=o}async open(){if(this.assertNotDestroyed(),this.webSocket)throw new Error("WebSocket already opened");this.clearScheduledReconnection();let o=await this.getSocketURL();return this.setState("connecting"),new Promise((e,n)=>{_s.info("Opening WebSocket:",o);let r=new B0.default.w3cwebsocket(o);this.webSocket=r;try{r.binaryType="arraybuffer"}catch{}r.onopen=()=>{if(this.destroyed){r.close();return}_s.warning("WebSocket opened"),this.setState("open"),this.sendPendingMessages(),e()},r.onclose=i=>{if(this.destroyed)return;let a=this.state;if(this.close("closed"),a==="connecting"){_s.error("Websocket closed before initial connection",i),n(new Error("Websocket closed before initial connection"));return}a==="open"&&(_s.warning("WebSocket unexpectedly closed, reconnecting:",i.code,i.reason),this.scheduleReconnection())},r.onerror=i=>{if(this.destroyed)return;let a=this.state;if(this.close("errored"),a==="connecting"){_s.error("Websocket error with initial connection",i);let s=new Error("Websocket errored before being opened");Vu(s,{attachments:[{name:"operations.json",type:"application/json",body:JSON.stringify(i)}]})}_s.error("WebSocket error, reconnecting:",i),this.scheduleReconnection()},r.onmessage=i=>{if(this.destroyed){r.close();return}let a=i.data;a instanceof ArrayBuffer&&this.events.emit("message",new Uint8Array(a))}})}close(o="closed"){this.assertNotDestroyed(),this.setState(o),this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0),this.webSocket&&(_s.info("Closing WebSocket"),this.webSocket.close(),this.webSocket=void 0)}destroy(){this.close(),this.events.removeAllListeners(),this.destroyed=!0}scheduleReconnection(){this.openBackoffTimer||(this.webSocket&&this.close(),_s.info("Scheduling reconnection in",this.openBackoffDelay,"ms"),this.openBackoffTimer=setTimeout(()=>{this.open(),this.openBackoffDelay=Math.min(this.openBackoffDelay*2,3e4)},this.openBackoffDelay))}async forceScheduledReconnection(){if(!this.openBackoffTimer)throw new Error("No scheduled reconnection");await this.open()}clearScheduledReconnection(){this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0)}listen(o,e){return this.assertNotDestroyed(),this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}send(o){if(this.assertNotDestroyed(),this.state!=="open"||!this.webSocket){this.pendingMessages.push(o);return}this.webSocket.send(o)}sendPendingMessages(){let o=this.webSocket;this.state!=="open"||!o||(this.pendingMessages.forEach(e=>o.send(e)),this.pendingMessages=[])}setState(o){this.state!==o&&(_s.info("socket changing state from",this.state,"to",o),this.state=o,this.events.emit("state",o))}assertNotDestroyed(){if(this.destroyed)throw new Error("socket is destroyed")}};var Cn=We("hive:datasync");var bd=class{constructor(o,e,n={}){this.state="closed";this.operation=null;this.clientId=null;this.socket=null;this.encoder=null;this.currentPresence=null;this.beforeTransactionPresence=null;this.pendingMessages=new Set;this.pendingMessagesResolves=[];this.destroyed=!1;this.events=new L0.EventEmitter;this.batchUpdates=[];this.rpcReplyHandlers=new Map;this.updateLog=[];let{YType:r=_a,readOnly:i=!1}=n;if(typeof globalThis.window>"u")throw new Error("HiveDataSyncClient can only be used in the browser, or in node process when running tests");this.client=o,this.doc=new Hk({guid:e}),this.presences=[],this.YType=r,this.#e=i;let a=this.doc.get("data",r);this.undoManager=new Yk(a,{trackedOrigins:new Set(["local"])}),this.undoManager.on("stack-item-added",s=>{s.stackItem.meta.set("positionsBefore",this.beforeTransactionPresence?.positions),s.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-updated",s=>{s.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-popped",s=>{let l=s.type==="undo"?this.undoManager.redoStack:this.undoManager.undoStack,u=l[l.length-1];u&&(u.meta.set("positions",s.stackItem.meta.get("positionsBefore")),u.meta.set("positionsBefore",s.stackItem.meta.get("positions")));let d=s.stackItem.meta.get("positionsBefore");d&&this.events.emit("restorePositions",d)}),this.doc.on("updateV2",(s,l)=>{this.pushUpdateToLog(s,l),l!=="remote"&&(this.dangerouslyPaused?this.dangerouslyPaused.push(s):this.batchUpdate(s)),Cn.info("call update listeners"),this.events.emit("update",l)}),this.doc.on("sync",()=>{this.doc.isSynced&&Cn.info(`doc "${this.doc.guid}" is synced`),this.updateState()})}#e;updateState(){let o="closed";if(this.socket)switch(this.socket.state){case"connecting":o="connecting";break;case"open":this.doc.isSynced?o="open":o="connecting";break;case"errored":o="errored";break}o!==this.state&&(this.state=o,this.events.emit("state",o))}get presence(){return this.currentPresence||null}get readOnly(){return this.#e??!1}setReadOnly(o){this.readOnly&&!o?this.sendPromptInit():!this.readOnly&&o&&this.flushBatchUpdates(),this.#e=o}get clock(){let o=this.doc.get("data",this.YType);return Vk(o)}open(o,e,n,r={}){if(this.assertNotDestroyed(),this.socket)switch(this.socket.state){case"open":case"connecting":return this.doc.isLoaded?void 0:this.doc.whenLoaded;case"errored":return Promise.reject(new Error("Connection failed to establish with the server"));case"closed":{let u=this.socket;this.socket=null,u.destroy();break}default:Ee(this.socket.state)}Cn.info("opening datasync socket",e,n,r);let i=this.client.getSocket(o,e,n,r);this.socket=i;let a=jT({promptInit:u=>{this.sendInit(u.stateVector)},init:({update:u,version:d})=>{ZC(this.doc,d,u,"remote"),this.doc.emit("sync",[!0])},update:({update:u,version:d})=>{ZC(this.doc,d,u,"remote")},updatePresence:()=>{},broadcastOperation:u=>{this.operation={...u.operation,payload:u.operation.payload||{},createdAt:Number(u.operation.createdAt),updatedAt:Number(u.operation.updatedAt)},this.events.emit("operation",this.operation)},broadcastPresences:u=>{Cn.info("received broadcast presences message");let d=this.clientId;this.clientId=u.selfClientId,d!==u.selfClientId&&(Cn.info("client id changed to",u.selfClientId),this.events.emit("clientId",u.selfClientId)),this.presences=Object.values(u.presences||{}).map(p=>({clientId:p.clientId,joinTimestamp:Number(p.joinTimestamp),updateTimestamp:Number(p.updateTimestamp),data:p.data||{},positions:Object.fromEntries(Object.entries(p.positions||{}).map(([m,f])=>[m,Gk(f)]))})).sort((p,m)=>p.joinTimestamp-m.joinTimestamp),this.events.emit("presences")},ack:u=>{this.ackMessage(u.message)},rpcRequest:u=>{},rpcReply:u=>{for(let d of this.rpcReplyHandlers.values())if(d(u))return}});this.encoder=GT((u,d)=>{this.pendingMessages.add(d),i.send(u)}),i.listen("state",u=>{this.updateState(),u==="open"?(this.sendPromptInit(),this.sendPresence()):this.doc.emit("sync",[!1])}),i.listen("message",u=>{a(u)});let s=new ys(`hive:datasync:open:${e}`);if(s.setLabels(n),s.wrapPromise(i.open()),this.doc.isLoaded){Cn.info(`doc "${this.doc.guid}" is already loaded`);return}Cn.info(`waiting for doc "${this.doc.guid}" to be loaded`);let l=new ys(`hive:datasync:sync:${e}`);return l.setLabels(n),l.wrapPromise(this.doc.whenLoaded.then(()=>{Cn.info(`doc "${this.doc.guid}" is loaded`)}))}close(){if(this.assertNotDestroyed(),!this.socket){Cn.info("closing datasync, but socket is already closed");return}Cn.info("closing datasync socket"),this.socket.destroy(),this.socket=null,this.encoder=null}destroy(){this.close(),this.batchDebounceFlush?.cancel(),this.undoManager.destroy(),this.doc.destroy(),this.events.removeAllListeners(),this.destroyed=!0}listen(o,e){return this.assertNotDestroyed(),this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}waitForSync(){if(this.assertNotDestroyed(),this.pendingMessages.size!==0)return Cn.info("waiting for sync, pending messages count is",this.pendingMessages.size),new Promise(o=>{this.pendingMessagesResolves.push(o)})}transact(o){return this.assertNotDestroyed(),Cn.info("start transaction on document"),this.beforeTransactionPresence=this.currentPresence,this.doc.transact(()=>o(this.doc),"local")}setPresence(o){this.assertNotDestroyed(),Cn.info("set presence",o),this.currentPresence={data:o.data||this.currentPresence?.data||{},positions:Object.fromEntries(Object.entries(o.positions||{}).map(([e,n])=>n?[e,zk(n.type,n.index,n.assoc)]:null).filter(le))},this.sendPresence()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}stopCapturing(){this.undoManager.stopCapturing()}hasBatchingEnabled(){return!!this.batchDebounceFlush}hasBatchedUpdates(){return this.batchUpdates.length>0}resetBatchingInterval(o,e=o*5){o?(this.batchDebounceFlush?.cancel(),this.batchDebounceFlush=(0,M0.default)(()=>{this.flushBatchUpdates()},o,{maxWait:e})):(this.flushBatchUpdates(),this.batchDebounceFlush=void 0)}disableBatching(){this.resetBatchingInterval(0)}flushBatchUpdates(){if(this.readOnly||(this.batchDebounceFlush?.cancel(),this.batchUpdates.length===0))return;let o=this.batchUpdates;this.batchUpdates=[];let e=Mg(o);this.sendUpdate(e)}sendPresence(){!this.encoder||!this.currentPresence||(Cn.info("sending presence to server"),this.encoder.write({updatePresence:{id:this.encoder.newMessageID(),data:this.currentPresence.data,positions:Object.fromEntries(Object.entries(this.currentPresence.positions).map(([o,e])=>[o,Kk(e)]))}}))}sendPromptInit(){this.encoder&&(Cn.info("sending prompt to init to server"),this.encoder.write({promptInit:{id:this.encoder.newMessageID(),stateVector:Uk(this.doc),version:ja.V2}}))}sendInit(o){!this.encoder||this.readOnly||(Cn.info("sending init to server"),this.encoder.write({init:{id:this.encoder.newMessageID(),update:Lg(this.doc,o),version:ja.V2}}))}batchUpdate(o){if(!this.readOnly){if(!this.batchDebounceFlush){this.sendUpdate(o);return}this.batchUpdates.push(o),this.batchDebounceFlush()}}sendUpdate(o){!this.encoder||this.readOnly||(Cn.info("sending update to server",o.byteLength),this.encoder.write({update:{id:this.encoder.newMessageID(),update:o,version:ja.V2}}))}ackMessage(o){this.pendingMessages.delete(o),this.pendingMessages.size===0&&(this.pendingMessagesResolves.forEach(e=>e()),this.pendingMessagesResolves=[])}assertNotDestroyed(){if(this.destroyed)throw new Error("datasync is destroyed")}dangerouslyPauseSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}async dangerouslyResumeSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}useRPC(o){let e=YT(o,{newMessageID:()=>(ge(this.encoder),this.encoder.newMessageID()),write:n=>{ge(this.encoder),this.encoder.write(n)}});return this.rpcReplyHandlers.set(o,e.onReplyMessage),e.service}pushUpdateToLog(o,e){this.updateLog.push({timestamp:Date.now(),update:o,origin:String(e)})}getUpdateLog(){return Ac.DebugLog.encode({updates:this.updateLog.map(e=>({timestamp:e.timestamp,update:e.update,origin:e.origin}))}).finish()}};c();var _0=v(Kp(),1);var kf=class{constructor(o,e,n,r={}){this.events=new _0.default;this.manager=o,this.contentId=n.contentId,this.branchId=n.branchId,this.dataSync=new bd(o.client,e,{readOnly:r.readOnly}),this._change=zT(Eh(this.dataSync.doc)),this.dataSync.listen("update",()=>{this.dataSync.doc.transact(()=>{IT(Eh(this.dataSync.doc))},"local"),this.#e=HT(Eh(this.dataSync.doc)),this.events.emit("update")})}#e;get revision(){return this.#e}get presences(){return this.dataSync.presences}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/datasync",{branchId:this.branchId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return o==="update"?(this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}):this.dataSync.listen(o,e)}openPage(o){let e=this.dataSync.presence;this.manager.touch(this),e&&this.dataSync.setPresence({data:{...e.data,pageId:o}})}syncChange(o){return this.manager.touch(this),this.dataSync.transact(n=>o(this._change))}async change(o){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");let e=this.syncChange(o);return await this.waitForSync(),e}};c();var V0=v(Kp(),1);var xf=class{constructor(o,e,n,r={}){this.events=new V0.EventEmitter;this.manager=o,this.contentId=n.contentId,this.branchId=n.branchId,this.pageId=n.pageId,this.singleEditBatchingInterval=r.singleEditBatchingInterval??1500,this.#e=Yp.create(),this.dataSync=new bd(o.client,e,{YType:_r,readOnly:r.readOnly}),this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.dataSync.listen("restorePositions",i=>{let a=this.createSelectionFromRelatives(this.value.document,i);a=a?a.normalize(this.value.document):ke.create(),this.#e.selection.isFocused&&(a=a.focus()),this.#e=this.#e.merge({selection:a}),this.events.emit("value")}),this.dataSync.listen("update",i=>{i==="local"||this.createSlateValue(),this.events.emit("value")}),this.dataSync.listen("presences",()=>{this.dataSync.presences.length>0?this.dataSync.hasBatchingEnabled()&&this.dataSync.disableBatching():this.dataSync.hasBatchingEnabled()||this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.updateSelections()}),this.dataSync.listen("state",i=>{i==="open"&&this.updateSelections()}),this.completions=this.dataSync.useRPC("DocumentCompletions")}#e;get value(){return this.#e}createSlateValue(){let o=hd(this.dataSync.doc);this.dataSync.doc.transact(()=>o0(o),"local");let e=JT(o);this.#e=this.dataSync.doc.transact(()=>{let n=this.value.selection,r=Lk[e.data.get("schemaType")||"document"],i=Yp.create({document:e},{normalize:!1}).setSchema(r);if(i.document!==e)throw new Error("Document should not be modified by creation of Value");let a=i.change({save:!1}).normalize();if(a.value.document!==i.document){i=i.merge({document:a.value.document}),nS(a,o);let l=Date.now();try{rS(a.value.document,o)}catch(u){if(!(u instanceof mr))throw u;let d=Date.now()-l;throw this.dataSync.destroy(),vC.annotateError(u,{tags:{["error_category"]:"hive-document-init"},extra:{durationMs:d,contentId:this.contentId,branchId:this.branchId,pageId:this.pageId},attachments:[{name:"normalization.json",body:N0(u,a)},{name:"updates.bin",body:this.dataSync.getUpdateLog()}]})}}let s=this.dataSync.presence?this.createSelectionFromRelatives(i.document,this.dataSync.presence.positions):void 0;return s&&(s=s.normalize(e)),s&&n.isFocused&&(s=s.focus()),i=i.merge({selection:s??ke.create()}),i},"local")}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/pages/:pageId/document/datasync",{branchId:this.branchId,pageId:this.pageId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}applyChange(o){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");this.manager.touch(this);let e=this.value;if(this.#e=o.value,e.document!==o.value.document){let n=Date.now();this.dataSync.transact(r=>{nS(o,hd(r));try{rS(o.value.document,hd(r))}catch(i){if(!(i instanceof mr))throw i;let a=Date.now()-n;throw this.#e=e,this.dataSync.destroy(),vC.annotateError(i,{tags:{["error_category"]:"hive-document-change"},extra:{durationMs:a,contentId:this.contentId,branchId:this.branchId,pageId:this.pageId},attachments:[{name:"change.json",body:N0(i,o)},{name:"updates.bin",body:this.dataSync.getUpdateLog()}]})}}),this.updateSelections()}else this.events.emit("value");if(o.value.selection!==e.selection){let n=o.value.selection;this.dataSync.setPresence({data:{...this.dataSync.presence?.data||{}},positions:e0(o.value.document,this.dataSync.doc,n)})}o.value.selection.isBlurred&&this.dataSync.flushBatchUpdates()}async change(o){let e=this.value.change();return o(e),this.applyChange(e),this.waitForSync()}updateSelections(){this.dataSync.state!=="open"?this.selections=Da.create():this.selections=Da.create(this.dataSync.presences.map(o=>{let e=this.createSelectionFromRelatives(this.value.document,o.positions);return e?e.merge({data:zu.create({clientId:o.clientId,...o.data})}):null}).filter(le)),this.events.emit("selections")}undo(){return this.dataSync.undo()}redo(){return this.dataSync.redo()}createSelectionFromRelatives(o,e){let n=this.dataSync.doc;return t0(o,{anchor:e.anchor&&LC(e.anchor,n)||void 0,focus:e.focus&&LC(e.focus,n)||void 0})}};function N0(t,o){return JSON.stringify({initialValue:$p(o.initialValue),...t.slateValue?{slateValue:t.slateValue}:{},...t.yValue?{yValue:t.yValue}:{},operations:o.operations.map(([e])=>$p(e)),flags:Object.keys(o.flags).length>0?o.flags:void 0})}c();var Fh=class{constructor(o,e={}){this.browserCache=e.browserCache,this.cache=sr({getKey:n=>n,getValue:async n=>{let r=await o(n),i=Array.isArray(r)?r:[r],a={};if(i.forEach(s=>{let l=b0(s),u={token:s,metadata:l};Object.keys(l.payload.content).forEach(d=>{a[d]=u,n!==d&&this.cache.write(d,u)})}),!a[n])throw new Xr.Forbidden(`No authentication for content "${n}"`);return a[n]},ttl:n=>n.metadata.expiration-(Date.now()+5*60*1e3),effects:this.browserCache?[this.browserCache.effect]:[]})}async getParsedToken(o){return await this.cache.readAsync(o)}async getToken(o){let{token:e}=await this.getParsedToken(o);return e}async clearCache(){this.cache.clearAll(),this.browserCache&&await this.browserCache.clearCache()}};c();c();c();var Wh=Symbol("HiveDataSyncCacheOrigin"),Hh=class{};var p5="hive-docs",_c=We("hive:browsercache"),f5=100,Uh=class extends Hh{constructor(){super();this.updateCountByGuid=new Map;this.db=new XP(p5),this.db.version(1).stores({updates:"++id,guid,at,state"})}get updates(){return this.db.table("updates")}async clear(){await this.db.delete()}registerDoc(e){let n=()=>{let r=(a,s)=>{s!==Wh&&this.pushUpdate(e,a).catch(l=>{_c.error(`error pushing update for ${e.guid}`,l)})},i=()=>{e.off("updateV2",r),e.off("destroy",i)};e.on("updateV2",r),e.on("destroy",i),this.fetchUpdates(e).catch(a=>{_c.error(`error fetching updates for ${e.guid}`,a)})};this.db.isOpen()?n():(this.db.on("ready",n),this.db.open().catch(r=>{_c.error("error opening IndexedDB",r)}))}async fetchUpdates(e){let n=await this.updates.where("guid").equals(e.guid).toArray();if(!n.length){_c.info(`no updates found for ${e.guid}`);return}_c.info(`fetched ${n.length} updates for ${e.guid}`);let r=0;jk(e,()=>{for(let i of n)e.transact(()=>{r+=i.value.byteLength,Bg(e,i.value,Wh)})},Wh,!1),_c.info(`loaded ${n.length} updates (${r} bytes) for ${e.guid}`),e.emit("load",[]),this.updateCountByGuid.set(e.guid,n.length)}async pushUpdate(e,n){let r=this.updateCountByGuid.get(e.guid)??0;if(r>=f5){await this.resetDoc(e);return}_c.info(`push update for ${e.guid} (${n.byteLength} bytes, ${r+1} updates)`);let i=Date.now();await this.updates.add({guid:e.guid,value:n,at:i,state:!1}),this.updateCountByGuid.set(e.guid,(this.updateCountByGuid.get(e.guid)??0)+1)}async resetDoc(e){let n=Lg(e);_c.info(`reset cache for ${e.guid} with ${n.byteLength} bytes`),await this.db.transaction("rw",this.updates,async r=>{await this.updates.where("guid").equals(e.guid).delete();let i=Date.now();await this.updates.add({guid:e.guid,value:n,at:i,state:!0})}),this.updateCountByGuid.set(e.guid,0)}};var F0=We("hive:datasync-manager"),pS=2,zh=class{constructor(o,e={}){this.syncs=new Map;this.ids=new WeakMap;this.gcClock=0;this.cache=new Uh;this.client=o,this.ttl=e.ttl??1e3*60*5}async clearCache(){await this.cache.clear()}close(o){let e=this.ids.get(o);if(!e)throw new Error("Unknown sync client");let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");n.sync.destroy(),this.syncs.delete(e),this.ids.delete(o)}closeAll(){this.stopGarbageCollect(),[...this.syncs.values()].map(o=>o.sync.close()),this.syncs=new Map,this.ids=new WeakMap}touch(o){let e=this.ids.get(o);if(!e)return!1;let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");return n.clock=this.gcClock,!0}keepAlive(o){this.touch(o);let e=setInterval(()=>{this.touch(o)||n()},this.ttl/2),n=()=>{e&&clearInterval(e),e=void 0};return n}branch(o,e,n){let r=n?.readOnly??!1,i=this.getSync(`content/${o}/branches/${e}/datasync`,a=>new kf(this,a,{contentId:o,branchId:e},{readOnly:r}),n);if(i&&!(i instanceof kf))throw new Error(`Expected HiveBranchRevision, got ${i.constructor.name}`);return i}pageDocument(o,e,n,r){let i=this.getSync(`content/${o}/branches/${e}/pages/${n}/document/datasync`,a=>new xf(this,a,{contentId:o,branchId:e,pageId:n},r),r);if(i&&!(i instanceof xf))throw new Error(`Expected HiveBranchDocument, got ${i.constructor.name}`);return i}getSync(o,e,n){let r=n?.readOnly??!1,i=this.syncs.get(o);if(i)return i.sync.dataSync.setReadOnly(r),i.sync;if(n?.autoInit===!1)return;let a=e(o);return this.syncs.set(o,{sync:a,clock:this.gcClock}),this.ids.set(a,o),a.dataSync.listen("clientId",s=>{this.clientId=s}),this.cache.registerDoc(a.dataSync.doc),F0.info(`initialize sync for "${o}"`),this.startGarbageCollect(),a}garbageCollect(){this.gcClock+=1;for(let[o,{sync:e,clock:n}]of this.syncs.entries())if(n<this.gcClock-pS){let r=(this.gcClock-n)*(this.ttl/pS);F0.info(`garbage collection "${o}", last active ~${r}ms ago`),this.close(e)}this.syncs.size===0&&this.stopGarbageCollect()}startGarbageCollect(){this.gcInterval||(this.gcInterval=setInterval(()=>this.garbageCollect(),this.ttl/pS))}stopGarbageCollect(){this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=void 0)}};c();var Kh=class{constructor(o){this.branchesCache=sr({getValue:async o=>{try{return await this.client.getBranch(o.contentId,o.branchId)}catch(e){if(e.statusCode===404)return;throw e}}});this.revisionsCache=sr({getValue:async o=>{try{return await this.client.getRevision(o.contentId,o.revisionId)}catch(e){if(e.statusCode===404)return;throw e}}});this.branchesHistoryCache=sr({getValue:async o=>await this.client.getBranchHistory(o.contentId,o.branchId,{page:o.initialRevisionId,limit:o.size,...o.git!==void 0?{git:o.git}:{}})});this.documentsCache=sr({getValue:async o=>{try{return await this.client.getDocument(o.contentId,o.documentId)}catch(e){if(e.statusCode===404)return;throw e}},toJS:o=>o!==void 0?$p(o):"undefined",fromJS:o=>o!=="undefined"?wk(o):void 0});this.client=o}getBranchHistory(o,e,n){return Fu(this.branchesHistoryCache.readCacheState({contentId:o,branchId:e,initialRevisionId:n.page,size:n.limit,...n.git!==void 0?{git:n.git}:{}}))}getBranchRevision(o,e){let n=this.client.sync.branch(o,e,{autoInit:!1});return n?n.revision:Hu(Fu(this.branchesCache.readCacheState({contentId:o,branchId:e})),r=>{if(r)return this.getRevision(o,r.revision)})}getBranchPageDocument(o,e,n){let r=this.client.sync.pageDocument(o,e,n,{autoInit:!1});return r?r.value.document:Hu(Fu(this.branchesCache.readCacheState({contentId:o,branchId:e})),i=>{if(i)return Hu(this.getRevision(o,i.revision),a=>{if(a){let s=a.pages[n];return s?.type!=="document"?void 0:s.document?this.getDocument(o,s.document):Yu(s.id).document}})})}getRevision(o,e){return Fu(this.revisionsCache.readCacheState({contentId:o,revisionId:e}))}assertRevision(o,e){return Hu(this.getRevision(o,e),n=>{if(!n)throw new Error(`Revision ${e} not found in content ${o}`);return n})}getDocument(o,e){return Fu(this.documentsCache.readCacheState({contentId:o,documentId:e}))}assertDocument(o,e){return Hu(this.getDocument(o,e),n=>{if(!n)throw new Error(`Document ${e} not found in content ${o}`);return n})}toJSON(){return{documents:this.documentsCache.toJS(),revisions:this.revisionsCache.toJS(),branches:this.branchesCache.toJS()}}fromJSON(o){o.documents&&this.documentsCache.fromJS(o.documents),o.revisions&&this.revisionsCache.fromJS(o.revisions),o.branches&&this.branchesCache.fromJS(o.branches)}};c();c();var H0={},W0=globalThis.fetch;c();var U0=v(Kp(),1);var Gh=class{constructor(o,e,n,r,i){this.id=void 0;this.state=null;this.events=new U0.default;this.client=o,this.contentId=e,this.path=n,this.pathParams=r,i&&(this.id=i)}async start(o={}){if(this.id)throw new Error("Operation already started");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json();return this.setState(n),n}async update(o){if(!this.id)throw new Error("Operation not started or HiveContentOperation() is called without an existing operation ID");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...o,id:this.id})})).json();return this.setState(n),n}async markAsSucceeded(){return this.update({status:2})}setState(o){this.id=o.id,this.state=o,this.events.emit("update",o)}listen(o){return this.events.on("update",o),()=>{this.events.off("update",o)}}};var m5=We("hive:client"),z0=typeof globalThis.window<"u"||!1,jh=class{constructor(o,e,n={}){this.isRunningAtEdge=z0;let r;this.getEndpoint=typeof o=="string"?()=>Promise.resolve(o):async()=>(r||(r=await o()),r),this.auth=new Fh(e,{browserCache:n.tokensBrowserCache}),this.store=new Kh(this),this.sync=new zh(this),this.clientId=Ma(),n.locationHint&&(this.isRunningAtEdge=n.locationHint)}close(){this.sync.closeAll()}async clearAuthCache(){await Promise.all([this.auth.clearCache(),this.sync.clearCache()]),this.close()}getSocket(o,e,n,r){if(!this.isRunningAtEdge||!z0)throw new Error("HiveClient#getSocket can only be called from the edge");let i=async()=>{let a=K0(o,e,n),s=await this.auth.getToken(o),l=await this.getEndpoint(),u=new URL(a,l);if(u.protocol=u.protocol.replace("http","ws"),r)for(let[d,p]of Object.entries(r))u.searchParams.set(d,p);return u.searchParams.set("authToken",s),u.toString()};return new Vh(i)}async getBranch(o,e){return await(await this.request(o,"/branches/:branchId",{path:{branchId:e}})).json()}async getBranchRevision(o,e,n){return await(await this.request(o,"/branches/:branchId/save",{path:{branchId:e},query:n?{mask:n.join(",")}:{}},{method:"POST"})).json()}async saveBranch(o,e){return{revisionId:(await this.getBranchRevision(o,e,["id"])).id}}async getBranchHistory(o,e,n={}){let{limit:r=10,page:i,git:a,refresh:s}=n;return await(await this.request(o,"/branches/:branchId/history",{path:{branchId:e},query:{limit:r.toString(),...i?{page:i}:{},...a!==void 0?{git:`${a}`}:{},...s!==void 0?{refresh:`${s}`}:{}}})).json()}async getRevision(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e},query:n?{mask:n.join(",")}:{}})).json()}getRevisionInfo(o,e){return this.getRevision(o,e,Nk)}async mergeBranch(o,e){if(!this.isRunningAtEdge)throw new Error("HiveClient#mergeBranch can only be called from the edge");return await(await this.request(o,"/branches/:branchId/merge",{path:{branchId:e}},{method:"POST"})).json()}async rollbackBranch(o,e,n){await this.request(o,"/branches/:branchId/rollback",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}async updateBranch(o,e){return await(await this.request(o,"/branches/:branchId/update",{path:{branchId:e}},{method:"POST"})).json()}async checkoutBranch(o,e,n,r={}){return(await this.request(o,"/branches/:branchId/checkout",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...g5(r.operationId)},body:JSON.stringify(n)})).json()}async getDocument(o,e){let r=await(await this.request(o,"/documents/:documentId",{path:{documentId:e}},{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).arrayBuffer(),i=TC(new Uint8Array(r));return BC(i)}async getPageDocument(o,e,n){if(!this.isRunningAtEdge)throw new Error("HiveClient#getPageDocument can only be called from the edge");let i=await(await this.request(o,"/branches/:branchId/pages/:pageId/document",{path:{branchId:e,pageId:n}})).arrayBuffer(),a=TC(new Uint8Array(i));return BC(a)}async createDocument(o,e,n={}){return await(await this.request(o,"/documents",{query:n.documentId?{documentId:n.documentId}:{}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/octet-stream"},body:Rk(n.skipNormalization?e:Mk(e),{preserveKeys:!0})})).json()}async createRevision(o,e){return await(await this.request(o,"/revisions",{},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}getContentOperation(o,e,n,r){return new Gh(this,o,e,n,r)}getBranchContentOperation(o,e,n){return this.getContentOperation(o,"/branches/:branchId/operation",{branchId:e},n)}async createFileBlob(o,e,n){let r=await this.request(o,"/blobs",{query:{name:e.name}},{method:"POST",headers:{Accept:"application/json","Content-Type":e.contentType},body:n}),{blobId:i}=await r.json();return{blobId:i,downloadURL:fT(await this.getEndpoint(),o,{blobId:i,name:e.name})}}async updateRevisionMetadata(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json()}async duplicateContent(o,e){return(await this.request(o.contentId,"/branches/:branchId/duplicate",{path:{branchId:o.branchId}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({origin:e,page:o.pageId})})).json()}async triggerAlarm(o,e={force:!1}){o.pageId?await this.request(o.contentId,"/branches/:branchId/pages/:pageId/document/alarm",{path:{branchId:o.branchId,pageId:o.pageId},query:{force:String(e.force)}},{method:"POST"}):await this.request(o.contentId,"/branches/:branchId/alarm",{path:{branchId:o.branchId},query:{force:String(e.force)}},{method:"POST"})}async request(o,e,n,r={},i={}){let{retries:a=3}=i,{path:s={},query:l={}}=n,u=Ma(),d=new ys(`hive:request:${(r.method||"GET").toLowerCase()}:${e}`);return d.label("contentId",o),d.setLabels({requestId:u,clientId:this.clientId,locationHint:this.isRunningAtEdge,...n}),d.wrap(async()=>{let p=K0(o,e,s),m=await this.auth.getToken(o),f=await this.getEndpoint(),h=new URL(p,f);h.search=new URLSearchParams(l).toString();let y=new Headers(r.headers||{});y.set("Authorization",`Bearer ${m}`),y.set("X-Request-Id",u),y.set("X-Client-Id",this.clientId),typeof this.isRunningAtEdge=="string"&&y.set("X-Hive-Location-Hint",this.isRunningAtEdge);let S=await G0(()=>W0(h.toString(),{...H0,...r,headers:y}),a),w=S.headers.get("cf-ray");if(d.label("rayId",w),!S.ok)try{let R="";try{R=(await S.clone().json()).error.message}catch{R=`Unexpected text response: ${await S.text()}`}throw Xr.fromStatusCode(S.status,R)}catch(R){throw R.statusCode?R:new Error(`Unexpected response with status code ${S.status}: ${R.message}`)}return S})}};function K0(t,o,e){for(let[n,r]of Object.entries(e))o=o.replace(`:${n}`,r);return`content/${t}${o}`}function g5(t){return t?{"X-Content-Operation-Id":t}:{}}async function G0(t,o=3,e=500){if(o<=0)return t();try{let n=await t();if(n.status===504||n.status===503)throw Xr.fromStatusCode(n.status,n.statusText);return n}catch(n){if(m5.error("retry because of error",n,{attemptsLeft:o,delay:e}),o>0)return await new Promise(r=>setTimeout(r,e)),G0(t,o-1,e*2);throw n}}function fS(t){let{children:o}=t,e=Yh.useMemo(()=>{if(t.client)return t.client;let n=new jh(t.endpoint,t.fetchContentAuthToken,{tokensBrowserCache:t.tokensBrowserCache});return t.store&&n.store.fromJSON(t.store),n},[t.client,t.endpoint,t.fetchContentAuthToken,t.store]);return Yh.createElement(Sx.Provider,{value:e},o)}c();var vd=v(P());var h5=vd.createContext(null);function to(){return vd.useContext(h5)}c();var j0=v(P());function Y0(t){let e=Ie().sync.pageDocument(t.branch.contentId,t.branch.branchId,t.pageId,{readOnly:t.readOnly}),n=e.open(t.presence);if(n)throw n;return j0.useEffect(()=>{let r=e.keepAlive();return()=>{e.dataSync.state==="open"&&e.dataSync.setPresence({positions:{}}),r()}},[e]),e}c();var Nc=v(P());function $0(t){let o=Nc.useMemo(()=>({getCurrentValue:()=>t.value,subscribe:a=>t.listen("value",a)}),[t]),e=Nc.useMemo(()=>({getCurrentValue:()=>t.selections,subscribe:a=>t.listen("selections",a)}),[t]),n=Nc.useSyncExternalStore(o.subscribe,o.getCurrentValue),r=Nc.useSyncExternalStore(e.subscribe,e.getCurrentValue),i=Nc.useCallback(a=>{t.applyChange(a)},[t]);return[n,r,i]}c();var J0=v(P());function q0(t){return J0.useMemo(()=>({onKeyDown(o,e){if(FC.isRedo(o))return t.redo(),o.preventDefault(),e;if(FC.isUndo(o))return t.undo(),o.preventDefault(),e}}),[t])}c();var mS=v(P());function X0(t){let o=mS.default.useMemo(()=>({getCurrentValue:()=>{if(t)return t.clock},subscribe:e=>t?t.listen("update",e):()=>{}}),[t]);return mS.default.useSyncExternalStore(o.subscribe,o.getCurrentValue,()=>{})}c();var Wn=v(P());c();var gS=JSON.parse('{"toolbar":"toolbar_xobeF","toolbarVertical":"toolbarVertical_6JXew"}');var Q0=Wn.forwardRef(function(o,e){let{orientation:n="horizontal",children:r,onExit:i,...a}=o,[s,l]=Wn.useState(0),u=Wn.useRef(s),d=Wn.useRef(null);Wn.useEffect(()=>{u?.current!==s&&(d.current?.focus(),u.current=s)},[s]),Wn.useEffect(()=>()=>{d?.current?.blur()},[]),Wn.useImperativeHandle(e,()=>({focus:()=>{d.current?.focus(),u.current=s}}),[]);let p=r?r.filter(le):[];return p.length===0?null:Wn.createElement(F,{...a,role:"toolbar","aria-orientation":n,style:[gS.toolbar,n==="vertical"?gS.toolbarVertical:null,a.style]},p.map((m,f)=>Wn.cloneElement(m,{key:m.props.key??f,ref:f===s?d:void 0,tabIndex:f===s?0:-1,preventFocusOnPress:!0,onKeyDown:h=>{(h.key==="Tab"||h.key==="Escape")&&(h.preventDefault(),i?.()),h.key==="ArrowLeft"&&(l(y=>Math.max(0,y-1)),h.preventDefault()),h.key==="ArrowRight"&&(l(y=>Math.min(p.length-1,y+1)),h.preventDefault())}})))});c();var Z0=v(P());function eE(t){return Z0.default.createElement(Ot,{...t,kind:"pill",size:"small"})}c();var Cd=v(P()),$h=v(YN());function tE(t=2e3){let[o,e]=Cd.useState(!1),n=Cd.useRef(null);return Cd.useEffect(()=>(!o&&typeof window<"u"&&(n.current=setTimeout(()=>(0,$h.unstable_runWithPriority)($h.unstable_IdlePriority,()=>e(!0)),t)),()=>{n.current&&clearTimeout(n.current)}),[]),o}c();var oE=v(P());function nE(){let t=oE.useRef();return Qu(()=>{t.current=window},[]),t}c();var Sd=v(P());function rE(){let t=Sd.useRef(new WeakMap);return Sd.useCallback(o=>(t.current.has(o)||t.current.set(o,Sd.createRef()),t.current.get(o)),[])}c();var iE=v(P());function Jh(t,o){let e=_n(t);iE.default.useEffect(()=>{let n=()=>e.current(),r=window.setTimeout(n,o);return()=>window.clearTimeout(r)},[o])}c();function aE(t){let{r:o,g:e,b:n}=Tx(t);return Math.sqrt(.299*(o*o)+.587*(e*e)+.114*(n*n))}function $a(t){return aE(t)>150?"light":"dark"}function qh(t){let o=aE(t);return o>240?"lightest":o>215?"light":o>190?"semiLight":o>165?"medium":o>140?"semiDark":o>115?"dark":"darkest"}c();function sE(t){return t.charAt(0).toUpperCase()+t.slice(1)}c();var If=v(P());c();var cE=v(P());function Xh(t,o=500){let e=cE.useRef(0);return()=>e.current&&Date.now()-e.current<o?(t(),e.current=0,!0):(e.current=Date.now(),!1)}function lE(t){let{anchor:o,children:e,wrapper:n,onClose:r,...i}=t,a=If.useRef(null);return Cc({...i,onClose:r},a),If.createElement(Wa,{ref:a,opened:i.opened,anchor:o,wrapper:n},If.createElement(qg.Provider,{value:r},e))}c();var Ja=v(P()),uE=v(H());function Qh(t,o={}){let e=Ja.createContext(null);function n(i){let{children:a,...s}=i,l=typeof t=="object"?t:t(i),[u,d]=Ja.useState(l),[p,m]=Ja.useState(!1),f=h=>{let{layout:y}=h.nativeEvent;(!u||o.width!==!1&&y.width!==u.width||o.height!==!1&&y.height!==u.height)&&(d(y),m(!0))};return Ja.createElement(e.Provider,{value:{ready:p,dimensions:u}},Ja.createElement(uE.View,{...s,onLayout:f},a))}function r(){let i=Ja.useContext(e);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}c();var Wl=v(P()),ty=v(H());c();var Zh=v(P()),ey=v(H());var y5=Z.createResponsiveComponent(ey.TouchableOpacity);function dE(t){let[,o]=T(C5),{close:e}=bo(),n=ed()==="mobile",r=t.closeable||n,i=()=>{t.onClose&&t.onClose(),e(t.id)},a=Xg({mount:b5,unmount:v5});return Zh.createElement(ey.View,{ref:a},Zh.createElement(y5,{mobileStyle:o.toastMobile,desktopStyle:o.toastDesktop,onPress:()=>{t.onOpen&&t.onOpen(),r&&i()}},Zh.createElement(Ti,{...t,onClose:r?i:void 0,style:o.alert,mainBackground:!0})))}var b5={duration:Al.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},v5={duration:Al.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},C5=j.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:g.small},toastMobile:{width:"100%",minWidth:0},alert:t=>({...t.shadows.pop,borderColor:t.colors.border.main})});function pE(t){let o=ar(Jx),e=ar($x),n=Wl.useRef(null),r=R5[o];return Wl.createElement(Nn,{ref:n},Wl.createElement(Z.View,{style:[w5.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},Wl.createElement(Kx,null,e.map(i=>Wl.createElement(dE,{...i,key:i.id})))))}var w5=ty.StyleSheet.create({toaster:{position:"fixed",zIndex:200}}),R5={"bottom-right":ty.StyleSheet.create({desktop:{bottom:g.medium,right:g.medium},mobile:{bottom:g.medium,right:g.medium,left:g.medium}}),"bottom-right-with-bar":ty.StyleSheet.create({desktop:{bottom:g.xxlarge,right:g.medium},mobile:{bottom:g.xxlarge+g.xlarge+g.medium,right:g.medium,left:g.medium}})};c();var ai=v(P()),Ns=v(H());var P5=U.createInteractiveComponent(oi);function qa(t){let{icon:o,title:e,subtitle:n,details:r,style:i,buttons:a=[],...s}=t,[,l]=T(N);return ai.createElement(Es,{style:[C.alignItemsCenter,g.Padding.all400,i],...s},o?ai.createElement(k5,{icon:o}):null,ai.createElement(Ns.View,{style:[C.flex1]},ai.createElement(Ns.View,{style:[C.row,C.alignItemsCenter]},ai.createElement(P5.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:Es.interactiveHandle},e),n?ai.createElement(oi,{style:[l.Label,l.textMuted,g.Margin.left400]},n):null),r?ai.createElement(Ns.View,null,ai.createElement(Ns.Text,{style:[l.Label,l.textMid]},r)):null),a.length>0?ai.createElement(Ns.View,{style:[C.row,C.alignItemsCenter,g.Margin.left400]},a.map((u,d)=>u?ai.createElement(Ns.View,{style:[g.Margin.left200],key:d},u):null)):null)}function k5(t){let{icon:o}=t,[,e]=T(N),n=U.useInteractiveComponent(o);return ai.createElement(Ns.View,{style:[g.Margin.right400]},ai.createElement(n.Child,{size:_.S,style:[e.textMuted],hoverStyle:e.primary}))}c();async function fE(t){let o=()=>{let n=t;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n?.hasAttribute("data-virtualparent"))););return n},e;return new Promise(n=>{let r=o();if(!r||!r.firstChild)return;let i=()=>{e.disconnect(),n()},a=!1;e=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let s=()=>{ah(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||s()},500)};s(),e.observe(r)})}c();var CS=v(P());c();var qt=v(P()),SE=v(H());c();var st=v(P()),Un=v(H());c();var Ae=v(P()),oo=v(H());var mE=Ae.forwardRef(function(o,e){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:s}=o,[l,u]=T(N),[,d]=T(x5),[p,m]=ho(!1),f=u.text,h=u.textMid,y=u.primary,S=l.colors.background.main;i&&(f=u.textStandout,h=u.textMid,S=l.colors.background.muted);let w=[u.Bold],R=Ae.useCallback(()=>{let E=a(n);E instanceof Promise&&m(()=>E)},[n,a]),k=Ae.useCallback(()=>s(n),[n,s]),x=U.useInteractiveState({onHoverIn:k});return Ae.createElement(Nr,{ref:e,component:oo.TouchableOpacity,...x.events,onMouseDown:E=>{E.preventDefault()},onPress:R,backgroundColor:S,style:[C.row,C.alignItemsCenter,d.commandItem,g.Margin.horizontal200,g.Padding.vertical100,g.Padding.horizontal200,{height:hS(n)}],testID:n.testID},p?Ae.createElement(oo.View,{style:[g.Padding.right400]},Ae.createElement(Se,{size:"medium"})):n.icon?Ae.createElement(oo.View,{style:[g.Padding.right400]},Ae.createElement(Ae.Suspense,{fallback:Ae.createElement(oo.View,{style:{width:_.ICON_M,height:_.ICON_M}})},Ae.createElement(n.icon,{size:_.ICON_M,style:y}))):null,Ae.createElement(oo.View,{style:C.flex1},Ae.createElement(oo.View,{style:C.row},Ae.createElement(oo.View,{style:C.flex1},n.title?Ae.createElement(oo.View,null,Ae.createElement(oo.Text,{style:[u.Label,f,n.subtitle?u.Bold:u.Medium],numberOfLines:1},Ae.createElement(dh,{query:r,text:n.title,highlight:w}))):null,n.subtitle?Ae.createElement(oo.View,null,Ae.createElement(oo.Text,{style:[u.Caption,h],numberOfLines:1},Ae.createElement(dh,{query:r,text:n.subtitle,highlight:w}))):null)),n.body?Ae.createElement(oo.View,{style:[d.commandBody,g.Padding.left200,g.Margin.top200]},n.body.map((E,A)=>Ae.createElement(oo.View,{key:A},Ae.createElement(oo.Text,{style:[u.Caption,u.textMid],numberOfLines:1},Ae.createElement(dh,{query:r,text:E,highlight:w}))))):null),n.label?Ae.createElement(oo.View,null,Ae.createElement(Xx,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):Ae.createElement(Ae.Fragment,null,n.descendant?Ae.createElement(oo.View,{style:[g.Padding.left400]},Ae.createElement(b.ChevronRight,{size:_.ICON_S,style:[u.textMuted]})):null,n.type===1?Ae.createElement(oo.View,{style:[g.Padding.left400]},Ae.createElement(Pc,{value:n.selected,onValueChange:R,size:_.ICON_S})):null,n.type===0?Ae.createElement(oo.View,{style:[g.Padding.left400]},Ae.createElement(uh,{value:n.selected,onValueChange:R,size:_.ICON_S})):null,n.type===2?Ae.createElement(oo.View,{style:[g.Padding.left400]},Ae.createElement(lh,{value:n.enabled,onValueChange:()=>{}})):null))});function hS(t){let o=0;return o+=2*g.small,o+=Math.max(t.title&&Xe.Label.lineHeight||0,t.icon?_.ICON_M:0,typeof t.selected=="boolean"||typeof t.enabled=="boolean"?_.ICON_S:0),t.subtitle&&(o+=Xe.Caption.lineHeight||0),t.body&&(o+=g.small,o+=t.body.length*(Xe.Caption.lineHeight||0)),o}var x5=j.create({commandItem:t=>({borderRadius:t.radiuses.medium}),commandBody:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.mid})});c();function oy({getItemHeight:t,getItemSeparatorHeight:o=()=>0,getSectionSeparatorHeight:e=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(s,l)=>{let u=0,d=typeof i=="function"?i():i,p=0,m=s.length;for(let f=0;f<m&&(p<l||f===0);f++){let h=s[f],y=s[f].data,S=y.length,w=s[f-1],R=s[f+1],k={section:h,index:f},x=e({section:h,index:f,leadingItem:void 0,trailingItem:y[0],leadingSection:w,trailingSection:R});d+=u+x+(a&&f===1?n({section:s[0],index:0}):0),u=a&&f===0?0:n(k),f!==0&&p++;for(let E=0;E<S&&(p<l||f===0&&E===0);E++){d+=u;let A=y[E],I=E>0&&E<S-1?o({item:A,section:h,index:E,leadingItem:y[E-1],trailingItem:y[E+1],leadingSection:w,trailingSection:R}):0;u=t({item:A,section:h,index:E})+I,p++}if(p<l&&(d+=e({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:w,trailingSection:R})),p<l){let E=e({section:h,index:f,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:w,trailingSection:R});d+=u+E,u=r(k),p++}}return{index:l,length:u,offset:d}}}function gE(t){let{computed:{listId:o,items:e,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:s,setTopPalette:l}=t,u=ed(),d=st.useRef(null),p=rE(),m=st.useCallback(async B=>{let Y=await hI(a,B);Y?s(Y):l(null)},[s,l]),f=st.useCallback(B=>{s(Y=>{if(!Y)return null;let $=p(B),G=yI(Y,B,$);return G||(Y.descendant?{...Y,descendant:void 0}:Y)})},[s,p]),h=st.useCallback(()=>{s(B=>B?.parent?null:B)},[s]),y=st.useCallback(B=>{let Y=-1;return{sectionIndex:n.findIndex(G=>(Y=G.data.findIndex(q=>q.key===B),Y>=0)),itemIndex:Y,viewPosition:.5}},[n]),S=st.useCallback(B=>d.current?.scrollToLocation(y(B.key)),[y]),w=vI({active:i,items:e,onSelect:m,onOpen:f,onClose:h,scrollTo:S}),R=n.length>1,k=st.useCallback(B=>{w.hoverItem(B),f(B)},[w.hoverItem,f]),x=st.useMemo(()=>oy({getItemHeight:({item:B})=>hS(B),getSectionSeparatorHeight:({section:B,leadingItem:Y,leadingSection:$,trailingItem:G,trailingSection:q})=>$&&!Y&&!B.group.title?2*(g.small-1)+1:q&&!G?_.S/4:0,getSectionHeaderHeight:({section:B})=>R&&B.group.title?_.S:0}),[R]),E=st.useMemo(()=>R?({section:B})=>B.group.title?st.createElement(T5,{group:B.group}):null:void 0,[R]),A=st.useCallback(B=>st.createElement(E5,{...B}),[]),I=st.useCallback(({item:B})=>st.createElement(mE,{ref:p(B),active:u==="desktop"&&B.key===w.cursor.current?.key,command:B,query:a.query.text,executeCommand:m,onHoverIn:k}),[m,p,w.cursor.current?.key,k,u,a.query.text]),L=r;if(!L&&e.length===0){let B=a.placeholder||(ff(a)?null:"No items found");return B?st.createElement(I5,{placeholder:B}):null}return st.createElement(Un.View,{style:[C.flex1]},st.createElement(Un.SectionList,{key:o,ref:d,sections:n,extraData:w.cursor,getItemLayout:x,renderItem:I,SectionSeparatorComponent:A,renderSectionHeader:E,contentContainerStyle:[g.Padding.vertical200],ListFooterComponent:L?st.createElement(Un.View,{style:[C.row,C.justifyCenter,g.Padding.all400]},st.createElement(Se,{size:"large"})):null}))}function I5(t){let{placeholder:o}=t,[,e]=T(N);return st.createElement(Un.View,{style:[g.Padding.horizontal200,g.Padding.vertical400]},st.createElement(Un.View,{style:[g.Padding.horizontal400]},st.createElement(Un.Text,{style:[e.Caption,e.textMuted]},o)))}function T5(t){let{group:o}=t,[,e]=T(N);return st.createElement(Un.View,{style:[O5.paletteGroupHeader,C.row,C.alignItemsCenter,g.Padding.horizontal200]},st.createElement(Un.View,{style:[g.Padding.horizontal200]},st.createElement(Un.Text,{style:[e.GroupTitle,e.textMuted]},o.title)))}function E5(t){let{leadingSection:o,section:e,leadingItem:n,trailingSection:r,trailingItem:i}=t,[,a]=T(D5);return o&&!n&&!e.group.title?st.createElement(Un.View,{style:a.paletteDividerUntitled}):(r&&!i&&(Un.View,a.paletteDividerFooter),null)}var O5=Un.StyleSheet.create({paletteGroupHeader:{height:_.S}}),D5=j.create({paletteDividerUntitled:(t,o)=>({marginTop:g.small-1,marginBottom:g.small-1,borderTopColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:_.S/4}});c();var wd=v(P()),Rd=v(H());function hE(t){let{error:o}=t,[,e]=T(N);return console.error(o),wd.createElement(Rd.View,{style:[C.row,C.alignItemsCenter,g.Padding.vertical200,g.Padding.horizontal400]},wd.createElement(Rd.View,{style:[g.Padding.right400,g.Padding.top100]},wd.createElement(b.Warning,{size:_.ICON_S,style:e.danger})),wd.createElement(Rd.View,{style:[C.flex1,C.row,C.alignItemsCenter]},wd.createElement(Rd.Text,{style:[e.danger,e.Label]},mc(o))))}c();var Fr=v(P()),Vs=v(H());var yE=Fr.forwardRef(function(o,e){let{palette:n,setPalette:r,withItems:i,placement:a}=o,[,s]=T(A5),[l,u]=T(N),[d,p]=Xu(n.query.text,[n]),m=h=>{p(h),r(y=>!n||!y?n:rd({...y,descendant:void 0},h))},f=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return Fr.createElement(Vs.View,{style:i&&s.paletteInputWrapperWithBottomBorder},Fr.createElement(Vs.View,{style:[C.row,C.alignItemsCenter]},n.parent&&a==="right"?Fr.createElement(Vs.View,{style:[g.Padding.left200]},Fr.createElement(b.ChevronLeft,{size:_.ICON_M,style:u.textMuted})):null,Fr.createElement(Vs.View,{style:[C.flex1,C.row,C.alignItemsCenter,s.paletteInput,g.Margin.all200]},Fr.createElement(Vs.View,{style:[C.flex1]},Fr.createElement(Vs.TextInput,{ref:e,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:m,onKeyPress:f,style:[u.Caption,u.text,g.Padding.horizontal400,g.Padding.vertical200]})),Fr.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[g.Margin.horizontal200]},Fr.createElement(W,{icon:b.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?Fr.createElement(Vs.View,{style:[g.Padding.right200]},Fr.createElement(b.ChevronRight,{size:_.ICON_M,style:u.textMuted})):null))}),A5=j.create({paletteInputWrapperWithBottomBorder:(t,o)=>({borderBottomColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});c();var bE=JSON.parse('{"paletteView":"paletteView_PnMMq"}');c();var Pd=v(P());function vE(t){let[o,e]=Pd.useState(!1),n=cf(()=>new WeakMap),r=Pd.useRef(null);return Pd.useMemo(()=>{let i=[],a=[],s;t.groups.forEach(d=>{let p;try{p=B5(t,d)}catch(m){s=m;return}if(p instanceof Promise){let m=n.current.get(d);m&&i.push(m),a.push(p)}else p&&(n.current.set(d,p),i.push(p))});let l=i.filter(d=>d.data.length>0).sort((d,p)=>d.priority>p.priority?-1:d.priority<p.priority?1:0),u=l.reduce((d,p)=>(d.push(...p.data),d),[]);if(a.length>0){e(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(e(!1),r.current=null)}).catch(p=>Vu(new Error(p)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:o,error:s}},[t.groups,t.query,o,n])}function B5(t,o){try{let e=typeof o.commands=="function"?o.commands(t):o.commands,n=typeof o.commands!="function"||o.commands.length===0,r=o.priority||5;if(n){let i=L5(t.query.text,e);r=i.reduce((a,s)=>typeof s.score<"u"?Math.max((1-s.score)*10,a):a,r),e=i.map(a=>a.item)}return{group:o,priority:r,data:e}}catch(e){if(e instanceof Promise)return e;throw e}}function L5(t,o){return t?new id(o,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(t):o.map(n=>({item:n,score:void 0}))}c();var vS=v(yg()),ay=v(P());var yS=204,ny=246,bS=384,M5=630,ry=180,iy=355;function CE(t,o,e){let n=ay.useMemo(()=>N5(o,e),[o.position,!!o.parent,e]),r=ay.useCallback(l=>_5(l,o.position),[o.position]),[i,a,s]=Dx(t,r,n);return[i,a,s]}function _5(t,o){let e,n=o?.width||"medium";switch(n){case"small":e={width:yS,maxWidth:yS,minWidth:yS,minHeight:0,height:ry,maxHeight:iy};break;case"medium":e={width:ny,maxWidth:ny,minWidth:ny,minHeight:0,height:ry,maxHeight:iy};break;case"large":e={width:bS,maxWidth:bS,minWidth:bS,minHeight:0,height:ry,maxHeight:iy};break;case"anchor":let r=Math.max(ny,t.width),i=(0,vS.default)(t.width,r,M5);e={width:(0,vS.default)(t.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:ry,maxHeight:iy};break;default:Ee(n)}return e}function N5(t,o){let e={cover:t.position?.cover,spacingWithAnchor:g.small};return t.parent?(e.offset={top:-g.small},e.spacingWithAnchor=g.medium,e.allowedPlacements=o==="left"?["left","right"]:["right","left"]):t.position?.width==="anchor"?e.allowedPlacements=["bottom","top"]:e.spacingWithWindow=g.small,e}var V5=Z.createResponsiveComponent(Nr);function wE(t){let{paletteState:{palette:o},setPaletteState:e}=t,n=qt.useRef(null),r=()=>e(null),i=lf({mount:O.animations.fadeIn,unmount:O.animations.fadeOut});Cc({opened:!0,closeOnEsc:!ff(o),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:r},n),Ix();let a=qt.useRef(null);return kx({ref:a,onInteractOutside:r}),qt.createElement(Nn,{ref:n},qt.createElement(F,{ref:i,style:[O.position.fixed,bE.paletteView]},qt.createElement(F,{ref:a},qt.createElement(RE,{...t,setTopPaletteState:e}))))}function RE(t){let{paletteState:{palette:o,anchorRef:e},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=t,[a,s]=CE(e,o,i),l=Xg(Al.slideToL[s]);return qt.createElement(qt.Fragment,null,qt.createElement(F5,{ref:l,palette:o,setPalette:p=>{n(m=>{if(!m)return null;let f=typeof p=="function"?p(m.palette):p;return f?{...m,palette:f}:null})},setTopPalette:p=>{r(m=>{if(!m)return null;let f=typeof p=="function"?p(m.palette):p;return f?{...m,palette:f}:null})},positionStyle:a,placement:s}),o.descendant?qt.createElement(RE,{paletteState:o.descendant,setTopPaletteState:r,setPaletteState:p=>{n(m=>m?{...m,palette:{...m.palette,descendant:(typeof p=="function"?p(m.palette.descendant||null):p)||void 0}}:null)},parentPlacement:s}):null)}var F5=qt.forwardRef(function(o,e){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:s}=o,l=qt.useRef(null),[u,d]=T(H5),p=vE(n),m=!n.descendant;return qt.useEffect(()=>{if(n.descendant)return;let f=l.current;f&&(document.activeElement===f||(f.select(),f.focus()))},[n]),qt.createElement(SE.TouchableWithoutFeedback,{onPress:f=>f.preventDefault()},qt.createElement(V5,{ref:e,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},ff(n)?qt.createElement(yE,{ref:l,palette:n,setPalette:r,withItems:p.items.length>0,placement:s}):null,p.error?qt.createElement(hE,{error:p.error}):qt.createElement(gE,{computed:p,palette:n,withKeyboardInteractions:m,setPalette:r,setTopPalette:i})))}),H5=j.create({palette:t=>({borderRadius:t.radiuses.xlarge,borderColor:t.colors.border.main,borderWidth:1,overflow:"hidden",...t.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:g.small,left:g.small,right:g.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function PE(t){let[o,e]=fn(gI);return CS.createElement(Ux,null,o?CS.createElement(wE,{paletteState:o,setPaletteState:e}):null)}c();var kE=v(P());c();var W5=new id(mh,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function sy(t){return W5.search(t).map(o=>o.item)}var U5=[Bl["1f44d"],Bl["1f389"],Bl["1f604"],Bl["1f602"],Bl["1f44f"],Bl["1f44e"]];function kd(t,o={}){let{withSearch:e=!0,max:n=5}=o;return se({search:e?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?sy(r.query.text):U5).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:s=>kE.createElement(_o,{...s,code:a.code}),trigger:()=>t(a.code)}))}]})}c();var Vc=v(P()),Fs=v(H());var Hs=Vc.forwardRef(function(o,e){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:s,onChangeText:l,...u}=o,[d]=T(),p=!s&&l,m=Vc.useMemo(()=>p&&n==="inline"?ch(r||a||"",Fs.StyleSheet.flatten([i])):0,[n,r,a,i,p]);if(!p){let f=Vc.createElement(Fs.Text,{style:[i],selectable:!0},r);return n==="inline"?f:Vc.createElement(Fs.View,{style:xE.inputModeBlock},f)}return Vc.createElement(Fs.TextInput,{ref:e,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:m}:xE.inputModeBlock]})}),xE=Fs.StyleSheet.create({inputModeBlock:{width:"100%"}});c();var cy=v(P()),IE=v(H()),SS=cy.default.forwardRef(function(o,e){let{style:n,...r}=o,[i,a]=cy.default.useState(void 0);return cy.default.createElement(IE.TextInput,{ref:e,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})});c();var ly=[{key:"blue",color:Q.primary.base,title:"Blue"},{key:"purple",color:Q.violet.base,title:"Purple"},{key:"orange",color:Q.orange.base,title:"Orange"},{key:"red",color:Q.scarlet.base,title:"Red"},{key:"yellow",color:Q.YELLOW,title:"Yellow"},{key:"green",color:Q.green.base,title:"Green"}],uy=[{key:"blue",color:Q.primary.xlight,title:"Blue"},{key:"purple",color:Q.violet.xlight,title:"Purple"},{key:"orange",color:Q.orange.xlight,title:"Orange"},{key:"red",color:Q.scarlet.xlight,title:"Red"},{key:"yellow",color:Q.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:Q.green.xlight,title:"Green"}],Kle=[Q.primary.light,Q.violet.light,Q.fuchsia.light,Q.scarlet.light,Q.orange.light,Q.green.light];c();var Ye=v(P()),Oi=v(H());c();var AE=9,RS=mh.reduce((t,o)=>{let e=t.find(r=>r.key===o.category);if(!e)return console.warn("Unknown emoji category","emoji"),t;(!e.data.length||e.data[e.data.length-1].emojis.length===AE)&&e.data.push({key:"",emojis:[]});let n=e.data[e.data.length-1];return n.key+=o.code,n.emojis.push(o),t},[{key:"people",title:"People",Icon:b.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:b.RoleEditor,data:[]},{key:"food",title:"Food",Icon:b.Food,data:[]},{key:"activity",title:"Activity",Icon:b.Music,data:[]},{key:"travel",title:"Travel",Icon:b.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:b.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:b.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:b.EmojiFlag,data:[]}]);function BE(t){let o=sy(t);return{key:"search",title:"Results",data:Q5(o,AE),Icon:b.Search}}function Q5(t,o){let e=t.length;if(e===0)return[];let n=Math.ceil(e/o);return Array.from({length:n},(r,i)=>{let a=i*o,s=t.slice(a,a+o);return{key:s.map(l=>l.code).join("-"),emojis:s}})}function py(t){let{onPick:o,onRemove:e}=t,[n,r]=Ye.useState(""),[i,a]=Ye.useState(""),s=Ye.useRef(null);Ye.useEffect(()=>{let u=requestAnimationFrame(()=>{s.current&&s.current.focus()});return()=>{cancelAnimationFrame(u)}},[s]);let l=u=>{r(u),a(u)};return Ye.createElement(Oi.View,{style:Tf.emojiPicker},Ye.createElement(Oi.View,{style:[Tf.emojiPickerSearch,C.row]},Ye.createElement(At,{kind:"search",size:"medium",ref:s,icon:b.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:C.flex1}),e?Ye.createElement(W,{icon:b.Trashcan,onPress:e,title:"Remove Emoji",size:"medium",kind:"secondary",style:g.Margin.left200}):null),Ye.createElement(tF,{query:i,onPick:o}))}var Z5=oy({getItemHeight:()=>dy,getSectionHeaderHeight:()=>LE,stickySectionHeadersEnabled:!0}),eF=({section:t})=>Ye.createElement(oF,{category:t}),tF=Ye.memo(function(o){let{query:e,onPick:n}=o,r=Ye.useRef(null),i=e?[BE(e)]:RS,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},s=Ye.useCallback(({item:l})=>Ye.createElement(nF,{row:l,onPick:n}),[n]);return Ye.createElement(Ye.Fragment,null,!e&&Ye.createElement(Oi.View,{style:Tf.emojiPickerCategories},RS.map((l,u)=>Ye.createElement(W,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),Ye.createElement(Oi.SectionList,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:s,renderSectionHeader:eF,getItemLayout:Z5}))}),oF=Ye.memo(function(o){let{category:e}=o,[,n]=T(ME),[,r]=T(N);return Ye.createElement(Oi.View,{style:[n.emojiCategoryHeader]},Ye.createElement(Oi.Text,{style:[r.GroupTitle,r.text]},e.title))},(t,o)=>t.category.title===o.category.title),nF=Ye.memo(function(o){let{row:e,onPick:n}=o;return Ye.createElement(Oi.View,{style:Tf.emojiRow},e.emojis.map(r=>Ye.createElement(rF,{key:r.code,code:r.code,onPick:n})))},(t,o)=>t.row.key===o.row.key&&t.onPick===o.onPick),rF=Ye.memo(function(o){let{code:e,onPick:n}=o,[,r]=T(ME);return Ye.createElement(U.TouchableOpacity,{onPress:()=>n(e),style:[Tf.emojiItem],activeStyle:r.emojiItemHovered},Ye.createElement(_o,{code:e,size:24}))}),dy=40,LE=26,ME=j.create({emojiCategoryHeader:t=>({height:LE,backgroundColor:t.colors.background.main,paddingLeft:g.medium,paddingRight:g.medium,paddingTop:g.small,paddingBottom:g.small}),emojiItemHovered:t=>({backgroundColor:t.colors.itemHover})}),Tf=Oi.StyleSheet.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:g.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:g.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:g.small,paddingRight:g.small},emojiItem:{width:dy,height:dy,borderRadius:dy,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});c();var Ef=v(P());c();var Ws=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function _E(t){let{onValueChange:o,value:e=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=t,a=()=>{o()},s=r==="switch"?e?b.ThemeDark.CSS:b.ThemeLight.CSS:e?b.ThemeLight.CSS:b.ThemeDark.CSS,l=qh(n);return r==="switch"?Ef.default.createElement(F,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":e,onClick:a,style:[Ws.container,Ws[`${l}ParentBackground`]]},Ef.default.createElement(F,{style:[Ws.toggle,Ws.toggleSwitch,O.backgroundColor.main,O.margin.all100,e?Ws.toggleDarkMode:Ws.toggleLightMode]},Ef.default.createElement(s,{style:[Ws.toggleIcon,O.padding.all100]}))):Ef.default.createElement(Dt,{label:i,role:"switch",iconOnly:!0,leadingIcon:s,rounded:!0,style:Ws.toggleButton,kind:"muted",onClick:a,"aria-checked":e,"aria-label":i,preventFocusOnPress:!0})}c();c();c();function Of(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var wt=v(P(),1);function iF(t){if(Px()==="virtual"){let o=document.activeElement;wx(()=>{document.activeElement===o&&document.contains(t)&&HC(t)})}else HC(t)}function aF(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:o,visibility:e}=t.style,n=o!=="none"&&e!=="hidden"&&e!=="collapse";if(n){let{getComputedStyle:r}=t.ownerDocument.defaultView,{display:i,visibility:a}=r(t);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function sF(t,o){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&o&&o.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function NE(t,o){return t.nodeName!=="#comment"&&aF(t)&&sF(t,o)&&(!t.parentElement||NE(t.parentElement,t))}var PS=wt.default.createContext(null),Ut=null;function VE(t){let{children:o,contain:e,restoreFocus:n,autoFocus:r}=t,i=(0,wt.useRef)(),a=(0,wt.useRef)(),s=(0,wt.useRef)([]),{parentNode:l}=(0,wt.useContext)(PS)||{},u=(0,wt.useMemo)(()=>new Af({scopeRef:s}),[s]);vc(()=>{let m=l||so.root;if(so.getTreeNode(m.scopeRef)&&Ut&&!my(Ut,m.scopeRef)){let f=so.getTreeNode(Ut);f&&(m=f)}m.addChild(u),so.addNode(u)},[u,l]),vc(()=>{let m=so.getTreeNode(s);m.contain=e},[e]),vc(()=>{let m=i.current.nextSibling,f=[];for(;m&&m!==a.current;)f.push(m),m=m.nextSibling;s.current=f},[o]),fF(s,n,e),dF(s,e),gF(s,n,e),pF(s,r),(0,wt.useEffect)(()=>{if(s){let m=document.activeElement,f=null;if(zn(m,s.current)){for(let h of so.traverse())zn(m,h.scopeRef.current)&&(f=h);f===so.getTreeNode(s)&&(Ut=f.scopeRef)}return()=>{let h=so.getTreeNode(s).parent.scopeRef;(s===Ut||my(s,Ut))&&(!h||so.getTreeNode(h))&&(Ut=h),so.removeTreeNode(s)}}},[s]);let d=(0,wt.useMemo)(()=>cF(s),[]),p=(0,wt.useMemo)(()=>({focusManager:d,parentNode:u}),[u,d]);return wt.default.createElement(PS.Provider,{value:p},wt.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),o,wt.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function FE(){var t;return(t=(0,wt.useContext)(PS))===null||t===void 0?void 0:t.focusManager}function cF(t){return{focusNext(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,s=n||document.activeElement,l=e[0].previousElementSibling,u=Fc(Ul(e),{tabbable:r,accept:a},e);u.currentNode=zn(s,e)?s:l;let d=u.nextNode();return!d&&i&&(u.currentNode=l,d=u.nextNode()),d&&Us(d,!0),d},focusPrevious(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,s=n||document.activeElement,l=e[e.length-1].nextElementSibling,u=Fc(Ul(e),{tabbable:r,accept:a},e);u.currentNode=zn(s,e)?s:l;let d=u.previousNode();return!d&&i&&(u.currentNode=l,d=u.previousNode()),d&&Us(d,!0),d},focusFirst(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Fc(Ul(e),{tabbable:n,accept:r},e);i.currentNode=e[0].previousElementSibling;let a=i.nextNode();return a&&Us(a,!0),a},focusLast(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Fc(Ul(e),{tabbable:n,accept:r},e);i.currentNode=e[e.length-1].nextElementSibling;let a=i.previousNode();return a&&Us(a,!0),a}}}var xS=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],lF=xS.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";xS.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var uF=xS.join(':not([hidden]):not([tabindex="-1"]),');function Ul(t){return t[0].parentElement}function fy(t){let o=so.getTreeNode(Ut);for(;o&&o.scopeRef!==t;){if(o.contain)return!1;o=o.parent}return!0}function dF(t,o){let e=(0,wt.useRef)(),n=(0,wt.useRef)(null);vc(()=>{let r=t.current;if(!o){n.current&&(cancelAnimationFrame(n.current),n.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!fy(t))return;let u=document.activeElement,d=t.current;if(!zn(u,d))return;let p=Fc(Ul(d),{tabbable:!0},d);p.currentNode=u;let m=l.shiftKey?p.previousNode():p.nextNode();m||(p.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,m=l.shiftKey?p.previousNode():p.nextNode()),l.preventDefault(),m&&Us(m,!0)},a=l=>{(!Ut||my(Ut,t))&&zn(l.target,t.current)?(Ut=t,e.current=l.target):fy(t)&&!kS(l.target,t)?e.current?e.current.focus():Ut&&gy(Ut.current):fy(t)&&(e.current=l.target)},s=l=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{fy(t)&&!kS(document.activeElement,t)&&(Ut=t,document.body.contains(l.target)?(e.current=l.target,e.current.focus()):Ut&&gy(Ut.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",a,!1),r.forEach(l=>l.addEventListener("focusin",a,!1)),r.forEach(l=>l.addEventListener("focusout",s,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",a,!1),r.forEach(l=>l.removeEventListener("focusin",a,!1)),r.forEach(l=>l.removeEventListener("focusout",s,!1))}},[t,o]),(0,wt.useEffect)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function HE(t){return kS(t)}function zn(t,o){return o.some(e=>e.contains(t))}function kS(t,o=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of so.traverse(so.getTreeNode(o)))if(zn(t,e.current))return!0;return!1}function my(t,o){var e;let n=(e=so.getTreeNode(o))===null||e===void 0?void 0:e.parent;for(;n;){if(n.scopeRef===t)return!0;n=n.parent}return!1}function Us(t,o=!1){if(t!=null&&!o)try{iF(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function gy(t,o=!0){let e=t[0].previousElementSibling,n=Fc(Ul(t),{tabbable:o},t);n.currentNode=e;let r=n.nextNode();o&&!r&&(n=Fc(Ul(t),{tabbable:!1},t),n.currentNode=e,r=n.nextNode()),Us(r)}function pF(t,o){let e=wt.default.useRef(o);(0,wt.useEffect)(()=>{e.current&&(Ut=t,zn(document.activeElement,Ut.current)||gy(t.current)),e.current=!1},[t])}function fF(t,o,e){vc(()=>{if(o||e)return;let n=t.current,r=i=>{let a=i.target;zn(a,t.current)?Ut=t:HE(a)||(Ut=null)};return document.addEventListener("focusin",r,!1),n.forEach(i=>i.addEventListener("focusin",r,!1)),()=>{document.removeEventListener("focusin",r,!1),n.forEach(i=>i.removeEventListener("focusin",r,!1))}},[t,o,e])}function mF(t){let o=so.getTreeNode(Ut);for(;o&&o.scopeRef!==t;){if(o.nodeToRestore)return!1;o=o.parent}return o?.scopeRef===t}function gF(t,o,e){let n=(0,wt.useRef)(typeof document<"u"?document.activeElement:null);vc(()=>{let r=t.current;if(!o||e)return;let i=()=>{(!Ut||my(Ut,t))&&zn(document.activeElement,t.current)&&(Ut=t)};return document.addEventListener("focusin",i,!1),r.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),r.forEach(a=>a.removeEventListener("focusin",i,!1))}},[t,e]),vc(()=>{if(!o)return;so.getTreeNode(t).nodeToRestore=n.current;let r=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey)return;let a=document.activeElement;if(!zn(a,t.current))return;let s=so.getTreeNode(t).nodeToRestore,l=Fc(document.body,{tabbable:!0});l.currentNode=a;let u=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(s)||s===document.body)&&(s=null,so.getTreeNode(t).nodeToRestore=null),(!u||!zn(u,t.current))&&s){l.currentNode=s;do u=i.shiftKey?l.previousNode():l.nextNode();while(zn(u,t.current));i.preventDefault(),i.stopPropagation(),u?Us(u,!0):HE(s)?Us(s,!0):a.blur()}};return e||document.addEventListener("keydown",r,!0),()=>{e||document.removeEventListener("keydown",r,!0);let i=so.getTreeNode(t).nodeToRestore;if(o&&i&&(zn(document.activeElement,t.current)||document.activeElement===document.body&&mF(t))){let a=so.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let s=a.getTreeNode(t);for(;s;){if(s.nodeToRestore&&document.body.contains(s.nodeToRestore)){Us(s.nodeToRestore);return}s=s.parent}for(s=a.getTreeNode(t);s;){if(s.scopeRef&&so.getTreeNode(s.scopeRef)){gy(s.scopeRef.current,!0);return}s=s.parent}}})}}},[t,o,e])}function Fc(t,o,e){let n=o?.tabbable?uF:lF,r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var a;return!(o==null||(a=o.from)===null||a===void 0)&&a.contains(i)?NodeFilter.FILTER_REJECT:i.matches(n)&&NE(i)&&(!e||zn(i,e))&&(!o?.accept||o.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return o?.from&&(r.currentNode=o.from),r}var Df=class{get size(){return this.fastMap.size}getTreeNode(o){return this.fastMap.get(o)}addTreeNode(o,e,n){let r=this.fastMap.get(e??null),i=new Af({scopeRef:o});r.addChild(i),i.parent=r,this.fastMap.set(o,i),n&&(i.nodeToRestore=n)}addNode(o){this.fastMap.set(o.scopeRef,o)}removeTreeNode(o){if(o===null)return;let e=this.fastMap.get(o),n=e.parent;for(let i of this.traverse())i!==e&&e.nodeToRestore&&i.nodeToRestore&&e.scopeRef.current&&zn(i.nodeToRestore,e.scopeRef.current)&&(i.nodeToRestore=e.nodeToRestore);let r=e.children;n.removeChild(e),r.size>0&&r.forEach(i=>n.addChild(i)),this.fastMap.delete(e.scopeRef)}*traverse(o=this.root){if(o.scopeRef!=null&&(yield o),o.children.size>0)for(let e of o.children)yield*this.traverse(e)}clone(){let o=new Df;for(let e of this.traverse())o.addTreeNode(e.scopeRef,e.parent.scopeRef,e.nodeToRestore);return o}constructor(){Of(this,"fastMap",new Map),this.root=new Af({scopeRef:null}),this.fastMap.set(null,this.root)}},Af=class{addChild(o){this.children.add(o),o.parent=this}removeChild(o){this.children.delete(o),o.parent=void 0}constructor(o){Of(this,"children",new Set),Of(this,"contain",!1),this.scopeRef=o.scopeRef}},so=new Df;var Di=v(P());c();var IS=JSON.parse('{"toolbar":"toolbar_hJES6","toolbarGroup":"toolbarGroup_mD69e"}');var WE=Di.default.forwardRef(function(o,e){let{disabled:n=!1,orientation:r="horizontal",children:i,onTabToExit:a}=o;return Di.default.createElement(F,{role:"toolbar",style:IS.toolbar,ref:e,"aria-orientation":r},Di.default.createElement(VE,{restoreFocus:!0},Di.default.createElement(hF,{disabled:n,orientation:r,onTabToExit:a},i)))});function hF(t){let{children:o,disabled:e,orientation:n,onTabToExit:r}=t,i=FE();return Di.default.createElement(Di.default.Fragment,null,Di.default.Children.map(o,a=>a?typeof a=="object"?Di.default.cloneElement(a,{onKeyDown(s){({ArrowLeft:()=>{n==="horizontal"&&(i.focusPrevious(),s.preventDefault())},ArrowRight:()=>{n==="horizontal"&&(i.focusNext(),s.preventDefault())},ArrowUp:()=>{n==="vertical"&&(i.focusPrevious(),s.preventDefault())},ArrowDown:()=>{n==="vertical"&&(i.focusNext(),s.preventDefault())},Home:()=>{i.focusFirst(),s.preventDefault()},End:()=>{i.focusLast(),s.preventDefault()},Tab:()=>{r?.(s.shiftKey),s.preventDefault()}})[s.key]?.()},kind:a.props?.kind??"menuitem",disabled:a.props?.disabled||e}):a:null))}function Bf(t){let{onKeyDown:o,label:e,disabled:n=!1,children:r}=t;return Di.default.createElement(F,{role:"group",as:"span",style:IS.toolbarGroup,"aria-label":e},Di.default.Children.map(r,i=>i?Di.default.cloneElement(i,{onKeyDown:o,kind:i.props.kind??"menuitem",disabled:i.props.disabled||n}):null))}c();var xd=v(P());function UE(t){let{children:o,...e}=t;return xd.createElement(Nx,null,xd.createElement(jx,null,xd.createElement(Fx,null,xd.createElement(PE,{...e}),xd.createElement(pE,null),o)))}c();var Lf=v(P());c();var TS=JSON.parse('{"grabber":"grabber_p72PX","grabberIcon":"grabberIcon_ebrbU"}');var zE=Lf.forwardRef(function(o,e){let{style:n,size:r="small"}=o;return Lf.createElement(F,{ref:e,style:[n,TS.grabber]},Lf.createElement(b.GrabberVertical.CSS,{style:[TS.grabberIcon,O.icons[r]]}))});c();var ES=1024,KE=ES*1024;function Mf(t){return t>KE?`${(t/KE).toFixed(0)}MB`:t>ES?`${(t/ES).toFixed(0)}KB`:`${t}B`}function GE(t){return gc(t)?"Image":Uu(t)?"Code":t.contentType==="application/pdf"?"PDF":t.contentType.startsWith("text/")?"Text":"Binary"}c();var hy=v(P());function YE(t){let o=(0,hy.useContext)(Fn);yF(o,t),cf(()=>$E(o,t));let e=cf(()=>jE(o,t));(0,hy.useEffect)(()=>(e.current=jE(o,t),()=>{e.current&&window.gtag("config",e.current,{update:!0,groups:"not_tracking_views"})}),[t?.googleAnalytics?.enabled,t?.googleAnalytics?.trackingPrivateViews,t?.googleAnalytics?.trackingID,o])}function OS(t){return!!(t.googleAnalytics?.enabled&&typeof t.googleAnalytics.trackingID=="string")}function yF(t,o){na(e=>{DS(t,o)||e.writeSafe({type:"script",src:`https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${o?.googleAnalytics?.trackingID}`})})}function $E(t,o){DS(t,o)||typeof window>"u"||window?.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",o.googleAnalytics.trackingID))}function jE(t,o){if(DS(t,o)||typeof window>"u")return;window?.gtag||$E(t,o),window.gtag("config",o.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let e=Kg()==="rejected";return window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted"}),o?.googleAnalytics?.trackingID}function DS(t,o){return!o||!o.googleAnalytics||!OS(o)||t.preview||t.mode!=="public-content"&&!o?.googleAnalytics?.trackingPrivateViews}c();var yy=v(P());var JE=We("auth"),AS=$P(t=>{let{customToken:o,waitUserReady:e=!0}=t;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!o&&!e?{customToken:o}:new ys("auth.initialize").wrap(async()=>{if(o)try{JE.info("authenticating with custom token before subscribing to auth"),await dg.auth().signInWithCustomToken(o),await dg.auth().currentUser?.getIdToken(!0)}catch(r){JE.critical("Error during auth with custom token",r)}return e!==!1&&await new Promise((r,i)=>{let a=dg.auth().onAuthStateChanged(()=>{a(),r()},i)}),{customToken:o}})});function qE(t){return AS.readAsync(t)}function by(t){let{children:o}=t;if(typeof window<"u"){if(AS.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");AS.read({})}return yy.createElement(yy.Fragment,null,o)}c();c();c();function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},zs.apply(this,arguments)}var Id;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Id||(Id={}));var XE=function(t){return t};var QE="beforeunload";var bF="popstate";function t1(t){t===void 0&&(t={});var o=t,e=o.window,n=e===void 0?document.defaultView:e,r=n.history;function i(){var I=n.location,L=I.pathname,B=I.search,Y=I.hash,$=r.state||{};return[$.idx,XE({pathname:L,search:B,hash:Y,state:$.usr||null,key:$.key||"default"})]}var a=null;function s(){if(a)f.call(a),a=null;else{var I=Id.Pop,L=i(),B=L[0],Y=L[1];if(f.length){if(B!=null){var $=d-B;$&&(a={action:I,location:Y,retry:function(){E($*-1)}},E($))}}else R(I)}}n.addEventListener(bF,s);var l=Id.Pop,u=i(),d=u[0],p=u[1],m=e1(),f=e1();d==null&&(d=0,r.replaceState(zs({},r.state,{idx:d}),""));function h(I){return typeof I=="string"?I:BS(I)}function y(I,L){return L===void 0&&(L=null),XE(zs({pathname:p.pathname,hash:"",search:""},typeof I=="string"?LS(I):I,{state:L,key:vF()}))}function S(I,L){return[{usr:I.state,key:I.key,idx:L},h(I)]}function w(I,L,B){return!f.length||(f.call({action:I,location:L,retry:B}),!1)}function R(I){l=I;var L=i();d=L[0],p=L[1],m.call({action:l,location:p})}function k(I,L){var B=Id.Push,Y=y(I,L);function $(){k(I,L)}if(w(B,Y,$)){var G=S(Y,d+1),q=G[0],J=G[1];try{r.pushState(q,"",J)}catch{n.location.assign(J)}R(B)}}function x(I,L){var B=Id.Replace,Y=y(I,L);function $(){x(I,L)}if(w(B,Y,$)){var G=S(Y,d),q=G[0],J=G[1];r.replaceState(q,"",J),R(B)}}function E(I){r.go(I)}var A={get action(){return l},get location(){return p},createHref:h,push:k,replace:x,go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(L){return m.push(L)},block:function(L){var B=f.push(L);return f.length===1&&n.addEventListener(QE,ZE),function(){B(),f.length||n.removeEventListener(QE,ZE)}}};return A}function ZE(t){t.preventDefault(),t.returnValue=""}function e1(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(n){return n!==e})}},call:function(e){t.forEach(function(n){return n&&n(e)})}}}function vF(){return Math.random().toString(36).substr(2,8)}function BS(t){var o=t.pathname,e=o===void 0?"/":o,n=t.search,r=n===void 0?"":n,i=t.hash,a=i===void 0?"":i;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function LS(t){var o={};if(t){var e=t.indexOf("#");e>=0&&(o.hash=t.substr(e),t=t.substr(0,e));var n=t.indexOf("?");n>=0&&(o.search=t.substr(n),t=t.substr(0,n)),t&&(o.pathname=t)}return o}var zl=We("history");function o1(){let t=t1(),o=[],e=!1,n,r=()=>{let a=o.shift();return a?(a(),!1):!0},i=a=>{e?o.push(a):a()};return{get location(){return t.location},listen:a=>t.listen(s=>{a({location:s.location,action:s.action})}),push:a=>{let{state:s,...l}=a;i(()=>{zl.info("push",l,s),t.push(l,s)})},replace:a=>{let{state:s,...l}=a;i(()=>{zl.info("replace",l,s),t.replace(l,s)})},go:a=>{i(()=>{zl.info("go",a),t.go(a)})},transaction:a=>{if(e)a();else{let s=t.listen(()=>{r()&&s()});e=!0,a(),e=!1,r()&&s()}},block:(a,s)=>{if(n)throw new Error("History is already blocked");n=a;let l,u=()=>{zl.info("stop blocking history"),l&&(l(),l=void 0)},d=()=>{zl.info("start blocking history"),l=t.block(p=>{let m=()=>{zl.info("unblock history transaction"),u(),p.retry(),d()},f=a(t.location,p.location);if(zl.info(`history blocked=${f}`),!f){m();return}s({location:p.location,unblock:m})})};return d(),()=>{u(),n=void 0}},isBlocked:a=>n?n(t.location,a):!1}}c();function r1(t){let{basename:o="",location:e="/",context:n}=t,r=(a,s)=>{n.action=s,n.location=CF(o,n1(a)),n.url=BS(n.location)};return{staticContext:n,location:SF(o,n1(LS(e))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()},block:(a,s)=>()=>{},isBlocked:()=>!1}}function i1(t){return t.charAt(0)==="/"?t:`/${t}`}function CF(t,o){return t?{...o,pathname:i1(t)+o.pathname}:o}function SF(t,o){if(!t||!o.pathname)return o;let e=i1(t);return o.pathname.indexOf(e)!==0?o:{...o,pathname:o.pathname.substr(e.length)}}function n1(t){let o={hash:"",search:"",pathname:"",...t,key:"",state:void 0};return o.search&&o.search.charAt(0)!=="?"&&(o.search=`?${o.search}`),o.hash&&o.hash.charAt(0)!=="#"&&(o.hash=`#${o.hash}`),o}c();var Kl=v(P()),a1=v(Gx());function MS(t){let{history:o,children:e}=t,n=Kl.useMemo(()=>o||o1(),[o]),r=Kl.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,a1.useSubscription)(r);return Kl.createElement(AI.Provider,{value:n},Kl.createElement(BI.Provider,{value:i},e))}function s1(t){let{children:o,...e}=t,n=r1(e);return Kl.createElement(MS,{history:n},o)}c();var _S=v(P());function c1(t,o){let{navigate:e}=we(),n=Ga(),r=rx(t),i=(0,_S.useCallback)(l=>e({screen:{sideSheet:{type:t,tab:l}}},{replace:!0}),[e,t]),a=(0,_S.useCallback)(()=>e({screen:{sideSheet:void 0}}),[e]),s=("sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:o)??r[0];return{opened:"sideSheet"in n.screen&&n.screen.sideSheet?.type===t,selectedTab:s,changeSelectedTab:i,close:a}}c();var wF=Vt({key:"firestoreReacheable",default:!0,effects:[t=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{t.setSelf(!1)})}]});function l1(){return ar(wF)}c();var u1=v(P());var NS=Vt({key:"hoveredCommentNodeAtom",default:null}),cpe=cg({key:"newCommentValueAtom",default:()=>ju("","comment")});function d1(){let t=qr(NS);return u1.useMemo(()=>({highlight:(o,e={highlighting:!0,postButton:!0})=>{let n=o?ea.getOriginalKey(o):null;t(r=>n?(r&&r.node===n&&r.postButton&&(e.postButton=r.postButton),{node:n,...e}):null)}}),[t])}c();var f1=v(P());var p1=Vt({key:"filesManagerAtom",default:null});function vy(){let t=qr(p1),o=WP();return f1.useMemo(()=>({prompt:e=>new Promise(n=>{t({options:e,onComplete:n})}),isOpen:()=>{let{isModified:e}=o(p1);return e}}),[t])}c();var m1=v(P());var VS=Vt({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function Td(){let t=qr(VS);return m1.useMemo(()=>({open:(o,e=0)=>{t({medias:o,currentIndex:e})}}),[t])}c();var _f=Vt({key:"mobileToCOpenedAtom",default:!1});c();function RF(t){return t.themePreset?Q.PRIMARY:t.primaryColor??Q.PRIMARY}function PF(t,o,e){let n=Q.WHITE,r=Q.darkModeGreyScale.xdark;switch(t){case"default":return o==="dark"?r:n;case"bold":return e;case"contrast":return o==="dark"?n:r;case"custom":return Q.fuchsia.light;default:Ee(t)}}function kF(t,o,e){switch(t){case"default":case"contrast":return o;case"bold":case"custom":return $a(e)==="light"?Q.lightModeText.base:Q.darkModeText.base;default:Ee(t)}}function g1(t){return mk(t.headerTheme,t.themeMode)==="none"}function xF(t,o){let{primaryColor:e,headerBackgroundColor:n,headerLinksColor:r}=t.themeCustomizations?.[o]||{},a=g1(t)?"default":Qi(t),s=RF(t),l=e??s,u=PF(a,o,l),d=n??u,p=kF(a,l,d);return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:r??p}}function IF(t,o){let e=o??t.themeMode??Gp,{headerLogoURL:n,footerLogoURL:r}=t.themeCustomizations?.[e]||{};return{headerLogoURL:n??t.logoURL,footerLogoURL:r??t.footer?.logoURL}}function Cy(t,o){let e=o??t.themeMode??Gp;return{...xF(t,e),...IF(t,e),headerDisabled:g1(t)}}c();var h1=v(P());var TF=We("app:events"),EF=t=>(t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function OF(){let t=document.cookie?document.cookie.split("; "):[],o={};for(let e=0;e<t.length;e++){let n=t[e].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);o[i]=EF(r)}catch(i){TF.warning(`Couldn't parse cookie ${t[e]}. Error: `,i)}}return o}function y1(t,o){return h1.useEffect(()=>{DF(t,o)},[t.key,o]),null}async function DF(t,o){if(!t.integrations||!o)return;let e=await Cx(),n=OF(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await Ka()).analytics.trackViewInSpaceById(t.key,{pageId:o,visitor:{anonymousId:e,cookies:n,userAgent:a},url:r,referrer:i})}c();function b1(t,o){let e=o.type==="space"&&typeof o.changeRequest=="string"?o.changeRequest:void 0;return KI(t,e)}c();var Sy=v(P());function v1(t){let o=Sy.useContext(Fn),e=o.preview||o.mode!=="public-content"||!t?.intercom?.enabled?void 0:t?.intercom?.appID,n=tE();return na(r=>{n&&e&&r.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),Sy.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}c();var Nf=v(P());var FS=Nf.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),Gl=new Map;function C1(t){let{withComments:o,spaceKey:e,pageKey:n,changeRequestKey:r,children:i}=t,a={space:e,page:n,changeRequest:r||null},[s]=Ic([o?UP(nx(a),zP("resolved","==",null),KP("postedAt","asc")):null]);Nf.default.useEffect(()=>{let u=(s||[]).reduce((d,p)=>p.node?{...d,[p.node]:[...d[p.node]??[],p]}:d,{});Gl.forEach((d,p)=>{let m=u[p]??[],[f,h]=d||[[],[]];AF(m,f)||(Gl.set(p,[m,h]),h.forEach(y=>y()))})},[s]);let l=Nf.default.useCallback(u=>({getCurrentValue:()=>{let d=Gl.get(u);return d?d[0]:[]},subscribe:d=>{let p=Gl.get(u),[m,f]=p||[[],[]];return Gl.set(u,[m,[...f,d]]),()=>{let h=Gl.get(u),[y,S]=h||[[],[]],w=S.filter(R=>R!==d);Gl.set(u,[y,w])}}}),[]);return Nf.default.createElement(FS.Provider,{value:l},i)}function AF(t,o){return t.length!==o.length?!1:t.every(e=>{let n=o.find(r=>e.key===r.key);return n?BF(e,n):!1})}function BF(t,o){return!(t.key!==o.key||t.resolved!==o.resolved||wC(t.replies)!==wC(o.replies))}c();function HS(t){if(!t.contributors.length)throw new Error("Expected a snippet to have at least one contributor");return t.contributors[0]}function S1(t){if(t.title)return t.title;if(t.source.sourceId==="gitbook")return"Untitled snippet";let o=HS(t);return`Snippet captured ${o.object==="user"?`by ${o.displayName}`:`from ${o.name}`}`}c();var hr=v(P()),Ed=v(H());c();var R1=v(P());c();var w1=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function WS(t){let{node:o}=t,{screen:e}=Ga(),n=ar(NS);if(!o)return null;let r=e.type==="space"&&e.sideSheet?.type==="comments"?e.sideSheet.node:null;return(n&&n.highlighting&&n.node!==r?n.node:null)===o||r===o?R1.default.createElement(F,{style:[w1.commentHalo],as:"span",contentEditable:!1}):null}WS.displayName="BlockCommentHalo";c();var Xa=v(P()),P1=v(Gx());var k1=t=>{let{nodeKey:o,visible:e,buttonSize:n,style:r,shortcutsActive:i}=t,a=Xa.useContext(FS),{navigate:s}=we(),l=Xa.useMemo(()=>a(o),[o]),u=(0,P1.useSubscription)(l),d=Xa.useMemo(()=>(u??[]).reduce((S,w)=>{let R=Object.values(w.replies).reduce((k,x)=>k+x.count,0);return 1+S+R},0),[u]),p=d>0,m=u?.[0],f=()=>{m&&s({screen:{type:"space",space:m.space,sideSheet:{type:"comments",node:m.node??void 0,comment:m.key}}})},h=()=>{s({screen:{sideSheet:{type:"comments",node:o,context:"post",comment:void 0}}})},y=()=>p&&m?f():h();return ri(i?{[ze.EDITOR_COMMENT]:y}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,m]),Xa.createElement(ve,{editable:!1,style:[e||p?mt.visible:mt.hidden,r],"data-hide-on-drag":!0},Xa.createElement(qx,{kind:"secondary",size:"small"},Xa.createElement(Dt,{leadingIcon:b.Comment.CSS,tooltipTitle:p?`${d} Comment${d>1?"s":""}`:"Add comment",onPress:y,size:n,iconOnly:!p,label:p?`${d}`:"Comment"}),p?Xa.createElement(Dt,{leadingIcon:b.Plus.CSS,size:n,tooltipTitle:"Leave another comment",label:"Leave another comment",iconOnly:!0,onPress:h}):null))};var on={};VP(on,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>Ry,MAX_PAGE_OUTLINE_WIDTH:()=>Hc,PAGE_BODY_DESKTOP_H_PADDING:()=>zt,PAGE_BODY_DESKTOP_WIDTH:()=>wy,PAGE_BODY_MAX_WIDTH:()=>Hr,PAGE_BODY_MOBILE_H_PADDING:()=>tn,PAGE_OUTLINE_WIDTH:()=>KS,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>GS,PUBLIC_MOBILE_HEADER_HEIGHT:()=>LF,SPACE_HEADER_HEIGHT:()=>US,TOC_DESKTOP_WIDTH:()=>zS,columnsWidthThreadhold:()=>Vf,getPageOutlineWrapperWidth:()=>jS,getToCWrapperDesktopWidth:()=>x1,pageSwitchThreadhold:()=>Wc});c();var US=_.L,Hr=750,zt=110,tn=g.medium,wy=Hr+2*zt,zS=300,Ry=300,KS=220,Hc=300,GS=_.XL,LF=_.L;function Vf(t,o=0){let e=o+zS+wy+KS;return t===2||(e+=Ry-tn),e}function Wc(t=0){return t+wy}function x1(t){let o=`(100vw - ${wy}px) / 2 - ${t||0}px`;return`max(${zS}px, calc(${o}))`}function jS(t,o){let e=`100vw - ${x1(t)} - ${Hr}px - ${zt}px - ${typeof o>"u"?zt:o||0}px - ${t||0}px`;return`max(${KS}px, calc(${e}))`}function MF(t){let{children:o,renderMode:e,isDiffViewEnabled:n,isFullPage:r,isPDF:i,interactive:a}=t,{desktopSidebarWidth:s}=hr.useContext(sa),{customBreakpointsPageBodyStyles:l}=hr.useMemo(()=>({customBreakpointsPageBodyStyles:{[Vf(2,s)]:C.justifyCenter}}),[s]);if(e==="unstyled")return hr.createElement(Ed.View,{...a?.events},o);let u=e==="full-width"?hr.Fragment:Od;return hr.createElement(Ed.View,{style:[C.flex1,i?I1.pdfContainer:null]},hr.createElement(u,null,hr.createElement(Z.View,{style:[C.flex1,C.row,r?C.justifyCenter:C.justifyEnd],mobileStyle:[C.justifyCenter],customBreakpointsStyles:l,...a?.events},hr.createElement(Ed.View,{style:[C.flex1]},hr.createElement(Z.View,{mobileStyle:[n?I1.pageBodyMobileWithDiff:null]},o)))))}function T1(t){let{isCommentMarginVisible:o,isDiffViewEnabled:e,isFullPage:n}=t,r=ot();return hr.useMemo(()=>[i=>hr.createElement(MF,{...i,isPDF:r,isDiffViewEnabled:e,isCommentMarginVisible:o,isFullPage:n}),r||!o?void 0:k1],[e,n,o,r])}var I1=Ed.StyleSheet.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:Hr+2*zt},pageBodyWithComments:{maxWidth:Hr+zt,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:tn*2},pageBodyDesktopLeftMargin:{marginLeft:zt},pageBodyDesktopRightPadding:{paddingRight:zt},pageBodyMobileLeftMargin:{marginLeft:tn},pageBodyMobileRightPadding:{paddingRight:tn},pageBodyPDFLeftMargin:{marginLeft:tn},pageBodyPDFRightPadding:{paddingRight:tn}});c();c();var rt=v(P()),va=v(H());c();var yr=v(P());c();var Dd=JSON.parse('{"popover":"popover_41P2r","toolbar":"toolbar_EEKEO","annotatedText":"annotatedText_DZvL5","active":"active_mnp9Q"}');c();var Ad=v(P());function E1(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=()=>{e.change(i=>{i.unwrapInlineByKey(o.key)})};return Ad.createElement(Vn,{preferredAlignment:"start",kind:"large"},Ad.createElement(F,{style:[Dd.popover,O.flex.column,O.padding.all400]},Ad.createElement(fr,{fragment:Ba}),n?null:Ad.createElement(F,{style:[Dd.toolbar]},Ad.createElement(Dt,{size:"small",kind:"secondary",leadingIcon:b.Trashcan.CSS,label:"Remove annotation",iconOnly:!0,title:"Remove annotation",onPress:r,preventFocusOnPress:!0}))))}function O1(t){let{editor:o,node:e,children:n,attributes:r,isFocused:i}=t,{readOnly:a}=o,s=e.getFragmentByKey(Ba),{selection:l}=o.value,u=Yt(l)&&!!l.hasAnchorIn(s),d=i&&u,[p,m]=yr.useState(!1),f=Yt(l)&&(p||d),h=yr.useCallback(()=>{a||o.change(k=>{let x=e.getFragmentByKey(Ba);x&&(Yt(k.value.selection)?(u&&k.blur(),k.collapseToEndOf(x).focus()):k.selectText(ke.fromBlockRange(k.value.selection,k.value.document)).collapseToEndOf(x).focus())})},[u,a,o,e.key]),y=yr.useCallback(()=>{a||o.change(k=>{let x=k.value.document.getDescendant(e.key);if(x&&x.isInline()){let E=x.getFragmentByKey(Ba);E&&Yt(k.value.selection)&&k.value.selection.hasEdgeIn(E)&&k.collapseToEndOf(x)}})},[a,o,e.key]);yr.useEffect(()=>{a||(f?h():y())},[f,a,h,y]),yr.useEffect(()=>{a||!u&&p&&m(!1)},[u,p,a]);let S=yr.useCallback(()=>{m(!0)},[]),w=yr.useCallback(()=>{m(!1)},[]),{pressProps:R}=Rx({onPress:S});return yr.createElement(qg.Provider,{value:w},yr.createElement(Wa,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:f,anchor:({ref:k})=>yr.createElement(pe,{ref:k,style:[de.contentParagraph,Dd.annotatedText,{[Dd.active]:f}],...r,...R},n)},yr.createElement(E1,{node:e,editor:o})))}c();var YS=v(Pi());var D1={onKeyDown:(t,o,e)=>{if(!Ao(o.value.selection)&&((0,YS.default)("mod+enter",t)||(0,YS.default)("esc",t))){let{value:n}=o,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment"||a.type!==Ba)return;let s=i.getParent(a.key);return s?(o.collapseToEndOf(s),o):void 0}}};c();var Io=v(P()),vb=v(H());c();var Wo=v(P());c();var $S=JSON.parse('{"hitArea":"hitArea_oHT6S","buttonWrapper":"buttonWrapper_3J38G","hideTransition":"hideTransition_k0Mlc"}');c();function ct(t,o,e=[]){return se({groups:[...e,{key:"block",commands:[{key:"delete",title:"Delete",icon:b.Trashcan,trigger:()=>{t.change(n=>{if(Ao(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(o).focus()})}}]}]})}c();var $n=v(P());c();var J1=[{key:"youtube",title:"Youtube",icon:A1()},{key:"soundcloud",title:"Soundcloud",icon:B1()},{key:"loom",title:"Loom",icon:L1()},{key:"github",title:"GitHub Gist",icon:M1(),iconDark:_1()},{key:"framer",title:"Framer",icon:N1(),iconDark:V1()},{key:"codepen",title:"Codepen",icon:F1(),iconDark:H1()},{key:"dribbble",title:"Dribbble",icon:W1()},{key:"trello",title:"Trello",icon:U1()},{key:"typeform",title:"Typeform",icon:z1(),iconDark:K1()},{key:"google-docs",title:"Google Docs",icon:G1()},{key:"google-sheets",title:"Google Sheets",icon:j1()},{key:"google-slides",title:"Google Slides",icon:Y1()},{key:"google-form",title:"Google Forms",icon:$1()}];c();var Qa=v(P()),q1=v(H());c();var Ks=v(P());var Gs=Qh(t=>t.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),JS={blocks:{},onContentPaste:{},suggestIntegrations:()=>({}),logAnalyticsEvent:()=>{},blockLayoutComponent:({children:t})=>Ks.createElement(Ks.Fragment,null,t),integrationBlocksContext:null,integrationBlocksRemote:GI(()=>{throw new Error("not implemented")}),integrationsBlocksSubscription:{getCurrentValue:()=>({}),subscribe:()=>()=>{}}},ce=Ks.createContext(JS),Ai=Ks.createContext({sections:$u(),active:null,selected:null,setActive:()=>{}}),Uc=Ks.createContext("left"),Wr=Ks.createContext("root");function X1(t){let{onInsert:o,onClose:e}=t,{logAnalyticsEvent:n}=Qa.useContext(ce),[r,i]=Qa.useState(""),a=wi(r),s=()=>{if(!a)return;let l=fg(r);o(Ig.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:Bn,embedHostname:new URL(l).hostname})};return Qa.createElement(Co,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:e,footer:Qa.createElement(q1.View,{style:[C.row,C.justifyEnd]},Qa.createElement(W,{kind:"secondary",onPress:e,style:g.Margin.right200},"Cancel"),Qa.createElement(W,{kind:"primary",disabled:!a,onPress:s},"Insert"))},Qa.createElement(At,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:s,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}c();var yt=v(P()),js=v(H());c();var Ff=v(P()),Q1=Ff.default.createContext(null);function Z1(t){let{value:o,children:e}=t,n=Ff.default.useMemo(()=>({space:o.space,page:o.page,snippet:o.snippet,..."changeRequest"in o&&o.changeRequest?{changeRequest:o.changeRequest}:{},..."revision"in o&&o.revision?{revision:o.revision}:{}}),[o.space,o.page,o.snippet,"changeRequest"in o?o.changeRequest:void 0,"revision"in o?o.revision:void 0]);return Ff.default.createElement(Q1.Provider,{value:n},e)}function dt(){let t=Ff.default.useContext(Q1);if(t===null)throw new Error("useContentReferenceContext expects a ContentReferenceContextProvider above it");return t}c();var dw=v(P());c();var la=sr({getKey:t=>{let[,...o]=t;return CC(o)},getValue:async([t,o,e,n])=>{let r=[];return!o||!sx(o,e)?[null,r,!1]:await af(async()=>[await ax(o,e,{hiveClient:t,firestoreReader:{getDocument:a=>(r.some(s=>bs(s)===bs(a))||r.push(a),Ml.readAsync(a)),getCollection:a=>(r.some(s=>bs(a)===bs(s))||r.push(a),Ml.readAsync(a))}}),r,!1],[null,r,!0])},toJS(t){return[t[0],t[1].map(RC),t[2]]},fromJS(t){return[t[0],t[1].map(PC),t[2]]}}),Py=sr({getKey:t=>{let[,...o]=t;return CC(o)},getValue:async([t,o,e])=>{let n=[];return await af(async()=>[await Fg(o,e,{hiveClient:t,firestoreReader:{getDocument:i=>(n.some(a=>bs(a)===bs(i))||n.push(i),Ml.readAsync(i)),getCollection:i=>(n.some(a=>bs(i)===bs(a))||n.push(i),Ml.readAsync(i))}}),n,!1],[null,n,!0])},toJS(t){return[t[0],t[1].map(RC),t[2]]},fromJS(t){return[t[0],t[1].map(PC),t[2]]}});c();c();var z=v(P()),Kc=v(jN());c();var So=v(P());var Hf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jl(t){let o=Object.prototype.toString.call(t);return o==="[object Window]"||o==="[object global]"}function ky(t){return"nodeType"in t}function Kn(t){var o,e;return t?jl(t)?t:ky(t)&&(o=(e=t.ownerDocument)==null?void 0:e.defaultView)!=null?o:window:window}function xy(t){let{Document:o}=Kn(t);return t instanceof o}function Ld(t){return jl(t)?!1:t instanceof Kn(t).HTMLElement}function tO(t){return t instanceof Kn(t).SVGElement}function Yl(t){return t?jl(t)?t.document:ky(t)?xy(t)?t:Ld(t)?t.ownerDocument:document:document:document}var ua=Hf?So.useLayoutEffect:So.useEffect;function Wf(t){let o=(0,So.useRef)(t);return ua(()=>{o.current=t}),(0,So.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return o.current==null?void 0:o.current(...n)},[])}function oO(){let t=(0,So.useRef)(null),o=(0,So.useCallback)((n,r)=>{t.current=setInterval(n,r)},[]),e=(0,So.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[o,e]}function Md(t,o){o===void 0&&(o=[t]);let e=(0,So.useRef)(t);return ua(()=>{e.current!==t&&(e.current=t)},o),e}function _d(t,o){let e=(0,So.useRef)();return(0,So.useMemo)(()=>{let n=t(e.current);return e.current=n,n},[...o])}function Uf(t){let o=Wf(t),e=(0,So.useRef)(null),n=(0,So.useCallback)(r=>{r!==e.current&&o?.(r,e.current),e.current=r},[]);return[e,n]}function zf(t){let o=(0,So.useRef)();return(0,So.useEffect)(()=>{o.current=t},[t]),o.current}var qS={};function Kf(t,o){return(0,So.useMemo)(()=>{if(o)return o;let e=qS[t]==null?0:qS[t]+1;return qS[t]=e,t+"-"+e},[t,o])}function nO(t){return function(o){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((i,a)=>{let s=Object.entries(a);for(let[l,u]of s){let d=i[l];d!=null&&(i[l]=d+t*u)}return i},{...o})}}var $l=nO(1),Gf=nO(-1);function ZF(t){return"clientX"in t&&"clientY"in t}function Iy(t){if(!t)return!1;let{KeyboardEvent:o}=Kn(t.target);return o&&t instanceof o}function eH(t){if(!t)return!1;let{TouchEvent:o}=Kn(t.target);return o&&t instanceof o}function Jl(t){if(eH(t)){if(t.touches&&t.touches.length){let{clientX:o,clientY:e}=t.touches[0];return{x:o,y:e}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:o,clientY:e}=t.changedTouches[0];return{x:o,y:e}}}return ZF(t)?{x:t.clientX,y:t.clientY}:null}var Bd=Object.freeze({Translate:{toString(t){if(!t)return;let{x:o,y:e}=t;return"translate3d("+(o?Math.round(o):0)+"px, "+(e?Math.round(e):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:o,scaleY:e}=t;return"scaleX("+o+") scaleY("+e+")"}},Transform:{toString(t){if(t)return[Bd.Translate.toString(t),Bd.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:o,duration:e,easing:n}=t;return o+" "+e+"ms "+n}}}),eO="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rO(t){return t.matches(eO)?t:t.querySelector(eO)}c();var ql=v(P()),tH={display:"none"};function iO(t){let{id:o,value:e}=t;return ql.default.createElement("div",{id:o,style:tH},e)}var oH={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function aO(t){let{id:o,announcement:e}=t;return ql.default.createElement("div",{id:o,style:oH,role:"status","aria-live":"assertive","aria-atomic":!0},e)}function sO(){let[t,o]=(0,ql.useState)("");return{announce:(0,ql.useCallback)(n=>{n!=null&&o(n)},[]),announcement:t}}var bO=(0,z.createContext)(null);function iw(t){let o=(0,z.useContext)(bO);(0,z.useEffect)(()=>{if(!o)throw new Error("useDndMonitor must be used within a children of <DndContext>");return o(t)},[t,o])}function nH(){let[t]=(0,z.useState)(()=>new Set),o=(0,z.useCallback)(n=>(t.add(n),()=>t.delete(n)),[t]);return[(0,z.useCallback)(n=>{let{type:r,event:i}=n;t.forEach(a=>{var s;return(s=a[r])==null?void 0:s.call(a,i)})},[t]),o]}var rH={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},iH={onDragStart(t){let{active:o}=t;return"Picked up draggable item "+o.id+"."},onDragOver(t){let{active:o,over:e}=t;return e?"Draggable item "+o.id+" was moved over droppable area "+e.id+".":"Draggable item "+o.id+" is no longer over a droppable area."},onDragEnd(t){let{active:o,over:e}=t;return e?"Draggable item "+o.id+" was dropped over droppable area "+e.id:"Draggable item "+o.id+" was dropped."},onDragCancel(t){let{active:o}=t;return"Dragging was cancelled. Draggable item "+o.id+" was dropped."}};function aH(t){let{announcements:o=iH,container:e,hiddenTextDescribedById:n,screenReaderInstructions:r=rH}=t,{announce:i,announcement:a}=sO(),s=Kf("DndLiveRegion"),[l,u]=(0,z.useState)(!1);if((0,z.useEffect)(()=>{u(!0)},[]),iw((0,z.useMemo)(()=>({onDragStart(p){let{active:m}=p;i(o.onDragStart({active:m}))},onDragMove(p){let{active:m,over:f}=p;o.onDragMove&&i(o.onDragMove({active:m,over:f}))},onDragOver(p){let{active:m,over:f}=p;i(o.onDragOver({active:m,over:f}))},onDragEnd(p){let{active:m,over:f}=p;i(o.onDragEnd({active:m,over:f}))},onDragCancel(p){let{active:m,over:f}=p;i(o.onDragCancel({active:m,over:f}))}}),[i,o])),!l)return null;let d=z.default.createElement(z.default.Fragment,null,z.default.createElement(iO,{id:n,value:r.draggable}),z.default.createElement(aO,{id:s,announcement:a}));return e?(0,Kc.createPortal)(d,e):d}var Vo;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Vo||(Vo={}));function Ey(){}function aw(t,o){return(0,z.useMemo)(()=>({sensor:t,options:o??{}}),[t,o])}var da=Object.freeze({x:0,y:0});function sH(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function cH(t,o){let e=Jl(t);if(!e)return"0 0";let n={x:(e.x-o.left)/o.width*100,y:(e.y-o.top)/o.height*100};return n.x+"% "+n.y+"%"}function lH(t,o){let{data:{value:e}}=t,{data:{value:n}}=o;return e-n}function uH(t,o){let{data:{value:e}}=t,{data:{value:n}}=o;return n-e}function dH(t){let{left:o,top:e,height:n,width:r}=t;return[{x:o,y:e},{x:o+r,y:e},{x:o,y:e+n},{x:o+r,y:e+n}]}function pH(t,o){if(!t||t.length===0)return null;let[e]=t;return o?e[o]:e}function fH(t,o){let e=Math.max(o.top,t.top),n=Math.max(o.left,t.left),r=Math.min(o.left+o.width,t.left+t.width),i=Math.min(o.top+o.height,t.top+t.height),a=r-n,s=i-e;if(n<r&&e<i){let l=o.width*o.height,u=t.width*t.height,d=a*s,p=d/(l+u-d);return Number(p.toFixed(4))}return 0}var mH=t=>{let{collisionRect:o,droppableRects:e,droppableContainers:n}=t,r=[];for(let i of n){let{id:a}=i,s=e.get(a);if(s){let l=fH(s,o);l>0&&r.push({id:a,data:{droppableContainer:i,value:l}})}}return r.sort(uH)};function gH(t,o){let{top:e,left:n,bottom:r,right:i}=o;return e<=t.y&&t.y<=r&&n<=t.x&&t.x<=i}var vO=t=>{let{droppableContainers:o,droppableRects:e,pointerCoordinates:n}=t;if(!n)return[];let r=[];for(let i of o){let{id:a}=i,s=e.get(a);if(s&&gH(n,s)){let u=dH(s).reduce((p,m)=>p+sH(n,m),0),d=Number((u/4).toFixed(4));r.push({id:a,data:{droppableContainer:i,value:d}})}}return r.sort(lH)};function hH(t,o,e){return{...t,scaleX:o&&e?o.width/e.width:1,scaleY:o&&e?o.height/e.height:1}}function CO(t,o){return t&&o?{x:t.left-o.left,y:t.top-o.top}:da}function yH(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,s)=>({...a,top:a.top+t*s.y,bottom:a.bottom+t*s.y,left:a.left+t*s.x,right:a.right+t*s.x}),{...e})}}var bH=yH(1);function SO(t){if(t.startsWith("matrix3d(")){let o=t.slice(9,-1).split(/, /);return{x:+o[12],y:+o[13],scaleX:+o[0],scaleY:+o[5]}}else if(t.startsWith("matrix(")){let o=t.slice(7,-1).split(/, /);return{x:+o[4],y:+o[5],scaleX:+o[0],scaleY:+o[3]}}return null}function vH(t,o,e){let n=SO(o);if(!n)return t;let{scaleX:r,scaleY:i,x:a,y:s}=n,l=t.left-a-(1-r)*parseFloat(e),u=t.top-s-(1-i)*parseFloat(e.slice(e.indexOf(" ")+1)),d=r?t.width/r:t.width,p=i?t.height/i:t.height;return{width:d,height:p,top:u,right:l+d,bottom:u+p,left:l}}var CH={ignoreTransform:!1};function Xf(t,o){o===void 0&&(o=CH);let e=t.getBoundingClientRect();if(o.ignoreTransform){let{transform:u,transformOrigin:d}=Kn(t).getComputedStyle(t);u&&(e=vH(e,u,d))}let{top:n,left:r,width:i,height:a,bottom:s,right:l}=e;return{top:n,left:r,width:i,height:a,bottom:s,right:l}}function cO(t){return Xf(t,{ignoreTransform:!0})}function SH(t){let o=t.innerWidth,e=t.innerHeight;return{top:0,left:0,right:o,bottom:e,width:o,height:e}}function wH(t,o){return o===void 0&&(o=Kn(t).getComputedStyle(t)),o.position==="fixed"}function RH(t,o){o===void 0&&(o=Kn(t).getComputedStyle(t));let e=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{let i=o[r];return typeof i=="string"?e.test(i):!1})}function sw(t,o){let e=[];function n(r){if(o!=null&&e.length>=o||!r)return e;if(xy(r)&&r.scrollingElement!=null&&!e.includes(r.scrollingElement))return e.push(r.scrollingElement),e;if(!Ld(r)||tO(r)||e.includes(r))return e;let i=Kn(t).getComputedStyle(r);return r!==t&&RH(r,i)&&e.push(r),wH(r,i)?e:n(r.parentNode)}return t?n(t):e}function wO(t){let[o]=sw(t,1);return o??null}function XS(t){return!Hf||!t?null:jl(t)?t:ky(t)?xy(t)||t===Yl(t).scrollingElement?window:Ld(t)?t:null:null}function RO(t){return jl(t)?t.scrollX:t.scrollLeft}function PO(t){return jl(t)?t.scrollY:t.scrollTop}function tw(t){return{x:RO(t),y:PO(t)}}var nn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(nn||(nn={}));function kO(t){return!Hf||!t?!1:t===document.scrollingElement}function xO(t){let o={x:0,y:0},e=kO(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-e.width,y:t.scrollHeight-e.height},r=t.scrollTop<=o.y,i=t.scrollLeft<=o.x,a=t.scrollTop>=n.y,s=t.scrollLeft>=n.x;return{isTop:r,isLeft:i,isBottom:a,isRight:s,maxScroll:n,minScroll:o}}var PH={x:.2,y:.2};function kH(t,o,e,n,r){let{top:i,left:a,right:s,bottom:l}=e;n===void 0&&(n=10),r===void 0&&(r=PH);let{isTop:u,isBottom:d,isLeft:p,isRight:m}=xO(t),f={x:0,y:0},h={x:0,y:0},y={height:o.height*r.y,width:o.width*r.x};return!u&&i<=o.top+y.height?(f.y=nn.Backward,h.y=n*Math.abs((o.top+y.height-i)/y.height)):!d&&l>=o.bottom-y.height&&(f.y=nn.Forward,h.y=n*Math.abs((o.bottom-y.height-l)/y.height)),!m&&s>=o.right-y.width?(f.x=nn.Forward,h.x=n*Math.abs((o.right-y.width-s)/y.width)):!p&&a<=o.left+y.width&&(f.x=nn.Backward,h.x=n*Math.abs((o.left+y.width-a)/y.width)),{direction:f,speed:h}}function xH(t){if(t===document.scrollingElement){let{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}let{top:o,left:e,right:n,bottom:r}=t.getBoundingClientRect();return{top:o,left:e,right:n,bottom:r,width:t.clientWidth,height:t.clientHeight}}function IO(t){return t.reduce((o,e)=>$l(o,tw(e)),da)}function IH(t){return t.reduce((o,e)=>o+RO(e),0)}function TH(t){return t.reduce((o,e)=>o+PO(e),0)}function TO(t,o){if(o===void 0&&(o=Xf),!t)return;let{top:e,left:n,bottom:r,right:i}=o(t);wO(t)&&(r<=0||i<=0||e>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}var EH=[["x",["left","right"],IH],["y",["top","bottom"],TH]],Yf=class{constructor(o,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=sw(e),r=IO(n);this.rect={...o},this.width=o.width,this.height=o.height;for(let[i,a,s]of EH)for(let l of a)Object.defineProperty(this,l,{get:()=>{let u=s(n),d=r[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Xl=class{constructor(o){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})},this.target=o}add(o,e,n){var r;(r=this.target)==null||r.addEventListener(o,e,n),this.listeners.push([o,e,n])}};function OH(t){let{EventTarget:o}=Kn(t);return t instanceof o?t:Yl(t)}function QS(t,o){let e=Math.abs(t.x),n=Math.abs(t.y);return typeof o=="number"?Math.sqrt(e**2+n**2)>o:"x"in o&&"y"in o?e>o.x&&n>o.y:"x"in o?e>o.x:"y"in o?n>o.y:!1}var Bi;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bi||(Bi={}));function lO(t){t.preventDefault()}function DH(t){t.stopPropagation()}var Rt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Rt||(Rt={}));var EO={start:[Rt.Space,Rt.Enter],cancel:[Rt.Esc],end:[Rt.Space,Rt.Enter]},AH=(t,o)=>{let{currentCoordinates:e}=o;switch(t.code){case Rt.Right:return{...e,x:e.x+25};case Rt.Left:return{...e,x:e.x-25};case Rt.Down:return{...e,y:e.y+25};case Rt.Up:return{...e,y:e.y-25}}},Oy=class{constructor(o){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=o;let{event:{target:e}}=o;this.props=o,this.listeners=new Xl(Yl(e)),this.windowListeners=new Xl(Kn(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bi.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:o,onStart:e}=this.props,n=o.node.current;n&&TO(n),e(da)}handleKeyDown(o){if(Iy(o)){let{active:e,context:n,options:r}=this.props,{keyboardCodes:i=EO,coordinateGetter:a=AH,scrollBehavior:s="smooth"}=r,{code:l}=o;if(i.end.includes(l)){this.handleEnd(o);return}if(i.cancel.includes(l)){this.handleCancel(o);return}let{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:da;this.referenceCoordinates||(this.referenceCoordinates=d);let p=a(o,{active:e,context:n.current,currentCoordinates:d});if(p){let m=Gf(p,d),f={x:0,y:0},{scrollableAncestors:h}=n.current;for(let y of h){let S=o.code,{isTop:w,isRight:R,isLeft:k,isBottom:x,maxScroll:E,minScroll:A}=xO(y),I=xH(y),L={x:Math.min(S===Rt.Right?I.right-I.width/2:I.right,Math.max(S===Rt.Right?I.left:I.left+I.width/2,p.x)),y:Math.min(S===Rt.Down?I.bottom-I.height/2:I.bottom,Math.max(S===Rt.Down?I.top:I.top+I.height/2,p.y))},B=S===Rt.Right&&!R||S===Rt.Left&&!k,Y=S===Rt.Down&&!x||S===Rt.Up&&!w;if(B&&L.x!==p.x){let $=y.scrollLeft+m.x,G=S===Rt.Right&&$<=E.x||S===Rt.Left&&$>=A.x;if(G&&!m.y){y.scrollTo({left:$,behavior:s});return}G?f.x=y.scrollLeft-$:f.x=S===Rt.Right?y.scrollLeft-E.x:y.scrollLeft-A.x,f.x&&y.scrollBy({left:-f.x,behavior:s});break}else if(Y&&L.y!==p.y){let $=y.scrollTop+m.y,G=S===Rt.Down&&$<=E.y||S===Rt.Up&&$>=A.y;if(G&&!m.x){y.scrollTo({top:$,behavior:s});return}G?f.y=y.scrollTop-$:f.y=S===Rt.Down?y.scrollTop-E.y:y.scrollTop-A.y,f.y&&y.scrollBy({top:-f.y,behavior:s});break}}this.handleMove(o,$l(Gf(p,this.referenceCoordinates),f))}}}handleMove(o,e){let{onMove:n}=this.props;o.preventDefault(),n(e)}handleEnd(o){let{onEnd:e}=this.props;o.preventDefault(),this.detach(),e()}handleCancel(o){let{onCancel:e}=this.props;o.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};Oy.activators=[{eventName:"onKeyDown",handler:(t,o,e)=>{let{keyboardCodes:n=EO,onActivation:r}=o,{active:i}=e,{code:a}=t.nativeEvent;if(n.start.includes(a)){let s=i.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),r?.({event:t.nativeEvent}),!0)}return!1}}];function uO(t){return!!(t&&"distance"in t)}function dO(t){return!!(t&&"delay"in t)}var $f=class{constructor(o,e,n){var r;n===void 0&&(n=OH(o.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=o,this.events=e;let{event:i}=o,{target:a}=i;this.props=o,this.events=e,this.document=Yl(a),this.documentListeners=new Xl(this.document),this.listeners=new Xl(n),this.windowListeners=new Xl(Kn(a)),this.initialCoordinates=(r=Jl(i))!=null?r:da,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:o,props:{options:{activationConstraint:e}}}=this;if(this.listeners.add(o.move.name,this.handleMove,{passive:!1}),this.listeners.add(o.end.name,this.handleEnd),this.windowListeners.add(Bi.Resize,this.handleCancel),this.windowListeners.add(Bi.DragStart,lO),this.windowListeners.add(Bi.VisibilityChange,this.handleCancel),this.windowListeners.add(Bi.ContextMenu,lO),this.documentListeners.add(Bi.Keydown,this.handleKeydown),e){if(uO(e))return;if(dO(e)){this.timeoutId=setTimeout(this.handleStart,e.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){let{initialCoordinates:o}=this,{onStart:e}=this.props;o&&(this.activated=!0,this.documentListeners.add(Bi.Click,DH,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bi.SelectionChange,this.removeTextSelection),e(o))}handleMove(o){var e;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!r)return;let l=(e=Jl(o))!=null?e:da,u=Gf(r,l);if(!n&&s){if(dO(s))return QS(u,s.tolerance)?this.handleCancel():void 0;if(uO(s))return s.tolerance!=null&&QS(u,s.tolerance)?this.handleCancel():QS(u,s.distance)?this.handleStart():void 0}o.cancelable&&o.preventDefault(),a(l)}handleEnd(){let{onEnd:o}=this.props;this.detach(),o()}handleCancel(){let{onCancel:o}=this.props;this.detach(),o()}handleKeydown(o){o.code===Rt.Esc&&this.handleCancel()}removeTextSelection(){var o;(o=this.document.getSelection())==null||o.removeAllRanges()}},BH={move:{name:"pointermove"},end:{name:"pointerup"}},Nd=class extends $f{constructor(o){let{event:e}=o,n=Yl(e.target);super(o,BH,n)}};Nd.activators=[{eventName:"onPointerDown",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o;return!e.isPrimary||e.button!==0?!1:(n?.({event:e}),!0)}}];var LH={move:{name:"mousemove"},end:{name:"mouseup"}},ow;(function(t){t[t.RightClick=2]="RightClick"})(ow||(ow={}));var Jf=class extends $f{constructor(o){super(o,LH,Yl(o.event.target))}};Jf.activators=[{eventName:"onMouseDown",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o;return e.button===ow.RightClick?!1:(n?.({event:e}),!0)}}];var ZS={move:{name:"touchmove"},end:{name:"touchend"}},nw=class extends $f{constructor(o){super(o,ZS)}static setup(){return window.addEventListener(ZS.move.name,o,{capture:!1,passive:!1}),function(){window.removeEventListener(ZS.move.name,o)};function o(){}}};nw.activators=[{eventName:"onTouchStart",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o,{touches:r}=e;return r.length>1?!1:(n?.({event:e}),!0)}}];var jf;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(jf||(jf={}));var Dy;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Dy||(Dy={}));function MH(t){let{acceleration:o,activator:e=jf.Pointer,canScroll:n,draggingRect:r,enabled:i,interval:a=5,order:s=Dy.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:p,threshold:m}=t,f=NH({delta:p,disabled:!i}),[h,y]=oO(),S=(0,z.useRef)({x:0,y:0}),w=(0,z.useRef)({x:0,y:0}),R=(0,z.useMemo)(()=>{switch(e){case jf.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case jf.DraggableRect:return r}},[e,r,l]),k=(0,z.useRef)(null),x=(0,z.useCallback)(()=>{let A=k.current;if(!A)return;let I=S.current.x*w.current.x,L=S.current.y*w.current.y;A.scrollBy(I,L)},[]),E=(0,z.useMemo)(()=>s===Dy.TreeOrder?[...u].reverse():u,[s,u]);(0,z.useEffect)(()=>{if(!i||!u.length||!R){y();return}for(let A of E){if(n?.(A)===!1)continue;let I=u.indexOf(A),L=d[I];if(!L)continue;let{direction:B,speed:Y}=kH(A,L,R,o,m);for(let $ of["x","y"])f[$][B[$]]||(Y[$]=0,B[$]=0);if(Y.x>0||Y.y>0){y(),k.current=A,h(x,a),S.current=Y,w.current=B;return}}S.current={x:0,y:0},w.current={x:0,y:0},y()},[o,x,n,y,i,a,JSON.stringify(R),JSON.stringify(f),h,u,E,d,JSON.stringify(m)])}var _H={x:{[nn.Backward]:!1,[nn.Forward]:!1},y:{[nn.Backward]:!1,[nn.Forward]:!1}};function NH(t){let{delta:o,disabled:e}=t,n=zf(o);return _d(r=>{if(e||!n||!r)return _H;let i={x:Math.sign(o.x-n.x),y:Math.sign(o.y-n.y)};return{x:{[nn.Backward]:r.x[nn.Backward]||i.x===-1,[nn.Forward]:r.x[nn.Forward]||i.x===1},y:{[nn.Backward]:r.y[nn.Backward]||i.y===-1,[nn.Forward]:r.y[nn.Forward]||i.y===1}}},[e,o,n])}function VH(t,o){let e=o!==null?t.get(o):void 0,n=e?e.node.current:null;return _d(r=>{var i;return o===null?null:(i=n??r)!=null?i:null},[n,o])}function FH(t,o){return(0,z.useMemo)(()=>t.reduce((e,n)=>{let{sensor:r}=n,i=r.activators.map(a=>({eventName:a.eventName,handler:o(a.handler,n)}));return[...e,...i]},[]),[t,o])}var qf;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(qf||(qf={}));var rw;(function(t){t.Optimized="optimized"})(rw||(rw={}));var pO=new Map;function HH(t,o){let{dragging:e,dependencies:n,config:r}=o,[i,a]=(0,z.useState)(null),{frequency:s,measure:l,strategy:u}=r,d=(0,z.useRef)(t),p=S(),m=Md(p),f=(0,z.useCallback)(function(w){w===void 0&&(w=[]),!m.current&&a(R=>R===null?w:R.concat(w.filter(k=>!R.includes(k))))},[m]),h=(0,z.useRef)(null),y=_d(w=>{if(p&&!e)return pO;if(!w||w===pO||d.current!==t||i!=null){let R=new Map;for(let k of t){if(!k)continue;if(i&&i.length>0&&!i.includes(k.id)&&k.rect.current){R.set(k.id,k.rect.current);continue}let x=k.node.current,E=x?new Yf(l(x),x):null;k.rect.current=E,E&&R.set(k.id,E)}return R}return w},[t,i,e,p,l]);return(0,z.useEffect)(()=>{d.current=t},[t]),(0,z.useEffect)(()=>{p||f()},[e,p]),(0,z.useEffect)(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),(0,z.useEffect)(()=>{p||typeof s!="number"||h.current!==null||(h.current=setTimeout(()=>{f(),h.current=null},s))},[s,p,f,...n]),{droppableRects:y,measureDroppableContainers:f,measuringScheduled:i!=null};function S(){switch(u){case qf.Always:return!1;case qf.BeforeDragging:return e;default:return!e}}}function cw(t,o){return _d(e=>t?e||(typeof o=="function"?o(t):t):null,[o,t])}function WH(t,o){return cw(t,o)}function UH(t){let{callback:o,disabled:e}=t,n=Wf(o),r=(0,z.useMemo)(()=>{if(e||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,e]);return(0,z.useEffect)(()=>()=>r?.disconnect(),[r]),r}function Ay(t){let{callback:o,disabled:e}=t,n=Wf(o),r=(0,z.useMemo)(()=>{if(e||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[e]);return(0,z.useEffect)(()=>()=>r?.disconnect(),[r]),r}function zH(t){return new Yf(Xf(t),t)}function fO(t,o,e){o===void 0&&(o=zH);let[n,r]=(0,z.useReducer)(s,null),i=UH({callback(l){if(t)for(let u of l){let{type:d,target:p}=u;if(d==="childList"&&p instanceof HTMLElement&&p.contains(t)){r();break}}}}),a=Ay({callback:r});return ua(()=>{r(),t?(a?.observe(t),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[t]),n;function s(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??e)!=null?u:null}let d=o(t);return JSON.stringify(l)===JSON.stringify(d)?l:d}}function KH(t){let o=cw(t);return CO(t,o)}var mO=[];function GH(t){let o=(0,z.useRef)(t),e=_d(n=>t?n&&n!==mO&&t&&o.current&&t.parentNode===o.current.parentNode?n:sw(t):mO,[t]);return(0,z.useEffect)(()=>{o.current=t},[t]),e}function jH(t){let[o,e]=(0,z.useState)(null),n=(0,z.useRef)(t),r=(0,z.useCallback)(i=>{let a=XS(i.target);a&&e(s=>s?(s.set(a,tw(a)),new Map(s)):null)},[]);return(0,z.useEffect)(()=>{let i=n.current;if(t!==i){a(i);let s=t.map(l=>{let u=XS(l);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,tw(u)]):null}).filter(l=>l!=null);e(s.length?new Map(s):null),n.current=t}return()=>{a(t),a(i)};function a(s){s.forEach(l=>{let u=XS(l);u?.removeEventListener("scroll",r)})}},[r,t]),(0,z.useMemo)(()=>t.length?o?Array.from(o.values()).reduce((i,a)=>$l(i,a),da):IO(t):da,[t,o])}function gO(t,o){o===void 0&&(o=[]);let e=(0,z.useRef)(null);return(0,z.useEffect)(()=>{e.current=null},o),(0,z.useEffect)(()=>{let n=t!==da;n&&!e.current&&(e.current=t),!n&&e.current&&(e.current=null)},[t]),e.current?Gf(t,e.current):da}function YH(t){(0,z.useEffect)(()=>{if(!Hf)return;let o=t.map(e=>{let{sensor:n}=e;return n.setup==null?void 0:n.setup()});return()=>{for(let e of o)e?.()}},t.map(o=>{let{sensor:e}=o;return e}))}function $H(t,o){return(0,z.useMemo)(()=>t.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=a=>{i(a,o)},e},{}),[t,o])}function OO(t){return(0,z.useMemo)(()=>t?SH(t):null,[t])}var ew=[];function JH(t,o){o===void 0&&(o=Xf);let[e]=t,n=OO(e?Kn(e):null),[r,i]=(0,z.useReducer)(s,ew),a=Ay({callback:i});return t.length>0&&r===ew&&i(),ua(()=>{t.length?t.forEach(l=>a?.observe(l)):(a?.disconnect(),i())},[t]),r;function s(){return t.length?t.map(l=>kO(l)?n:new Yf(o(l),l)):ew}}function DO(t){if(!t)return null;if(t.children.length>1)return t;let o=t.children[0];return Ld(o)?o:t}function qH(t){let{measure:o}=t,[e,n]=(0,z.useState)(null),r=(0,z.useCallback)(u=>{for(let{target:d}of u)if(Ld(d)){n(p=>{let m=o(d);return p?{...p,width:m.width,height:m.height}:m});break}},[o]),i=Ay({callback:r}),a=(0,z.useCallback)(u=>{let d=DO(u);i?.disconnect(),d&&i?.observe(d),n(d?o(d):null)},[o,i]),[s,l]=Uf(a);return(0,z.useMemo)(()=>({nodeRef:s,rect:e,setRef:l}),[e,s,l])}var XH=[{sensor:Nd,options:{}},{sensor:Oy,options:{}}],QH={current:{}},Ty={draggable:{measure:cO},droppable:{measure:cO,strategy:qf.WhileDragging,frequency:rw.Optimized},dragOverlay:{measure:Xf}},Ql=class extends Map{get(o){var e;return o!=null&&(e=super.get(o))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(o=>{let{disabled:e}=o;return!e})}getNodeFor(o){var e,n;return(e=(n=this.get(o))==null?void 0:n.node.current)!=null?e:void 0}},ZH={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ql,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ey},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ty,measureDroppableContainers:Ey,windowRect:null,measuringScheduled:!1},AO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ey,draggableNodes:new Map,over:null,measureDroppableContainers:Ey},Qf=(0,z.createContext)(AO),BO=(0,z.createContext)(ZH);function e8(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ql}}}function t8(t,o){switch(o.type){case Vo.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:o.initialCoordinates,active:o.active}};case Vo.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:o.coordinates.x-t.draggable.initialCoordinates.x,y:o.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Vo.DragEnd:case Vo.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Vo.RegisterDroppable:{let{element:e}=o,{id:n}=e,r=new Ql(t.droppable.containers);return r.set(n,e),{...t,droppable:{...t.droppable,containers:r}}}case Vo.SetDroppableDisabled:{let{id:e,key:n,disabled:r}=o,i=t.droppable.containers.get(e);if(!i||n!==i.key)return t;let a=new Ql(t.droppable.containers);return a.set(e,{...i,disabled:r}),{...t,droppable:{...t.droppable,containers:a}}}case Vo.UnregisterDroppable:{let{id:e,key:n}=o,r=t.droppable.containers.get(e);if(!r||n!==r.key)return t;let i=new Ql(t.droppable.containers);return i.delete(e),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function o8(t){let{disabled:o}=t,{active:e,activatorEvent:n,draggableNodes:r}=(0,z.useContext)(Qf),i=zf(n),a=zf(e?.id);return(0,z.useEffect)(()=>{if(!o&&!n&&i&&a!=null){if(!Iy(i)||document.activeElement===i.target)return;let s=r.get(a);if(!s)return;let{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(let d of[l.current,u.current]){if(!d)continue;let p=rO(d);if(p){p.focus();break}}})}},[n,o,r,a,i]),null}function LO(t,o){let{transform:e,...n}=o;return t!=null&&t.length?t.reduce((r,i)=>i({transform:r,...n}),e):e}function n8(t){return(0,z.useMemo)(()=>({draggable:{...Ty.draggable,...t?.draggable},droppable:{...Ty.droppable,...t?.droppable},dragOverlay:{...Ty.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function r8(t){let{activeNode:o,measure:e,initialRect:n,config:r=!0}=t,i=(0,z.useRef)(!1),{x:a,y:s}=typeof r=="boolean"?{x:r,y:r}:r;ua(()=>{if(!a&&!s||!o){i.current=!1;return}if(i.current||!n)return;let u=o?.node.current;if(!u||u.isConnected===!1)return;let d=e(u),p=CO(d,n);if(a||(p.x=0),s||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){let m=wO(u);m&&m.scrollBy({top:p.y,left:p.x})}},[o,a,s,n,e])}var By=(0,z.createContext)({...da,scaleX:1,scaleY:1}),zc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(zc||(zc={}));var MO=(0,z.memo)(function(o){var e,n,r,i;let{id:a,accessibility:s,autoScroll:l=!0,children:u,sensors:d=XH,collisionDetection:p=mH,measuring:m,modifiers:f,...h}=o,y=(0,z.useReducer)(t8,void 0,e8),[S,w]=y,[R,k]=nH(),[x,E]=(0,z.useState)(zc.Uninitialized),A=x===zc.Initialized,{draggable:{active:I,nodes:L,translate:B},droppable:{containers:Y}}=S,$=I?L.get(I):null,G=(0,z.useRef)({initial:null,translated:null}),q=(0,z.useMemo)(()=>{var pn;return I!=null?{id:I,data:(pn=$?.data)!=null?pn:QH,rect:G}:null},[I,$]),J=(0,z.useRef)(null),[ie,ye]=(0,z.useState)(null),[Pe,Je]=(0,z.useState)(null),jt=Md(h,Object.values(h)),Oo=Kf("DndDescribedBy",a),Or=(0,z.useMemo)(()=>Y.getEnabled(),[Y]),On=n8(m),{droppableRects:Dr,measureDroppableContainers:ir,measuringScheduled:Do}=HH(Or,{dragging:A,dependencies:[B.x,B.y],config:On.droppable}),qo=VH(L,I),dc=(0,z.useMemo)(()=>Pe?Jl(Pe):null,[Pe]),Dn=GN(),Ar=WH(qo,On.draggable.measure);r8({activeNode:I?L.get(I):null,config:Dn.layoutShiftCompensation,initialRect:Ar,measure:On.draggable.measure});let K=fO(qo,On.draggable.measure,Ar),oe=fO(qo?qo.parentElement:null),X=(0,z.useRef)({activatorEvent:null,active:null,activeNode:qo,collisionRect:null,collisions:null,droppableRects:Dr,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:Y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ne=Y.getNodeFor((e=X.current.over)==null?void 0:e.id),he=qH({measure:On.dragOverlay.measure}),_e=(n=he.nodeRef.current)!=null?n:qo,tt=A?(r=he.rect)!=null?r:K:null,Qe=!!(he.nodeRef.current&&he.rect),Ze=KH(Qe?null:K),it=OO(_e?Kn(_e):null),ut=GH(A?ne??qo:null),uo=JH(ut),Xo=LO(f,{transform:{x:B.x-Ze.x,y:B.y-Ze.y,scaleX:1,scaleY:1},activatorEvent:Pe,active:q,activeNodeRect:K,containerNodeRect:oe,draggingNodeRect:tt,over:X.current.over,overlayNodeRect:he.rect,scrollableAncestors:ut,scrollableAncestorRects:uo,windowRect:it}),An=dc?$l(dc,B):null,Ji=jH(ut),Mu=gO(Ji),_u=gO(Ji,[K]),Ta=$l(Xo,Mu),pc=tt?bH(tt,Xo):null,Pl=q&&pc?p({active:q,collisionRect:pc,droppableRects:Dr,droppableContainers:Or,pointerCoordinates:An}):null,ig=pH(Pl,"id"),[qe,Br]=(0,z.useState)(null),Ci=Qe?Xo:$l(Xo,_u),WN=hH(Ci,(i=qe?.rect)!=null?i:null,K),MP=(0,z.useCallback)((pn,$r)=>{let{sensor:Jr,options:fc}=$r;if(J.current==null)return;let Si=L.get(J.current);if(!Si)return;let qi=pn.nativeEvent,Ea=new Jr({active:J.current,activeNode:Si,event:qi,options:fc,context:X,onStart(Xi){let Hp=J.current;if(Hp==null)return;let Wp=L.get(Hp);if(!Wp)return;let{onDragStart:ag}=jt.current,sg={active:{id:Hp,data:Wp.data,rect:G}};(0,Kc.unstable_batchedUpdates)(()=>{ag?.(sg),E(zc.Initializing),w({type:Vo.DragStart,initialCoordinates:Xi,active:Hp}),R({type:"onDragStart",event:sg})})},onMove(Xi){w({type:Vo.DragMove,coordinates:Xi})},onEnd:Nu(Vo.DragEnd),onCancel:Nu(Vo.DragCancel)});(0,Kc.unstable_batchedUpdates)(()=>{ye(Ea),Je(pn.nativeEvent)});function Nu(Xi){return async function(){let{active:Wp,collisions:ag,over:sg,scrollAdjustedTranslate:NP}=X.current,Up=null;if(Wp&&NP){let{cancelDrop:zp}=jt.current;Up={activatorEvent:qi,active:Wp,collisions:ag,delta:NP,over:sg},Xi===Vo.DragEnd&&typeof zp=="function"&&await Promise.resolve(zp(Up))&&(Xi=Vo.DragCancel)}J.current=null,(0,Kc.unstable_batchedUpdates)(()=>{w({type:Xi}),E(zc.Uninitialized),Br(null),ye(null),Je(null);let zp=Xi===Vo.DragEnd?"onDragEnd":"onDragCancel";if(Up){let bC=jt.current[zp];bC?.(Up),R({type:zp,event:Up})}})}}},[L]),UN=(0,z.useCallback)((pn,$r)=>(Jr,fc)=>{let Si=Jr.nativeEvent,qi=L.get(fc);if(J.current!==null||!qi||Si.dndKit||Si.defaultPrevented)return;let Ea={active:qi};pn(Jr,$r.options,Ea)===!0&&(Si.dndKit={capturedBy:$r.sensor},J.current=fc,MP(Jr,$r))},[L,MP]),_P=FH(d,UN);YH(d),ua(()=>{K&&x===zc.Initializing&&E(zc.Initialized)},[K,x]),(0,z.useEffect)(()=>{let{onDragMove:pn}=jt.current,{active:$r,activatorEvent:Jr,collisions:fc,over:Si}=X.current;if(!$r||!Jr)return;let qi={active:$r,activatorEvent:Jr,collisions:fc,delta:{x:Ta.x,y:Ta.y},over:Si};(0,Kc.unstable_batchedUpdates)(()=>{pn?.(qi),R({type:"onDragMove",event:qi})})},[Ta.x,Ta.y]),(0,z.useEffect)(()=>{let{active:pn,activatorEvent:$r,collisions:Jr,droppableContainers:fc,scrollAdjustedTranslate:Si}=X.current;if(!pn||J.current==null||!$r||!Si)return;let{onDragOver:qi}=jt.current,Ea=fc.get(ig),Nu=Ea&&Ea.rect.current?{id:Ea.id,rect:Ea.rect.current,data:Ea.data,disabled:Ea.disabled}:null,Xi={active:pn,activatorEvent:$r,collisions:Jr,delta:{x:Si.x,y:Si.y},over:Nu};(0,Kc.unstable_batchedUpdates)(()=>{Br(Nu),qi?.(Xi),R({type:"onDragOver",event:Xi})})},[ig]),ua(()=>{X.current={activatorEvent:Pe,active:q,activeNode:qo,collisionRect:pc,collisions:Pl,droppableRects:Dr,draggableNodes:L,draggingNode:_e,draggingNodeRect:tt,droppableContainers:Y,over:qe,scrollableAncestors:ut,scrollAdjustedTranslate:Ta},G.current={initial:tt,translated:pc}},[q,qo,Pl,pc,L,_e,tt,Dr,Y,qe,ut,Ta]),MH({...Dn,delta:B,draggingRect:pc,pointerCoordinates:An,scrollableAncestors:ut,scrollableAncestorRects:uo});let zN=(0,z.useMemo)(()=>({active:q,activeNode:qo,activeNodeRect:K,activatorEvent:Pe,collisions:Pl,containerNodeRect:oe,dragOverlay:he,draggableNodes:L,droppableContainers:Y,droppableRects:Dr,over:qe,measureDroppableContainers:ir,scrollableAncestors:ut,scrollableAncestorRects:uo,measuringConfiguration:On,measuringScheduled:Do,windowRect:it}),[q,qo,K,Pe,Pl,oe,he,L,Y,Dr,qe,ir,ut,uo,On,Do,it]),KN=(0,z.useMemo)(()=>({activatorEvent:Pe,activators:_P,active:q,activeNodeRect:K,ariaDescribedById:{draggable:Oo},dispatch:w,draggableNodes:L,over:qe,measureDroppableContainers:ir}),[Pe,_P,q,K,w,Oo,L,qe,ir]);return z.default.createElement(bO.Provider,{value:k},z.default.createElement(Qf.Provider,{value:KN},z.default.createElement(BO.Provider,{value:zN},z.default.createElement(By.Provider,{value:WN},u)),z.default.createElement(o8,{disabled:s?.restoreFocus===!1})),z.default.createElement(aH,{...s,hiddenTextDescribedById:Oo}));function GN(){let pn=ie?.autoScrollEnabled===!1,$r=typeof l=="object"?l.enabled===!1:l===!1,Jr=A&&!pn&&!$r;return typeof l=="object"?{...l,enabled:Jr}:{enabled:Jr}}}),i8=(0,z.createContext)(null),hO="button",a8="Droppable";function Sn(t){let{id:o,data:e,disabled:n=!1,attributes:r}=t,i=Kf(a8),{activators:a,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:p,over:m}=(0,z.useContext)(Qf),{role:f=hO,roleDescription:h="draggable",tabIndex:y=0}=r??{},S=l?.id===o,w=(0,z.useContext)(S?By:i8),[R,k]=Uf(),[x,E]=Uf(),A=$H(a,o),I=Md(e);ua(()=>(p.set(o,{id:o,key:i,node:R,activatorNode:x,data:I}),()=>{let B=p.get(o);B&&B.key===i&&p.delete(o)}),[p,o]);let L=(0,z.useMemo)(()=>({role:f,tabIndex:y,"aria-disabled":n,"aria-pressed":S&&f===hO?!0:void 0,"aria-roledescription":h,"aria-describedby":d.draggable}),[n,f,y,S,h,d.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:L,isDragging:S,listeners:n?void 0:A,node:R,over:m,setNodeRef:k,setActivatorNodeRef:E,transform:w}}function s8(){return(0,z.useContext)(BO)}var c8="Droppable",l8={timeout:25};function _O(t){let{data:o,disabled:e=!1,id:n,resizeObserverConfig:r}=t,i=Kf(c8),{active:a,dispatch:s,over:l,measureDroppableContainers:u}=(0,z.useContext)(Qf),d=(0,z.useRef)({disabled:e}),p=(0,z.useRef)(!1),m=(0,z.useRef)(null),f=(0,z.useRef)(null),{disabled:h,updateMeasurementsFor:y,timeout:S}={...l8,...r},w=Md(y??n),R=(0,z.useCallback)(()=>{if(!p.current){p.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),f.current=null},S)},[S]),k=Ay({callback:R,disabled:h||!a}),x=(0,z.useCallback)((L,B)=>{k&&(B&&(k.unobserve(B),p.current=!1),L&&k.observe(L))},[k]),[E,A]=Uf(x),I=Md(o);return(0,z.useEffect)(()=>{!k||!E.current||(k.disconnect(),p.current=!1,k.observe(E.current))},[E,k]),ua(()=>(s({type:Vo.RegisterDroppable,element:{id:n,key:i,disabled:e,node:E,rect:m,data:I}}),()=>s({type:Vo.UnregisterDroppable,key:i,id:n})),[n]),(0,z.useEffect)(()=>{e!==d.current.disabled&&(s({type:Vo.SetDroppableDisabled,id:n,key:i,disabled:e}),d.current.disabled=e)},[n,i,e,s]),{active:a,rect:m,isOver:l?.id===n,node:E,over:l,setNodeRef:A}}function u8(t){let{animation:o,children:e}=t,[n,r]=(0,z.useState)(null),[i,a]=(0,z.useState)(null),s=zf(e);return!e&&!n&&s&&r(s),ua(()=>{if(!i)return;let l=n?.key,u=n?.props.id;if(l==null||u==null){r(null);return}Promise.resolve(o(u,i)).then(()=>{r(null)})},[o,n,i]),z.default.createElement(z.default.Fragment,null,e,n?(0,z.cloneElement)(n,{ref:a}):null)}var d8={x:0,y:0,scaleX:1,scaleY:1};function p8(t){let{children:o}=t;return z.default.createElement(Qf.Provider,{value:AO},z.default.createElement(By.Provider,{value:d8},o))}var f8={position:"fixed",touchAction:"none"},m8=t=>Iy(t)?"transform 250ms ease":void 0,g8=(0,z.forwardRef)((t,o)=>{let{as:e,activatorEvent:n,adjustScale:r,children:i,className:a,rect:s,style:l,transform:u,transition:d=m8}=t;if(!s)return null;let p=r?u:{...u,scaleX:1,scaleY:1},m={...f8,width:s.width,height:s.height,top:s.top,left:s.left,transform:Bd.Transform.toString(p),transformOrigin:r&&n?cH(n,s):void 0,transition:typeof d=="function"?d(n):d,...l};return z.default.createElement(e,{className:a,style:m,ref:o},i)}),h8=t=>o=>{let{active:e,dragOverlay:n}=o,r={},{styles:i,className:a}=t;if(i!=null&&i.active)for(let[s,l]of Object.entries(i.active))l!==void 0&&(r[s]=e.node.style.getPropertyValue(s),e.node.style.setProperty(s,l));if(i!=null&&i.dragOverlay)for(let[s,l]of Object.entries(i.dragOverlay))l!==void 0&&n.node.style.setProperty(s,l);return a!=null&&a.active&&e.node.classList.add(a.active),a!=null&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(let[l,u]of Object.entries(r))e.node.style.setProperty(l,u);a!=null&&a.active&&e.node.classList.remove(a.active)}},y8=t=>{let{transform:{initial:o,final:e}}=t;return[{transform:Bd.Transform.toString(o)},{transform:Bd.Transform.toString(e)}]},b8={duration:250,easing:"ease",keyframes:y8,sideEffects:h8({styles:{active:{opacity:"0"}}})};function v8(t){let{config:o,draggableNodes:e,droppableContainers:n,measuringConfiguration:r}=t;return Wf((i,a)=>{if(o===null)return;let s=e.get(i);if(!s)return;let l=s.node.current;if(!l)return;let u=DO(a);if(!u)return;let{transform:d}=Kn(a).getComputedStyle(a),p=SO(d);if(!p)return;let m=typeof o=="function"?o:C8(o);return TO(l,r.draggable.measure),m({active:{id:i,data:s.data,node:l,rect:r.draggable.measure(l)},draggableNodes:e,dragOverlay:{node:a,rect:r.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:r,transform:p})})}function C8(t){let{duration:o,easing:e,sideEffects:n,keyframes:r}={...b8,...t};return i=>{let{active:a,dragOverlay:s,transform:l,...u}=i;if(!o)return;let d={x:s.rect.left-a.rect.left,y:s.rect.top-a.rect.top},p={scaleX:l.scaleX!==1?a.rect.width*l.scaleX/s.rect.width:1,scaleY:l.scaleY!==1?a.rect.height*l.scaleY/s.rect.height:1},m={x:l.x-d.x,y:l.y-d.y,...p},f=r({...u,active:a,dragOverlay:s,transform:{initial:l,final:m}}),[h]=f,y=f[f.length-1];if(JSON.stringify(h)===JSON.stringify(y))return;let S=n?.({active:a,dragOverlay:s,...u}),w=s.node.animate(f,{duration:o,easing:e,fill:"forwards"});return new Promise(R=>{w.onfinish=()=>{S?.(),R()}})}}var yO=0;function S8(t){return(0,z.useMemo)(()=>{if(t!=null)return yO++,yO},[t])}var NO=z.default.memo(t=>{let{adjustScale:o=!1,children:e,dropAnimation:n,style:r,transition:i,modifiers:a,wrapperElement:s="div",className:l,zIndex:u=999}=t,{activatorEvent:d,active:p,activeNodeRect:m,containerNodeRect:f,draggableNodes:h,droppableContainers:y,dragOverlay:S,over:w,measuringConfiguration:R,scrollableAncestors:k,scrollableAncestorRects:x,windowRect:E}=s8(),A=(0,z.useContext)(By),I=S8(p?.id),L=LO(a,{activatorEvent:d,active:p,activeNodeRect:m,containerNodeRect:f,draggingNodeRect:S.rect,over:w,overlayNodeRect:S.rect,scrollableAncestors:k,scrollableAncestorRects:x,transform:A,windowRect:E}),B=cw(m),Y=v8({config:n,draggableNodes:h,droppableContainers:y,measuringConfiguration:R}),$=B?S.setRef:void 0;return z.default.createElement(p8,null,z.default.createElement(u8,{animation:Y},p&&I?z.default.createElement(g8,{key:I,id:p.id,ref:$,as:s,activatorEvent:d,adjustScale:o,className:l,transition:i,rect:B,style:{zIndex:u,...r},transform:L},e):null))});var KO=v(P());c();c();var VO=t=>{let{activatorEvent:o,draggingNodeRect:e,transform:n}=t;if(e&&o){let r=Jl(o);if(!r)return n;let i=r.x-e.left,a=r.y-e.top;return{...n,x:n.x+i-e.width/2,y:n.y+a-e.height/2}}return n};var Za=v(P());c();var Zf=v(P());c();var FO=JSON.parse('{"cardWrapper":"cardWrapper_6Hr4m"}');function HO(t){let{item:o}=t;return Zf.createElement(F,{style:[O.padding.horizontal400,O.padding.vertical200,O.backgroundColor.primaryMain,O.borderRadius.medium,O.cursor.grabbing,FO.cardWrapper]},o.previewIcon?Zf.createElement(F,{style:[O.margin.right400]},Zf.createElement(b[o.previewIcon].CSS,{style:[O.textColor.primaryTextInside,O.icons.small]})):null,Zf.createElement(pe,{style:[de.uiAction,O.textColor.primaryTextInside]},o.previewLabel||"Drop to insert"))}function WO(t){let[o,e]=Za.useState(null),n=aw(Nd,{activationConstraint:{distance:10}}),r=aw(Jf,{activationConstraint:{distance:10}}),i=Za.useCallback(({active:s})=>{window.document.body.classList.add("dragging"),e(s.data.current)},[]),a=Za.useCallback(()=>{window.document.body.classList.remove("dragging"),e(null)},[]);return Za.createElement(MO,{sensors:[n,r],onDragStart:i,onDragEnd:a,onDragCancel:a,collisionDetection:vO},t.children,Za.createElement(Nn,null,Za.createElement(NO,{modifiers:[VO],dropAnimation:null},o?Za.createElement(HO,{item:o}):null)))}c();function UO(t){switch(t.type){case"space":return{kind:"space",space:t.id};case"collection":return{kind:"collection",collection:t.id};case"page":return{kind:"page",space:t.space,page:t.id};case"block":case"block-range":case"tab":case"swagger-response":case"swagger-parameter":case"table-record":case"table-definition":throw new Error(`Invalid DND item "${t.type}"`);default:Ee(t)}}c();function Gn(t){return{id:`${t.type}/${t.id}`,data:t}}c();var lw=v(P()),zO=0;function br(t){let{disabled:o,shouldAccept:e,onDrop:n,onHoverMove:r}=t,i=lw.useMemo(()=>(zO+=1,`${zO}`),[]),a=_O({id:i,disabled:o}),s=lw.useMemo(()=>!a.over||!a.isOver||!a.active?!1:e(a.active.data.current),[a.over,a.isOver,e]);return iw({onDragEnd:l=>{s&&a.active&&n(l.active.data.current)},onDragMove:r?({active:l,over:u})=>{if(!u||u.id!==i||u.disabled||!l.rect.current||l.rect.current.translated===null)return;let d=l.rect.current.translated,p=u.rect,m={x:d.left,y:d.top},f=m.x>p.left+p.width/2?"right":"left",h=m.y>p.top+p.height/2?"bottom":"top";r({item:l.data.current,draggable:d,over:p,xPosition:f,yPosition:h})}:void 0}),{isOver:a.isOver&&s,setNodeRef:a.setNodeRef}}function GO(t){let o=sd(),{navigate:e}=we(),n=bo(),r=HI(),i=zI(t),a=UI(t),s=_n(i),l=NC(a,"create-space"),u=NC(a,"create-collection")&&w8(t,r),d=lx(a,"write-capture");return KO.default.useMemo(()=>({createSpace:l?async(p=!0)=>{let m=await Ka(),f;try{f=(await m.spaces.createSpace(t.organization,{parent:t.collection})).data}catch(h){throw n.notifyError(h),h}return re(Ft(f,{type:"space_create"})),p&&e({screen:{type:"space",space:f.id,organization:t.organization,page:""}}),f}:void 0,createCollection:u?async(p=!0)=>{let m=await Ka(),f;try{f=(await m.collections.createCollection(t.organization,{parent:t.collection})).data}catch(h){throw n.notifyError(h),h}return re(yx(f,{type:"collection_create",restricted:!1})),p&&e({screen:{type:"collection",collection:f.id,organization:f.organization}}),f}:void 0,createSnippet:d?async(p=!0)=>{let m=await Ka();try{let{data:f}=await m.organizations.createSnippet(t.organization,{});return p&&e({current:{type:"snippet",organization:t.organization,snippet:f.id}}),f}catch(f){throw n.notifyError(f),f}}:void 0}),[t.organization,t.collection,o.uid,s,e,l,u])}function w8(t,o){let e=0,n=t.collection;for(;n;){let r=o.collections.find(i=>i.key===n);n=r?r.collection:void 0,e++}return e<hk}c();var Ly=v(P());function Gc(){let{navigate:t,getNavigationURL:o,getNavigationLinkProps:e}=we();return Ly.useMemo(()=>{let r=(l,u)=>{let d=ao(l,u);if(d!==null)return o({current:uw(d)})},i=(l,u)=>{let d=ao(l,u);if(d!==null)return e({current:uw(d)})},a=(l,u={})=>{let{replace:d=!1}=u;t({current:uw(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let p=ao(l,u);p!==null&&a(p,d)}}},[t])}function uw(t,o={}){let{preserveSideSheet:e=!1,preserveComments:n=!0,sideSheet:r}=o;return i=>({page:t,...e?"sideSheet"in i?{sideSheet:{...i.sideSheet?.type==="comments"&&!n?{type:"comments"}:i.sideSheet}}:{}:{sideSheet:void 0},...r?{sideSheet:r}:{}})}function jO(t){let{to:o}=t;return Ly.createElement(Ch,{to:{screen:{page:o,sideSheet:void 0}}})}function Yn(t,o,e,n={}){let{document:r,...i}=o,{space:a}=o,{withSearch:s=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=n,d=[];return l.includes("url")&&d.push({key:"url",commands:p=>{let{text:m}=p.query;if(!m||!Wu(m))return[];let f=Vg(m);if(f){let[h]=Py.read([e,f,i]),[y]=la.read([e,h,i]);if(h&&y)return[{key:m,title:y.text,icon:b.ArrowUpRight,trigger:()=>{t(h)}}]}return[{key:m,title:`Link to "${m}"`,icon:b.Link,trigger:()=>{t({kind:"url",url:m})}}]}}),l.includes("anchor")&&r&&!o.snippet&&d.push({key:"anchors",commands:()=>$O(r,{},t)}),l.includes("page")&&o.space&&d.push(YO({spaceId:o.space,changeRequestId:"changeRequest"in o?o.changeRequest:void 0},e,t,{accept:l,withSearch:s,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:p=>_l.read({query:p.query.text,types:["spaces"]}).map(f=>f.index!=="spaces"?null:{key:f.object.objectID,icon:({size:h})=>dw.createElement(kh,{space:f.object,size:h}),title:f.object.title,trigger:()=>{t({kind:"space",space:f.object.objectID})},descendant:l.includes("page")?()=>se({search:s?"Select page\u2026":void 0,groups:[YO({spaceId:f.object.objectID,changeRequestId:void 0},e,t,{accept:l,withSearch:s,targetCurrentSpace:f.object.objectID===a})]}):void 0}).filter(le)}),l.includes("collection")&&d.push({key:"collections",commands:p=>_l.read({query:p.query.text,types:["collections"]}).map(f=>f.index!=="collections"?null:{key:f.object.objectID,title:f.object.title,trigger:()=>{t({kind:"collection",collection:f.object.objectID})}}).filter(le)}),l.includes("user")&&d.push({key:"users",commands:p=>_l.read({query:p.query.text,hitsPerPage:8,types:["users"]}).map(f=>f.index!=="users"?null:{key:f.object.objectID,icon:({size:h})=>dw.createElement(Nl,{user:f.object,size:h}),title:f.object.displayName,subtitle:f.object.email,trigger:()=>{t({kind:"user",user:f.object.objectID})}}).filter(le)}),se({search:s?"Type url or reference\u2026":void 0,groups:d,position:u})}function R8(t,o,e,n,r){return se({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${o.title}"`,icon:b.Page,trigger:()=>{n({kind:"page",page:o.id,space:r.targetCurrentSpace?void 0:t})}}]},{key:"anchors",commands:()=>P8(t,o,e,{page:o.id,space:r.targetCurrentSpace?void 0:t},n)}]})}function YO(t,o,e,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let s=Qr(o.store.getBranchRevision(t.spaceId,t.changeRequestId?_g(t.changeRequestId):Ag));return s?Object.values(s.pages).filter(l=>l.type!=="link").map(l=>({key:l.id,title:l.title,subtitle:ao(s,l.id),icon:l.type==="group"?b.AddPageGroup:b.Page,trigger:()=>{e({kind:"page",page:l.id,space:a?void 0:t.spaceId})},descendant:r&&r.includes("anchor")&&l.type==="document"?()=>({...R8(t.spaceId,l,o,e,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function P8(t,o,e,n,r){if(!o.document)return[];let i=Qr(e.store.getDocument(t,o.document));return i?$O(i,n,r):[]}function $O(t,o,e){return Dg(t).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case Ue:return b.Heading1;case je:return b.Heading2;case at:return b.Heading3;case Bo:return b.Swagger;case Zr:return b.BlockExpandable;case Lr:case lr:return b.Tabs;case null:return b.Hash;default:Ee(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{e({kind:"anchor",anchor:r.anchor,...o})}}})}c();var Fd=v(P());c();var Zl=v(P()),JO=v(H());function Vd(t){let{file:o,size:e=_.ICON_M}=t,[,n]=T(x8);return Zl.createElement(JO.View,{style:[n.fileTileIcon,{width:e,height:e}]},o&&gc(o)?Zl.createElement(en,{style:n.fileTilePreview,source:{uri:aa(o.downloadURL,{width:e})},accessibilityLabel:o.name}):Zl.createElement(k8,{file:o,size:e*.65}))}function k8(t){let{file:o,...e}=t;return o?Uu(o)?Zl.createElement(b.Swagger,{...e}):Zl.createElement(b.Paperclip,{...e}):Zl.createElement(b.Trashcan,{...e})}var x8=j.create({fileTileIcon:t=>({backgroundColor:t.colors.background.muted,color:t.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:_.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:_.RADIUS_M,objectFit:"contain"}});function pw(t){let{navigate:o,getNavigationURL:e}=we(),n=Ie(),r=dt(),[i,a]=Fd.useState(""),s=t.map(h=>[n,h,r,i]),l=la.readMultiple(s),u=la.readCacheUpdatesKey(s),d=VI(l.map(h=>h[1]).flat()),p=to(),m=X0(p?.dataSync),f=typeof m<"u"?`${m}`:"";return Fd.useEffect(()=>{a(`${d}${f}`)},[d,f]),Fd.useMemo(()=>l.map(([h,y,S],w)=>{let R=t[w];return h?{title:h.text,icon:I8(R,h),secondaryIcon:T8(R),secondaryIconDescription:E8(R,h),href:R.kind==="user"?"":typeof h.target=="string"?h.target:e({screen:h.target}),open:()=>{R.kind!=="user"&&(typeof h.target=="string"?gh(h.target):o({screen:h.target}))},resolution:h}:{title:S?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[u,e,o])}function nt(t){return pw(t?[t]:[])[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function I8(t,o){if(t.kind==="url")return b.ExternalLink;if(o.extra?.user)return gt(Nl,{user:o.extra.user});if(o.extra?.file)return gt(Vd,{file:o.extra.file});if(o.extra?.space)return gt(kh,{space:o.extra.space});if(o.extra?.page&&o.extra.page.emoji)return gt(_o,{code:o.extra.page.emoji})}function T8(t){switch(t.kind){case"user":return b.AtSign;case"anchor":return b.Hash;case"page":return b.Page;case"space":return b.Space;case"collection":return b.Collection;case"url":return b.ExternalLink}}function E8(t,o){switch(t.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function _y(t){let{label:o,labelDescription:e,value:n,onChangeValue:r,placeholder:i,accept:a,size:s="large",disabled:l=!1}=t,[u,d]=yt.useState(!1),[p,m]=yt.useState(!1),[f,h]=yt.useState(""),y=yt.useRef(null),S=yt.useRef(null),[,w]=T(D8),R=fe(y),k=Ie(),x=dt();yt.useEffect(()=>{if(!f||!u||u&&!p){R.close();return}R.opened?R.typeQuery(f):R.open(rd(Yn(I=>{r(I),m(!1),S.current&&S.current.blur()},x,k,{withSearch:!1,position:{width:"anchor"},accept:a}),f))},[f,u]),yt.useEffect(()=>{u&&S.current&&S.current.focus()},[u]);let E=I=>{h(I),m(!0)},A=()=>{f||(m(!1),r()),Wu(f)&&(r({kind:"url",url:f}),m(!1)),d(!1)};return yt.createElement(js.View,null,o?yt.createElement(js.View,{style:g.Margin.bottom200},yt.createElement(nd,null,o),e?yt.createElement(js.View,{style:g.Margin.top100},yt.createElement(sh,null,e)):null):null,u||!n?yt.createElement(At,{testID:"contentRef.input",ref:S,wrapperRef:y,size:s,value:f,onChangeText:E,onBlur:A,onFocus:()=>d(!0),placeholder:i,disabled:l}):yt.createElement(js.TouchableOpacity,{testID:"contentRef.fakeInput",onPress:()=>d(!0),style:[w.input,fI[s],C.row,C.alignItemsCenter]},yt.createElement(yt.Suspense,{fallback:yt.createElement(Se,{size:"small"})},yt.createElement(O8,{value:n,size:s}))))}function O8(t){let{value:o,size:e}=t,[,n]=T(N),r=nt(o);return yt.createElement(js.View,{style:[C.flex1,C.row,C.alignItemsCenter]},r.icon?yt.createElement(js.View,{style:[g.Margin.right200]},yt.createElement(r.icon,{size:_.ICON_S,style:n.textMuted})):null,yt.createElement(js.View,{style:[C.flex1]},yt.createElement(oi,{style:[pI[e],n.text],testID:"contentRef.resolvedTitle"},r.title)))}var D8=j.create({input:t=>({backgroundColor:t.colors.background.main,borderWidth:1,borderColor:t.colors.border.main})});c();async function qO(t,o,e){let[n]=await la.readAsync([t,o,e]);return{uri:n?.target}}function Ny(t,o){let n=(Is().color==="light"?null:o)||t,r=nt(n);if(!r.href)return null;let i=r.resolution?.extra?.file;return{uri:r.href,width:i?.dimensions?.width,height:i?.dimensions?.height}}c();function jc(t,o){return{href:t.href,onPress:e=>{if(o&&o(e),e){if(e.isDefaultPrevented()||e.nativeEvent.metaKey||e.nativeEvent.ctrlKey)return;e.preventDefault()}t.open()}}}c();var fw=v(P());function XO(t){let{block:o,style:e,size:n=_.ICON_M}=t;return o.icon?fw.createElement(en,{source:{uri:aa(o.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):fw.createElement(b.Integrations,{size:n,style:e})}c();c();var zr=v(P());c();var $c=v(P());c();var wo=v(P()),tu=v(H());c();var Vy=v(P()),QO=v(H());function ZO(t){let{description:o,readOnly:e,blockProps:n}=t,{node:r}=n;return!o||e&&"fragment"in o&&La(r.fragments.get(o.fragment))?null:Vy.createElement(QO.View,{style:g.Margin.top400},"text"in o?Vy.createElement(ad,{markdown:o.text}):Vy.createElement(fr,{fragment:o.fragment}))}c();var em=v(P()),eD=v(H());c();var eu={get:Q.primary.base,post:Q.green.base,put:Q.orange.base,options:Q.violet.base,head:Q.orange.base,delete:Q.scarlet.base,patch:Q.orange.base,connect:Q.orange.base,trace:Q.orange.base};var A8=Z.createResponsiveComponent(Nr);function Fy(t){let{readOnly:o,method:e,setMethod:n}=t,[,r]=T(N),[,i]=T(B8),a=em.default.useRef(null),s=fe(a),l=se({groups:[{key:"methods",commands:dd.map(p=>({key:p,title:p.toUpperCase(),trigger:()=>{n&&n(p)}}))}]}),u=()=>{s.open(l)},d=em.default.createElement(A8,{style:i.badge,backgroundColor:eu[e]||Q.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},em.default.createElement(Z.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},e));return o?d:em.default.createElement(eD.TouchableOpacity,{ref:a,onPress:u},d)}var B8=j.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:_.XS,height:_.XS,paddingHorizontal:g.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:_.XXS,height:_.XXS,paddingHorizontal:g.small,justifyContent:"center"}});var tD=Z.createResponsiveComponent(U.View),L8=Z.createResponsiveComponent(U.View.Child);function oD(t){let{readOnly:o,blockProps:e,baseUrl:n,summary:r,path:i,method:a,description:s,opened:l,setOpened:u}=t,{node:d,editor:p}=e,[,m]=T(N),f=wo.default.useRef(),h=wo.default.useRef(),y=wo.default.useRef();function S(){u(!l)}let w=U.useInteractiveComponent(l?b.ChevronDown:b.ChevronRight);return wo.default.createElement(tu.View,{style:[C.column,C.flex1,g.Padding.bottom200]},wo.default.createElement(Z.View,{style:[C.alignItemsCenter,g.Padding.all400,C.wrap],mobileStyle:C.flex1,desktopStyle:C.row},wo.default.createElement(U.TouchableOpacity,{style:g.Padding.right400,onPress:S},wo.default.createElement(w.Child,{size:_.ICON_M,style:m.textMuted,activeStyle:m.primary})),wo.default.createElement(tu.View,{style:[g.Margin.right400]},wo.default.createElement(Fy,{readOnly:o,method:a,setMethod:R=>{p.change(k=>{De.setMethod(k,d.key,R)})}})),wo.default.createElement(tD,{style:[C.wrap],mobileStyle:[C.flex1]},wo.default.createElement(ni,{ref:f,component:Hs,value:n,placeholder:"https://api.gitbook.com/v1",onChangeText:R=>{p.change(k=>{De.setBaseUrl(k,d.key,R)})},style:[m.Label,m.textMuted,Hy.breakWord],selectTextOnFocus:!0,readOnly:o,onSubmitEditing:()=>{h.current&&h.current.focus()}})),wo.default.createElement(tD,{style:[C.row],mobileStyle:[Hy.mobileEndpoint,g.Padding.top100]},wo.default.createElement(ni,{ref:h,component:Hs,value:i,placeholder:"/users",onChangeText:R=>{p.change(k=>{De.setPath(k,d.key,R)})},style:[m.Label,m.text,m.Bold,Hy.breakWord],selectTextOnFocus:!0,readOnly:t.readOnly,onSubmitEditing:()=>{y.current&&y.current.focus()}}),wo.default.createElement(L8,{style:[g.Margin.left100,mt.hidden],hoverStyle:[mt.visible],mobileStyle:{display:"none"}},wo.default.createElement(Zg,{size:"xsmall",content:`${n}${i}`})))),wo.default.createElement(tu.View,{style:Hy.headerBody},wo.default.createElement(tu.View,null,wo.default.createElement(ni,{ref:y,component:Hs,value:r,placeholder:"Operation summary",onChangeText:R=>{p.change(k=>{De.setSummary(k,d.key,R)})},style:[m.Heading3,m.text],readOnly:o,displayMode:"block",onSubmitEditing:()=>{p.change(R=>{if(l&&s&&"fragment"in s){let k=d.fragments.get(s.fragment);k&&R.collapseToStartOf(k)}else Ct(R,d);R.focus()})}})),l?wo.default.createElement(ZO,{readOnly:o,description:s,blockProps:e}):null))}var Hy=tu.StyleSheet.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:g.medium+_.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:g.medium+_.ICON_M+g.medium}});c();var rm=v(P());c();var tm=v(P()),nD=v(H());function rD(t){let{blockProps:o}=t,{editor:e,node:n}=o,r=tm.useRef(null),i=fe(r),a=se({groups:[{key:"parameters",commands:mw.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{e.change(p=>{De.addParameter(p,n.key,l)})}}))}]}),s=()=>{i.open(a)};return tm.createElement(nD.View,null,tm.createElement(W,{ref:r,title:"Add Parameter",icon:i.opened?b.X:b.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}var mw=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];c();var om=v(P()),nm=v(H());c();var Ro=v(P()),Ud=v(H());c();var wn=v(P()),Hd=v(H());var iD=U.createInteractiveHandle("swagger-row");function Wy(t){let{dragItem:o,columns:e,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:s,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:p,setOpened:m,node:f,ancestors:h}=t,[,y]=T(M8),S=Wd({node:f,ancestors:h}),w=Sn({disabled:t.readOnly,...Gn(o)}),R=br({shouldAccept:I=>o.type!==I.type?!1:o.id!==I.id&&o.blockKey===I.blockKey,onDrop:I=>{a(I)}}),k=br({shouldAccept:I=>o.type!==I.type?!1:o.id!==I.id&&o.blockKey===I.blockKey,onDrop:I=>{s(I)}}),x=wn.useRef(null),E=ki(x,w.setNodeRef),A=fe(x);return wn.createElement(Hd.View,null,wn.createElement(Hd.View,null,wn.createElement(U.View,{handle:iD,style:[C.row,C.alignItemsCenter,g.Padding.right600,w.isDragging?mt.translucent:mt.visible]},d?null:wn.createElement(Z.View,{style:[C.justifyCenter,S.controlButtons?.position],mobileStyle:"hidden"},wn.createElement(U.View.Child,{descendantOf:iD,activeStyle:mt.visible,inactiveStyle:A.opened?{}:mt.hidden},wn.createElement(W,{ref:E,icon:b.GrabberVertical,size:S.controlButtons?.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{A.open(i())},...w.listeners}))),wn.createElement(Z.View,{style:[C.flex1,C.row],mobileStyle:[C.wrap,C.alignItemsStart,g.Padding.vertical200],desktopStyle:[C.alignItemsStart,g.Padding.vertical400]},e.map((I,L)=>wn.createElement(Z.View,{key:L,style:[g.Padding.right200],desktopStyle:[I.desktopSize],mobileStyle:[y.columnResetWidth,I.mobileSize]},I.content))),r&&m?wn.createElement(Hd.View,{style:[g.Margin.left400]},wn.createElement(W,{icon:p?b.ChevronDown:b.ChevronRight,onPress:()=>m(!p)})):null),p?wn.createElement(Hd.View,null,r):null,n?null:wn.createElement(Hd.View,{style:y.borderLine})),d?null:wn.createElement(pf,{ref:R.setNodeRef,position:"top",dropHovered:R.isOver,button:{kind:"secondary",icon:b.Plus,onPress:l}}),n&&!d?wn.createElement(pf,{ref:k.setNodeRef,position:"bottom",dropHovered:k.isOver,button:{kind:"secondary",icon:b.Plus,onPress:u}}):null)}var M8=j.create({borderLine:t=>({height:1,backgroundColor:t.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-_.BUTTON_S/2,width:_.BUTTON_S},columnResetWidth:{width:"auto"}});c();var ou=v(P()),Yc=v(H());function Uy(t){let{title:o,button:e,children:n}=t,[,r]=T(N);return ou.createElement(Yc.View,{style:g.Margin.top600},ou.createElement(Yc.View,{style:[C.row,C.alignItemsCenter,g.Padding.bottom400]},ou.createElement(Yc.View,{style:C.flex1},ou.createElement(Yc.Text,{style:[r.Heading3,r.text]},o)),e?ou.createElement(Yc.View,{style:g.Padding.horizontal200},e):null),ou.createElement(Yc.View,null,n))}function zy(t){let{readOnly:o,blockProps:e,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=t,{node:s,editor:l}=e,[,u]=T(N),d=Ro.useRef(),p={id:n.key,type:"swagger-parameter",blockKey:s.key,previewLabel:"Move parameter"},{name:m="",type:f="",required:h,description:y,properties:S={},items:w}=n.value,[,R]=T(V8),[k,x]=Ro.useState(!1),E=Object.keys(S).length,A=E>0||!!w,I=s.fragments.get(n.key),L=q=>{l.change(J=>{De.setParameterName(J,s.key,n.key,q)})},B=q=>{l.change(J=>{De.setParameterType(J,s.key,n.key,q)})},Y=q=>{l.change(J=>{De.setParameterRequired(J,s.key,n.key,q)})},$=()=>{l.change(q=>{De.removeParameter(q,s.key,n.key)})},G=f==="object"&&E>0?Object.entries(S).map(([q,J],ie)=>Ro.createElement(zy,{key:q,...t,isLast:ie===E-1,parameter:{key:q,value:J}})):f==="array"&&w?Ro.createElement(zy,{...t,isLast:!0,parameter:{key:"items",value:w}}):null;return Ro.createElement(Wy,{...A?{opened:k,setOpened:x}:{},...e,readOnly:t.readOnly,dragItem:p,isLast:r,palette:()=>se({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:b.Trashcan,trigger:$}]}]}),columns:[{content:o?Ro.createElement(Ud.Text,{selectable:!0,style:[u.Code,u.text]},m,h?Ro.createElement(Ud.Text,{style:[u.danger]},"*"):null):Ro.createElement(Hs,{placeholder:"id",onChangeText:L,value:m,style:[u.Code,u.text],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:R.parameterColumnNameDesktop,mobileSize:R.parameterColumnNameMobile},{content:Ro.createElement(Hs,{ref:d,placeholder:"String",onChangeText:B,value:f,style:[u.Label,u.text],readOnly:o,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change(q=>{I&&q.collapseToStartOf(I).focus()})}}),desktopSize:R.parameterColumnTypeDesktop,mobileSize:R.parameterColumnTypeMobile},{content:Ro.createElement(Ro.Fragment,null,y?Ro.createElement(Ud.Text,{style:[u.Label,u.text]},y):I?Ro.createElement(Wr.Provider,{value:"swaggerParameter"},Ro.createElement(fr,{fragment:n.key})):null),desktopSize:C.flex1,mobileSize:!y&&(!I||I.isEmpty)?R.parameterDescriptionEmptyColumnMobile:null},o?null:{content:Ro.createElement(wI,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:q=>Y(q==="required")})}].filter(le),onInsertBefore:()=>{l.change(q=>{De.addParameter(q,s.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:q=>{l.change(J=>{De.moveParameter(J,s.key,q.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change(q=>{De.addParameter(q,s.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:q=>{l.change(J=>{De.moveParameter(J,s.key,q.id,n.value.in,{after:a,before:n.value.orderIndex})})}},G&&Ro.createElement(Ud.View,{style:[R.borderTop]},G))}var V8=j.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:g.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:t=>({borderTopWidth:1,borderTopColor:t.colors.border.muted})});function aD(t){let{parametersGroup:o,location:e,isLast:n,...r}=t,[,i]=T(N),a=mw.find(({location:s})=>s===e);return om.createElement(nm.View,{style:g.Margin.top200},om.createElement(nm.View,null,om.createElement(nm.Text,{style:[i.Label,i.Bold,i.text]},a.title)),o.map((s,l)=>{let u=o[l-1],d=o[l+1],p=l===o.length-1;return om.createElement(zy,{key:s.key,...r,parameter:s,isLast:p,beforeOrderIndex:u?.value.orderIndex,afterOrderIndex:d?.value.orderIndex})}))}function sD(t){let{parameters:o,readOnly:e,blockProps:n}=t,r=F8(o),i=Object.keys(r).length,a=De.SORTED_PARAMETERS_LOCATIONS.filter(s=>!!r[s]);return rm.createElement(Uy,{title:"Parameters",button:t.readOnly?null:rm.createElement(rD,{blockProps:n})},a.length>0?a.map((s,l)=>{let u=r[s];return rm.createElement(aD,{key:s,readOnly:e,blockProps:n,location:s,parametersGroup:u,isLast:l===i-1})}):rm.createElement(pe,null,"No parameters"))}function F8(t){return t.reduce((o,e)=>{let n=o[e.value.in]||[];return o[e.value.in]=[...n,e],o},{})}c();var im=v(P()),mD=v(H());c();var Ky=v(dD());var K8={2:Q.green.base,3:Q.primary.base,4:Q.orange.base,5:Q.scarlet.base},G8=Object.entries(Ky.message).map(([t,o])=>({code:t,message:o})),j8=new id(G8,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function hw(t){return K8[Math.floor(t/100)]||Q.lightModeGreyScale.dark}function Y8(t){return j8.search(t).map(o=>o.item)}function yw({code:t,message:o}){let e=o||Ky.message[t];return e?`${t}: ${e}`:`${t}`}function fD(t){let[o,e]=t.split(": ");return{code:Number(o),message:e}}var pD=[200,201,204,400,401,403,404,500].map(t=>{let o=String(t),e=Ky.message[o];return{code:o,message:e}});function Gy(t,o){let e={key:"responses",commands:r=>(r.query.text?Y8(r.query.text):pD).slice(0,pD.length).map(a=>{let s=yw(a);return{key:a.code,title:s,icon:gt(b.Dot,{style:{color:hw(parseInt(a.code,10))}}),trigger:()=>{t(s)}}})},n=o?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:b.Trashcan,trigger:()=>{o()}}]},e]:[e];return se({search:"Type status code\u2026",groups:n})}function gD(t){let{blockProps:o}=t,{node:e,editor:n}=o,r=im.useRef(null),i=fe(r),a=Gy(l=>{n.change(u=>{De.addResponse(u,e.key,l)})}),s=()=>{i.open(a)};return im.createElement(mD.View,null,im.createElement(W,{ref:r,title:"Add Response",icon:i.opened?b.X:b.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}c();var Rn=v(P()),$s=v(H());c();var Ys=v(P()),wD=v(H());c();var nu=v(P());function hD(t){let{examples:o}=t,e=Object.keys(o),n=nu.useRef(null),r=fe(n),[i,a]=nu.useState(e[0]);return i?nu.createElement(sI,{code:o[i],syntax:$8(i),showToolbar:r.opened,toolbar:e.length>1?nu.createElement(W,{kind:"secondary",size:"small",ref:n,rightIcon:b.ChevronDown,onPress:()=>{r.open(se({groups:[{key:"media-types",commands:e.map(s=>({key:s,title:s,trigger:()=>{a(s)}}))}]}))}},i):null}):null}function $8(t){return t.includes("json")?"js":t.includes("xml")?"xml":"js"}c();var Be=v(P()),Po=v(H());function yD(t){let[,o]=T(SD);return Be.createElement(Po.ScrollView,{style:[o.container],horizontal:!0},Be.createElement(bw,{...t,isRoot:!0}))}function bw(t){let{schema:o}=t;if(o.type){let e=o.description||o.title;switch(o.type){case"object":return Be.createElement(bD,{name:"",properties:o.properties,requiredProperties:o.required,description:e,...t});case"array":return Be.createElement(vD,{name:"",items:o.items,description:e,...t});default:return Be.createElement(CD,{name:"",type:o.type,description:e,...t})}}else return o.anyOf?Be.createElement(jy,{type:"anyOf",options:o.anyOf}):o.oneOf?Be.createElement(jy,{type:"oneOf",options:o.oneOf}):o.allOf?Be.createElement(jy,{type:"allOf",options:o.allOf}):null}function bD(t){let{name:o,isRequired:e=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=t,[s,l]=Be.useState(!1);return Be.createElement($y,{name:o,type:"object",expandable:{expanded:s,setExpanded:l},required:e,isRoot:n,description:a},s?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let p=d.anyOf||d.oneOf||d.allOf;return p?Be.createElement(jy,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:p}):Be.createElement(bD,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return Be.createElement(vD,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return Be.createElement(CD,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function vD(t){let{name:o,isRequired:e=!1,isRoot:n=!1,items:r={},description:i=""}=t,[a,s]=Be.useState(!1);return Be.createElement($y,{name:o,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:s},description:i,required:e,isRoot:n},a?Be.createElement(bw,{schema:r}):null)}var Yy=_.ICON_S;function jy(t){let{name:o,type:e,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=t,[s,l]=Be.useState(!1);return Be.createElement($y,{type:o?e:"",name:o||e,expandable:{expanded:s,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},s?n.map((u,d)=>Be.createElement(bw,{key:d,schema:u})):null)}function CD(t){let{name:o,type:e,isRequired:n=!1,isRoot:r=!1,description:i=""}=t;return Be.createElement($y,{name:o,type:e,isRoot:r,required:n,description:i})}function $y(t){let{name:o,type:e,description:n,required:r,isRoot:i,expandable:a,specialKeyword:s,children:l}=t,[,u]=T(N),[,d]=T(SD),p=[u.Body,u.Bold,u.text],m=[g.Margin.left100];return Be.createElement(Po.View,{style:[C.column,i?null:g.Margin.top400]},Be.createElement(Po.View,{style:[C.row,C.alignItemsCenter]},Be.createElement(Po.TouchableOpacity,{onPress:a?()=>a.setExpanded(f=>!f):void 0},a?a.expanded?Be.createElement(b.ChevronDown,{size:Yy,style:[u.textMuted]}):Be.createElement(b.ChevronRight,{size:Yy,style:[u.textMuted]}):Be.createElement(Po.View,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),Be.createElement(Po.View,{style:[C.row,m]},o?Be.createElement(Po.View,{style:[g.Margin.right400]},s?Be.createElement(Po.Text,{style:p},o):Be.createElement(Po.Text,{selectable:!0,style:p},o,r?Be.createElement(Po.Text,{style:[u.danger,d.textFontCode]},"*"):null)):null,e?Be.createElement(Po.Text,{style:[u.Body,u.primary,d.textFontCode]},e):null)),Be.createElement(Po.View,{style:[C.row]},Be.createElement(Po.View,{style:d.placeholderIconWidth},a?.expanded?Be.createElement(Po.View,{style:d.verticalLine}):null),Be.createElement(Po.View,{style:[C.column,m,g.Padding.right400,d.descriptionWidth]},n?Be.createElement(Po.View,{style:[g.Margin.top100]},Be.createElement(ad,{markdown:n,kind:"secondary"})):null,l)))}var SD=j.create({container:t=>({backgroundColor:t.colors.background.muted,padding:g.medium,borderRadius:t.radiuses.medium}),textFontCode:{fontFamily:jg},placeholderIconWidth:{width:Yy},placeHolderIconHeight:{height:Yy},verticalLine:t=>({width:1,height:"100%",backgroundColor:t.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function Jy(t){let{examples:o,schema:e}=t,[n,r]=Ys.useState("example");return Ys.createElement(wD.View,null,Ys.createElement(kc,null,Ys.createElement(kc.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),e?Ys.createElement(kc.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?Ys.createElement(hD,{examples:o||{}}):null,n==="schema"&&e?Ys.createElement(yD,{schema:e}):null)}function PD(t){let{response:o,isLast:e,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=t,{node:a,editor:s}=i,[,l]=T(N),[u,d]=Rn.useState(!1),p={id:o.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:m,description:f}=o.value,h="Response description",{code:y}=fD(m),S=a.fragments.get(o.key),w=S?La(S):!1,R=o.value.examples||{},k=o.value.schema,x=!t.readOnly||S&&!w||Object.keys(R).length>0||typeof k<"u",E=A=>{s.change(I=>{De.setResponseDescription(I,a.key,o.key,A)})};return Rn.createElement(Wy,{...i,readOnly:t.readOnly,dragItem:p,isLast:e,opened:u,setOpened:d,palette:()=>Gy(A=>{s.change(I=>{De.setResponseStatus(I,a.key,o.key,A)})},()=>{s.change(A=>{De.removeResponse(A,a.key,o.key)})}),columns:[{content:Rn.createElement($s.View,{style:[C.row,C.alignItemsCenter]},Rn.createElement($s.View,{style:[g.Margin.right200]},Rn.createElement(b.Dot,{style:{color:hw(y)},size:_.ICON_M})),Rn.createElement($s.View,{style:C.flex1},Rn.createElement($s.Text,{style:[l.Label,l.text]},m))),desktopSize:RD.responseColumnStatusDesktop,mobileSize:RD.responseColumnStatusMobile},{content:Rn.createElement(ni,{component:Hs,placeholder:t.readOnly?void 0:h,onChangeText:E,value:f,style:[l.Label,l.text],readOnly:t.readOnly,displayMode:"block",onSubmitEditing:()=>{s.change(A=>{u&&S?A.collapseToStartOf(S):Ct(A,a),A.focus()})}}),desktopSize:C.flex1}],onDropAfter:A=>{s.change(I=>{De.moveResponse(I,a.key,A.id,{before:o.value.orderIndex,after:r})})},onDropBefore:A=>{s.change(I=>{De.moveResponse(I,a.key,A.id,{before:n,after:o.value.orderIndex})})},onInsertBefore:()=>{s.change(A=>{De.addResponse(A,a.key,parseInt(o.value.status,10)-1,{before:n,after:o.value.orderIndex})})},onInsertAfter:()=>{s.change(A=>{De.addResponse(A,a.key,parseInt(o.value.status,10)+1,{before:o.value.orderIndex,after:r})})}},x?Rn.createElement($s.View,{style:[C.flex1,g.Margin.vertical400]},S?Rn.createElement(Rn.Fragment,null,Rn.createElement(Wr.Provider,{value:"swaggerResponse"},Rn.createElement(fr,{fragment:o.key}))):Rn.createElement(Jy,{examples:R,schema:k})):null)}var RD=$s.StyleSheet.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});c();var am=v(P()),kD=v(H());function xD(t){let{readOnly:o,responses:e,blockProps:n}=t;return am.createElement(Uy,{title:"Responses",button:o?null:am.createElement(gD,{blockProps:n})},am.createElement(kD.View,{style:e.length>0&&g.Padding.bottom400},e.map((r,i)=>{let a=e[i-1],s=e[i+1];return am.createElement(PD,{key:r.key,...t,response:r,isLast:i===e.length-1,beforeOrderIndex:a?.value.orderIndex,afterOrderIndex:s?.value.orderIndex})})))}c();var Fo=v(P()),Ur=v(H());c();c();c();var ID=nh("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-LZ7AUHCC.min.js"));var TD=ID;var ru=sr({getValue:async t=>{let o=(await TD.load()).default;return await o(t)},toJS:t=>q8(t),fromJS:t=>X8(t)});function sm(t,o){if(!t)return null;o||(o={path:Object.keys(t.paths)[0],method:"get"},o.method=Object.keys(t.paths[o.path])[0]);let n=t.paths[o.path]?.[o.method];if(!n)return null;let r=Object.keys(t.paths).indexOf(o.path),i=dd.indexOf(o.method);return i=i>-1?i:dd.length,{operation:n,path:o.path,httpMethod:o.method,index:r*dd.length+i}}function q8(t){return JSON.parse(JSON.stringify(t,XI()))}function X8(t){return JSON.parse(JSON.stringify(t),QI())}function cm(t){let{onClose:o,data:e,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=t,s=Ie();if(!("ref"in e))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let l=dt(),[u]=la.read([s,e.ref,l]);if(typeof u?.target!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");let{result:d}=ru.readSafe(u.target),p=d?.paths||{},m=Object.keys(p).reduce((R,k)=>{let x=p[k];return R.concat(Object.keys(x).map(E=>({path:k,method:E})))},[]),f=sm(d,e.method&&e.path?{method:e.method,path:e.path}:void 0),[h,y]=Fo.default.useState(f?{[f.index]:{path:f.path,method:f.httpMethod}}:{}),S=()=>{let R=Object.keys(h).map(Number).sort((k,x)=>k-x);i(R.map(k=>h[k])),o()},w=(R,k,x)=>{if(!n){y({[k]:R});return}if(x&&y({...h,[k]:R}),!x){let E={...h};delete E[k],y(E)}};return Fo.default.createElement(Co,{onClose:o,title:"Choose API operation",footer:Fo.default.createElement(Ur.View,{style:[C.row,C.justifySpaceBetween]},Fo.default.createElement(Ur.View,{style:[C.row,C.justifyStart]},a?Fo.default.createElement(W,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source"):null),Fo.default.createElement(Ur.View,{style:[C.row,C.flex1,C.justifyEnd]},Fo.default.createElement(W,{size:"large",kind:"primary",onPress:()=>{S()}},typeof r=="string"?r:r(Object.keys(h).length))))},Fo.default.createElement(Ur.FlatList,{data:m,renderItem:({item:R})=>{let k=sm(d,R);if(!k)return null;let x=!!h[k.index];return Fo.default.createElement(Q8,{key:k.index,index:k.index,item:R,operation:k.operation,multi:n,selected:x,onSelect:w})}}))}function Q8(t){let{item:o,selected:e,onSelect:n,operation:r,index:i,multi:a}=t,[,s]=T(N);return Fo.default.createElement(Os,{style:g.Padding.horizontal200,onPress:()=>n(o,i,a?!e:!0),layout:"wide",title:Fo.default.createElement(Ur.View,{style:[C.row,C.flex1,C.alignItemsCenter]},Fo.default.createElement(Ur.View,{style:[{minWidth:_.L},g.Margin.right200]},Fo.default.createElement(Fy,{readOnly:!0,method:o.method})),Fo.default.createElement(Ur.View,{style:[C.flex1]},Fo.default.createElement(Ur.Text,{style:[s.Code,s.text,Z8.apiPath]},o.path),Fo.default.createElement(Ur.Text,{style:[s.Caption,s.textMuted]},r?.summary))),buttons:[a?Fo.default.createElement(Pc,{value:e,onValueChange:l=>n(o,i,l)}):Fo.default.createElement(uh,{value:e,onValueChange:()=>n(o,i,!0)})]})}var Z8=Ur.StyleSheet.create({apiPath:{fontSize:Yg.xsmall,wordWrap:"anywhere"}});function ED(t,o){let e=Rc(),[n,r]=$c.useState(null),[i,a]=$c.useState(o),s=Li(e,t),{blocks:{withAPIs:l}}=$c.useContext(ce),u=p=>{let f=e.value.document.assertBlock(p).data.toFrozenObject();return[{key:"swagger",commands:[l?{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:b.Paperclip,trigger:()=>{l.filesManager.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(a({ref:h}),r("swagger"))})}}:null,i&&"ref"in i?{key:"pickMethod",title:"Choose API operation",icon:b.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:b.ChevronsVertical,type:2,enabled:!!f.expanded,title:"Expanded",trigger:()=>(e.change(h=>{f.expanded?h.setDataByKey(p,["expanded"],!1):h.setDataByKey(p,["expanded"],!0)}),ct(e,p,u(p)))}].filter(le)},...s?[s]:[]]};return[ct(e,t,u(t)),$c.createElement(St,null,n==="swagger"?$c.createElement(cm,{data:i,buttonText:"Update Block",onRequestChangeSource:l?()=>{r(null),l.filesManager.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([p])=>{p&&a({ref:p}),r("swagger")})}:void 0,onSelect:([p])=>{e.change(m=>{m.setNodeByKey(t,{data:{...i,method:p?.method,path:p?.path}})})},onClose:()=>r(null)}):null)]}c();var Xy=v(P());c();var si=v(P()),Jc=v(H());function qy(t){let{opened:o,setOpened:e,readOnly:n,parameters:r,header:i,requestBody:a,responses:s,blockProps:l,description:u}=t,[,d]=T(N);return si.default.createElement(si.default.Fragment,null,si.default.createElement(oD,{blockProps:l,readOnly:n,opened:o,setOpened:e,description:u.description,...i}),si.default.createElement(Jc.View,{style:e6.operationBody},o?si.default.createElement(si.default.Fragment,null,si.default.createElement(sD,{blockProps:l,readOnly:n,...r}),a?si.default.createElement(Jc.View,{style:g.Margin.top600},si.default.createElement(Jc.View,null,si.default.createElement(Jc.Text,{style:[d.Label,d.Bold,d.text]},"Body")),si.default.createElement(Jy,{examples:a.examples,schema:a.schema})):null,si.default.createElement(xD,{blockProps:l,readOnly:n,...s})):null))}var e6=Jc.StyleSheet.create({operationBody:{padding:g.medium,paddingLeft:g.medium+_.ICON_M+g.medium,paddingTop:0}});function OD(t){let{blockProps:o,data:e,opened:n,setOpened:r}=t,{editor:i}=o;if("ref"in e)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:s,method:l,path:u,summary:d}=e,{parameters:p={},responses:m={}}=e,f=Xy.default.useMemo(()=>De.defaultParameterSortedKeys(p).map(S=>({key:S,value:p[S]})),[p]),h=Xy.default.useMemo(()=>De.defaultResponseSortedKeys(m).map(S=>({key:S,value:m[S]})),[m]);return Xy.default.createElement(qy,{blockProps:o,readOnly:a,opened:n,setOpened:r,header:{baseUrl:s,method:l,summary:d,path:u},parameters:{parameters:f},description:{description:{fragment:"description"}},responses:{responses:h}})}c();var qc=v(P());function DD(t){let{blockProps:o,data:e,opened:n,setOpened:r,readOnly:i}=t;if(!("ref"in e))throw new Error("trying to render a swagger block that is not refering to a swagger file");let s=nt(e.ref).href,{result:l,error:u}=ru.readSafe(s),d=sm(l,e.path&&e.method?{path:e.path,method:e.method}:void 0),{operation:p,path:m,httpMethod:f}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=qc.default.useMemo(()=>p.parameters.sort(({in:S},{in:w})=>De.SORTED_PARAMETERS_LOCATIONS.indexOf(S)<De.SORTED_PARAMETERS_LOCATIONS.indexOf(w)?-1:1).reduce((S,w,R)=>{let k=S[R-1],x=kC(k?{before:k.value.orderIndex}:{});return S.push({key:SC(),value:{...w,orderIndex:x}}),S},[]),[p.parameters]),y=qc.default.useMemo(()=>p.responses.sort(({status:S},{status:w})=>S<w?-1:1).reduce((S,w,R)=>{let k=S[R-1],x=kC(k?{before:k.value.orderIndex}:{});return S.push({key:SC(),value:{...w,status:yw({code:w.status}),orderIndex:x}}),S},[]),[p.responses]);if(u)return i?qc.default.createElement(lm,null):qc.default.createElement(Ti,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:mc(u)});if(!d){if(i)return qc.default.createElement(lm,null);let S=e.method&&e.path?`${e.method?.toUpperCase()} "${e.path}"`:"";return qc.default.createElement(Ti,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${S} in the OpenAPI file.`})}return qc.default.createElement(qy,{blockProps:o,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:l?.baseUrl||"",method:f,summary:p.summary||"",path:m},parameters:{parameters:h},requestBody:p.requestBody,responses:{responses:y},description:{description:p.description?{text:p.description}:void 0}})}function AD(t){let{node:o,isFocused:e,editor:n}=t,r=o.data.toFrozenObject(),[i,a]=ED(o.key,r),[s,l]=T(t6),{sections:u}=zr.default.useContext(Ai),{current:d}=Gg(),p=u.get(o.key),m=ot(),[f,h]=zr.default.useState(m||e||!!r.expanded);zr.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let y=zr.default.createElement(Nr,{style:[l.blockSwagger,f&&l.blockSwaggerOpened],backgroundColor:s.colors.background.main,nativeID:p},zr.default.createElement(zr.default.Suspense,{fallback:zr.default.createElement(Mo,{size:"small"})},"ref"in r?zr.default.createElement(DD,{readOnly:n?.readOnly,blockProps:t,data:r,opened:f,setOpened:h}):zr.default.createElement(OD,{blockProps:t,data:r,opened:f,setOpened:h})));return zr.default.createElement(zr.default.Fragment,null,a,zr.default.createElement(xe,{palette:i,...t},!("ref"in r)&&f||n.readOnly?y:zr.default.createElement(Xt,{...t},y)))}var t6=j.create({blockSwagger:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1}),blockSwaggerOpened:t=>({...t.shadows.spread})});c();var BD=v(P());var o6=Vt({key:"lastSwaggerReference",default:{}});function LD(t){let[o,e]=fn(o6),n=dt(),r=Ie(),i=n.space?Qr(r.store.getBranchRevision(n.space,"changeRequest"in n&&n.changeRequest?_g(n.changeRequest):Ag)):void 0,a=i?o[i.contentId]:null,s=BD.default.useCallback(d=>{i&&e({...o,[i.contentId]:d})},[i?.contentId,e]);if(a?.kind==="url")return[a,s];if(a?.kind==="file"&&i?.files[a.file])return[a,s];let l=De.getProbableRef(t.value.document);if(l)return[l,s];let u=Object.values(i?.files||{}).filter(d=>Uu(d)).sort((d,p)=>{let m=tf(d.edits)?.updatedAt;return(tf(p.edits)?.updatedAt||0)-(m||0)});return[u.length?{kind:"file",file:u[0].id}:null,s]}c();var vw=v(P());c();c();var zD=v(_D()),Ho=v(P()),au=v(H());c();var ko=v(P());c();var um=v(P()),FD=v(H());function HD(t){return se({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:ly.map(o=>ND(t,o,!1))},{key:"background",title:"Background",commands:uy.map(o=>ND(t,o,!0))}]})}function ND(t,o,e){let n=t.value.activeMarks.find(a=>a.type===Jp),r=e?"background":"text",i=n&&n.data.get(r)===o.key;return{key:`${e?"background_":"foreground_"}${o.key}`,title:o.title,type:1,selected:!!i,icon:({size:a})=>e?um.createElement(VD,{size:a,backgroundColor:o.color,color:Q.BLACK}):um.createElement(VD,{size:a,backgroundColor:Q.WHITE,color:o.color}),trigger:()=>{t.change(a=>{n&&a.removeMark(n),i||a.addMark({type:Jp,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:o.key}})})}}}function VD(t){let{size:o=_.ICON_S,color:e,backgroundColor:n}=t;return um.createElement(FD.View,{style:[C.row,C.alignItemsCenter,C.justifyCenter,{width:o+2,height:o+2,borderRadius:_.RADIUS_M,backgroundColor:n}]},um.createElement(b.Type,{style:{color:e,fontSize:o*.9}}))}c();var Kr=({type:t,editor:o})=>()=>{o.change(e=>{e.toggleMark(t),e.focus()})},iu=({palette:t,editor:o,contentReferenceContext:e,isInLink:n,hiveClient:r,insertAtRange:i})=>()=>{if(n){o.change(s=>{s.unwrapInline({type:Ln}).focus()});return}o.change(s=>{eb(s)});let a=Yn(s=>{o.change(l=>{i?El.insertContentReferenceAtRange(l,s,i):El.insertContentReference(l,s)})},{...e,document:o.value.document},r);return t.open(a),a},Zy=({editor:t})=>()=>{t.change(o=>{xg.wrapWithAnnotation(o)})};function WD(t){let{value:o,editor:e,palette:n}=t,r=Ie(),i=dt(),a=o.activeMarks.map(h=>h.type),{startBlock:s,document:l}=o;ge(s);let u=o.hasInline(Ln),p=!(s.type===Aa),m=()=>{e.change(h=>{eb(h)}),n.open(HD(e))},f=()=>{e.change(h=>{h.removeAllMarks().focus()})};return ko.createElement(WE,{onTabToExit:()=>{e.change(h=>{h.focus()})}},p?ko.createElement(Bf,null,Pg(s)?null:ko.createElement(Dt,{leadingIcon:b.Bold.CSS,active:a.has(ur),onPress:Kr({type:ur,editor:e}),tooltipTitle:"*Bold*",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_BOLD}),label:"Bold",iconOnly:!0,preventFocusOnPress:!0}),ko.createElement(Dt,{leadingIcon:b.Italic.CSS,active:a.has(dr),onPress:Kr({type:dr,editor:e}),tooltipTitle:"_Italic_",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_ITALIC}),label:"Italic",iconOnly:!0,preventFocusOnPress:!0}),ko.createElement(Dt,{leadingIcon:b.Strikethrough.CSS,active:a.has(ti),onPress:Kr({type:ti,editor:e}),tooltipTitle:"~~Strikethrough~~",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_STRIKETHROUGH}),label:"Strikethrough",iconOnly:!0,preventFocusOnPress:!0}),ko.createElement(Dt,{leadingIcon:b.Code.CSS,active:a.has(go),onPress:Kr({type:go,editor:e}),tooltipTitle:"`Code`",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_CODE}),label:"Code",iconOnly:!0,preventFocusOnPress:!0})):null,ko.createElement(Bf,null,ks({document:l,block:s},Ln)?ko.createElement(Dt,{leadingIcon:b.Link.CSS,onPress:iu({palette:n,editor:e,contentReferenceContext:i,isInLink:u,hiveClient:r}),active:u,tooltipTitle:"Link",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_LINK}),label:"Link",iconOnly:!0,preventFocusOnPress:!0}):null,ks({document:l,block:s},Cg)&&xg.isSelectionAnnotable(o)?ko.createElement(Dt,{leadingIcon:b.Annotation.CSS,onPress:Zy({editor:e}),active:u,tooltipTitle:"Annotate",tooltipBadge:ko.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_ANNOTATION}),label:"Annotate",iconOnly:!0,preventFocusOnPress:!0}):null),p?ko.createElement(Bf,null,ko.createElement(Dt,{tooltipTitle:"Color",leadingIcon:b.Highlight.CSS,onPress:m,label:"Color",iconOnly:!0,preventFocusOnPress:!0})):null,ko.createElement(Bf,{disabled:a.isEmpty()},ko.createElement(Dt,{leadingIcon:b.PublishStatusUnpublished.CSS,onPress:f,tooltipTitle:"Clear formatting",label:"Clear formatting",iconOnly:!0,preventFocusOnPress:!0})))}function KD(t){let{value:o,selection:e}=t,n=Rc(),r=Ie(),i=dt(),[a,s]=Ho.useState(null),[l,u]=Ho.useState(!1),d=Ho.useRef(null),p=_n(a),m=Ho.useRef(null),f=Ho.useRef(null),h=fe(d,{onClose:()=>{n.change(B=>{jD(B),B.focus()})}}),{width:y,height:S}=(0,au.useWindowDimensions)(),w=U.useInteractiveState(),R=!o.isInVoid,k=o.hasInline(Ln),x=!Pg(o.startBlock),E=!!R,A=E&&a,I=l&&e.isFocused&&e.isExpanded;ri(R?{...x?{[ze.EDITOR_BOLD]:Kr({type:ur,editor:n})}:{},[ze.EDITOR_ITALIC]:Kr({type:dr,editor:n}),[ze.EDITOR_CODE]:Kr({type:go,editor:n}),[ze.EDITOR_STRIKETHROUGH]:Kr({type:ti,editor:n}),[ze.EDITOR_LINK]:iu({palette:h,editor:n,contentReferenceContext:i,hiveClient:r,isInLink:k}),[ze.EDITOR_ANNOTATION]:Zy({editor:n})}:{},"editor-selection-expanded",[e,i,x,n,k,R,h]),ri(R?{...x?{[ze.EDITOR_BOLD]:Kr({type:ur,editor:n})}:{},[ze.EDITOR_ITALIC]:Kr({type:dr,editor:n}),[ze.EDITOR_CODE]:Kr({type:go,editor:n}),[ze.EDITOR_STRIKETHROUGH]:Kr({type:ti,editor:n})}:{},"editor-selection-collapsed",[e,x,n,R]),Ho.useEffect(()=>{!E||h.opened||(m.current=e,s(UD(n)))},[e]);let L=xx(200);return Ho.useEffect(()=>{if(!E)return;let B=()=>{h.opened||(p.current&&s(null),L(()=>{s(UD(n))}))};return window.addEventListener("scroll",B,!0),()=>{window.removeEventListener("scroll",B,!0)}},[h,E,p,L]),Ho.useLayoutEffect(()=>{f.current?.updatePosition()},[y,S]),Ho.useLayoutEffect(()=>{let B=setTimeout(()=>{u(e.isExpanded)},200);return()=>{u(!1),clearTimeout(B)}},[e.isExpanded]),A?Ho.createElement(Nn,null,Ho.createElement(au.View,{ref:d,pointerEvents:"none",style:[n6.formattingMenuWrapper,a],dataSet:{"hide-on-drag":!0}},I?Ho.createElement(Vn,{ref:f,kind:"menu",preferredPlacement:"top",chromeless:!0},Ho.createElement(au.View,{style:[C.row,g.Padding.all100],...w.events},Ho.createElement(WD,{value:o,editor:n,palette:h}))):null)):null}function UD(t){let o=window.getSelection();if(!o||o.rangeCount<1)return null;let e=o.getRangeAt(0),n=zD.default.getBoundingClientRect(e);if(!n)return null;let r=o.anchorNode;if(!r||!cI(t,r))return null;let i=r?GD(r):null,a=15,s={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(s.width<a&&(s.left-=(a-s.width)/2,s.width=a),i){let l=i.getBoundingClientRect();if(s.top<l.top||s.top+s.height>l.bottom)return null}return s}function GD(t){if(t instanceof HTMLElement){let o=getComputedStyle(t,null);if(o.getPropertyValue("overflow")==="auto"||o.getPropertyValue("overflow")==="scroll"||o.getPropertyValue("overflow-y")==="auto"||o.getPropertyValue("overflow-y")==="scroll")return t}return t.parentNode?GD(t.parentNode):null}var n6=au.StyleSheet.create({formattingMenuWrapper:{position:"absolute",zIndex:100,animationDelay:"250ms"}});function tb(t){let{anchorRef:o,editor:e,range:n}=t,r=Ie(),{blocks:{withImages:i}}=vw.default.useContext(ce),a=dt(),s=fe(o,{onClose:()=>{s.close(),!i?.filesManager.isOpen()&&e.change(l=>l.focus())}});return vw.default.useMemo(()=>{let l=[];return i&&l.push({key:"inline-image",title:"Inline image",icon:b.Image,trigger:()=>{e.change(u=>u.blur()),i.filesManager.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(u=>{e.change(d=>{if(Ao(d.value.selection))return d;let p=n??d.value.textSelection;u.forEach(m=>{d.insertInlineAtRange(p,Zo.createImageInline(m))}),d.focus()})})}}),l.push({key:"emoji",title:"Emoji",icon:b.EmojiReaction,trigger:()=>kd(u=>{e.change(d=>{if(Ao(d.value.selection))return d;let p=n??d.value.textSelection;d.insertInlineAtRange(p,Tg.createEmoji(u)).focus()})})},{key:"link",title:"Link",icon:b.Link,trigger:iu({hiveClient:r,palette:s,editor:e,contentReferenceContext:a,isInLink:!1,insertAtRange:n})},{key:"inline-math",title:"Math & TeX",icon:b.MathTeX,trigger:()=>{e.change(u=>{if(Ao(u.value.selection))return u;let d=n??u.value.textSelection;u.insertInlineAtRange(d,Ol.createMathInline()).focus()})}}),l},[n,e,e.value.selection,s,a,i,r])}function YD(t,o,e,n="replace",r){let[i,a]=$n.useState(null),s=sd(),{integrationsBlocksSubscription:l,logAnalyticsEvent:u,blocks:d,suggestIntegrations:p}=$n.useContext(ce),{withImages:m,withAPIs:f,withDrawings:h,withFiles:y,withTables:S}=d,w=l.getCurrentValue,R=xi(),[k,x]=LD(t),E=dt(),A=Ie(),I=tb({anchorRef:r,editor:t}),L=$n.useCallback(()=>{a(null)},[]),B=$n.useCallback((q,J="end")=>{L(),zd(t,e.key,q,n,J)},[L,t,e.key,n]),Y=$n.useCallback((q,J="end")=>{L();let ie;q.forEach((ye,Pe)=>{zd(t,ie||e.key,ye,Pe===0?n:"after",J),ie=ye.key})},[L,t,o.key,e.key,n]),$=$n.useCallback(q=>{let{blockType:J,...ie}=q;u({type:"edit_page_document_insert_block",from:"palette",blockType:J,...ie})},[u]),G=$n.useMemo(()=>{let q=(J,ie=()=>!0)=>Object.entries(J).map(([ye,Pe])=>ie(ye)?Pe.map(Je=>({key:`${ye}.${Je.id}`,title:Je.title,icon:gt(XO,{block:Je}),trigger:()=>{Je.urlUnfurl&&Je.urlUnfurl.length>0?a("embed"):(B(Og.createIntegrationBlock(ye,Je.id)),$({blockType:ei,integration:ye,integrationBlock:Je.id}))}})):[]).flat();return se({search:"Insert block\u2026",groups:[{key:"inline-controls",commands:n==="replace"&&e.isEmpty?I:[]},{key:"texts",commands:[He(o,be)?{key:"paragraph",title:"Paragraph",icon:b.Paragraph,trigger:()=>{B(Tt.create({type:be})),$({blockType:be})}}:null].filter(le)},{key:"headings",commands:[He(o,Ue)?{key:"heading_1",title:"Heading 1",icon:b.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{B(Tt.create({type:Ue})),$({blockType:Ue})}}:null,He(o,je)?{key:"heading_2",title:"Heading 2",icon:b.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{B(Tt.create({type:je})),$({blockType:je})}}:null,He(o,at)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:b.Heading3,trigger:()=>{B(Tt.create({type:at})),$({blockType:at})}}:null].filter(le)},{key:"lists",commands:[He(o,fo)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:b.ListUnordered,trigger:()=>{B(ft.createList(fo)),$({blockType:fo})}}:null,He(o,$t)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:b.ListOrdered,trigger:()=>{B(ft.createList($t)),$({blockType:$t})}}:null,He(o,mo)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:b.ListTasks,trigger:()=>{B(ft.createList(mo)),$({blockType:mo})}}:null].filter(le)},{key:"dividers",commands:[He(o,Ss)?{key:"divider",title:"Divider",keywords:["Horizontal rule","Separator","Thematic break","hr"],icon:b.Divider,trigger:()=>{B(Tt.create({type:Ss})),$({blockType:Ss})}}:null].filter(le)},{key:"panels",commands:[He(o,po)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:b.InfoCircle,trigger:()=>{B(Ak.createHint()),$({blockType:po})}}:null,He(o,Jt)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:b.Quote,trigger:()=>{B(Bk.create()),$({blockType:Jt})}}:null,He(o,cr)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:b.Code,trigger:()=>{B(io.createCodeBlock("// Some code")),$({blockType:cr})}}:null].filter(le)},{key:"others",commands:[y&&He(o,Cs)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:b.Files,trigger:()=>{y.filesManager.prompt({title:"Files"}).then(J=>{let ie=J.map(ye=>ye.kind==="file"?Eg.createFileBlock(ye):null).filter(le);Y(ie,"end"),$({blockType:Cs,files:ie.length})})}}:null,m&&He(o,gn)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:b.Image,trigger:()=>{m.filesManager.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(J=>{B(Tt.create({type:gn,isVoid:!0,nodes:J.map(ie=>Zo.createImageBlock(ie))})),$({blockType:gn,images:J.length})})}}:null,He(o,Bn)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:b.ExternalLink,trigger:()=>{a("embed")}}:null,S&&He(o,Mr)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:b.Table,trigger:()=>{B(te.createTable()),$({blockType:Mr,tableView:"grid"})}}:null,S&&He(o,Mr)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:b.Cards,trigger:()=>{B(te.createTable({view:"cards"})),$({blockType:Mr,tableView:"cards"})}}:null,He(o,lr)?{key:"tabs",title:"Tabs",icon:b.Tabs,trigger:()=>{B(ta.createTabs(),"start"),$({blockType:lr})}}:null,He(o,Zr)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:b.BlockExpandable,trigger:()=>{B(xs.createExpandableBlock(),(J,ie)=>{J.collapseToStartOf(xs.getTitleFragment(ie)).focus()}),$({blockType:Zr})}}:null,h&&He(o,vs)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:b.EditDrawing,trigger:()=>{B(Dk.createDrawingBlock()),$({blockType:vs})}}:null,He(o,Il)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:b.MathTeX,trigger:()=>{B(Ol.createMathBlock()),$({blockType:Il})}}:null,He(o,Bo)?{key:"api-method",title:"API Method",icon:b.Swagger,keywords:["api"],trigger:()=>{B(De.createBlock()),$({blockType:Bo})}}:null,f&&He(o,Bo)?{key:"swagger",title:"OpenAPI",icon:b.Swagger,keywords:["api","swagger"],trigger:()=>{k?a({ref:k}):f.filesManager.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([J])=>{J&&(x(J),a({ref:J}))})}}:null,He(o,Rs)?{key:"content-ref",title:"Page Link",icon:b.PageLink,keywords:["references"],trigger:()=>Yn(J=>{B(El.createContentRefBlock(J)),$({blockType:Rs,contentRefKind:J.kind})},E,A,{accept:["page","space","collection"]})}:null].filter(le)},He(o,ei)?{key:"integrations",commands:()=>{let J=w();return q(J)}}:null,He(o,ei)?{key:"integrations",commands:()=>{let J=p();if(!Object.keys(J).length)return[];let ie=w();return q(J,ye=>!ie[ye])}}:null,He(o,Bn)?{key:"embeds",commands:J1.map(J=>({key:J.key,title:J.title,icon:({size:ie})=>$n.createElement(en,{source:{uri:(R.color==="dark"?J.iconDark:null)||J.icon},style:{width:ie,height:ie}}),trigger:()=>{a("embed")}}))}:null].filter(le)})},[B,s.uid,E,t,R.color,w,p,m,f,h,y,S]);return[$n.createElement(St,null,i==="embed"?$n.createElement(X1,{onInsert:B,onClose:L}):i&&"ref"in i&&f?$n.createElement(cm,{onClose:L,data:i,multi:!0,buttonText:q=>`Insert ${q} blocks`,onRequestChangeSource:()=>{a(null),f.filesManager.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([q])=>{q&&a({ref:q})})},onSelect:q=>{$({blockType:Bo,swaggerOperations:q.map.length,swaggerSource:i.ref.kind}),Y(q.map(J=>De.createBlockWithRef(i.ref,J.path,J.method))),L()}}):null),G]}function zd(t,o,e,n,r){t.change(i=>{let a=t.value.document.getParent(o);if(!a)return;let s=a.getChildIndex(o);if(s<0)return;if(n==="replace")e.object==="block"?i.replaceNodeByKey(o,e):i.replaceWithDocumentByKey(o,e);else{let u=n==="after"?s+1:s;e.object==="block"?i.insertNodeByKey(a.key,u,e):i.insertDocumentByKey(a.key,u,e)}let l=i.value.document.getNode(e.object==="block"?e.key:e.nodes.first().key);l&&(Yt(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(xl.create({anchorBlock:l.key,focusBlock:l.key})))})}var ob={insert:{label:"Insert block",title:`Click to add below
${WC("alt")} + click to add above`},options:{label:"Block controls",title:`Click for options. ${WC(ze.EDITOR_MODIFIER_PALETTE)}
Drag to move.`}};function $D(t){let{optionsPalette:o,node:e,editor:n,parent:r,layout:i,drag:a,isDragging:s,isFocused:l,isHovered:u}=t,d=Hx(),p=Wo.useRef(!1),[m,f]=Wo.useState("replace"),h=Wo.useRef(null),y=fe(h),[S,w]=YD(n,r,e,m,h),R=Wo.useRef(null),k=fe(R,{onClose:()=>{n.change(J=>{J.focus()})}}),x=()=>{p.current=!!d.current,e.isEmpty&&p.current?y.open(w):k.open((typeof o=="function"?o():o)||ct(n,e.key)),n.change(J=>{e&&Yt(J.value.selection)&&!J.value.selection.hasEdgeIn(e)&&J.collapseToStartOf(e),J.blur()})},E=ki(R,a.setNodeRef);ri(l?{...e.isEmpty?{[ze.EDITOR_PALETTE]:x,[ze.EDITOR_I18N_PALETTE]:x}:{},[ze.EDITOR_MODIFIER_PALETTE]:()=>i.withOptionsButton?k.open((typeof o=="function"?o():o)||ct(n,e.key)):!1}:{},"editor-selection-collapsed",[l,k,o,n,e.isEmpty,e.key]);let A=u||k.opened||y.opened,[I,L]=Wo.useState(!1),B=Wo.useRef(null),Y=i.withInsertButton,$=Y?["fade","slide"]:["fade"],G=UC(O.animations,["distance-s","enter","right",...$],A),q=UC(O.animations,["distance-s","exit","right",...$],I&&!A);return Wo.useEffect(()=>{function J(ye){L(ye.animationName.includes("Enter"))}function ie(){L(!1)}return Y&&(B.current?.addEventListener("animationend",J),B.current?.addEventListener("animationcancel",ie)),()=>{B.current?.removeEventListener("animationcancel",ie),B.current?.removeEventListener("animationend",J)}},[Y]),Wo.createElement(F,{contentEditable:!1,style:[$S.hitArea],inlineStyle:i.hitArea.inlineStyle},S,Wo.createElement(F,{ref:B,style:[$S.buttonWrapper,G,q,Y?O.flex.justifyEnd:O.flex.justifyStart],inlineStyle:i.position},i.withInsertButton?Wo.createElement(Wo.Fragment,null,Wo.createElement(Dt,{contentEditable:!1,kind:"muted",iconOnly:!0,leadingIcon:b.Plus.CSS,label:ob.insert.label,preventFocusOnPress:!0,tooltipTitle:ob.insert.title,onPressStart:J=>f(J.altKey?"before":"after"),onPress:J=>{y.open(w)},onPressEnd:()=>f("replace"),size:i.size,style:zC,ref:h})):Wo.createElement(F,{ref:h,id:"palette-ref--"}),i.withOptionsButton?Wo.createElement(Dt,{contentEditable:!1,kind:"muted",ref:E,size:i.size,iconOnly:!0,label:ob.options.label,leadingIcon:b.GrabberVertical.CSS,tooltipTitle:ob.options.title,preventFocusOnPress:!0,tooltipDisabled:s,onPress:()=>x(),style:zC,...a.listeners}):null))}c();var pt=v(P()),h2=v(H());c();var Kd=v(P()),qD=v(H());c();var JD=v(H());var su={added:Q.green.base,deleted:Q.scarlet.base,modified:Q.primary.base},nb=JD.StyleSheet.create({added:{color:su.added},deleted:{color:su.deleted},modified:{color:su.modified}});function rb(t){let{diff:o,style:e,size:n,highlighted:r}=t,[,i]=T(r6),a=U.useInteractiveState(),s=o==="added"?b.DiffAdded:o==="deleted"?b.DiffRemoved:o==="modified_inside"?b.DiffModifiedInside:b.DiffModified;return Kd.createElement(ve,{editable:!1,style:[e,dm.avoidCalculatingBounds],...a.events,"data-hide-on-drag":!0},Kd.createElement(Ua,{tooltip:o==="modified_inside"?"This block contains nested changes":`This block has been ${o} in this change request`,preferredPlacement:"top"},(l,u)=>Kd.createElement(U.TouchableOpacity,{ref:u,style:[dm.diffContainer,r||a.hovered?dm.diffContainerHighlighted:null],...l.events},Kd.createElement(s,{style:[dm.diffIcon,nb[o]],size:n}),o!=="modified_inside"?Kd.createElement(ve,{style:[dm.diffLine,i.bodyColor]}):void 0)))}var dm=qD.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5,userSelect:"none"},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:g.xsmall},avoidCalculatingBounds:{width:0,overflow:"visible"}}),r6=j.create({bodyColor:(t,o)=>({backgroundColor:o.color==="dark"?Q.darkModeText.xdark:Q.lightModeText.xlight})});c();var XD=v(P());c();var ib=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function Cw(t){let{isSelected:o=!1,isBlockSelection:e=!1}=t;return XD.default.createElement(F,{style:[ib.halo,{[ib.ready]:e,[ib.show]:o}],as:"span",contentEditable:!1})}Cw.displayName="BlockSelectionHalo";c();var Sw=4,ww=g.medium,Rw=4,Pw=g.xlarge+g.small,kw=g.large,i6=-96,QD=i6+g.large,ab=QD+g.small,pm={[Jt]:-(ww+Sw/2),[po]:-(Pw+Rw/2),[Lr]:-kw},xw={[Jt]:pm[Jt],[po]:pm[po],[Lr]:pm[Lr]},Iw=_.ICON_XS,cu=QD,ZD=g.large+4,e2=g.large+8,t2=g.large+8,o2=28,n2=32,r2=34,lu=g.small;c();var l2=v(P()),u2=v(H());c();c();var Gd=g.medium;function a6(t,o){return o.nodes.find(e=>e.type===Ku&&e.nodes.some(n=>n.key===t.key))||t}function Mi(t,o,e){let n=o.getChildIndex(e?a6(t,o).key:t.key),r=n===0,i=n===o.nodes.size-1,a=(()=>{switch(o.type){case po:return{paddingTop:r?g.medium:g.xsmall,paddingBottom:i?g.medium:g.xsmall};case Jt:return{paddingTop:g.xsmall,paddingBottom:g.xsmall};case Qo:{if(!Ps.includes(t?.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:g.small,paddingBottom:g.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case ws:return{paddingTop:g.medium,paddingBottom:g.medium}}return{}})();return{...(()=>{switch(t.type){case Ue:return{paddingTop:g.large,paddingBottom:g.small};case je:return{paddingTop:g.large,paddingBottom:g.small};case at:return{paddingTop:g.large,paddingBottom:g.small};case be:return{paddingTop:g.small,paddingBottom:g.small};case $t:case fo:case mo:return{paddingTop:g.medium,paddingBottom:g.medium};case po:return{paddingTop:g.medium,paddingBottom:g.medium};case cr:return{paddingTop:g.medium,paddingBottom:g.medium};case Qo:return{paddingTop:r?0:g.xsmall,paddingBottom:i?0:g.xsmall};default:return{paddingTop:Gd,paddingBottom:Gd}}})(),...a}}c();var i2=v(yg()),fm=v(H()),Xc=100,sb=40,mm=800;function cb(t,o,e=!1){if(!t.useNewSizing)return s6(t,o,e);let n=new Map,r=0;t.columns.forEach(d=>{r+=t.columnWidths?.[d]||0});let i=Math.max(o-r,0),a=t.columns.length-Object.keys(t.columnWidths||{}).length,s=a===0?0:Math.floor(i/a),l=a===0?0:i-s*a,u=0;return t.columns.forEach(d=>{let p=typeof t.columnWidths?.[d]>"u",m=t.columnWidths?.[d]||0,f=p?s:m;d===t.columns[t.columns.length-1]&&(f+=l),f=(0,i2.default)(f,p?Xc:sb,mm),u+=f;let h=new fm.Animated.Value(0);h.setOffset(f),n.set(d,{controller:h,animated:fm.Animated.diffClamp(h,e?0:p?Xc:sb,mm),width:f})}),{widths:n,totalWidth:u}}function s6(t,o,e=!1){let i=new Map,a=0;t.columns.forEach(l=>{let u=t.columnWidths?.[l]||200;a+=u,i.set(l,u)});let s=1;return(a<o||e)&&(s=o/a,a=o),i.forEach((l,u)=>{let d=new fm.Animated.Value(0);d.setOffset(l*s),i.set(u,{controller:d,animated:fm.Animated.diffClamp(d,e?0:150,mm),width:l*s})}),{widths:i,totalWidth:a}}function uu(t,o,e){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=e||{};if(t?.object!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${t.object}#${t.type} with parent ${t.object}#${o?o.type:"no-parent"}`);switch(t.type){case Mr:return n.paddingTop+n.paddingBottom+l6(t,r);case lr:return n.paddingTop+n.paddingBottom+uu(t.nodes.first(),t);case be:case je:case at:case Ue:{let a=n.paddingTop+n.paddingBottom+gm(t.text,{lineHeight:Cr(t),fontSize:lb(t),contentWidth:r});return t.type===Ue&&o.object==="document"&&o.getChildIndex(t.key)!==0?a+g.medium+g.large+1:a}case Aa:return gm(t.text,{lineHeight:Cr(t),fontSize:lb(t),contentWidth:r});case gn:case Bn:case Zi:case Bo:case vs:case ei:return n.paddingTop+n.paddingBottom+200;case Il:case Cs:case Rs:return n.paddingTop+n.paddingBottom+100;case Zr:return n.paddingTop+n.paddingBottom+Cr(t);case Ss:return n.paddingTop+n.paddingBottom+1;default:let i=c6(t,r);return n.paddingTop+n.paddingBottom+t.nodes.reduce((a,s)=>{let l=Mi(s,t),u=s.object==="block"?uu(s,t,{contentSize:i}):gm(s.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function c6(t,o){switch(t.type){case Jt:return o-ww-Sw;case po:return o-Pw-Rw;default:return o}}function Cr(t){if(!t)return Xe.Body.lineHeight;switch(t.type){case Qo:return Cr(t.nodes.first());case Ue:return Xe.Heading1.lineHeight;case je:return Xe.Heading2.lineHeight;case at:return Xe.Heading3.lineHeight;case cr:return Xe.Code.lineHeight+2*g.small;case Aa:return Xe.Code.lineHeight;case lr:return Xe.Label.lineHeight+2*g.small;case Mr:return Xe.Label.lineHeight+2*g.small;case Zr:return g.medium*2+Xe.Heading3.lineHeight;case Ss:return 1;case be:default:return Xe.Body.lineHeight}}function lb(t){if(!t)return Xe.Body.fontSize;switch(t.type){case Qo:return Cr(t.nodes.first());case Ue:return Xe.Heading1.fontSize;case je:return Xe.Heading2.fontSize;case at:return Xe.Heading3.fontSize;case Aa:return Xe.Code.fontSize;case be:default:return Xe.Body.fontSize}}function l6(t,o){let e=te.getTableData(t);switch(e.view.type){case"grid":{let{widths:n}=cb(e.view,o,!1),r=d6(e,n),i=Object.keys(e.records).reduce((a,s,l)=>{let u=Tw(t,s,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(e.records).length,r=e.view.cardSize==="large"?2:3,i=(750-r*g.medium)/r,a=u6(t,e,i),s=Math.ceil(n/r);return s*a+(s-1)*g.medium}default:Ee(e.view)}}function Tw(t,o,e){if(!t)return 0;let n=te.getTableData(t),r=n.records[o];return n.view.columns.reduce((i,a)=>{let s=r.values[a],l=n.definition[a],u=s2(s,l,a2(l.id,e),t);return u>i?u:i},g.medium)}function u6(t,o,e){let n=Object.values(o.records)[0];if(!n)return 0;let r=o.view.type==="cards"&&o.view.coverDefinition?135:0;return o.view.columns.reduce((i,a)=>{let s=n.values[a],l=o.definition[a],u=s2(s,l,e,t);return i+u},2*g.small+r)}function d6(t,o){return t.view.type!=="grid"||t.view.hideHeader?0:Object.keys(t.definition).reduce((e,n)=>{let r=a2(n,o),i=t.definition[n].title,a=gm(i,{contentWidth:r});return a>e?a:e},g.medium)}function a2(t,o){return(o.get(t)?.width||Xc)-g.medium*2}function s2(t,o,e,n){return(()=>{switch(o.type){case"text":let i=n.fragments.get(String(t));return i?i.nodes.reduce((u,d)=>u+uu(d,n,{contentSize:e}),0):0;case"number":return gm(String(t),{contentWidth:e});case"files":case"users":let a=Array.isArray(t)?t.length:1,s=o.type==="files"?f6:p6;return(a<=1?1:Math.max(1,Math.ceil(s*a/e)))*Xe.Body.lineHeight;case"checkbox":case"rating":case"select":default:return Xe.Body.lineHeight}})()+g.small*2+1}function gm(t,o){let{lineHeight:e=Xe.Body.lineHeight,contentWidth:n=750}=o||{},r=Ew(t,o),i=Math.max(1,Math.ceil(r/n));return e*i}function Ew(t="",o){let{fontSize:e=Xe.Body.fontSize}=o||{};return e*.5*t.length}var p6=Ew("Steven Smithson")+g.large+g.small*2,f6=Ew("this_is_a_file_of_mine.json")+g.large+g.small*2;function Wd(t){let{ancestors:o,node:e,diff:n,isBlockSelection:r=!1}=t,i=o.last(),a=i.type,s=i.getChildIndex(e.key),l=s===0,u=s===i.nodes.size-1,d=e.data.get("fullWidth"),m=typeof d=="boolean"&&d===!0;return l2.default.useMemo(()=>{let f=i.object==="document",h=o.size===1||o.size===2&&Tt.isBlock(i)&&ft.isList(i),y=i.object==="document"&&ea.isConflictKey(e.key),S=Cr(e),w=Mi(e,i,typeof n=="boolean");y&&(w.paddingTop+=g.medium);let R=!y&&b6(e,o),k=R?v6(e,o):0,x=g.small;return{blockStyle:w6(w.paddingTop,w.paddingBottom),diffLine:n?{style:{position:"absolute",left:S6(e,o),top:(typeof n!="boolean"?w.paddingTop:0)+(S-Iw)/2,bottom:w.paddingBottom+g.small},size:Iw}:void 0,diffBefore:typeof n!="boolean"&&n?.deletedBlocksBefore?{style:c2.diffDeletedBeforeLine,size:_.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&n?.deletedBlocksAfter?{style:c2.diffDeletedAfterLine,size:_.ICON_XS}:void 0,controlButtons:m6({node:e,ancestors:o,lineHeight:S,blockSpacing:w,isTopLevelBlock:h,isBlockSelection:r}),rightGutterComponent:R?{size:R.buttonSize,style:{top:(S-R.height)/2,marginLeft:k+x},hitArea:{right:0,width:k+x,marginRight:-k-x,top:0,position:"absolute",height:"100%",paddingTop:w.paddingTop,paddingBottom:w.paddingBottom}}:void 0,renderMode:f?m?"full-width":"centered":"unstyled"}},[e.type,i.object,a,l,u,n,r,m])}var d2={shouldNodeComponentUpdate(t,o){if(t.node.object==="inline"||o.node.object==="inline")return null;let e=Mi(t.node,t.parent),n=Mi(o.node,o.parent);return e.paddingTop!==n.paddingTop||e.paddingBottom!==n.paddingBottom?!0:null}};function m6({node:t,ancestors:o,lineHeight:e,blockSpacing:n,isTopLevelBlock:r,isBlockSelection:i}){let a=y6({isTopLevelBlock:r}),s=o.last(),l=g6({node:t,isTopLevelBlock:r,isBlockSelection:i}),u=h6({node:t,parent:s,isBlockSelection:i}),d=[l,u].reduce((y,S)=>S?y+a.width:y,0),p=C6(t,o),m=p-d/2,f=d===0?0:r?p:m,h=e/2-a.height/2;return{size:a.size,position:{top:h},withInsertButton:l,withOptionsButton:u,hitArea:{inlineStyle:{width:Math.abs(f),paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,paddingLeft:r?g.xsmall:0,paddingRight:r?g.xsmall:0,left:f}}}}function g6({node:t,isBlockSelection:o,isTopLevelBlock:e}){return o||Lr===t.type?!1:e}function h6({node:t,parent:o,isBlockSelection:e}){return!(t.type===be&&t.isEmpty||Lr===t.type||!e&&Ps.includes(t.type)||Tt.isBlock(o)&&o.type===Qo&&t.type!==gn)}function y6({isTopLevelBlock:t}){return t?{size:"small",width:_.BUTTON_S,height:_.BUTTON_S}:{size:"xsmall",width:_.BUTTON_XS,height:_.BUTTON_XS}}function b6(t,o){return Lr===t.type||Ps.includes(t.type)||[po,Zr,Jt].includes(t.type)?null:{buttonSize:"small",width:_.BUTTON_S,height:_.BUTTON_S}}function v6(t,o){let e=o.last();return Tt.isBlock(e)&&[po].includes(e.type)?24:Tt.isBlock(e)&&e.type===Zr?g.medium+1:0}function C6(t,o){let e=o.last(),n=o.get(o.size-2);if(t.type===Qo){if(!n||n?.object==="document")return ab;if(Tt.isBlock(n)&&n.type===Qo)switch(e?.type){case fo:return-(g.small+6);case $t:return-(g.small+8);case mo:return-(g.small+_.ICON_M/2);default:return ab}e=n,n=o.get(o.size-3)}return n&&Tt.isBlock(n)&&xw[n.type]?xw[n.type]:(Tt.isBlock(e)?pm[e.type]:0)||ab}function S6(t,o){let e=o.last(),n=o.get(o.size-2),r=o.some(l=>l.type===lr)?-g.large:0,i=o.some(l=>l.type===po)?cu+10:0,a=o.some(l=>l.type===Jt)?-20:0,s=o.filter(l=>Ps.includes(l?.type||"")).size;if(s>0){let l=(r?r-2:0)+i+a+cu,u=s-1,d;switch(Ps.includes(n?.type||"")?d=n?.type:(d=e.type,u--),d){case fo:return l-ZD-o2*u;case $t:return l-e2-n2*u;case mo:return l-t2-r2*u;default:return cu}}return a+i+r+cu}var c2=u2.StyleSheet.create({block:{paddingVertical:Gd},defaultTopPadding:{paddingTop:Gd},defaultBottomPadding:{paddingBottom:Gd},insertionLine:{height:lu,left:0,right:0},diffDeletedBeforeLine:{top:-lu,left:cu},diffDeletedAfterLine:{bottom:-lu,left:cu}});function w6(t,o){let e={0:"0",[g.xsmall]:"100",[g.small]:"200",[g.medium]:"400",[g.large]:"600",[g.xlarge]:"700",[g.xxlarge]:"900"},n=[O.padding.vertical400],r={},i=e[t],a=e[o];return i&&n.push(O.padding[`top${i}`]),a&&n.push(O.padding[`bottom${a}`]),!i&&t!==0&&(r.paddingTop=t),!a&&o!==0&&(r.paddingBottom=o),{inlineStyle:r,style:n}}c();var Ow=v(P());var R6=Ow.default.createContext({current:new Map});function p2(t){let o=Ow.default.useContext(R6);return o.current instanceof Map?o.current.get(t.key):o.current}c();var xo=v(P());c();var _i=JSON.parse('{"conflicts":"conflicts_NH0YT","toolbarConnector":"toolbarConnector_rKw9X","conflictBase":"conflictBase_F-gkn","conflictHead":"conflictHead_qDgkT","verticalConnector":"verticalConnector_6gQQw","conflictBadge":"conflictBadge_rJISv","highlightContainer":"highlightContainer_T2jbl","highlight":"highlight_r-5El","main":"main_K0HuP","current":"current_-GeKS"}');function m2(t){let{node:o,editor:e,children:n}=t,{blockLayoutComponent:r}=xo.useContext(ce),i=ea.hasBlockConflictFrom(o,"base"),a=ea.hasBlockConflictFrom(o,"head");return!a&&!i?xo.createElement(xo.Fragment,null,n):xo.createElement(F,{style:[_i.conflicts,O.flex.column]},i?xo.createElement(r,{renderMode:"centered"},xo.createElement(f2,{node:o,editor:e,style:[_i.conflictBase,O.margin.bottom200,O.margin.top400]})):null,xo.createElement(F,{style:_i.highlightContainer},xo.createElement(F,{style:[_i.highlight,{[_i.main]:i,[_i.current]:a}]}),i?xo.createElement(F,{style:[_i.verticalConnector]}):null,n,a?xo.createElement(F,{style:[_i.verticalConnector]},xo.createElement(F,{style:[_i.conflictBadge]},xo.createElement(vo,{kind:"secondary",icon:b.Conflict}))):null),a?xo.createElement(r,{renderMode:"centered"},xo.createElement(f2,{node:o,editor:e,style:[_i.conflictHead,O.margin.top200,O.margin.bottom400]})):null)}function f2(t){let{node:o,editor:e,style:n}=t,[,r]=T(N),i=()=>{e.change(a=>{ea.pickConflict(a,o.key)})};return xo.createElement(F,{contentEditable:!1,style:[_i.toolbarConnector,O.flex.row,n]},ea.isConflictKeyFrom(o.key,"base")?xo.createElement(W,{icon:gt(b.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[g.Margin.right400],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):xo.createElement(W,{icon:gt(b.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var y2=Vt({key:"hoveredBlocks",default:[]}),P6=HP({key:"isSelectedHoveredBlock",get:t=>({get:o})=>{let e=o(y2),n=e.length?e[e.length-1]:void 0;return!!n&&n===t}});function xe(t){let{tag:o,contentProps:e={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=t,{node:s,parent:l,ancestors:u,editor:d,attributes:p,isFocused:m,children:f,isSelectedBlock:h,isBlockSelection:y}=a,{readOnly:S}=d,w=p2(s),R=ot(),k=qr(y2),x=ar(P6(s.key)),{blockLayoutComponent:E,rightGutterComponent:A,logAnalyticsEvent:I,onBlockHover:L}=pt.useContext(ce),B=Wd({node:s,ancestors:u,diff:w,isBlockSelection:y}),Y=U.useInteractiveState({onHoverIn:()=>{Ps.includes(s.type)||k(q=>[...q,s.key]),L?.(s.key)},onHoverOut:()=>{k(q=>q.filter(J=>J!==s.key)),L?.(null)}}),$=Y.hovered&&x,G=pt.createElement(ve,{"data-block-content":s.key,...e,style:[C.flex1,e.style]},pt.createElement(WS,{node:s.key}),S?null:pt.createElement(Cw,{isBlockSelection:y,isSelected:h}),f);return S?pt.createElement(E,{node:s?.key,renderMode:B.renderMode,interactive:Y},pt.createElement(Gs.View,{isPDF:R},pt.createElement(F,{as:o,...p,...Y.domEvents,style:[O.position.relative,O.flex.column,(l.object!=="block"||l.type!==Ku)&&B.blockStyle.style],inlineStyle:B.blockStyle.inlineStyle},G,A&&B.rightGutterComponent?pt.createElement(ve,{style:[B.rightGutterComponent.hitArea,Qc.hitArea]},pt.createElement(A,{nodeKey:s.key,visible:$,shortcutsActive:m,buttonSize:B.rightGutterComponent.size,style:B.rightGutterComponent.style,readOnly:S})):null))):pt.createElement(k6,{key:s.key,interactive:Y,layout:B,isPDF:R,isHovered:$,BlockLayoutComponent:E,RightGutterComponent:A,logAnalyticsEvent:I,diff:w,...t},G)}function k6(t){let{tag:o,commandIcon:e,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:s,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:p,diff:m,...f}=t,{node:h,parent:y,editor:S,attributes:w,isFocused:R,children:k,isSelectedBlock:x,isBlockSelection:E}=f,{readOnly:A}=S,I=E&&S.value.selection.isExpanded,L=Sn({disabled:A,...Gn(I?{type:"block-range",id:h.key,previewLabel:"Move blocks"}:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"})}),[B,Y]=pt.useState(),$=br({shouldAccept:ie=>!(!["block","block-range","page","space","collection"].includes(ie.type)||!He(y,ie.type==="block"?ie.blockType:Rs)||ie.type==="block"&&ie.id===h.key||ie.type==="block-range"&&S.value.blocks.find(ye=>ye.key===h.key)),onDrop:ie=>{S.change(ye=>{if(ie.type==="block-range")ye.moveBlockRangeSelectionTo(h.key,B==="after"?1:0),p({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:ye.value.blocks.size});else if(ie.type==="block"){B==="before"?ye.moveBeforeNodeByKey(ie.id,h.key):ye.moveAfterNodeByKey(ie.id,h.key);let Pe=S.value.document.getParent(ie.id);p({type:"edit_page_document_move_block",blockType:ie.blockType,method:"dnd",toParent:y.object==="block"?y.type:y.object,fromParent:Pe?.object==="block"?Pe?.type:Pe?.object})}else{let Pe=El.createContentRefBlock(UO(ie));B==="before"?ye.insertNodeBeforeByKey(h.key,Pe):ye.insertNodeAfterByKey(h.key,Pe)}})},onHoverMove:({yPosition:ie})=>{let ye=ie==="bottom"?"after":"before";B!==ye&&Y(ye)}}),{rightGutter:G,controls:q,diff:J}=x6({isBlockSelection:E,isDragging:L.isDragging,isSelectedBlock:x,readOnly:A,value:S.value});return pt.createElement(m2,{node:h,editor:S},pt.createElement(u,{node:h?.key,renderMode:a.renderMode,interactive:i},pt.createElement(Gs.View,{isPDF:s},pt.createElement(F,{as:o,...w,style:[O.position.relative,O.flex.row,L.isDragging&&O.display.opacity50,a.blockStyle.style,oh,$.isOver&&{[th]:B==="before",[td]:B==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:$.setNodeRef},J&&m&&a.diffLine&&m.type!==Ok?pt.createElement(rb,{diff:m.type,highlighted:l,...a.diffLine,style:[a.diffLine?.style,Qc.noSelect]}):null,q&&a.controlButtons?pt.createElement($D,{isDragging:L.isDragging,drag:L,isFocused:R,isHovered:l,optionsPalette:I?void 0:r,layout:a.controlButtons,node:h,editor:S,parent:y}):null,k,G&&d&&a.rightGutterComponent?pt.createElement(ve,{style:[a.rightGutterComponent.hitArea,Qc.hitArea]},pt.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:R,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,Qc.hideTransition],readOnly:A})):null,a.diffBefore?pt.createElement(g2,{style:a.diffBefore.style,size:a.diffBefore.size}):null,a.diffAfter?pt.createElement(g2,{style:a.diffAfter.style,size:a.diffAfter.size}):null))))}function g2(t){let{style:o,size:e}=t;return pt.createElement(ve,{editable:!1,style:[o,Qc.avoidCalculatingBounds,Qc.diffRemoved,Qc.noSelect],"data-hide-on-drag":!0},pt.createElement(Ua,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>pt.createElement(U.TouchableOpacity,{ref:r,style:Qc.diffContainer,...n.events},pt.createElement(b.DiffRemoved,{size:e,style:[nb.deleted]}))))}function x6(t){let{isDragging:o,isBlockSelection:e,isSelectedBlock:n,readOnly:r,value:i}=t,{selection:a}=i;return pt.useMemo(()=>r?{controls:!1,diff:!1,rightGutter:!0}:e?{controls:n,diff:!0,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,rightGutter:!a.isExpanded},[a.isExpanded,o,e,n,r])}var Qc=h2.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(lu*2-_.ICON_XS)/2,height:lu*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"},avoidCalculatingBounds:{width:0,overflow:"visible"},noSelect:{userSelect:"none"}});c();var b2=v(P());var I6=[cr,Bn,ei,gn,Bo,Mr];function Li(t,o){let{logAnalyticsEvent:e}=b2.useContext(ce),n=t.value.document.assertBlock(o);if(!I6.includes(n.type))return null;let r=n.data.get("fullWidth");return{key:"layout-width",commands:[typeof r=="boolean"&&r===!0?{key:"default",title:"Default width",icon:b.DefaultWidth,trigger:()=>{t.change(s=>{s.setDataByKey(o,["fullWidth"],!1)}),e({type:"edit_page_document_edit_block_property",blockType:n.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:b.FullWidth,trigger:()=>{t.change(s=>{s.setDataByKey(o,["fullWidth"],!0)}),e({type:"edit_page_document_edit_block_property",blockType:n.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}c();var v2=v(P());function db(t,o){return v2.useMemo(()=>T6(t.value.document,o),[t,o])}function T6(t,o){let e=t.getPath(o);return e?e[0]<E6(t):!1}var ub=new WeakMap;function E6(t){if(ub.has(t))return ub.get(t);let o=800,e=0;for(let n=0;n<t.nodes.size;n++){let r=t.nodes.get(n);if(!r)break;if(e+=uu(r,t,{blockSpacing:{paddingTop:g.medium,paddingBottom:g.medium}}),e>o)return ub.set(t,n),n}return ub.set(t,t.nodes.size),t.nodes.size}c();var Zc=v(P()),w2=v(H());c();var C2=JSON.parse('{"container":"container_4xc2q"}');var jd=Zc.forwardRef(function(o,e){let{node:n,children:r,editor:i,isFocused:a,isSelected:s,attributes:l,onPress:u,style:d,touchableStlye:p}=o,{readOnly:m}=i,f=U.useInteractiveState(),[,h]=T(O6);return m?Zc.createElement(S2,{style:d,onPress:u},Zc.createElement(F,{style:C2.container},r)):Zc.createElement(S2,{style:d},Zc.createElement(w2.TouchableOpacity,{ref:e,...l,...f.events,style:[h.frameInlineVoid,f.hovered&&h.frameEditableHovered,s&&h.frameSelected,a&&h.frameFocused,p],onPress:y=>{i.change(S=>{Yt(S.value.selection)?S.collapseToStartOf(n).focus():S.selectText(ke.fromBlockRange(S.value.selection,S.value.document)).collapseToStartOf(n).focus()}),u&&u()}},r))});function S2(t){let{style:o,children:e,onPress:n}=t;return Zc.createElement(pe,{style:o,onClick:n},e)}var O6=j.create({frameInlineVoid:t=>({borderWidth:2,borderColor:"transparent",borderRadius:t.radiuses.medium}),frameEditableHovered:t=>({borderColor:t.colors.primary.muted}),frameSelected:t=>({borderColor:t.colors.primary.muted}),frameFocused:t=>({borderColor:t.colors.primary.main})});c();var Pt=v(P()),Pn=v(H());c();var x2=v(yg()),I2=v(P());c();var Dw={BLUE:{light:"#0074D9",dark:"#0074D9"},AQUA:{light:"#7FDBFF",dark:"#7FDBFF"},TEAL:{light:"#39CCCC",dark:"#39CCCC"},OLIVE:{light:"#3D9970",dark:"#3D9970"},GREEN:{light:"#2ECC40",dark:"#2ECC40"},LIME:{light:"#01FF70",dark:"#01FF70"},YELLOW:{light:"#FFDC00",dark:"#FFDC00"},ORANGE:{light:"#FF851B",dark:"#FF851B"},RED:{light:"#FF4136",dark:"#FF4136"},MAROON:{light:"#85144b",dark:"#85144b"},FUCHSIA:{light:"#F012BE",dark:"#F012BE"},PURPLE:{light:"#B10DC9",dark:"#B10DC9"}},R2=Object.keys(Dw).sort((t,o)=>Math.random()-.5),pb=new Map;function P2(t){if(pb.has(t))return pb.get(t);let o=R2[pb.size%R2.length];return pb.set(t,o),o}function ts(t){let o=xi(),[e]=T();return I2.useMemo(()=>{if(!t)return{base:e.colors.primary.main,faded:k2(e.colors.primary.main,.2)};let n=P2(t),r=Dw[n][o.color];return{base:r,faded:k2(r,.2)}},[o.color,t,e.colors.primary.main])}function k2(t,o){let e=Math.round((0,x2.default)(o||1,0,1)*255);return t+e.toString(16).toUpperCase()}var Xt=Pt.forwardRef(function(o,e){let{onPress:n,onSelect:r=()=>{s.change(y=>{Yt(y.value.selection)&&y.collapseToStartOf(i).focus()})},node:i,children:a,editor:s,selections:l,isFocused:u,selectable:d=!0}=o,{readOnly:p}=s,m=i.getFirstText(),f=Pt.useMemo(()=>{if(u)return;let y=l.get(0);if(y)return y.data.get("clientId")},[l,u,m?.key]),h=ts(f);return Pt.createElement(Aw,{ref:e,onPress:n,readOnly:p,selectable:d,selected:u||!!f,selectionColor:h.base,onSelect:r},a)}),Aw=Pt.forwardRef(function(o,e){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,selectionColor:s,style:l,children:u,onSelect:d}=o,p=U.useInteractiveState({hoverDelayIn:50}),[m,f]=T(D6);if(i)return Pt.createElement(Pt.Fragment,null,u);let h=w=>{w.stopPropagation(),d()},y=s||m.colors.primary.main,S=Pt.createElement(Pn.View,{ref:e,style:l},u,Pt.createElement(Pn.View,{style:[f.frameBorder,f.frameBorderRight,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderRightSelected,{borderRightColor:y}]],pointerEvents:"none"}),Pt.createElement(Pn.View,{style:[f.frameBorder,f.frameBorderLeft,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderLeftSelected,{borderLeftColor:y}]],pointerEvents:"none"}),Pt.createElement(Pn.View,{style:[f.frameBorder,f.frameBorderTop,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderTopSelected,{borderTopColor:y}]],pointerEvents:"none"}),Pt.createElement(Pn.View,{style:[f.frameBorder,f.frameBorderBottom,p.hovered&&f.frameBorderHovered,r&&[f.frameBorderBottomSelected,{borderBottomColor:y}]],pointerEvents:"none"}),a?Pt.createElement(Pt.Fragment,null,Pt.createElement(Pn.TouchableWithoutFeedback,{onPress:h},Pt.createElement(Pn.View,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderRight]})),Pt.createElement(Pn.TouchableWithoutFeedback,{onPress:h},Pt.createElement(Pn.View,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderLeft]})),Pt.createElement(Pn.TouchableWithoutFeedback,{onPress:h},Pt.createElement(Pn.View,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderTop]})),Pt.createElement(Pn.TouchableWithoutFeedback,{onPress:h},Pt.createElement(Pn.View,{...p.events,style:[f.hoverableFrameBorder,f.hoverableFrameBorderBottom]}))):null);return n?Pt.createElement(Pn.TouchableOpacity,{onPress:n},S):S}),fb=18,bt=8,el=4,mb=2,D6=j.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:t=>({backgroundColor:t.colors.primary.muted}),hoverableFrameBorderTop:{top:-bt/2,left:-bt/2,right:-bt/2,height:fb},frameBorderTop:{top:-bt/2,left:-bt/2,right:-bt/2,height:bt,borderTopLeftRadius:el,borderTopRightRadius:el},frameBorderTopSelected:t=>({backgroundColor:"transparent",borderTopColor:t.colors.primary.main,borderTopWidth:mb}),hoverableFrameBorderBottom:{bottom:-bt/2,left:-bt/2,right:-bt/2,height:fb},frameBorderBottom:{bottom:-bt/2,left:-bt/2,right:-bt/2,height:bt,borderBottomLeftRadius:el,borderBottomRightRadius:el},frameBorderBottomSelected:t=>({backgroundColor:"transparent",borderBottomColor:t.colors.primary.main,borderBottomWidth:mb}),hoverableFrameBorderLeft:{top:-bt/2,bottom:-bt/2,left:-bt/2,width:fb},frameBorderLeft:{top:-bt/2,bottom:-bt/2,left:-bt/2,width:bt,borderBottomLeftRadius:el,borderTopLeftRadius:el},frameBorderLeftSelected:t=>({backgroundColor:"transparent",borderLeftColor:t.colors.primary.main,borderLeftWidth:mb}),hoverableFrameBorderRight:{top:-bt/2,bottom:-bt/2,right:-bt/2,width:fb},frameBorderRight:{top:-bt/2,bottom:-bt/2,right:-bt/2,width:bt,borderTopRightRadius:el,borderBottomRightRadius:el},frameBorderRightSelected:t=>({backgroundColor:"transparent",borderRightColor:t.colors.primary.main,borderRightWidth:mb})});c();var gb=v(P());function hb(t,o){let[,e]=T(N),[,n]=T(A6),{navigateToHash:r}=we(),{sections:i,active:a,setActive:s}=gb.default.useContext(Ai),l=U.useInteractiveState(),u=i.get(t.key),d=()=>{u&&s(a!==u?u:null)},p=()=>{u&&(r(u,{scroll:!0}),d())},m={accessibilityRole:"presentation"};return{anchorElement:gb.default.createElement(U.Text,{href:`#${u}`,onPress:p,style:[n.anchorLink,g.Margin.left200,a===u||l.focused||l.hovered?mt.visible:mt.hidden],inactiveStyle:e.textMuted,activeStyle:e.primary,accessibilityLabel:o.accessibilityLabel},gb.default.createElement(b.Hash,{size:o.anchorIconSize||_.ICON_S,...m})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{o.onBlockPress&&o.onBlockPress(),d()}}}var A6=j.create({anchorLink:{display:"inline-flex",alignItems:"center"}});c();var E2=v(P());function O2(t){let{notify:o,notifyProgress:e,notifyOrUpdate:n,close:r}=bo(),{logAnalyticsEvent:i,onContentPaste:a,blocks:{withImages:s,withFiles:l}}=t;return E2.useMemo(()=>{function u(m){Vu(m),o({kind:"danger",title:"Error while pasting content",icon:b.Alert.CSS,details:mc(m,"Please try again or contact support if the problem persists.")})}function d(m){n({id:"upload-files",title:`Uploading ${m} file${m!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:Se})}function p(m,f,h){let y=od(m),S=0,w=async(R,k)=>{if(Wu(R))return{kind:"url",url:R};if(sk(R)){if(!a.uploadFiles)return null;let x=await(await fetch(R)).blob(),E=R.split(";")[0]?.split("/")[1],A=k?.fileName||`unknown.${E}`,I=new File([x],A);return S+=1,d(S),(await a.uploadFiles([I]))[0]}return null};if(y.type==="html"&&y.html!==null)return RI(y.html,{...KC,resolveFile:w}).then(({document:R})=>Tk(R)&&y.text?gf(y.text).then(({document:k})=>({document:k,type:"text"})):{document:R,type:"html"}).then(({document:R,type:k})=>{h.change(E=>{E.insertDocument(R)}),r("upload-files");let x=T2(k==="html"?y.html:y.text,k);i(hm(m,k,{document:R,sourceIncludes:x}))}).catch(R=>{throw u(R),R}),!0;if(y.type==="text"&&y.text!==null)return gf(y.text,{...KC,resolveFile:w}).then(({document:R})=>{h.change(x=>{x.insertDocument(R)}),r("upload-files");let k=T2(y.text,"text");i(hm(m,"text",{document:R,sourceIncludes:k}))}).catch(R=>{throw u(R),R}),!0;if(y.type==="files"&&typeof y.files<"u"){if(!y.files||y.files.length===0)return;let[R,k]=y.files.reduce(([x,E],A)=>gc(A)?[x.concat(A),E]:[x,E.concat(A)],[[],[]]);e(Promise.all([s?s.onPaste(R):Promise.resolve([]),l?l.onPaste(k):Promise.resolve([])]),{title:`Uploading ${y.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(([x,E])=>{let A=x.length+E.length;if(A===0){o({kind:"danger",title:"Some files failed to upload, please try again",icon:b.Alert.CSS});return}let I=x.length&&!E.length;h.change(L=>{if(I){if(DC(L.value,gn,{allowSplitBlock:!1})){L.insertOrReplaceBlock(Zo.createImagesBlock(x)).focus();return}if(!Ik(L.value,bc)){o({kind:"info",title:"Cannot insert an image here",icon:b.InfoCircle.CSS});return}x.reduce(($,G)=>$.insertInline(Zo.createImageInline(G)),L);return}[...x,...E].forEach(B=>{if(B.kind!=="file")return;let Y=Eg.createFileBlock(B);if(DC(L.value,Y.type)){L.insertOrReplaceBlock(Y).focus();return}o({kind:"info",title:"Cannot insert a file here",icon:b.InfoCircle.CSS})})}),i(hm(m,"files",{uploadedFiles:A,sourceIncludes:["file"]}))}).catch(x=>{throw u(x),x})}}return{onPaste:p,onDrop:p}},[o,e])}function T2(t,o){let e=[];switch(o){case"text":t.includes("![")&&e.push("image"),t.match(/\|\s*\:?---/)&&e.push("table");break;case"html":t.includes("<img")&&e.push("image"),t.includes("<table")&&e.push("table");break}return e}function hm(t,o,{document:e=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=t.clipboardData,a=new Set,s=0;return e&&e.forEachDescendant(l=>{s+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:t.type,sourceTypes:[...i?.types||[]],sourceIncludes:[...new Set(r)],transformType:o,transformSize:s,uploadedFiles:n,transformNodes:[...a]}}c();var Bw=v(Pi());var D2={onKeyDown:B6};function B6(t,o){if((0,Bw.default)("enter",t)||(0,Bw.default)("shift+enter",t)){let{value:e}=o,{startBlock:n,startInline:r,startText:i}=e;if(r&&r.isVoid&&i){let a=e.document.getNextText(i.key);return a?(o.collapseToStartOf(a),o):void 0}if(n&&n.isVoid)return Ct(o),o}}c();var Lw=v(P()),yb="selectionHighlighting",A2={renderMark:L6};function L6(t){let{mark:o}=t;switch(o.type){case yb:return Lw.createElement(M6,{...t})}}function M6(t){let{attributes:o,children:e}=t;return Lw.createElement("span",{...o,style:{backgroundColor:"Highlight",color:"HighlightText"}},e)}c();function jD(t){t.value.decorations.forEach(o=>{o.marks?.some(e=>e.type===yb)&&t.removeValueDecoration(o)})}function eb(t,o=t.value.selection){ke.isTextRange(o)&&t.setValueDecoration(ke.create({anchorKey:o.anchorKey,anchorOffset:o.anchorOffset,focusKey:o.focusKey,focusOffset:o.focusOffset,marks:[{type:yb,data:{}}],isAtomic:!0}))}c();var B2={shouldNodeComponentUpdate:_6};function _6(t,o){let e=t.parent.nodes.size-1,n=t.parent.getChildIndex(t.node.key),r=o.parent.getChildIndex(t.node.key);return(n===e||r===e)&&r!==n?!0:null}c();var Yd=v(P()),$d=v(H());function ci(t){let[,o]=T(N6),[,e]=T(N);return Yd.createElement($d.View,{style:[o.blockLoading,g.Padding.horizontal600,g.Padding.vertical400,C.row,C.alignItemsCenter]},Yd.createElement($d.View,null,Yd.createElement(Se,{size:"medium"})),Yd.createElement($d.View,{style:[g.Margin.left400]},Yd.createElement($d.Text,{style:[e.Caption,e.textMid]},"Loading...")))}var N6=j.create({blockLoading:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});c();var L2=v(P());function lm(){let t=ue();return L2.createElement(Ti,{kind:"default",title:t("missing_content_title"),details:t("missing_content_description")})}c();var Jd=v(P());function bb(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a,getPalette:s}=t,l=o.data.toObject(),{value:u}=l,d=Jd.useRef(null),p=_n(u),m=fe(d);return Jh(()=>{if(!m.opened&&a.value.isFocused){let f=()=>ke.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+p.current.length+1});m.open(rd(s(l,f),u))}},150),Jd.useEffect(()=>{m.opened&&m.typeQuery(u)},[m,u]),Jd.createElement(Ht,{ref:d,...r},i)}function M2(t){let{editor:o,node:e,children:n}=t,{readOnly:r}=o,i=e.data.toFrozenObject(),a=ot(),s=ih(i.syntax||"text"),l=typeof i.title=="string",u=Io.useRef(null),d=fe(u),p=Io.useRef(null),m=fe(p),f=(S,w)=>{o.change(R=>{R.insertDataByKey(e.key,["title"],S)})},h=()=>io.getCodeText(e),y=F6(e.key);return Io.createElement(xe,{...t,palette:y},Io.createElement(nI,{overflow:i.overflow||Pk,lineNumbers:!!i.lineNumbers,header:l?Io.createElement(V6,{title:i.title,isEditable:!r,onTitleChange:f}):null,showToolbar:d.opened||m.opened,translate:!1,toolbar:a?null:Io.createElement(Io.Fragment,null,r?null:Io.createElement(W,{ref:u,active:d.opened,kind:"secondary",size:"small",style:g.Margin.right100,rightIcon:b.ChevronDown,onPress:()=>{d.open(_2(o,e.key))}},s.title),Io.createElement(Zg,{kind:"secondary",size:"small",content:h}),r?null:Io.createElement(W,{ref:p,icon:b.MoreVertical,kind:"secondary",size:"small",style:g.Margin.left100,title:"More options",onPress:()=>{m.open(y)}}))},n))}function V6(t){let{title:o,isEditable:e,onTitleChange:n}=t,[r,i]=Io.useState(o),[a,s]=T(N);Io.useEffect(()=>{i(o)},[o]);let l=d=>{n(r||"",d)},u=[s.Body,s.textMuted];return Io.createElement(eh,{style:[C.row,C.alignItemsCenter,g.Padding.left400]},e?Io.createElement(vb.TextInput,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):Io.createElement(vb.Text,{style:u},o))}function F6(t){let o=Rc(),e=Li(o,t),n=r=>{let i=o.value.document.assertBlock(r),a=i.data.toFrozenObject(),s=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:b.Code,descendant:()=>_2(o,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:b.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(o.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),ct(o,i.key,n(i.key)))},{key:"with-title",icon:b.CodeCaption,type:2,enabled:s,title:"With caption",trigger:()=>(o.change(l=>{s?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),ct(o,i.key,n(i.key)))},{key:"with-wrap",icon:b.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(o.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),ct(o,i.key,n(i.key)))}]},...e?[e]:[]]};return ct(o,t,n(t))}function _2(t,o){let e=t.value.document.assertBlock(o),n=e.data.get("syntax");return se({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:iI().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{t.change(i=>{i.setDataByKey(e.key,["syntax"],r.key)})}}))}]})}c();var N2=v(P());function V2(t){let{node:o,parent:e,children:n,editor:r}=t,{diff:i,highlighted:a}=o.data.toFrozenObject(),s=()=>{r.change(l=>{l.setDataByKey(o.key,["highlighted"],!a)})};return N2.createElement(tI,{number:e.getChildIndex(o.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:s},n)}c();var du=v(Pi());var H6=(0,du.isKeyHotkey)("mod+a"),W6=(0,du.isKeyHotkey)("shift+tab"),U6=(0,du.isKeyHotkey)("tab"),z6=(0,du.isKeyHotkey)("mod+enter"),K6=(0,du.isKeyHotkey)("enter"),G6=(0,du.isKeyHotkey)("backspace"),F2={onKeyDown:j6,onPaste:Y6};function j6(t,o,e){let{value:n}=o;if(Ao(n.selection))return;let r=io.getCurrentCode(n);if(r){if(H6(t))return $6(r,t,o,e);if(W6(t))return q6(r,t,o,e);if(U6(t))return J6(r,t,o,e);if(z6(t))return Q6(r,t,o,e);if(K6(t))return X6(r,t,o,e);if(G6(t))return Z6(r,t,o,e)}}function Y6(t,o,e){let{value:n}=o;if(Ao(n.selection))return;let r=io.getCurrentCode(o.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=od(t),s;a.type==="fragment"&&a.fragment?s=a.fragment.getTexts().map(d=>d.text).join(`
`):s=a.text||"";let l=io.createCodeBlock(s).blockNodes,u=yc.create({nodes:l});return o.insertDocument(u)}function $6(t,o,e,n){o.preventDefault();let r=t.getFirstText(),i=t.getLastText();if(!(!r||!i))return e.collapseToStartOf(r).extendToEndOf(i)}function J6(t,o,e,n){let{value:r}=e;o.preventDefault(),o.stopPropagation();let{isCollapsed:i}=r,a=io.getIndent(io.getCodeText(t));return i?e.insertText(a).focus():io.indentLines(e,a)}function q6(t,o,e,n){o.preventDefault(),o.stopPropagation();let r=io.getIndent(io.getCodeText(t));return io.dedentLines(e,r)}function X6(t,o,e,n){let{value:r}=e;if(!r.isCollapsed)return;o.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,s=io.getIndent(a,"");return e.splitBlock().insertText(s).focus()}function Q6(t,o,e,n){let{value:r}=e;if(r.isCollapsed)return o.preventDefault(),Ct(e,t),e}function Z6(t,o,e,n){let{value:r}=e;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,s=r.startBlock;if(!s)return;let l=io.getIndent(io.getCodeText(t));if(s.text.slice(0,i).endsWith(l))return o.preventDefault(),e.deleteBackward(l.length).focus();let d=i===0&&t.getFirstText()===a,p=t.nodes.size===1&&s.text.length===0;if(d&&p)return o.preventDefault(),e.setBlocks(be,{normalize:!1}).unwrapNodeByKey(s.key)}c();var os=v(P()),ym=v(H());c();var H2=v(P());function W2(t){let o=t?new URL(t).hostname:null,[{data:e}]=Ei([o?No("listIntegrations",{},{query:{blockDomain:o}}):null],{suspend:!1});return H2.useMemo(()=>{if(!e||!t)return;let n=Wg(Hg(e.items),t);if(!n)return;let r=e.items.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[e?.items,t])}function Cb(t){let{url:o,readOnly:e}=t,[{data:n}]=Ei([No("getEmbedByUrl",{},{query:{url:o}})],{throwOnError:!1}),r=W2(e?null:o),i=r?os.createElement(e9,{...r}):null;if(!n)return os.createElement(ci,null);if(n.type==="rich"&&n.html){let a=os.createElement("div",{dangerouslySetInnerHTML:{__html:n.html}});return i?os.createElement(ym.View,null,a,os.createElement(ym.View,{style:t9.overlayInstallButton},i)):a}return os.createElement(qa,{href:o,title:n.title,details:n.site,icon:n.icon?gt(Fa,{source:{uri:n.icon}}):void 0,onPress:a=>{a.preventDefault(),Ds(o)},buttons:i?[i]:[]})}function e9(t){let{integration:o}=t,{navigate:e}=we(),{logAnalyticsEvent:n}=os.useContext(ce),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:o.name,reason:"embed"}),e({overlay:{type:"integrations",integration:o.name}})};return os.createElement(W,{kind:"secondary",size:"medium",icon:gt(ud,{integration:o}),title:`Install the ${o.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",o.title)}var t9=ym.StyleSheet.create({overlayInstallButton:{position:"absolute",bottom:g.medium,right:g.medium}});c();var Uo=v(P());c();var tl=v(P()),Js=v(H());function ol(t){let{node:o,editor:e,isSelected:n}=t,{readOnly:r}=e,[,i]=T(N),a=U.useInteractiveState(),s=o.fragments.get(kk),l=s?.isEmpty;return s?(n||a.hovered)&&!r||!l?tl.createElement(Js.View,{style:[U2.editableCaption,g.Padding.top200],...a.events},l?tl.createElement(Js.View,{style:[Js.StyleSheet.absoluteFill,C.alignItemsCenter,C.justifyCenter,g.Padding.top200]},tl.createElement(Js.Text,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,tl.createElement(Wr.Provider,{value:"caption"},tl.createElement(Uc.Provider,{value:"center"},tl.createElement(fr,{fragment:"caption"})))):r?null:tl.createElement(Js.View,{style:[g.Padding.top200,U2.blankPlaceHolder],...a.events}):null}var U2=Js.StyleSheet.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:g.small+$g.xsmall}});c();var rn=v(P());c();var nl=v(P());function Sb(t){let{children:o}=t,[e,n]=nl.useState(!1);return nl.useEffect(()=>{n(!0)},[]),e?nl.createElement(nl.Fragment,null,o):null}c();var wb=v(P());function z2(t){let{children:o,statusCode:e}=t,n=LI();return n.staticContext&&(n.staticContext.statusCode=e),wb.createElement(wb.Fragment,null,o)}var Rb=rn.forwardRef(function(o,e){let{data:n,readOnly:r,onDataChange:i}=o,{integrationBlocksRemote:a,integrationBlocksContext:s}=rn.useContext(ce),l=rn.useRef(null);if(!s)throw new Error("Expected integration blocks context to be defined");let u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:s},[d,p]=jI(async m=>l.current?.dispatchAction(m));return rn.useImperativeHandle(e,()=>({getPaletteGroups:()=>{let{result:m}=a.readCacheState(u);return m&&m.element.type==="block"?d(m.element):[]}})),rn.createElement(rn.Fragment,null,p,rn.createElement(rn.Suspense,{fallback:rn.createElement(ci,null)},rn.createElement(Sb,null,rn.createElement(YI,{ref:l,mode:"block",remote:a,input:u,security:{firstPartyDomains:[Oa.integrations.domain]},onPropsChange:m=>{r||i({...n,action:void 0,props:m})}}))))});function K2(t){let{node:o,editor:e}=t,n=Li(e,o.key);return Uo.createElement(xe,{palette:()=>ct(e,o.key,n?[n]:[]),...t},Uo.createElement(Xt,{...t},Uo.createElement(Uo.Suspense,{fallback:Uo.createElement(ci,null)},Uo.createElement(o9,{...t}))),Uo.createElement(ol,{...t}))}function o9(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=o.data.toFrozenObject(),{integrationsBlocksSubscription:i}=Uo.useContext(ce),a=Uo.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),s=Uo.useMemo(()=>{let l=Wg(a,r.url);return l?Og.createIntegrationBlockDataForLinkUnfurl(l.integrationKey,l.block.id,r.url):null},[a,r.url]);return Uo.useEffect(()=>{!s||n||e.change(l=>{l.setNodeByKey(o.key,{type:ei,data:s})})},[e,n,s,o.key]),s?Uo.createElement(Rb,{data:s,readOnly:n,onDataChange:l=>{e.change(u=>{u.setNodeByKey(o.key,{type:ei,data:l})})}}):Uo.createElement(Cb,{url:r.url,readOnly:n})}c();var Kt=v(P());c();var qd=v(P());function G2(t){let{integrationName:o}=t,[{data:e}]=Ei([No("getIntegrationByName",{integrationName:o})],{throwOnError:!1});return e?qd.createElement(n9,{integration:e}):qd.createElement(Ti,{kind:"default",title:`Integration ${o} no longer exist or has been unpublished.`})}function n9(t){let{integration:o}=t,e=Zu(Lo(ud,{integration:o},[o])),{navigate:n}=we(),{logAnalyticsEvent:r}=qd.useContext(ce);return qd.createElement(Ti,{kind:"default",icon:e,title:`Integration ${o.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:o.name,reason:"empty"}),n({overlay:{type:"integrations",integration:o.name}})}}]})}function j2(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=Kt.useRef(null),{integrationsBlocksSubscription:i}=Kt.useContext(ce),{navigate:a}=we(),s=Kt.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),l=o.data.toFrozenObject(),u=Li(e,o.key),d=()=>ct(e,o.key,[...r?.current?.getPaletteGroups()||[],{key:"integration",commands:()=>{let{data:m}=Ll(No("getIntegrationByName",{integrationName:l.integration}));return m?[{key:"integration.settings",icon:gt(ud,{integration:m}),title:`Configure ${m.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:m.name}})}}]:[]}},...u?[u]:[]]);return Kt.useMemo(()=>mx(s,l.integration,l.block),[s,l.integration,l.block])?Kt.createElement(xe,{...t,palette:d},Kt.createElement(Xt,{...t},Kt.createElement(Kt.Suspense,{fallback:Kt.createElement(ci,null)},Kt.createElement(Rb,{ref:r,data:l,readOnly:n,onDataChange:m=>{e.change(f=>{f.setNodeByKey(o.key,{data:m})})}})))):Kt.createElement(xe,{...t,palette:d},Kt.createElement(Xt,{...t},Kt.createElement(Kt.Suspense,{fallback:Kt.createElement(ci,null)},l.url?Kt.createElement(Cb,{url:l.url,readOnly:n}):n?Kt.createElement(lm,null):Kt.createElement(G2,{integrationName:l.integration}))))}c();var Pb=v(Pi());var Y2={onKeyDown:(t,o,e)=>{let{value:n}=o;if(!n.isCollapsed||!(0,Pb.default)("enter",t))return;let{startBlock:r,selection:i}=n;if(!ke.isTextRange(i)||!r||r.type!==be||!i.isAtEndOf(r))return;let{text:a}=r;if(!wi(a))return;let s=n.document.getParent(r.key);if(!s||!He(s,Bn))return;let l=fg(a,{sortQueryParameters:!1}),u=Ig.createEmbedBlock(l);o.replaceNodeByKey(r.key,u).collapseToStartOf(u)}},$2={onKeyDown:(t,o,e)=>{if((0,Pb.default)("enter",t)||(0,Pb.default)("shift+enter",t)){let{value:n}=o,{startBlock:r,document:i}=n;if(!r||r.type!==be)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment")return;let s=i.getParent(a.key);if(!s||!s.isBlock()||![Bn,Zi,Cs,vs].includes(s.type))return;let l=s.type===Zi?i.getParent(s.key):s;return Ct(o,l),o}}};c();var Mw=v(P());c();var kb=v(P());function J2(t){let{editor:o}=t,e=kb.useCallback((n,r)=>kd(a=>{o.change(s=>{s.insertInlineAtRange(r(),Tg.createEmoji(a)).focus()})},{withSearch:!1}),[o]);return kb.createElement(bb,{...t,getPalette:e})}c();var bm=v(P());function q2(t){let{editor:o,node:e,parent:n}=t,r=bm.useRef(null),i=fe(r),a=lb(n.object==="block"?n:null),s=Xh(()=>{i.open(kd(l=>{o.change(u=>{u.setNodeByKey(e.key,{data:{code:l}})})}))});return bm.createElement(jd,{ref:r,...t,style:O.textAlign.verticalAlignMiddle,onPress:o.readOnly?void 0:s},bm.createElement(_o,{code:e.data.get("code"),size:a}))}var X2="emojiContext",r9=/(^|\s):(\w*)$/,Q2={renderMark:a9,renderNode:s9,decorateValue:i9};function i9(t){let{selection:o}=t,e=c9(t),n=[];return e!==null&&ke.isTextRange(o)&&n.push(ke.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:X2,data:{value:e}}],isAtomic:!0})),n}function a9(t){let{mark:o}=t;switch(o.type){case X2:return Mw.createElement(J2,{...t})}}function s9(t){let{node:o}=t;switch(o.type){case qp:return Mw.createElement(q2,{...t})}}function c9(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!ke.isTextRange(r)||!e||!n||!ks({document:o,block:n},qp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),s=r9.exec(a);return s==null?null:s[2]}c();var Bt=v(P()),Xd=v(H());function l9(t,o,e){for(let[n,r]of t.entries())if(r===e){let i=o.getNode(n);return i?{key:n,id:r,node:i}:null}}function Z2(t){let o=U.useInteractiveState(),{node:e,isFocused:n,editor:r}=t,[,i]=T(u9),[,a]=T(N),{sections:s,selected:l}=Bt.useContext(Ai),u=ot(),d=Bt.useRef(""),[p,m]=Bt.useState("unset");Bt.useEffect(()=>{d.current="",m("unset")},[l]);let f=l&&s.get(e.key)===l,h=Bt.useMemo(()=>!f&&!!l9(s,e,l),[f,s,e,l]);f&&(d.current=l);let{selection:y}=r.value,S=ke.isTextRange(y)&&y.hasEdgeIn(xs.getBodyFragment(e)),w=n&&ke.isTextRange(y)&&!y.hasFocusInFragmentOf(e),R=u||(p==="unset"?f||h||l===d.current:p==="expanded"),k=R?b.ChevronDown:b.ChevronRight,x=()=>{R&&S&&r.change(ye=>{ye.collapseToStartOf(xs.getTitleFragment(e))}),m(R?"collapsed":"expanded")},{anchoredBlockId:E,onAnchoredBlockPress:A,anchorElement:I,anchoredBlockInteractiveState:L}=hb(e,{accessibilityLabel:"Direct link to expandable block",onBlockPress:x}),B=Bt.useId(),Y={id:B,controls:{accessibilityRole:"button",accessibilityExpanded:R,accessibilityControls:`expandable-body-${B}`,accessibilityLabelledBy:`expandable-title-${B}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${B}`}},$=e.fragments.get(ws),G=$?.nodes.first(),q=Mi(G,$||e),J=_.ICON_M,ie=q.paddingTop+(Cr(G)-J)/2;return Bt.createElement(xe,{...t},Bt.createElement(Xt,{...t,isFocused:w},Bt.createElement(Xd.View,{...o.events,style:[i.expandable,o.active&&i.expandableActive],nativeID:E},Bt.createElement(Xd.View,{style:[C.row,g.Padding.right400],...L.events},Bt.createElement(U.TouchableOpacity,{onPress:A,style:[g.Padding.horizontal400,C.row,C.justifyCenter,{paddingTop:ie}],...Y.controls},Bt.createElement(k,{size:J,style:[o.active?a.primary:a.textMuted],...Y.chevron})),Bt.createElement(Xd.View,{style:[C.flex1,{paddingTop:q.paddingTop,paddingBottom:R?g.small:q.paddingBottom}],nativeID:`expandable-title-${B}`},Bt.createElement(Wr.Provider,{value:"expandableTitle"},Bt.createElement(fr,{fragment:ws}))),Bt.createElement(Xd.View,{style:{paddingTop:ie}},I)),Bt.createElement(Xd.View,{style:[i.expandableBody,!R&&i.hidden],nativeID:`expandable-body-${B}`,...Y.body},Bt.createElement(fr,{fragment:Tl})))))}var u9=j.create({hidden:{visibility:"hidden",height:0,padding:0,overflow:"hidden"},expandable:t=>({breakInside:"avoid",borderWidth:1,borderColor:t.colors.border.main,borderRadius:t.radiuses.large}),expandableActive:t=>({borderColor:t.colors.primary.main}),expandableBody:{padding:g.medium,paddingLeft:g.medium+_.ICON_M+g.medium,paddingTop:0}});c();var _w=v(Pi());var eA={onKeyDown:d9};function d9(t,o){if(!Ao(o.value.selection)){if((0,_w.default)("mod+enter",t))return f9(t,o);if((0,_w.default)("enter",t))return p9(t,o)}}function p9(t,o){let e=xs.getCurrentExpandable(o.value);if(e&&e.fragment?.type===ws)return o.collapseToStartOf(e.expandable.getFragmentByKey(Tl)).focus()}function f9(t,o){let{value:e}=o,n=xs.getCurrentExpandable(o.value);if(!(!n||!e.isCollapsed))return t.preventDefault(),Ct(o,n.expandable),o}c();var oA=v(Pi()),nA=v(P());c();var xb=v(P());function tA(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a}=t,{value:s}=o.data.toObject(),l=xb.useRef(null),u=ke.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+1}),d=tb({anchorRef:l,range:u,editor:a}),p=fe(l,{onClose:()=>{p.close(),a.change(m=>m.focus())}});return Jh(()=>{!p.opened&&a.value.isFocused&&p.open(se({groups:[{key:"inline-controls",commands:d.filter(m=>s.includes(m.key))}]}))},150),xb.createElement(Ht,{ref:l,...r},i)}var m9=[bc,qp,Ln,vg],rA="inlineControlsContext",g9=/(^|\s)\/$/,iA={renderMark:y9,decorateValue:h9,onKeyDown:(t,o,e)=>{if(aA(e.value)&&(0,oA.default)("esc",t))return o}};function h9(t){let{selection:o}=t,e=aA(t),n=[];return Yt(o)&&e!==null&&n.push(ke.create({anchorKey:o.startKey,anchorOffset:o.startOffset-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:rA,data:{value:e}}],isAtomic:!0})),n}function y9(t){let{mark:o}=t;switch(o.type){case rA:return nA.createElement(tA,{...t})}}function aA(t){if(!t.isCollapsed)return null;let{startText:o,startBlock:e,selection:n}=t;if(!Yt(n)||!o||!e)return null;let{startOffset:r}=n,i=o.text.slice(0,r);if(g9.exec(i)==null)return null;let s=m9.filter(l=>ks({document:t.document,block:e},l));return s.length===0?null:s}c();var ns=v(P()),uA=v(H());c();var kn=v(P()),rl=v(H());function sA(t){let{resolved:o,node:e,editor:n,children:r}=t,i=dt(),a=kn.useRef(null),s=kn.useRef(null),[l,u]=kn.useState(!1),[d,p]=kn.useState(!1),[,m]=T(cA),f=Ie(),h=l||d,y=U.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),S=U.useInteractiveState({onHoverIn:()=>{p(!0)},onHoverOut:()=>{p(!1)}});Cc({opened:h,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),p(!1)}},s);let w=fe(a),R=()=>{n.change(x=>{x.unwrapInlineByKey(e.key)})},k=()=>{w.open(Yn(x=>{n.change(E=>{E.setDataByKey(e.key,["ref"],x)})},{...i,document:n.value.document},f))};return kn.createElement(Wa,{ref:s,anchorRef:a,wrapper:Ii,opened:h,updateOnScroll:!1,anchor:({ref:x})=>r(x,{...y.events,style:w.opened?m.linkBeingEdited:null})},kn.createElement(rl.View,{style:[rl.StyleSheet.absoluteFill],...S.events},kn.createElement(Wx,{kind:"tooltip",preferredAlignment:"start"},kn.createElement(rl.View,null,kn.createElement(b9,{resolved:o,onPressEdit:k,onPressRemove:R})))))}function b9(t){let{resolved:o,onPressEdit:e,onPressRemove:n}=t,r=o.icon||o.secondaryIcon,[,i]=T(cA);return kn.createElement(rl.View,{style:[C.row,C.alignItemsCenter,g.Padding.all100]},kn.createElement(rl.View,{style:[i.buttonWrapper,C.row]},kn.createElement(W,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:e,style:C.flex1},o.title)),kn.createElement(rl.View,null,kn.createElement(W,{title:"Remove link",kind:"default_inverted",icon:b.Trashcan,size:"small",onPress:n})))}var cA=j.create({buttonWrapper:{maxWidth:200},linkBeingEdited:t=>({backgroundColor:t.colors.background.standout})});var v9=U.createInteractiveComponent(Ht);function dA(t){return ns.createElement(ns.Suspense,{fallback:ns.createElement(pA,{...t,resolved:null})},ns.createElement(C9,{...t}))}function C9(t){let{node:o}=t,{ref:e}=o.data.toFrozenObject(),n=nt(e);return ns.createElement(pA,{...t,resolved:n})}var lA=U.createInteractiveHandle("link");function pA(t){let{node:o,attributes:e,children:n,resolved:r,editor:i}=t,{readOnly:a}=i,[,s]=T(N),l=(u,d={})=>ns.createElement(U.TouchableOpacity,{ref:u,handle:lA,...r?jc(r):{},...d,style:[S9.wrapper,d.style]},ns.createElement(v9.Child,{...e,descendantOf:lA,hoverStyle:[s.primaryStandout,s.Underline],inactiveStyle:s.primary},n));return a||!r?l():ns.createElement(sA,{resolved:r,editor:i,node:o},l)}var S9=uA.StyleSheet.create({wrapper:{display:"inline"}});c();var fA=v(P());function mA(t){let o=dt(),e=Ie(),{logAnalyticsEvent:n}=t;return fA.useMemo(()=>({onPaste:(r,i,a)=>{let s=od(r);if(!((s.type==="text"||s.type==="html")&&typeof s.text=="string"&&(wi(s.text)||ak(s.text))))return;let l=s.text,{value:u}=i;if(u.isCollapsed){if(u.isInVoidBlock)return;i.insertText(l).extend(-l.length)}let d={kind:"url",url:l};i.wrapInline({type:Ln,data:{ref:d}});let p=i.value.inlines.filter(f=>f.type===Ln&&f.data.has("ref")&&mg(f.data.get("ref"),d)===!1);i.collapseToEnd();let m=Vg(l);return m&&af(()=>Fg(m,o,{hiveClient:e}),null).then(f=>{f&&a.change(h=>{p.forEach(y=>{let S=h.value.document.getByKey(y.key);S&&h.setDataByKey(S.key,["ref"],f)})})}),n(hm(r,"link")),i}}),[o,e])}c();var Tb=v(P());c();var gA=v(P());var Ib=gA.createContext($t);function hA(t){let{node:o,children:e,attributes:n}=t;return Tb.createElement(xe,{...t},Tb.createElement(ve,{tag:o.type===$t?"ol":"ul",...n},Tb.createElement(Ib.Provider,{value:o.type},e)))}c();var Ni=v(P()),Eb=v(H());function yA(t){let{node:o,parent:e,children:n,editor:r}=t,{readOnly:i}=r,[,a]=T(N),s=Ni.useContext(Ib),l=o.data.toFrozenObject(),u=s===fo,d=s===$t,p=s===mo,m=Ni.useMemo(()=>ct(r,o.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:b.ListUnordered,selected:e.type===fo,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:fo})})}},{key:"ol",type:1,title:"Ordered List",icon:b.ListOrdered,selected:e.type===$t,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:$t})})}},{key:"tasks",type:1,title:"Tasks List",icon:b.ListTasks,selected:e.type===mo,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:mo})})}}]}]),[r,o.key,e.type]),f=S=>{r.change(w=>{ft.checkTaskItem(w,o.key,S)})},h=Cr(o.nodes.first()),y=S=>S<10?g.medium:S<100?g.large:"auto";return Ni.createElement(xe,{tag:"li",palette:m,contentProps:{style:vm.blockListItem},...t},p&&Ni.createElement(ve,{editable:!1,style:[vm.blockListItemPrefix,{height:h}]},Ni.createElement(Pc,{value:!!l.checked,onValueChange:f,readOnly:i,size:_.ICON_M})),u&&Ni.createElement(ve,{editable:!1,style:[vm.blockListItemPrefix,{height:h}]},Ni.createElement(b.Dot,{size:12,style:a.text})),d&&Ni.createElement(Ht,{editable:!1,style:[vm.blockListItemPrefix,{height:h,width:y(e.getChildIndex(o.key)+1)},a.Body,a.text]},w9(e,o)),Ni.createElement(Eb.View,{style:vm.blockListItemContent},n))}function w9(t,o){let e=t.data.toFrozenObject(),n=t.getChildIndex(o.key);return`${(e.start||1)+n}.`}var vm=Eb.StyleSheet.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:g.small,marginRight:g.small},blockListItemContent:{flex:1}});c();var Cm=v(Pi());var R9=(0,Cm.isKeyHotkey)("tab"),P9=(0,Cm.isKeyHotkey)("shift+tab"),k9=(0,Cm.isKeyHotkey)("enter"),x9=(0,Cm.isKeyHotkey)("backspace"),bA={onKeyDown:T9,shouldNodeComponentUpdate:I9};function I9(t,o){if(t.node.type===Qo){let{parent:e,node:n}=t,{parent:r,node:i}=o;if(e.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(e.type===$t&&e.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function T9(t,o,e){if(k9(t))return E9(t,o,e);if(R9(t)||P9(t))return D9(t,o,e);if(x9(t))return O9(t,o,e)}function E9(t,o,e){if(t.shiftKey)return;let{value:n}=o,r=ft.getCurrentItem(n);if(!r)return;if(t.preventDefault(),n.isExpanded&&o.delete(),r.isEmpty)return ft.getItemDepth(n)>1?ft.decreaseItemsDepth(o):ft.unwrapList(o);ft.splitListItem(o);let i=ft.getListForItem(o.value,r);if(i&&i.type===mo){let a=o.value.document.getNextSibling(r.key);return a?ft.checkTaskItem(o,a.key,!1):o}return o}function O9(t,o,e){let{value:n}=o,{startOffset:r,selection:i}=n;if(!ke.isTextRange(i)||i.isExpanded||r>0)return;let a=ft.getCurrentItem(n);if(a&&i.isAtStartOf(a))return t.preventDefault(),ft.unwrapList(o)}function D9(t,o,e){return t.shiftKey?(t.preventDefault(),ft.decreaseItemsDepth(o)):(t.preventDefault(),ft.increaseItemsDepth(o))}c();c();var CA=v(Pi());function A9(t){let{transform:o}=t,e=t.onHotkey?(0,CA.isKeyHotkey)(t.onHotkey):()=>!1,n=t.onInput?B9(t.onInput):()=>!1,r=t.ignoreIn?vA(t.ignoreIn):null,i=t.onlyIn?vA(t.onlyIn):null;function a(p,m,f){if(!e(p))return;let h=u(m.value);if(h)return l(h,p,m,f),!0}function s(p,m,f){if(p.inputType!=="insertText"||!n(p))return;let h=u(m.value);if(h)return l(h,p,m,f),!0}function l(p,m,f,h){let{value:y}=f,{startOffset:S}=y,w=0;return d(p,S).forEach(k=>{f.moveOffsetsTo(k.start,k.end).delete(),w+=k.total}),S-=w,f.moveOffsetsTo(S,S),f.call(o,m,p,h),m.preventDefault(),!0}function u(p){if(p.isExpanded)return null;let{startBlock:m}=p;if(!m)return null;let{type:f}=m;if(i&&!i(f)||r&&r(f))return null;let{startText:h,startOffset:y}=p;ge(h);let{text:S}=h,w=null,R=null;return t.after&&(w=S.slice(y).match(t.after)),t.before&&(R=S.slice(0,y).match(t.before)),t.before&&t.after&&!R&&(w=null),t.before&&t.after&&!w&&(R=null),!R&&!w?null:(w&&(w[0]=w[0].replace(/\s+$/,"")),R&&(R[0]=R[0].replace(/^\s+/,"")),{before:R,after:w})}function d(p,m){let{before:f,after:h}=p,y=[],S=0;if(f){let w=f[0],R=0,k=0;f.slice(1,f.length).forEach(x=>{x!==void 0&&(k=w.indexOf(x,k),R=m-S+k-w.length,y.push({start:R,end:R+x.length,total:x.length}),S+=x.length,k+=x.length)})}if(h){let w=h[0],R=0,k=0;h.slice(1,h.length).forEach(x=>{x!==void 0&&(k=w.indexOf(x,k),R=m-S+k,y.push({start:R,end:R+x.length,total:0}),S+=x.length,k+=x.length)})}return y}return{onKeyDown:a,onBeforeInput:s}}function B9(t){if(typeof t=="string")return o=>!!(o.data&&o.data===t);if(typeof t=="function")return t;if(t instanceof RegExp)return o=>!!(o.data&&o.data.match(t));throw new Error("Invalid onInput option")}function vA(t){if(Array.isArray(t))return o=>t.includes(o);if(typeof t=="string")return o=>o===t;if(typeof t=="function")return t;throw new Error("Invalid matcher type")}var li=A9;var L9=li({onlyIn:[be],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(t,o,e)=>{if(Qd(t.value,[ur,go])||Ob(t.value))return t.insertText("*");let n=e.before[0].slice(2).slice(0,-1);return Sm(t.value,n,[go,dr])?t.insertText("*"):t.deleteBackward(n.length+3).addMark(ur).insertText(n).removeMark(ur)}}),M9=li({onlyIn:[be],onInput:"_",before:/\b_[^_]+?$/,transform:(t,o,e)=>{if(Qd(t.value,[dr,go])||Ob(t.value))return t.insertText("_");let n=e.before[0].slice(1);return Sm(t.value,n,[ur,go])?t.insertText("_"):t.deleteBackward(n.length+1).addMark(dr).insertText(n).removeMark(dr)}}),_9=li({onlyIn:[be],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(t,o,e)=>{if(Qd(t.value,[ti,go])||Ob(t.value))return t.insertText("~");let n=e.before[0].slice(2).slice(0,-1);return Sm(t.value,n,[ti,go])?t.insertText("~"):t.deleteBackward(n.length+3).addMark(ti).insertText(n).removeMark(ti)}}),N9=li({onlyIn:[be],onInput:/`/,before:/`[^`]+?$/,transform:(t,o,e)=>{if(Qd(t.value,go))return t.insertText("`");let n=e.before[0].slice(1);return Sm(t.value,n,[ur,dr])?t.insertText("`"):t.deleteBackward(n.length+1).addMark(go).insertText(n).removeMark(go)}}),V9=li({onlyIn:[be],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(t,o,e)=>{if(Qd(t.value,go)||Ob(t.value))return t.insertText("$");let n=e.before[0].slice(2).slice(0,-1);if(Sm(t.value,n,[ur,go,dr]))return t.insertText("$");t.deleteBackward(n.length+3);let r=Ol.createMathInline(n);return t.insertInline(r),t}}),F9=li({onlyIn:[be],onHotkey:"enter",before:/^\$\$$/,transform:(t,o,e)=>{let n=Ol.createMathBlock();return wA(t,n)}}),H9=li({onlyIn:[be],onInput:" ",before:/^(-|\*)$/,transform:t=>SA(t.value)?t:ft.wrapInList(t,fo)}),W9=li({onlyIn:be,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(t,o,e)=>{if(SA(t.value))return t;let n=parseInt(e.before[1],10);return ft.wrapInList(t,$t,n&&n!==1?{start:n}:{})}}),U9=li({onlyIn:be,onInput:"]",before:/^(\[[ xX])$/,transform:(t,o,e)=>{let n=ft.getCurrentList(t.value);if(n)t.setNodeByKey(n.key,{type:mo});else{if(!t.value.isEmpty)return t.insertText(`${e.before[0]}]`);t=ft.wrapInList(t,mo)}let r=ft.getCurrentItem(t.value),i=e.before[0][1]!==" ";return r?ft.checkTaskItem(t,r.key,i):t}}),z9=li({onlyIn:be,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(t,o,e)=>{let[n]=e.before,r=n.replace(/^```/,"").trim(),i=ih(r),a=io.createCodeBlock("",{syntax:i.key});return wA(t,a)}}),K9=li({onlyIn:be,onInput:" ",before:/^(>)$/,transform:(t,o,e)=>t.wrapBlock(Jt)});function SA(t){let{startBlock:o,document:e}=t;return o?e.getParent(o.key)?.type===Qo:!1}var G9=[Ue,je,at],j9=li({onlyIn:be,onInput:" ",before:/^(#{1,3})$/,transform:(t,o,e)=>{let[n]=e.before,r=n.length,i=G9[r-1];return t.setBlocks({type:i})}});function Qd(t,o){let e=typeof o=="string"?[o]:o;return t.marks.some(n=>e.includes(n.type))}function Sm(t,o,e){let{startText:n,startOffset:r}=t;if(!n)return!1;let i=r-o.length,{leaf:a}=n.searchLeafAtOffset(i);return a?Qd(a,e):!1}function Ob(t){let{startText:o,startOffset:e}=t;if(!o)return!1;let n=o.text.slice(0,e);return!(!n||n.match(/^[^`]+$/))}function wA(t,o){let{startBlock:e}=t.value;if(e)return t.insertBlock(o).collapseToStartOf(o).removeNodeByKey(e.key)}var RA=[L9,M9,_9,N9,H9,W9,U9,j9,V9,F9,z9,K9];c();var Nw=v(P());c();var Vi=v(P()),Zd=v(H());var Db={[be]:_.ICON_S,[Ue]:_.ICON_XL,[je]:_.ICON_L,[at]:_.ICON_S};function PA(t){let{node:o,attributes:e,isSelected:n,parent:r}=t,i=o.data.toFrozenObject();return Vi.createElement(Vi.Suspense,{fallback:Vi.createElement(Y9,{selected:n,attributes:e,parentType:r.type})},Vi.createElement($9,{reference:i.ref,selected:n,attributes:e,parentType:r.type}))}function Y9(t){let{selected:o,attributes:e,parentType:n}=t,[,r]=T(kA),i=o?O.textColor.primaryStandout:O.textColor.main,a=Db[n||be]||Db[be];return Vi.createElement(Zd.View,{style:[r.mention,o&&r.mentionSelected],...e},Vi.createElement(Se,{size:a,style:i}))}function $9(t){let{reference:o,selected:e,attributes:n,parentType:r}=t,[,i]=T(kA),[,a]=T(N),s=U.useInteractiveState(),l=nt(o),u=Db[r||be]||Db[be],d=e?a.primaryStandout:a.text;return Vi.createElement(Zd.TouchableOpacity,{...s.events,...jc(l)},Vi.createElement(ve,{tag:"span",style:[i.mention,s.hovered&&i.mentionHovered,e&&i.mentionSelected,C.row,C.alignItemsCenter],...n},l.secondaryIcon?Vi.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Vi.createElement(Zd.Text,{style:[d,a.Bold]},l.title)))}var kA=j.create({mention:t=>({borderRadius:t.radiuses.medium,paddingHorizontal:g.xsmall/2}),mentionHovered:t=>({backgroundColor:t.colors.background.muted}),mentionSelected:t=>({backgroundColor:t.colors.primary.muted}),mentionIcon:{marginRight:g.xsmall/2}});c();var ep=v(P());function xA(t){let{editor:o}=t,{logAnalyticsEvent:e}=ep.useContext(ce),n=dt(),r=Ie(),i=ep.useCallback((a,s)=>Yn(u=>{o.change(d=>{d.insertInlineAtRange(s(),{type:Xp,data:{ref:u},isVoid:!0}).focus()}),e({type:"edit_page_document_insert_mention",kind:u.kind})},{...n,document:o.value.document},r,{withSearch:!1,accept:a.symbol==="@"?["user"]:["url","anchor","page","space","collection","file"]}),[o,r]);return ep.createElement(bb,{...t,getPalette:i})}var IA="mentionContext",J9=/(^|\s)(@|#)(\w*)$/,TA={renderMark:Q9,renderNode:X9,decorateValue:q9};function q9(t){let{selection:o}=t,e=Z9(t),n=[];return ke.isTextRange(o)&&e!==null&&n.push(ke.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.value.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:IA,data:{value:e.value,symbol:e.symbol}}],isAtomic:!0})),n}function X9(t){let{node:o}=t;switch(o.type){case Xp:return Nw.createElement(PA,{...t})}}function Q9(t){let{mark:o}=t;switch(o.type){case IA:return Nw.createElement(xA,{...t})}}function Z9(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!ke.isTextRange(r)||!e||!n||!ks({document:o,block:n},Xp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),s=J9.exec(a);return s?{symbol:s[2],value:s[3]}:null}c();var Hi=v(P()),Rm=v(H());c();function Ab(t,o,e=[]){return ct(t,o,[{key:"types",commands:()=>{let n=t.value.document.assertBlock(o),r=t.value.document.getParent(o);if(!r)return[];let i=a=>{t.change(s=>{s.setNodeByKey(n.key,{type:a}).focus()})};return[{key:be,title:"Paragraph",type:1,selected:n.type===be,icon:b.Paragraph,trigger:()=>{i(be)}},He(r,Ue)?{key:Ue,title:"Heading 1",type:1,selected:n.type===Ue,icon:b.Heading1,trigger:()=>{i(Ue)}}:null,He(r,je)?{key:je,title:"Heading 2",type:1,selected:n.type===je,icon:b.Heading2,trigger:()=>{i(je)}}:null,He(r,at)?{key:at,title:"Heading 3",type:1,selected:n.type===at,icon:b.Heading3,trigger:()=>{i(at)}}:null].filter(le)}},...e])}c();var Ge=v(P());c();var Fi=v(P());function EA(t){let{onExit:o}=t,e=Fi.useRef(null),[n,r]=ho(),[i,a]=Fi.useState("");Fi.useEffect(()=>{e.current?.focus()},[]);let s=()=>{r(async()=>{await t.onSubmit(i)})};return Fi.createElement(F,{contentEditable:!1,style:[O.flex.column,O.position.absolute,O.position.inset0,O.backgroundColor.main]},Fi.createElement(F,{style:[O.flex.row,O.padding.all200,O.backgroundColor.muted,O.borderRadius.medium]},Fi.createElement(F,{style:[O.flex.flex1,O.flex.row,O.flex.alignItemsCenter,O.flex.gap200]},Fi.createElement(At,{ref:e,icon:b.Magic,size:"large",value:i,onChangeText:a,placeholder:"Ask AI to write something",onKeyPress:l=>{(l.nativeEvent.key==="Escape"||l.nativeEvent.key==="Tab")&&(l.preventDefault(),o())},onSubmit:s,style:C.flex1}),Fi.createElement(Ot,{label:"Generate",size:"medium",leadingIcon:n?Se:void 0,trailingIcon:n?void 0:b.ArrowRight.CSS,onPress:s,disabled:n}))))}c();var wm=JSON.parse('{"placeholder":"placeholder_YMCFu","instructions":"instructions_1Qp3O","shortcuts":"shortcuts_WxjGT"}');c();var tp=v(P());var e7=Vt({key:"blockCompletion",default:null}),OA=We("editor:completion");function DA(t){let{editor:o,node:e,isFocused:n}=t,{logAnalyticsEvent:r,blocks:{withCompletions:i}}=tp.useContext(ce),[a,s]=fn(e7),l=tp.useCallback(u=>{s(u)},[o]);return tp.useEffect(()=>{if(!n||!i){l(null);return}let u=Date.now();i.generateBlockCompletion(e.key).then(d=>{let m=Date.now()-u;if(OA.debug(`Generated block completions in ${m}ms`),!d){l(null);return}let f={blockKey:e.key,completion:d,submit:async h=>{r({type:"edit_insert_block_completion",suggestionType:"markdown",suggestionSummary:d.summary,suggestionLength:d.markdown.length,insertionMethod:h,generationTime:m}),Vw(o,e.key,d)}};l(f)},d=>{OA.error("Failed to generate block completions",d),l(null)})},[o,n,e.key,i,r,l]),a?.blockKey===e.key?a:null}async function Vw(t,o,e){let n=await gf(e.markdown);t.change(r=>{r.collapseToStartOf(r.value.document.assertNode(o));let i=r.value.document.getParent(o);ge(i);let a=r.value.document.getPreviousBlock(o),s=r.value.document.getNextBlock(o);r.insertDocument(n.document);let l=r.value.document.getNode(i.key);if(!l||!Tt.isBlock(l)&&!yc.isDocument(l))return;let u=(a?r.value.document.getNextBlock(a.key):null)??l.nodes.first(),d=(s?r.value.document.getPreviousBlock(s.key):null)??l.nodes.last();r.selectBlock(xl.create({anchorBlock:u.key,focusBlock:d.key})).focus()})}var qs={instructions:{message:Ge.createElement(Ge.Fragment,null,"Type"," ",Ge.createElement(yn,{size:"medium",style:[O.flex.inline],shortcut:ze.EDITOR_PALETTE})," ","for commands"),embed:" or paste a link to embed content",completion:Ge.createElement(Ge.Fragment,null," ","or press"," ",Ge.createElement(yn,{size:"medium",style:[O.flex.inline],shortcut:"Space"})," to insert the AI completion")},imagePrompt:{title:"Select images"},image:{label:"Image"},ai:{label:"Use AI"},code:{label:"Code block",placeholder:"// Some code"},list:{label:"Unordered list"}};function AA(t){let{node:o,parent:e,editor:n,children:r,placeholder:i}=t,{selection:a}=n.value,s=ke.isTextRange(a)&&a.hasOnlyNodeFocused(o),{logAnalyticsEvent:l,blocks:{withImages:u,withCompletions:d}}=Ge.useContext(ce),[p,m]=Ge.useState(!1),f=He(e,Bn),h=DA(t),y=Ge.useRef(null),S=Ge.useCallback(()=>{n.elementRef?.current?.focus()},[n]),w=Ge.useCallback(async E=>{if(d){let A=Date.now(),I=await d.generateBlockCompletion(o.key,E),B=Date.now()-A;I&&Vw(n,o.key,I),l({type:"edit_insert_block_completion_prompt",suggestionSummary:I?.summary??void 0,suggestionLength:I?.markdown.length??0,prompt:E,generationTime:B,success:!!I})}m(!1)},[o.key,n]),R=Ge.useCallback(()=>{m(!0),l({type:"edit_start_block_completion_prompt"})},[l]);Ge.useEffect(()=>{if(!s)return;let E=A=>{A.target===n.elementRef?.current&&(A.key==="Tab"&&!A.shiftKey&&(A.preventDefault(),y.current?.focus()),A.key===" "&&(h?(A.preventDefault(),h.submit("keyboard")):d&&(A.preventDefault(),R())))};return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[s,n,h,R]);let k=!d,x=Ge.createElement(Q0,{ref:y,as:"span",onExit:S,style:wm.shortcuts},h?Ge.createElement(Ot,{kind:k?"blank":"pill",size:"small",label:h.completion.summary,leadingIcon:b.Magic.CSS,onPress:()=>{h.submit("click")}}):null,d?Ge.createElement(Ot,{kind:k?"blank":"pill",size:"small",label:qs.ai.label,leadingIcon:b.Magic.CSS,onPress:()=>{R()}}):null,u?Ge.createElement(Ot,{kind:k?"secondary":"pill",size:"small",label:qs.image.label,leadingIcon:b.Image.CSS,iconOnly:!0,onPress:()=>{u.filesManager.prompt({title:qs.imagePrompt.title,accept:"images",acceptURL:!0}).then(E=>{E.length!==0&&(zd(n,o.key,Tt.create({type:gn,isVoid:!0,nodes:E.map(A=>Zo.createImageBlock(A))}),"replace","end"),l({type:"edit_page_document_insert_block",from:"quick-insert",blockType:gn,images:E.length}))})}}):null,Ge.createElement(Ot,{kind:k?"secondary":"pill",size:"small",label:qs.code.label,leadingIcon:b.Code.CSS,iconOnly:!0,onPress:()=>{zd(n,o.key,io.createCodeBlock(qs.code.placeholder),"replace","end"),l({type:"edit_page_document_insert_block",from:"quick-insert",blockType:cr})}}),Ge.createElement(Ot,{kind:k?"secondary":"pill",size:"small",label:qs.list.label,leadingIcon:b.ListUnordered.CSS,iconOnly:!0,onPress:()=>{zd(n,o.key,ft.createList(fo),"replace","end"),l({type:"edit_page_document_insert_block",from:"quick-insert",blockType:fo})}}));return Ge.createElement(Ge.Fragment,null,Ge.createElement(xe,{...t},Ge.createElement(F,{as:"p",contentEditable:!1,style:[wm.placeholder,O.flex.row,O.flex.alignItemsCenter,O.flex.justifySpaceBetween,s||i?O.display.opacity100:O.display.opacity0]},s?Ge.createElement(Ge.Fragment,null,Ge.createElement(pe,{style:[de.contentParagraph,de.colorLight,wm.instructions]},qs.instructions.message,f&&!d?qs.instructions.embed:"",d?qs.instructions.completion:""),k?x:null):Ge.createElement(pe,{style:[de.contentParagraph,de.colorLight,wm.instructions]},kg(e)?i:null)),r,!k&&s?Ge.createElement(F,{contentEditable:!1,style:[O.flex.row,O.flex.wrap,O.margin.top200]},x):null,p&&s?Ge.createElement(EA,{onSubmit:w,onExit:()=>{m(!1),S()}}):null))}function BA(t){let{editor:o,node:e,parent:n,children:r,attributes:i}=t,[,a]=T(N),[,s]=T(n7),l=Hi.useContext(Uc),u=Hi.useContext(Wr),d=o7(n),p=[a.Body,a.text,s[l],s[u]],m=Hi.createElement(Rm.Text,{selectable:!0,style:p},r),f=Hi.useMemo(()=>Ab(o,e.key),[o,e.key]),h=Qp(e);return t7(n)?!o.readOnly&&h?Hi.createElement(AA,{...t,placeholder:d},m):Hi.createElement(xe,{...t,palette:f},m):Hi.createElement(ve,{...i},!o.readOnly&&d&&h&&kg(n)?Hi.createElement(ve,{editable:!1,pointerEvents:"none",style:[Rm.StyleSheet.absoluteFill]},Hi.createElement(Rm.Text,{selectable:!0,style:[p,a.textMuted]},d)):null,m)}function t7(t){return t.type===OC||t.type===EC||t.type===Tl?!0:!(t.object==="fragment"||t.type===Qo)}function o7(t){return t.type===xk?"Parameter description (optional)":t.type===OC?"Response description (optional)":t.type===EC?"Operation description (optional)":t.type===ws?"Title":t.type===Tl?"Expandable content":t.type===Ba?"Annotate this text":t.type===Lr?"Tab content":""}var n7=j.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:t=>({color:t.colors.text.mid}),swaggerParameter:Xe.Label,caption:t=>({...Xe.Caption,color:t.colors.text.muted}),expandableTitle:t=>({...Xe.Heading3,color:t.colors.text.main})});c();var Pm=v(Pi());var LA={onKeyDown:r7};function r7(t,o){if((0,Pm.default)("enter",t)||(0,Pm.default)("shift+enter",t))return i7(t,o);if((0,Pm.default)("backspace",t))return MA(t,o)}function i7(t,o){let{value:e}=o;if(e.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=e;if(n&&!n.isVoid)if(n.type===be){if((0,Pm.default)("shift+enter",t))return o.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return MA(t,o);if(i===a)return t.preventDefault(),o.splitBlock().setBlocks({type:be,data:{}})}}function MA(t,o){let{value:e}=o;if(e.isExpanded||e.startOffset>0)return;let{startBlock:n,startText:r}=e;if(!(!n||!(n.getFirstText()===r))){if(n.type===be){let a=e.document.getParent(n.key);return a&&De.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?o:void 0}if(!(n.type===Mr||n.type===Aa))return t.preventDefault(),n.isVoid?o.removeNodeByKey(n.key):o.setNodeByKey(n.key,{type:be,isVoid:!1})}}c();var Bb=v(P()),_A=v(H());c();var il=JSON.parse('{"quote":"quote_5I59h","hint":"hint_rnF2j","iconWrapper":"iconWrapper_NJPs7","icon":"icon_abDxV","info":"info_-xeCE","warning":"warning_5BM-F","danger":"danger_UUfHb","success":"success_3o6RV"}');function NA(t){let{children:o}=t;return Bb.default.createElement(xe,{tag:"blockquote",...t,contentProps:{style:a7.blockQuote}},Bb.default.createElement(F,{style:[O.flex.column,il.quote]},Bb.default.createElement(Wr.Provider,{value:"quote"},o)))}var a7=_A.StyleSheet.create({blockQuote:{position:"relative",width:"100%"}});c();var rs=v(P()),Lb=v(H());c();var km={info:{title:"Info",cssIcon:b.InfoCircle.CSS,icon:b.InfoCircle},warning:{title:"Warning",cssIcon:b.Warning.CSS,icon:b.Warning},success:{title:"Success",cssIcon:b.CheckCircle.CSS,icon:b.CheckCircle},danger:{title:"Danger",cssIcon:b.Alert.CSS,icon:b.Alert}};c();function VA(t,o){let e=["info","warning","danger","success"];return ct(t,o,[{key:"levels",commands:()=>{let n=t.value.document.assertBlock(o),r=n.data.get("style");return e.map(i=>({key:i,type:1,selected:r===i,title:km[i].title,icon:km[i].icon,trigger:()=>{t.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function FA(t){let{node:o,children:e,editor:n}=t,{readOnly:r}=n,i=o.data.toFrozenObject(),a=km[i.style],s=()=>{let h=["info","warning","danger","success"],y=i.style===h[h.length-1]?h[0]:h[h.indexOf(i.style)+1];n.change(S=>S.setNodeByKey(o.key,{data:{style:y}}))},l=rs.useMemo(()=>VA(n,o.key),[n,o.key]),u=o.nodes.first(),d=Mi(u,o),p=_.ICON_L,m=d.paddingTop+(Cr(u)-p)/2,f=a.cssIcon;return rs.createElement(xe,{...t,palette:l,contentProps:{style:[s7.blockHint]}},rs.createElement(F,{style:[il.hint,O.flex.row,il[i.style]]},rs.createElement(F,{style:[il.iconWrapper,O.flex.row,O.flex.justifyCenter],inlineStyle:{paddingTop:m,"--icon-size":`${p}px`}},r?rs.createElement(f,{style:il.icon}):rs.createElement(Lb.TouchableOpacity,{onPress:s},rs.createElement(f,{style:il.icon}))),rs.createElement(F,{style:[O.flex.column,O.flex.flex1]},e)))}var s7=Lb.StyleSheet.create({blockHint:{position:"relative",width:"100%"}});c();var Mb=v(Pi());var WA={onKeyDown:d7},c7=(0,Mb.isKeyHotkey)("backspace"),l7=(0,Mb.isKeyHotkey)("enter"),u7=(0,Mb.isKeyHotkey)("mod+enter");function d7(t,o,e){let{value:n}=o;if(!Ao(n.selection)){if(c7(t)&&n.isCollapsed)return p7(t,o);if(l7(t))return f7(t,o);if(u7(t))return m7(t,o);if(t.key===">")return g7(t,o)}}function p7(t,o){let{value:e}=o,{startOffset:n,selection:r}=e;if(!ke.isTextRange(r)||n>0)return;let i=Fw(e);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return t.preventDefault(),o.unwrapBlock(i.type)}function f7(t,o){let{value:e}=o,{startBlock:n,selection:r}=e;if(!ke.isTextRange(r))return;let i=Fw(e);if(i&&!(n&&n.text.length!==0))return t.preventDefault(),o.unwrapBlock(i.type)}function m7(t,o){let{value:e}=o,n=Fw(e);if(n)return t.preventDefault(),Ct(o,n),o}function g7(t,o){let{value:e}=o,{selection:n}=e;if(ke.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return t.preventDefault(),o.wrapBlock(Jt),o}function Fw(t,o=null){let{document:e,selection:n}=t;if(!ke.isTextRange(n)||(o??=t.startBlock,!o))return null;let r=e.getAncestors(o.key);if(!r)return null;let i=r.reverse().find(HA);return i&&HA(i)?i:null}function HA(t){return"type"in t&&(t.type===Jt||t.type===po)}c();var Hw=v(P());c();var ui=v(P()),Xs=v(H());var op=2,h7=250;function UA(t){let{selection:o}=t,[e,n]=ui.useState(!1),r={"data-cursor":!0},i=o.data.toFrozenObject(),a=ts(i.clientId),s={backgroundColor:a.base};return ui.createElement(ve,{tag:"span",editable:!1,...r,style:[np.cursor]},ui.createElement(Sc,{wrapper:Ii,onOpen:()=>n(!0),onClose:()=>n(!1),anchor:({ref:l,open:u,close:d})=>ui.createElement(U.WithInteractiveState,{onHoverIn:u,onHoverOut:d},({events:p})=>ui.createElement(Xs.View,{ref:l,...p,style:[np.carret,s]},ui.createElement(Xs.View,{style:[np.carretTop,s]})))},ui.createElement(Xs.View,{style:[np.bubble,e&&np.bubbleVisible]},ui.createElement(Xs.View,{style:[np.bubbleContent,s,g.Padding.horizontal200]},ui.createElement(Ha,{theme:{color:$a(a.base)}},ui.createElement(y7,{userName:i.userDisplayName}))))))}function y7({userName:t}){let[,o]=T(N);return ui.createElement(Xs.Text,{numberOfLines:1,style:[o.Caption,o.text]},t)}var np=Xs.StyleSheet.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:op,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-op*3,left:-op,borderRadius:100,width:op*3,height:op*3},bubble:{position:"absolute",left:-op,top:"-1.2em",width:h7,opacity:0,transition:`opacity ${Al.TRANSITION_DURATION_LONG}ms ease`},bubbleVisible:{opacity:1},bubbleContent:{position:"absolute",borderRadius:_.RADIUS_M}});c();var zA=v(P());function KA(t){let{children:o,selection:e}=t,n=e.data.toFrozenObject(),r=ts(n.clientId);return zA.createElement(Ht,{style:[{backgroundColor:r.faded}]},o)}c();var GA="focus",jA="range";var YA={renderSelection:b7};function b7(t){let{type:o}=t;switch(o){case GA:return Hw.createElement(UA,{...t});case jA:return Hw.createElement(KA,{...t})}}c();var $e=v(P());c();var fa=v(P());function $A(t){let{editor:o,node:e}=t,n=Ie(),r=dt(),i=fa.useMemo(()=>ct(o,e.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:b.PageLink,trigger:()=>Yn(a=>{o.change(s=>{s.setDataByKey(e.key,["ref"],a)})},r,n,{accept:["page","space","collection"]})}]}]),[o,e.key,r]);return fa.createElement(xe,{...t,palette:i},fa.createElement(Xt,{...t},fa.createElement(fa.Suspense,{fallback:fa.createElement(qa,{icon:Se,title:""})},fa.createElement(v7,{contentRef:e.data.get("ref")}))))}function v7(t){let{contentRef:o}=t,e=nt(o);return fa.createElement(qa,{title:e.title,icon:e.icon||e.secondaryIcon,...jc(e)})}c();var al=v(P()),JA=v(H());function qA(t){let{ancestors:o,node:e,children:n,attributes:r}=t,i=e.data.toFrozenObject(),{blockLayoutComponent:a}=al.useContext(ce),s=ot(),l=Wd({ancestors:o,node:e.blockNodes.first(),diff:!0});return al.createElement(a,{renderMode:l.renderMode},al.createElement(Gs.View,{isPDF:s},al.createElement(F,{style:[O.position.relative,O.flex.column,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},al.createElement(JA.View,{...r},l.diffLine?al.createElement(rb,{diff:i.type,...l.diffLine}):null,n))))}c();var XA=v(P()),QA=v(H());function ZA(t){let{mark:o,attributes:e,children:n}=t;return XA.createElement(Ht,{style:C7[o.type],...e},n)}var C7=QA.StyleSheet.create({[Sg]:{color:su.added},[wg]:{color:su.deleted,textDecorationLine:"line-through"},[Rg]:{color:su.modified}});c();var _b=v(P());c();var eB=JSON.parse('{"divider":"divider_osV0o"}');function tB(t){let{attributes:o}=t;return _b.createElement(xe,{...t},_b.createElement(Xt,{...t},_b.createElement(F,{as:"hr",style:eB.divider,...o})))}c();var vt=v(P());c();var kt=v(P());c();var zo=v(P());function oB(t){let{onClose:o}=t,[e,n]=ho(),r=zo.useRef(null),[i,a]=zo.useState(!1),s=_n(i),l=_n(o),u=_n(e),d=zo.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return zo.useEffect(()=>Ph("editor-block-modal"),[]),ri({[ze.EDITOR_SAVE]:p=>{d()}},"editor-block-modal",[]),zo.useEffect(()=>{let p=null,m=f=>{f.key==="Escape"&&(s.current?(p&&clearTimeout(p),d()):(a(!0),p=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m),p&&clearTimeout(p)}},[s,d]),zo.useEffect(()=>{i?r.current?.open():r.current?.close()},[i,r]),zo.createElement(W,{tooltipRef:r,icon:b.X,disabled:e,onPress:d,title:i?zo.createElement(zo.Fragment,null,"Press ",zo.createElement(yn,{inverted:!0,shortcut:"ESC"})," again to save & close"):zo.createElement(zo.Fragment,null,"Save & Close ",zo.createElement(yn,{inverted:!0,shortcut:ze.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}c();c();c();var nB=nh("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://app.gitbook.com/public/app/chunks/excalidraw.lazy-CHMM2AC7.min.js"));var pu=nB;function Nb(t,o="file.excalidraw.svg"){return new File([t],o,{type:"image/svg+xml"})}async function Ww(t,o={}){let{embedScene:e=!0,theme:n="light"}=o,{default:{exportToSvg:r}}=await pu.load();return await r({appState:{viewBackgroundColor:"transparent",exportEmbedScene:e,exportWithDarkMode:n==="dark"},elements:t.elements,files:t.files,exportPadding:30})}async function Vb(t){let o=await Ww(t);return new XMLSerializer().serializeToString(o)}async function rB(t){let{default:{parseMermaidToExcalidraw:o,convertToExcalidrawElements:e}}=await pu.load();try{let{elements:n,files:r}=await o(t,{fontSize:20});return{elements:e(n),files:r??{}}}catch{return null}}c();var Uw=sr({getValue:async t=>{if(!t)return{elements:[],files:{}};let{default:{loadFromBlob:o}}=await pu.load(),n=await(await fetch(t)).blob(),r=await o(n,null,null);return{elements:r.elements,files:r.files}}}),iB=sr({getValue:async({downloadURL:t,theme:o})=>{let e=await Uw.readAsync(t),n=await Ww(e,{embedScene:!1,theme:o});return n.style.maxWidth="100%",n.removeAttribute("width"),n.removeAttribute("height"),n}});c();var xm=JSON.parse('{"modalBackdrop":"modalBackdrop_YIGNh","modal":"modal_L4RAz","modalBody":"modalBody_-1ixR","generateFooter":"generateFooter_fzJyh"}');c();var ro=v(P());var Fb=ro.forwardRef(function(o,e){let{nodeKey:n,maxSuggestions:r=4,onSubmitDrawing:i,closeDirection:a="top",onClose:s,analyticsFrom:l,...u}=o,{logAnalyticsEvent:d,blocks:{withDrawings:p}}=ro.useContext(ce);ge(p);let{generateDiagram:m,generateDiagramSuggestions:f}=p;ge(m);let h=ro.useRef(null),[y,S]=ro.useState(""),[w,R]=ho(),[k,x]=ro.useState([]);ro.useImperativeHandle(e,()=>({focus:()=>{h.current?.focus()}}),[h]),ro.useEffect(()=>{f&&f(n).then(I=>{x(I.slice(0,r))},I=>{console.error("error",I)})},[f,r]);let E=(I=y,L=!1)=>{I&&(y!==I&&S(I),R(async()=>{let B=await m(n,y),Y=B?await rB(B):null;Y&&(await i(Y),h.current?.focus()),d({type:"edit_drawing_generate",from:l,prompt:y,isSuggestion:L,successGeneration:!!B,successParsing:!!Y})}))},A=s?ro.createElement(Ot,{kind:"nested",leadingIcon:a==="bottom"?b.ChevronDown.CSS:b.ChevronUp.CSS,iconOnly:!0,onPress:s,label:"Close"}):null;return ro.createElement(F,{...u,style:[O.flex.flex1,O.flex.column,u.style],onMouseDown:I=>{I.stopPropagation()},onClick:I=>{I.stopPropagation()}},k.length>0?ro.createElement(F,{style:[O.flex.row,O.flex.wrap]},k.map((I,L)=>ro.createElement(eE,{key:L,leadingIcon:b.Magic.CSS,size:"small",label:I,style:[O.margin.right200,O.margin.bottom200],onPress:()=>{E(I,!0)}}))):null,ro.createElement(F,{style:[O.flex.row,O.flex.alignItemsCenter,O.backgroundColor.muted,O.borderRadius.medium,O.padding.all200]},ro.createElement(At,{ref:h,icon:b.Magic,placeholder:"Describe the diagram or drawing you want to create",value:y,onChangeText:S,style:C.flex1,onSubmit:()=>E()}),ro.createElement(Ot,{kind:"primary",leadingIcon:w?Se:void 0,trailingIcon:b.ArrowRight.CSS,label:"Generate",onPress:()=>E(),style:O.margin.left200,disabled:w}),ro.createElement(F,{style:[O.margin.left200]},A)))});function aB(t){let{nodeKey:o,blockData:e,onClose:n}=t,r=kt.useRef(),i=lf({mount:O.animations.fadeIn,unmount:O.animations.fadeOut}),a=lf({mount:O.animations.popIn,unmount:O.animations.popOut},{onEnd:()=>{r.current?.refresh()}});return kt.createElement(Nn,null,kt.createElement(F,{ref:i,style:xm.modalBackdrop},kt.createElement(F,{ref:a,style:xm.modal},kt.createElement(kt.Suspense,{fallback:kt.createElement(Mo,{size:"large"})},kt.createElement(S7,{nodeKey:o,blockData:e,onClose:n,excalidrawRef:r})))))}function S7(t){let{nodeKey:o,excalidrawRef:e,blockData:n,onClose:r}=t,i=Is(),a=bo(),{blocks:{withDrawings:s}}=kt.useContext(ce);ge(s);let[l,u]=kt.useState(!1),d=kt.useRef(null),{Excalidraw:p,useExcalidrawStyle:m}=pu.loadSuspense().default;m();let h=nt(n.ref).resolution?.extra?.file,{result:y,error:S}=Uw.readSafe(h?.downloadURL||null),w=async()=>{let k=e.current;if(!k){r(void 0);return}let x=k.getSceneElements(),E=k.getFiles();if(y&&y.elements&&!w7(y.elements,x)){r(void 0);return}let A=await Vb({elements:x,files:E});r(Nb(A,h?.name))},R=k=>{let x=e.current;x&&(x.updateScene({elements:k.elements}),x.addFiles(Object.values(k.files)),x.scrollToContent(x.getSceneElements(),{fitToContent:!0}))};return kt.useEffect(()=>{S&&a.notify({kind:"danger",icon:b.Warning.CSS,title:"Error loading drawing",details:S.expose?S.message:"An unexpected error occurred while loading the drawing"})},[S]),kt.useEffect(()=>{l&&d.current&&d.current.focus()},[l]),kt.createElement(F,{style:xm.modalBody},kt.createElement(p,{excalidrawAPI:k=>{e.current=k},initialData:{...y,scrollToContent:!0},theme:i.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(k,x)=>kt.createElement(F,null,kt.createElement(oB,{onClose:w}))}),s.generateDiagram?kt.createElement(F,{style:[xm.generateFooter,O.flex.row,O.flex.justifyCenter]},l?kt.createElement(Fb,{ref:d,nodeKey:o,maxSuggestions:4,closeDirection:"bottom",analyticsFrom:"editor",onSubmitDrawing:R,onClose:()=>u(!1)}):kt.createElement(Ot,{kind:"secondary",label:"Use AI to generate",leadingIcon:b.Magic.CSS,size:"large",style:[O.margin.all200],onPress:()=>u(!0)})):null)}function w7(t,o){return t.length!==o.length?!0:t.some((e,n)=>{let r=o[n];return e.version!==r.version})}c();var To=v(P());c();var fu=v(P());function Hb(t){let{icon:o,message:e,kind:n="default",children:r}=t;return fu.createElement(F,{style:[O.padding.all600,O.flex.alignItemsCenter,O.flex.justifyCenter,O.flex.column,O.borderColor.mid,O.borderRadius.medium,O.borderStyle.dashed]},fu.createElement(F,null,fu.createElement(o,{style:[O.icons.xlarge,n==="danger"?O.textColor.dangerMain:O.textColor.muted]})),fu.createElement(F,{style:O.margin.top400},fu.createElement(pe,{style:[n==="danger"?O.textColor.dangerMain:O.textColor.muted,de.contentParagraph,O.text.alignCenter]},e)),r?fu.createElement(F,{style:[O.margin.top400,O.flex.column,O.flex.alignItemsCenter]},r):null)}var sB=To.forwardRef(function(o,e){let{nodeKey:n,readOnly:r,contentRef:i,onSave:a}=o,s=To.useRef(null),l=Is(),u=Td(),[d,p]=To.useState(null),{blocks:{withDrawings:m}}=To.useContext(ce);ge(m);let h=nt(i).href,y=d;return i&&!h&&(y=new Xr.NotFound("Drawing file not found, the file may have been deleted")),To.useImperativeHandle(e,()=>({openInGallery:()=>{u.open([{url:h}])}})),To.useEffect(()=>{let S=!0;return iB.readAsync({downloadURL:h,theme:l.color}).then(w=>{let R=s.current;R&&w&&S&&(R.innerHTML="",R.appendChild(w.cloneNode(!0)))},w=>{S&&p(w)}),()=>{S=!1}},[h,l.color]),y?To.createElement(Hb,{kind:"danger",icon:b.Warning.CSS,message:y.expose?y.message:"An error occurred while rendering this drawing file."}):To.createElement(F,{style:O.flex.column},h?To.createElement("div",{ref:s},To.createElement("img",{src:h,style:{width:"100%"}})):r?To.createElement(Hb,{icon:b.EditDrawing.CSS,message:"Drawing file not found"}):To.createElement(Hb,{icon:b.EditDrawing.CSS,message:"Double click to start sketching out your thoughts."},m.generateDiagram?To.createElement(Fb,{nodeKey:n,maxSuggestions:2,analyticsFrom:"empty",onSubmitDrawing:async S=>{a(Nb(await Vb(S)))}}):null))});var Wb="edit_drawing";function cB(t){let{node:o,editor:e,isFocused:n}=t,{readOnly:r}=e,{logAnalyticsEvent:i,blocks:{withDrawings:a}}=vt.useContext(ce);ge(a);let s=o.data.toFrozenObject(),l=!s.ref,u=bo(),d=vt.useRef(null),[p,m]=vt.useState(null),[f,h]=ho(),y=vt.useRef(),S=vt.useRef(null),w=()=>{u.close(Wb),m("edit"),i({type:"edit_drawing_edit",existing:!l})};vt.useEffect(()=>()=>{d.current&&clearTimeout(d.current),u.close(Wb)},[]);let R=Xh(w),k=()=>{r?S.current?.openInGallery():(d.current&&clearTimeout(d.current),u.close(Wb),R()||(d.current=setTimeout(()=>{u.notify({id:Wb,icon:b.EditDrawing.CSS,details:"Double click on the drawing to edit it!",timeout:3e3})},500),n||e.change(I=>{I.collapseToStartOf(o),I.focus()})))},x=async I=>{y.current=URL.createObjectURL(I),await h(async()=>{let L=s.ref;s.ref&&L?await a.updateDrawing(L,I):L=(await a.uploadDrawings([I]))[0],mg(L,s.ref)&&e.change(B=>{B.setDataByKey(o.key,["ref"],L)})})},E=async I=>{y.current=void 0,m(null),I&&x(I)},A=ct(e,o.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:b.EditDrawing,trigger:()=>{w()}},{key:"files",title:"Replace file\u2026",icon:b.Replace,trigger:async()=>{let[I]=await a.filesManager.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});I?.kind==="file"&&e.change(L=>{L.insertDataByKey(o.key,["ref"],I)})}}].filter(le)}]);return vt.createElement(vt.Fragment,null,vt.createElement(xe,{...t,palette:A},vt.createElement(Xt,{...t,isFocused:n},vt.createElement(F,{style:[O.flex.column,O.cursor.pointer],onClick:k},vt.createElement(vt.Suspense,{fallback:vt.createElement(ci,null)},vt.createElement(sB,{ref:S,nodeKey:o.key,readOnly:r,contentRef:y.current&&f?{kind:"url",url:y.current}:s.ref,onSave:E})),f?vt.createElement(F,{style:[O.backgroundColor.main,O.borderRadius.medium,O.position.absolute,O.position.top0,O.position.right0,O.flex.alignItemsCenter,O.flex.justifyCenter,O.margin.all200,O.padding.all200]},vt.createElement(Se,null)):null)),l?null:vt.createElement(ol,{...t})),vt.createElement(St,null,p==="edit"?vt.createElement(aB,{nodeKey:o.key,blockData:s,onClose:E}):null))}c();var Wi=v(P());function lB(t){let{node:o,editor:e}=t,{blocks:{withFiles:n}}=Wi.useContext(ce),r=n?async()=>{let[a]=await n.filesManager.prompt({title:"Replace file"});a?.kind==="file"&&e.change(s=>{s.insertDataByKey(o.key,["ref"],a)})}:void 0,i=ct(e,o.key,[{key:"types",commands:()=>[r?{key:"files",title:"Replace file\u2026",icon:b.Paperclip,trigger:()=>{r()}}:null].filter(le)}]);return Wi.createElement(xe,{...t,palette:i},Wi.createElement(Xt,{...t},Wi.createElement(Wi.Suspense,{fallback:Wi.createElement(qa,{icon:Se,title:""})},Wi.createElement(R7,{...t,onReplace:r}))),Wi.createElement(ol,{...t}))}function R7(t){let{node:o,editor:e,onReplace:n}=t,{ref:r}=o.data.toFrozenObject(),a=nt(r).resolution?.extra?.file,s=()=>{a?Ds(hc(a.downloadURL)):!e.readOnly&&n&&n()},l=Lo(Vd,{file:a},[a]);return Wi.createElement(qa,{onPress:s,icon:l,title:a?a.name:"File has been deleted",subtitle:a?Mf(a.size):void 0,details:a?GE(a):void 0})}c();var Jn=v(P());c();var sl=v(P()),uB=v(H());function dB(t){let{node:o,editor:e,onClose:n}=t,r=pg(o.text),[i,a]=sl.useState(()=>o.data.get("id")||""),s=u=>{let d=pg(u);d.length===u.length?a(d):a(u)},l=()=>{e.change(u=>{i?u.setDataByKey(o.key,["id"],pg(i)):u.removeDataByKey(o.key,["id"])}),n()};return sl.createElement(Co,{size:"small",title:"Edit heading anchor",footer:sl.createElement(uB.View,{style:[C.row,C.justifyEnd]},sl.createElement(W,{kind:"secondary",onPress:n,style:g.Margin.right200},"Close"),sl.createElement(W,{kind:"primary",onPress:l},"Save")),onClose:n},sl.createElement(At,{autoFocus:!0,size:"large",icon:b.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:s,onSubmit:l,placeholder:r}))}var P7=Z.createResponsiveComponent(ve);function pB(t){let{editor:o,node:e,parent:n,children:r}=t,[,i]=T(N),[,a]=T(x7),[s,l]=Jn.useState(null),u=Jn.useContext(Uc),d=Jn.useContext(Wr),p=Jn.useMemo(()=>Ab(o,e.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:b.Link,trigger:()=>{l("edit")}}]}]),[o,e.key]),{anchorElement:m,anchoredBlockId:f,anchoredBlockInteractiveState:h,onAnchoredBlockPress:y}=hb(e,{accessibilityLabel:"Direct link to heading",anchorIconSize:E7[e.type]}),S=n.type===Jt;return Jn.createElement(Jn.Fragment,null,Jn.createElement(xe,{...t,palette:p},Jn.createElement(P7,{tag:k7(e.type),nativeID:f,onClick:S?()=>{}:()=>y(),...h.events,style:[C.row,C.alignItemsEnd]},Jn.createElement(Z.Text,{selectable:!0,mobileStyle:[T7[e.type]],desktopStyle:[I7[e.type]],nativeID:`text-${f}`,style:[i.text,a[u],a[d]]},r,S?null:m))),Jn.createElement(St,null,s==="edit"?Jn.createElement(dB,{node:e,editor:o,onClose:()=>l(null)}):null))}function k7(t){switch(t){case Ue:return"h2";case je:return"h3";case at:return"h4";default:throw new Error(`invalid node type (${t}) for heading`)}}var x7=j.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),I7={[Ue]:yo.Heading1,[je]:yo.Heading2,[at]:yo.Heading3},T7={[Ue]:yo.Heading2,[je]:yo.Heading3,[at]:yo.Body},E7={[Ue]:_.ICON_L,[je]:_.ICON_S,[at]:_.ICON_XXS};c();var Ub=v(P());function fB(t){let{node:o,children:e,style:n,attributes:r}=t,{sections:i}=Ub.useContext(Ai),a=i.get(o.key);return Ub.createElement("div",{id:a,...r,style:n},e)}c();var Im=v(P()),mB=v(H());function gB(t){let{node:o,editor:e,children:n}=t,{align:r="center"}=o.data.toFrozenObject(),{blocks:{withImages:i}}=Im.useContext(ce),a=Li(e,o.key),s=u=>{e.change(d=>{d.insertDataByKey(o.key,["align"],u)})},l=ct(e,o.key,[{key:"types",commands:()=>[i?{key:"files",title:"Add images\u2026",icon:b.Image,trigger:()=>{i.filesManager.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{e.change(d=>{u.forEach(p=>{d.appendNodeByKey(o.key,Zo.createImageBlock(p))})})})}}:null].filter(le)},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:b.AlignTextLeft,trigger:()=>s("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:b.AlignTextCenter,trigger:()=>s("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:b.AlignTextRight,trigger:()=>s("right")}]},...a?[a]:[]]);return Im.createElement(xe,{palette:l,...t},Im.createElement(Z.View,{style:[C.row,r==="center"&&C.justifyCenter,r==="left"&&C.justifyStart,r==="right"&&C.justifyEnd,O7.imagesWrapper],mobileStyle:[C.wrap,C.justifyCenter]},n))}var O7=mB.StyleSheet.create({imagesWrapper:{columnGap:g.medium,rowGap:g.medium}});c();var Ce=v(P()),as=v(H());c();var ma=v(P()),zb=v(H());function Kb(t){let{node:o,editor:e,onClose:n}=t,[r,i]=ma.useState(()=>Zo.getImageAltText(o)||""),a=()=>{e.change(s=>{s.insertDataByKey(o.key,["alt"],r)}),n()};return ma.createElement(Co,{title:"Set image alt text",onClose:n,footer:ma.createElement(zb.View,{style:[C.row,C.justifyEnd]},ma.createElement(W,{kind:"secondary",onPress:n,style:g.Margin.right200},"Cancel"),ma.createElement(W,{kind:"primary",onPress:a},"Save"))},ma.createElement(zb.View,{style:[g.Margin.bottom600]},ma.createElement(zb.View,{style:[g.Margin.bottom400]},ma.createElement(sh,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),ma.createElement(At,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}c();var rp=v(P());function Gb(t){let{editor:o,node:e,style:n}=t,r=rp.useRef(null),i=fe(r),{blocks:{withImages:a}}=rp.useContext(ce);if(!a)return null;let s=async(u,d,p=!1)=>{let[m]=await a.filesManager.prompt({title:d,accept:"images",acceptURL:!0});m&&o.change(f=>{f.insertDataByKey(e.key,[u],m),p&&f.removeDataByKey(e.key,["refDark"]),e.object==="block"&&(f.removeDataPathByKey(e.key,["height"]),f.removeDataPathByKey(e.key,["width"]))})},l=()=>{o.change(d=>d.focus());let u=e.data.toFrozenObject();i.open(se({groups:[{key:"replace",commands:[{key:"all",icon:b.Replace,title:"Replace image",subtitle:"For both light and dark modes",trigger:()=>{s("ref","Replace image",!0)}}]},{key:"byTheme",commands:u.refDark?[{key:"light",icon:b.ThemeLight,title:"For Light mode",trigger:()=>{s("ref","Replace image for light mode")}},{key:"dark",icon:b.ThemeDark,title:"For Dark mode",trigger:()=>{s("refDark","Replace image for dark mode")}}]:[{key:"dark",icon:b.ThemeDark,title:"Add image for Dark mode",trigger:()=>{s("refDark","Add image for dark mode")}}]}]}))};return rp.createElement(Dt,{ref:r,active:i.opened,size:"small",label:"Replace image",tooltipTitle:"Replace image",leadingIcon:b.Replace.CSS,trailingIcon:i.opened?b.ChevronUp.CSS:b.ChevronDown.CSS,onPress:l,style:n,iconOnly:!0})}c();c();c();var Gr=v(P());var D7=U.createInteractiveComponent(b.EmojiReaction);function hB(t){let{analyticsContext:o,page:e,size:n,readOnly:r=!0}=t,i=Gr.useRef(null),[,a]=T(N),[s,l]=ho(),u=to(),d=async p=>{ge(u),i.current?.close(),p!==e.emoji&&(await l(()=>u.change(m=>{m.updatePage(e.id,{emoji:p})})),re({...o,...p?{type:"edit_pick_page_emoji",pageKind:e.type,emoji:p}:{type:"edit_remove_page_emoji",pageKind:e.type}}))};return r?e.emoji?Gr.createElement(_o,{code:e.emoji,size:n}):null:Gr.createElement(Sc,{ref:i,wrapper:Ii,anchor:({ref:p,opened:m,toggle:f})=>Gr.createElement(U.TouchableOpacity,{ref:p,onPress:f},s?Gr.createElement(Se,{size:n}):Gr.createElement(Gr.Fragment,null,e.emoji?Gr.createElement(_o,{code:e.emoji,size:n}):Gr.createElement(D7.Child,{size:n,style:m?a.textMid:a.textMuted,activeStyle:a.textMid})))},Gr.createElement(Vn,{kind:"wide",preferredAlignment:"middle"},Gr.createElement(py,{onPick:d,onRemove:e.emoji?()=>d(void 0):void 0})))}c();var ae=v(P()),up=v(H());c();var jb=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd","tocButton":"tocButton_Rr2pQ","tocHoverArea":"tocHoverArea_ZNa-w"}');c();var bB=v(P());var yB=new Set;function vB(t){let{hivePage:o,analyticsContext:e}=t;return bB.useCallback(()=>{let n=`${o.contentId}/${o.branchId}/${o.pageId}`;yB.has(n)||(yB.add(n),re({...e,page:o.pageId,type:"edit_page_document_start",collaborators:o.dataSync.presences.length}))},[o,e])}c();var Yb=v(P());var $b=Yb.createContext({baseRevision:void 0,pages:[],diffs:new Map,diffMode:null});c();var Re=v(P()),an=v(H());c();var zw=v($N()),ht=v(P()),Ui=v(H());function CB(t){let{analyticsContext:o,parentPages:e,childPages:n,onClose:r,revision:i,page:a}=t,[,s]=T(L7),[l,u]=ho(),d=to(),p=async(m=!0)=>{ge(d),await u(async()=>{await d.change(f=>{[a,...m?e:[],...m?n:[]].forEach(h=>{f.resolveConflict(h.id)})}),await re({...o,type:"edit_conflicts_keep_page",pageKind:a.type})}),r()};return ht.createElement(Co,{title:"Keep page",onClose:r,footer:ht.createElement(Ui.View,{style:[C.row,C.justifyEnd]},ht.createElement(W,{kind:"secondary",onPress:()=>{},style:g.Margin.right200,disabled:l},"Cancel"),ht.createElement(uf,{kind:"secondary",onPress:()=>p(!1),style:g.Margin.right200},"Keep only this page"),ht.createElement(uf,{kind:"merge",onPress:()=>p()},"Keep"))},(0,zw.default)(e)?null:ht.createElement(Ui.View,{style:[(0,zw.default)(n)?null:s.parentPages]},ht.createElement(A7,{revision:i,pages:e,onClose:r})),ht.createElement(B7,{revision:i,pages:n,onClose:r}))}function A7(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=T(N),i=o.length;return o.length?ht.createElement(Ui.View,{style:[g.Margin.top400]},ht.createElement(Ui.View,{style:[C.row,g.Margin.bottom200]},ht.createElement(vo,{kind:"warning",icon:b.Warning}),ht.createElement(Ui.Text,{style:[g.Margin.left400,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",o.length," conflicted parent"," ",ht.createElement(ia,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(ia,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(Ui.View,null,o.map(a=>{let s=n?.pages[a.id];return ht.createElement(Os,{key:a.id,layout:"wide",icon:()=>s==="deleted-in-base-subtree-modified-in-head"||s==="deleted-in-head-subtree-modified-in-base"?ht.createElement(vo,{kind:"warning",icon:b.Conflict}):ht.createElement(vo,{kind:"danger",icon:b.Trashcan}),title:a.title})}))):null}function B7(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=T(N),i=o.length;return o.length?ht.createElement(Ui.View,{style:[g.Margin.top400]},ht.createElement(Ui.View,{style:[C.row,g.Margin.bottom200]},ht.createElement(vo,{kind:"warning",icon:b.Warning}),ht.createElement(Ui.Text,{style:[g.Margin.left400,r.Label,r.text,r.Bold]},"There ",o.length>1?"are":"is"," ",o.length," nested"," ",ht.createElement(ia,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(ia,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(Ui.View,null,o.map(a=>{let s=n?.pages[a.id];return ht.createElement(Os,{key:a.id,layout:"wide",icon:()=>s==="deleted-in-base-subtree-modified-in-head"||s==="deleted-in-head-subtree-modified-in-base"?ht.createElement(vo,{kind:"warning",icon:b.Conflict}):ht.createElement(vo,{kind:"danger",icon:b.Trashcan}),title:a.title})}))):null}var L7=j.create({parentPages:t=>({borderBottomColor:t.colors.border.mid,borderBottomWidth:1,marginBottom:g.large,paddingBottom:g.large})});c();var Lt=v(P()),di=v(H());c();var jr=v(P()),Jb=v(H());var SB=4;function wB(t){let{space:o,page:e,readOnly:n,...r}=t,[i,a]=jr.useState(!1),s=Gw(o,e),l=Kw();if(s.length===0)return null;let u=i?s:s.slice(0,SB),d=s.length-SB,p=!i&&d>0;return jr.createElement(Jb.View,{...r,style:[C.row,C.wrap]},u.map(m=>jr.createElement(Jb.View,{key:m.key,style:[g.Margin.right400,g.Margin.top400]},jr.createElement(W,{kind:"default",size:"small",icon:b.ArrowDownLeft,onPress:()=>l(m)},m.page.title))),p?jr.createElement(Jb.View,{style:[g.Margin.top400]},jr.createElement(W,{kind:"grey",size:"small",onPress:()=>a(!0),title:jr.createElement(jr.Fragment,null,"Show ",d," more"," ",jr.createElement(ia,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function Kw(){let{navigate:t}=we();return jr.useCallback(o=>{let{page:e,revision:n}=o;if(e.type==="link")return;let r=ao(n,e.id);t({screen:i=>i.type==="space"&&n.contentId===i.space?{page:r}:{type:"space",space:n.contentId,page:r,changeRequest:void 0,revision:void 0}})},[])}function Gw(t,o){return M7([{kind:"page",page:o.id},{kind:"page",page:o.id,space:t.key}]).filter(n=>n.page.id!==o.id||n.revision.contentId!==t.key)}function M7(t){let o=t.map(i=>lk(i)),[e]=Ic([uk(o)]),n=Ie(),r=qP(e,i=>{let a=wh([oa(i.space)])[0]?.result;if(a)return JP(()=>n.store.getRevision(a.key,a.revision))});return e.map((i,a)=>{let s=r[a];return s?Object.keys(i.pages).filter(u=>Object.keys(i.pages[u].references).some(d=>o.includes(d))).map(u=>{let d=s.pages[u];return d?{key:`${s.contentId}-${u}`,revision:s,page:d}:null}).filter(le):[]}).flat().sort((i,a)=>i.page.id<a.page.id?-1:i.page.id>a.page.id?1:0)}function qb(t){let{space:o,analyticsContext:e,page:n,onClose:r,revision:i}=t,[,a]=T(N),s=to(),l=async u=>{ge(s),u&&(await s.change(d=>{d.removePage(n.id,{deleteEmptyGroupParent:!0})}),re({...e,type:"edit_remove_page",pageKind:n.type})),r()};return Lt.createElement(mf,{title:n.type==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},Lt.createElement(di.View,null,Lt.createElement(di.Text,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),Lt.createElement(Lt.Suspense,{fallback:null},Lt.createElement(_7,{space:o,page:n,onClose:r})),n.type!=="link"?Lt.createElement(N7,{revision:i,page:n,onClose:r}):null)}function _7(t){let{space:o,page:e,onClose:n}=t,[,r]=T(N),i=Kw(),a=Gw(o,e);return a.length===0?null:Lt.createElement(di.View,{style:[g.Margin.top400]},Lt.createElement(di.View,null,Lt.createElement(di.Text,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),Lt.createElement(di.View,{style:[C.row,C.wrap]},a.map(s=>Lt.createElement(di.View,{key:s.key,style:[g.Margin.right200,g.Margin.top200]},Lt.createElement(W,{kind:"secondary",size:"small",icon:b.ArrowDownLeft,onPress:()=>{n(),i(s)}},s.page.title)))))}function N7(t){let{page:o,revision:e,onClose:n}=t,[,r]=T(N),{navigateToPage:i}=Gc(),s=Ec(e,o.id).map(u=>e.conflicts?.pages[u.id]==="deleted-in-base"?u:null).filter(le),l=s.length;return l?Lt.createElement(di.View,{style:[g.Margin.top400]},Lt.createElement(di.View,{style:[C.row,g.Margin.bottom400]},Lt.createElement(vo,{kind:"warning",icon:b.Warning}),Lt.createElement(di.Text,{style:[g.Margin.left400,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",s.length," nested"," ",Lt.createElement(ia,{count:Object.keys(s.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",Lt.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),Lt.createElement(di.View,null,s.map(u=>Lt.createElement(Os,{key:u.id,layout:"wide",icon:()=>Lt.createElement(vo,{kind:"danger",icon:b.Trashcan}),title:u.title,buttons:[Lt.createElement(W,{size:"medium",kind:"secondary",onPress:()=>{n(),i(e,u.id)}},"Open")]})))):null}function RB(t){let{page:o,document:e,conflictType:n,pageWithComments:r,pageIsDiff:i}=t,a=n===!1,[,s]=T(H7),l=to(),[u,d]=ho(),p=bo(),m=ea.getDocumentConflicts(e),f=m.isEmpty(),h=()=>{ge(l),f&&d(async()=>{await l.change(S=>{S.resolveConflict(o.id)}),l.revision.conflicts||p.notify({kind:"success",icon:b.CheckCircle.CSS,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},y=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return Re.createElement(F7,{...t,conflictType:n,onPressMarkAsResolved:h,loading:u,hasBeenResolved:a});case!1:case"document-conflict":return Re.createElement(V7,{conflictNodes:m,canBeResolved:f,loading:u,onPressMarkAsResolved:h,hasBeenResolved:a,...t});default:Ee(n)}};return Re.createElement(an.View,{style:[C.row,C.justifyCenter,g.Margin.bottom400,s.alert]},Re.createElement(an.View,{style:[C.flex1,r||i?s.alertWithComments:s.alertFullWidth]},Re.createElement(an.View,{style:[C.row,C.alignItemsCenter,g.Padding.vertical400,g.Padding.horizontal400,s.alertInner]},y())))}var V7=t=>{let{hasBeenResolved:o,canBeResolved:e,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=t,[,a]=T(N),s=Re.useRef(),l=m=>{let f=wc(m);f&&fE(f)},u=m=>{let h=(s.current?r.findIndex(S=>S.key===s.current):-1)+m;h<0?h=r.size-1:h>=r.size&&(h=0);let y=r.get(h)?.key;y&&(s.current=y,l(y))},d=()=>{u(1)},p=()=>{u(-1)};return Re.createElement(an.View,{style:[C.flex1,C.column]},Re.createElement(an.View,{style:[C.row]},Re.createElement(an.View,{style:g.Margin.right400,testID:"conflictBanner.badge"},o?Re.createElement(vo,{kind:"success",size:"large",icon:b.Check}):Re.createElement(vo,{kind:"merge",size:"large",icon:b.Conflict})),Re.createElement(an.View,{style:[C.flex1,C.column]},Re.createElement(an.Text,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":Re.createElement(Re.Fragment,null,"This page has ",e?"no":r.size," ","unresolved"," ",Re.createElement(ia,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",e?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),o?null:Re.createElement(an.View,{style:[C.row,C.wrap]},e?null:Re.createElement(an.View,{style:[C.row,C.wrap,g.Margin.bottom200]},Re.createElement(W,{style:[g.Padding.left0],size:"medium",rightIcon:b.ChevronUp,onPress:p,testID:"conflictBanner.prevButton"},"Prev"),Re.createElement(W,{size:"medium",rightIcon:b.ChevronDown,onPress:d,style:g.Margin.right200,testID:"conflictBanner.nextButton"},"Next")),Re.createElement(an.View,{style:[{marginLeft:"auto"}]},Re.createElement(W,{size:"medium",kind:"secondary",title:e?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!e,icon:n?Se:b.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},F7=t=>{let{hasBeenResolved:o,loading:e,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:s,conflictType:l}=t,[u,d]=Re.useState(!1),[p,m]=Re.useState(!1),[,f]=T(N),h=Ec(s,r.id).filter(E=>s?.conflicts?.pages[E.id]==="deleted-in-head"||s?.conflicts?.pages[E.id]==="deleted-in-base"),y=()=>{let E="Do you want to keep the modified page or delete it?",A=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${E}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${E}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${A}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${A}. Do you want to keep or delete it?`}},w=(E=>{let A=[];function I(L){let B=Mn(s,L.id);B&&s.conflicts?.pages[B.id]&&(A.push(B),I(B))}return I(E),A})(r),R=Ec(s,r.id),k=()=>m(!0),x=()=>{if(w.length||R.length){d(!0);return}n()};return Re.createElement(Re.Fragment,null,Re.createElement(Re.Fragment,null,Re.createElement(an.View,{style:g.Margin.right400,testID:"conflictBanner.badge"},o?Re.createElement(vo,{kind:"success",size:"large",icon:b.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?Re.createElement(vo,{kind:"warning",size:"large",icon:b.Conflict}):Re.createElement(vo,{kind:"danger",size:"large",icon:b.Trashcan})),Re.createElement(an.View,{style:[C.flex1]},Re.createElement(an.Text,{style:[f.Label,f.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":y())),o?null:Re.createElement(an.View,{style:[g.Margin.left400,C.row]},Re.createElement(an.View,{style:[g.Margin.left400,C.row]},Re.createElement(W,{size:"medium",icon:e?Se:b.Copy,onPress:x,testID:"conflictBanner.keepButton"},"Keep"),Re.createElement(W,{size:"medium",icon:e?Se:b.Trashcan,onPress:k,testID:"conflictBanner.deleteButton"},"Delete")))),Re.createElement(St,null,u?Re.createElement(CB,{page:r,revision:s,analyticsContext:a,onClose:()=>d(!1),parentPages:w,childPages:R}):null),Re.createElement(St,null,p?Re.createElement(qb,{space:i,page:r,revision:s,analyticsContext:a,onClose:()=>m(!1)}):null))},H7=j.create({alert:t=>({position:"sticky",top:-_.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:t=>({borderRadius:_.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,...t.shadows.tight}),alertFullWidth:{maxWidth:Hr+2*zt},alertWithComments:{maxWidth:Hr+zt}});c();var Oe=v(P()),qn=v(H());var kB=Qh({width:1448,height:240}),U7=U.createInteractiveComponent(kB.View);function jw(t){let{page:o}=t;return o.cover?Oe.createElement(Oe.Suspense,{fallback:Oe.createElement(z7,null)},Oe.createElement(K7,{...t,page:o})):null}function z7(t){return Oe.createElement(qn.View,{style:[Qs.pageCover]},Oe.createElement(xB,null))}function K7(t){let{page:o,revision:e,readOnly:n,rounded:r,analyticsContext:i}=t,[a,s]=Oe.useState(!1),l=vy(),u=to(),d=ot(),[p,m]=ho(),f=PB(),h=null;if(o.cover.ref){let Y=o.cover.ref.kind==="file"?e.files[o.cover.ref.file]:null;f=(o.cover.ref.kind==="file"?Y?hc(Y?.downloadURL):null:o.cover.ref.url)||f,Y?.dimensions&&(h=Y.dimensions)}let y=o.cover.yPos||0,S=Oe.useMemo(()=>new qn.Animated.Value(y),[o.id,o.cover.yPos]),w=Oe.useRef(y);Oe.useEffect(()=>{let Y=S.addListener(({value:$})=>{w.current=$});return()=>{S.removeListener(Y)}},[S]);let R=async()=>{ge(u),s(!1),await u.change(Y=>{Y.movePageCover(o.id,w.current)}),re({...i,type:"edit_reposition_cover"})},k=()=>{s(!1),S.flattenOffset(),S.setValue(y)},x=Oe.useRef(null),E=fe(x),A=Oe.useCallback(async()=>{ge(u);let[Y]=await l.prompt({title:"Select cover image",accept:"images",acceptURL:!0});Y&&(await m(()=>u.change($=>{$.addPageCover(o.id,Y)})),re({...i,type:"edit_upload_cover"}))},[i,u,o.id]),I=Oe.useCallback(async()=>{ge(u),await m(()=>u.change(Y=>{Y.removePageCover(o.id)})),re({...i,type:"edit_remove_cover"})},[i,u,o.id]),L=Oe.useCallback(Y=>{ge(u),u.change($=>{$.updatePageLayout(o.id,{coverSize:Y})}),re({...i,type:"edit_cover_size",coverSize:Y})},[i,u,o.id]),B=Oe.useMemo(()=>{if(n)return;let Y=md(o).coverSize;return se({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:b.Image,title:"Select image",trigger:()=>{A()}},{key:"pageCover.reposition",icon:b.ImageSizeBlock,title:"Reposition",trigger:()=>{s(!0)}}]},{key:"pageCoverSize",commands:[{key:"pageCoverSize.full",icon:b.FullWidth,title:"Full width",type:1,selected:Y==="full",trigger:()=>L("full")},{key:"pageCoverSize.hero",icon:b.DefaultWidth,title:"Hero width",type:1,selected:Y==="hero",trigger:()=>L("hero")}]},{key:"pageCoverDanger",commands:[{key:"pageCoverDanger.remove",icon:b.Trashcan,title:"Remove cover",trigger:()=>I()}]}]})},[i,I,n,A,L,o]);return Oe.createElement(U7,{style:[Qs.pageCover],isPDF:d},Oe.createElement(G7,{coverUrl:f,animatedY:S,repositioning:a,rounded:r,isPDF:d,coverFileDimensions:h}),p?Oe.createElement(xB,null):null,n||d?null:Oe.createElement(U.View.Child,{style:[Qs.pageCoverButton,C.row],activeStyle:"visible",inactiveStyle:a||E.opened?"visible":"hidden"},a?Oe.createElement(Oe.Fragment,null,Oe.createElement(W,{kind:"secondary",size:"medium",style:[g.Margin.right200],onPress:k},"Cancel"),Oe.createElement(W,{kind:"primary",size:"medium",onPress:R},"Save")):Oe.createElement(Oe.Fragment,null,o.cover?null:Oe.createElement(W,{icon:b.Image,kind:"secondary",size:"medium",style:[g.Margin.right200],onPress:()=>{A()}},"Change cover"),Oe.createElement(W,{ref:x,icon:b.MoreVertical,size:"medium",kind:"secondary",active:E.opened,onPress:()=>{B&&E.open(B)}}))))}function G7(t){let{coverUrl:o,animatedY:e,repositioning:n,isPDF:r,rounded:i,coverFileDimensions:a}=t,s=xi(),l=Oe.useRef(null),[u,d]=Oe.useState(a),[p,m]=kB.useDimensions(),f=u?j7(p,u):0,[,{pageCoverRounded:h}]=T($7),y=Oe.useMemo(()=>qn.PanResponder.create({onStartShouldSetPanResponder:(x,E)=>!1,onStartShouldSetPanResponderCapture:(x,E)=>!1,onMoveShouldSetPanResponder:(x,{dx:E})=>n,onMoveShouldSetPanResponderCapture:(x,E)=>!1,onPanResponderGrant:(x,{dx:E})=>{e.extractOffset()},onPanResponderMove:(x,{dy:E})=>{e.setValue(E/f)},onPanResponderTerminationRequest:(x,E)=>!0,onPanResponderRelease:(x,{dy:E})=>{e.flattenOffset()}}),[f,n]),S=u?u.width*f:0,w=u?u.height*f:0,R=(p.height-w)/2,k=!!u&&m;return Oe.createElement(qn.View,{...y.panHandlers,style:[qn.StyleSheet.absoluteFill,Qs.pageCoverInner,n&&Y7.pageCoverRepositioning,i&&h],...k?{testID:"page.cover"}:{}},!r&&Oe.createElement(qn.View,{style:[Qs.pageCoverOverlay,s.color==="dark"&&Qs.pageCoverOverlayDark,k&&Qs.pageCoverOverlayReady]}),Oe.createElement(Mx,{ref:l,source:{uri:o},loading:"priority",style:[Qs.pageCoverImage,S&&w?{top:r?0:qn.Animated.diffClamp(qn.Animated.add(R,qn.Animated.multiply(e,f)),-(w-p.height),0),left:(p.width-S)/2,width:S,height:w}:{width:"100%",top:e}],onLoad:()=>{d({width:l.current?.width??0,height:l.current?.height??0})}}))}function xB(){return Oe.createElement(qn.View,{style:Qs.pageCoverLoadingOverlay},Oe.createElement(Se,{size:"large"}))}function j7(t,o){let e=t.width/o.width,n=t.height/o.height;return o.height*e<t.height?n:e}var Y7=qn.StyleSheet.create({pageCoverRepositioning:{cursor:"grab"}}),$7=j.create({pageCoverRounded:t=>({borderRadius:t.radiuses.xlarge})}),Qs=qn.StyleSheet.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:g.medium,right:g.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:Q.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});c();var Le=v(P()),ap=v(H());c();var mu=JSON.parse('{"pageHeaderContainer":"pageHeaderContainer_f8iPF","pageControls":"pageControls_65PGe","hiddenIcon":"hiddenIcon_MYEiw","revealOnHover":"revealOnHover_QTUA-"}');c();var J7=cg({key:"pageOptionsAtom",default:null});function zi(t){let o=ar(J7(t?.id||""));return o===null?md(t):o.layoutOptions}var ip={mobile:"MobileMainTitle",desktop:"MainTitle"},q7=Z.createResponsiveComponent(ni),oBe=Z.createResponsiveComponent(wB),X7=Z.createResponsiveComponent(Ht),EB=Le.memo(function(o){let{space:e,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:s,analyticsContext:l,withDiff:u,toolbar:d}=o,p=bf("CUSTOM_FIELDS"),[,m]=T(N),[,f]=T(Q7),h=ot(),y=ue(),{navigate:S}=we(),[w,R]=ho(),k=to(),x=Le.useRef(null),E=[m.Body,m.textMuted],A=zi(r),I=async Pe=>{ge(k),await k.change(Je=>{Je.renamePage(r.id,Pe)}),re({...l,type:"edit_page_title",pageKind:r.type})},L=async Pe=>{ge(k),await k.change(Je=>{Je.setPageDescription(r.id,Pe)}),re({...l,type:"edit_page_description",pageKind:r.type})},B=Pe=>{Pe.nativeEvent.key==="Enter"&&(Pe.preventDefault(),x.current&&x.current.focus())},Y=Pe=>{Pe.nativeEvent.key==="Enter"&&(Pe.preventDefault(),s&&s())},$=()=>{R(async()=>{ge(k),await k.change(Pe=>{Pe.addPageCover(r.id)}),re({...l,type:"edit_add_cover"})})},G=!A.title,q=!A.description,J=G&&q||!G,ie=G&&!q,ye=[mu.pageControls,mu.revealOnHover,O.margin.top200,O.flex.row,O.flex.columnGap100];return Le.createElement(F,{style:[O.position.relative,O.flex.column,a&&!p?O.padding.top700:mu.pageHeaderContainer,G&&q?null:O.margin.bottom600]},a?Le.createElement(F,{style:ye},p?Le.createElement(IB,{style:[g.Padding.left0]}):null,Le.createElement(TB,null)):Le.createElement(F,{style:ye},Le.createElement(W,{kind:"default",size:"xsmall",style:[g.Padding.left0],icon:b.Options,onPress:()=>S({screen:{sideSheet:{type:"page"}}})},"Page options"),p?Le.createElement(IB,null):null,pd(r)?null:Le.createElement(W,{kind:"default",size:"xsmall",icon:w?Se:b.Image,disabled:w,onPress:$},"Page cover"),Le.createElement(TB,null)),!a&&(G||q)?Le.createElement(F,{style:[mu.revealOnHover,O.margin.top200,O.flex.columnGap200]},G?Le.createElement(F,{style:[O.flex.alignItemsCenter,O.flex.columnGap100]},Le.createElement(b.EyeOff.CSS,{style:[mu.hiddenIcon]}),Le.createElement(pe,{style:[de.uiSmall,de.colorMuted]},"Page title hidden")):null,q?Le.createElement(F,{style:[O.flex.alignItemsCenter,O.flex.columnGap100]},Le.createElement(b.EyeOff.CSS,{style:[mu.hiddenIcon]}),Le.createElement(pe,{style:[de.uiSmall,de.colorMuted]},"Page description hidden")):null):null,Le.createElement(F,{style:[O.flex.row,O.flex.justifySpaceBetween,O.flex.alignItemsCenter,G&&q?O.margin.leftAuto:null]},G?null:Le.createElement(ap.View,{style:[C.row,C.flex1]},Le.createElement(Z.View,{style:[C.row,C.justifyEnd,C.alignItemsCenter],mobileStyle:f.emojiWrapperMobile,desktopStyle:f.emojiWrapperDesktop},r.emoji||!a?Le.createElement(Z.View,{mobileStyle:[Yw.pageEmojiRelative,g.Padding.left0,g.Padding.right400],desktopStyle:[Yw.pageEmojiAbsolute,g.Padding.left400,g.Padding.right400],dataSet:{nudgeIcon:!0}},Le.createElement(hB,{analyticsContext:l,page:r,readOnly:a,size:_.ICON_XL})):null),a?Le.createElement(ap.View,{style:[C.flex1]},Le.createElement(X7,{testID:"page.title",tag:"h1",style:[m.text],selectable:!0,mobileStyle:m[ip.mobile],desktopStyle:m[ip.desktop]},r.title)):Le.createElement(q7,{key:r.id,testID:"page.title",component:SS,value:r.title,maxLength:vf,style:[m.text,C.flex1,m.Body],onChangeText:I,onKeyPress:B,placeholder:y("untitled_page"),placeholderTextColor:m.textLight.color,mobileStyle:m[ip.mobile],desktopStyle:m[ip.desktop]})),h||!d?null:J&&Le.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),Le.createElement(F,{style:[O.flex.row,O.flex.justifySpaceBetween,O.flex.alignItemsCenter,G&&q?O.margin.leftAuto:null]},q?null:Le.createElement(Z.View,{style:[G?null:g.Margin.top400,C.flex1]},a?r.description?Le.createElement(ap.View,null,Le.createElement(pe,{style:[de.contentParagraph,de.colorMuted,de.selectable]},r.description)):u?Le.createElement(Z.View,{style:Yw.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:Le.createElement(ni,{key:r.id,ref:x,component:SS,value:r.description,style:E,maxLength:YC,onChangeText:L,onSubmitEditing:s,onKeyPress:Y,placeholder:y("page_description"),placeholderTextColor:m.textLight.color})),h||!d?null:ie&&Le.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),null)});function IB(t){let{navigate:o}=we();return Le.createElement(W,{kind:"default",size:"xsmall",icon:b.Metadata,onPress:()=>o({screen:{sideSheet:{type:"page-metadata"}}}),...t},"Page metadata")}function TB(){let{navigate:t}=we();return Le.createElement(W,{kind:"default",size:"xsmall",style:[g.Padding.left0],icon:b.Comment,onPress:()=>t({screen:{sideSheet:{type:"comments",context:"post"}}})},"Comment on page")}var Yw=ap.StyleSheet.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:$g.mediumLarge}}),Q7=j.create({emojiWrapperMobile:{width:"auto",height:Xe[ip.mobile].lineHeight},emojiWrapperDesktop:{height:Xe[ip.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:zt},pageBodyMobileLeftMargin:{marginLeft:tn}});c();var Qt=v(P()),is=v(H());var OB=Z.createResponsiveComponent(Es),DB=U.createInteractiveComponent(oi),AB=Qt.memo(function(o){let{revision:e,page:n,style:r}=o,{getNavigationLinkProps:i}=we(),[,a]=T(N),s=ue(),l=ot(),u=U.useInteractiveComponent(b.ArrowLeft),d=U.useInteractiveComponent(b.ArrowRight),{desktopSidebarWidth:p}=Qt.useContext(sa),{nextPage:m,previousPage:f}=Qt.useMemo(()=>{let R=Z7(e),k=R.findIndex(x=>x.id===n.id);return k===-1?{nextPage:null,previousPage:null}:{nextPage:$w(R,k,1),previousPage:$w(R,k,-1)}},[e,n.id]),{previousLinkProps:h,previousGroup:y,nextLinkProps:S,nextGroup:w}=Qt.useMemo(()=>({previousLinkProps:f?i({screen:{page:ao(e,f.id)}}):void 0,previousGroup:f?Mn(e,f.id):null,nextLinkProps:m?i({screen:{page:ao(e,m.id)}}):void 0,nextGroup:m?Mn(e,m.id):null}),[e,m,f]);return!m&&!f||l?null:Qt.createElement(Z.View,{style:r,desktopStyle:C.row,customBreakpointsStyles:{[Wc(p)]:C.column}},f?Qt.createElement(OB,{...h,style:[C.alignItemsCenter,g.Padding.all400,C.flex1],desktopStyle:m?g.Margin.right200:null,customBreakpointsStyles:m?{[Wc(p)]:[g.Margin.right0,g.Margin.bottom200]}:void 0},Qt.createElement(is.View,{style:[g.Margin.right400]},Qt.createElement(u.Child,{size:_.XS,style:[a.textMuted],hoverStyle:a.primary})),Qt.createElement(is.View,{style:[C.flex1,C.alignItemsEnd]},Qt.createElement(is.View,null,Qt.createElement(is.Text,{style:[a.Caption,a.textMuted]},y&&y.type==="group"?`${y.title} - `:"",s("previous"))),Qt.createElement(DB.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},f.title))):null,m?Qt.createElement(OB,{...S,style:[C.alignItemsCenter,g.Padding.all400,C.flex1],desktopStyle:f?g.Margin.left200:null,customBreakpointsStyles:f?{[Wc(p)]:[g.Margin.left0,g.Margin.top200]}:void 0},Qt.createElement(is.View,{style:[C.flex1]},Qt.createElement(is.View,null,Qt.createElement(is.Text,{style:[a.Caption,a.textMuted]},s("next"),w&&w.type==="group"?` - ${w.title}`:"")),Qt.createElement(DB.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},m.title)),Qt.createElement(is.View,{style:[g.Margin.left400]},Qt.createElement(d.Child,{size:_.XS,style:[a.textMuted],hoverStyle:a.primary}))):null)});function Z7(t){let o=[];function e(n){let r=t.pages[n];o.push(r),r.type!=="link"&&r.pages.length&&r.pages.forEach(e)}return t.rootPages.forEach(e),o}function $w(t,o,e){let n=t[o+e];if(n)return n.type!=="document"?$w(t,o+e,e):n}c();var Ko=v(P()),sp=v(H());var eW=Z.createResponsiveComponent(Es),tW=U.createInteractiveComponent(oi);function BB(t){let{subPages:o,revision:e}=t,{desktopSidebarWidth:n}=Ko.useContext(sa),r=ue(),[,i]=T(N);return ot()?null:Ko.createElement(sp.View,null,Ko.createElement(sp.Text,{style:[i.Body,i.text]},r("page_articles_section")),Ko.createElement(Z.View,{style:[g.Padding.top600,C.wrap],desktopStyle:C.row,customBreakpointsStyles:{[Wc(n)]:C.column}},o.map((s,l)=>Ko.createElement(Ko.Suspense,{fallback:Ko.createElement(LB,{page:s,revision:e,index:l,totalPageNumber:o.length}),key:s.id},Ko.createElement(oW,{page:s,revision:e,index:l,totalPageNumber:o.length})))))}function oW(t){let{page:o}=t,e=nt(o.type==="link"?o.target:void 0);return Ko.createElement(LB,{...t,contentRef:e})}function LB(t){let{page:o,revision:e,index:n,totalPageNumber:r,contentRef:i}=t,{desktopSidebarWidth:a}=Ko.useContext(sa),{getNavigationLinkProps:s}=we(),[,l]=T(N),u=o.emoji?U.createInteractiveComponent(gt(_o,{code:o.emoji})):null,d=U.createInteractiveComponent(i?.secondaryIcon||Se),p=r%2===0;return Ko.createElement(eW,{...o.type==="link"?i?jc(i):{}:s({screen:{page:ao(e,o.id)}}),style:[C.alignItemsCenter,g.Padding.all400,C.flex1,{minWidth:`calc(50% - ${g.small}px)`}],desktopStyle:[n%2===0?p?g.Margin.right200:null:g.Margin.left200,n<r-(p?2:1)?g.Margin.bottom200:null],customBreakpointsStyles:{[Wc(a)]:[g.Margin.horizontal0,n<r-1?g.Margin.bottom200:null]}},u?Ko.createElement(sp.View,{style:[g.Margin.right400]},Ko.createElement(u.Child,{size:_.XS,style:[l.textMuted],hoverStyle:l.primary})):null,Ko.createElement(tW.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},o.title),o.type==="link"&&(!i||i.secondaryIcon)?Ko.createElement(sp.View,{style:[g.Margin.left400]},Ko.createElement(d.Child,{size:_.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}c();var Sr=v(P()),_B=v(H());c();var Jw=v(P());function cp(t){let{space:o,changeRequest:e,analyticsContext:n,page:r,onClose:i}=t;return cd({screen:"space_import",...n},[o.key,e?.key]),Jw.createElement(Nn,null,Jw.createElement(MB,{target:{page:r,space:o,changeRequest:e?.key},onClose:i}))}function NB(t){let{space:o,changeRequest:e,analyticsContext:n}=t,{navigate:r}=we(),[i,a]=T(nW),s=ot(),[l,u]=Sr.useState(null),d=Sr.useCallback(()=>{r({screen:{type:"space",space:o.key,organization:o.organization},overlay:{type:"integrations",space:o.key,organization:o.organization,...o.git?.integration?{integration:o.git.integration}:{category:"gitsync"}}})},[r,o]);return s?null:Sr.createElement(Sr.Fragment,null,Sr.createElement(St,null,l==="import"?Sr.createElement(cp,{space:o,changeRequest:e,analyticsContext:n,onClose:()=>{u(null)}}):null),Sr.createElement(_B.View,{style:[g.Padding.horizontal200,g.Padding.vertical200,g.Margin.top400,a.blankslateBox,C.row,C.wrap]},Sr.createElement(W,{icon:b.Download,size:"medium",style:g.Margin.right100,iconTint:i.colors.primary.main,onPress:()=>{u("import"),re({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),Sr.createElement(W,{icon:b.Page,size:"medium",style:g.Margin.right100,iconTint:i.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:o.key,organization:o.organization}}),re({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"),Sr.createElement(W,{icon:b.GitHub,size:"medium",style:g.Margin.right100,iconTint:i.colors.primary.main,onPress:()=>{d(),re({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),Sr.createElement(W,{icon:b.User,size:"medium",style:g.Margin.right100,iconTint:i.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),re({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members")))}var nW=j.create({blankslateBox:t=>({borderRadius:_.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid})});c();var VB=v(P());function FB(t,o,e){let n=ot(),r=Gg(),i=o?.type==="space"&&o.sideSheet?.type==="comments"&&(o.sideSheet.comment||o.sideSheet.context==="post")?o.sideSheet.node:void 0;VB.useEffect(()=>{if(o&&!n&&r.current){if(i){wc(i)?.scrollIntoView();return}if(o.hash){let a=window.document.getElementById(o.hash);if(a){a.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"});return}}e?.current?.scrollTo(0,0)}},[t,o?.hash,i,e,n])}c();var cl=v(P());c();var ga=v(P()),lp=v(H());var iW=U.createInteractiveComponent(oi),aW={[Ue]:null,[je]:g.Margin.left200,[Bo]:null},jBe=ga.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=T(N),[,i]=T(HB),a=ue();return ga.createElement(lp.View,{style:[i.pageOutline]},ga.createElement(lp.View,{style:[C.row,C.alignItemsCenter,g.Padding.horizontal600,g.Margin.bottom200]},ga.createElement(lp.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(s=>ga.createElement(sW,{key:s.key,section:s,active:n===s.key})))});function sW(t){let{section:o,active:e}=t,[,n]=T(N),[,r]=T(HB),{navigateToHash:i}=we();return ga.createElement(U.TouchableOpacity,{style:[C.row,g.Padding.horizontal600,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?ga.createElement(Nr,{backgroundColor:eu[o.tag]||Q.orange.base,style:[r.sectionTag,g.Margin.right100,C.alignSelfCenter]},ga.createElement(lp.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,ga.createElement(iW.Child,{style:[n.Label,n.textMid,o.type&&aW[o.type],e&&n.primary],hoverStyle:n.primary},o.title))}var HB=j.create({pageOutline:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.main,maxWidth:Hc}),sectionItem:{paddingTop:g.xsmall,paddingBottom:g.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:_.XXS,height:_.XXS,paddingHorizontal:g.small,justifyContent:"center"}});function WB(t,o){let e=g.large,n=t.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,s=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let p=t[s];if(!p)return null;let m=wc(p.key),f=m?m.getBoundingClientRect().top-o:null;if(f===null||f>e)a=s,s=Math.floor((i+a)/2);else{if(f>=-e&&f<=e)return t[s].key;f<e&&((u===null||f>u)&&(u=f,l=s),i=s,s=Math.ceil((i+a)/2))}}return l!==-1?t[l].key:null}var UB=.9;function zB(t,o){let[e,n]=cl.useState(null),r=yh(),i=cl.useRef(0),a=cl.useRef(null),s=cl.useRef(new Map),l=t.length>1,u=cW(()=>{typeof i.current!="number"&&(i.current=o.current.getBoundingClientRect().top);let p=WB(t,i.current);p!==e&&n(p)},500),d=p=>{p.forEach(f=>{let h=f.target.getAttribute("data-key");h&&s.current.set(h,f.isIntersecting&&f.intersectionRatio>=UB)});let m=Array.from(s.current.entries()).find(([,f])=>f);m&&n(m[0])};return cl.useEffect(()=>{if(!(!o?.current||!l)){if(!r)o.current?.addEventListener("scroll",u);else{let p=t.map(m=>wc(m.key)).filter(le);a.current=new IntersectionObserver(d,{rootMargin:`-${GS}px 0px -40% 0px`,threshold:UB}),p.forEach(m=>{a.current?.observe(m)})}return()=>{o.current?.removeEventListener("scroll",u),a.current?.disconnect()}}},[o?.current,l]),e}function cW(t,o){let e=!1;return(...n)=>{e||(t.apply(this,n),e=!0,setTimeout(()=>e=!1,o))}}c();var Tm=v(P());function qw(t,o,e){let{baseRevision:n,diffMode:r,diffs:i}=Tm.useContext($b),a=Ie(),s=Tm.useMemo(()=>{if(!r)return null;let l;switch(r){case"full":let d=i.get(o);if(!d||d.type!=="modified"||d.before.page.type!=="document")return null;l=d.before.page.document;break}if(!l)return Yu(o);let u=Qr(a.store.getDocument(t,l));if(!u)throw new Error(`Original page document "${l}" not found`);return ju(u)},[r,n,t,o,i]);return Tm.useMemo(()=>r!=="full"?[e,s]:[s?Yp.create({document:Ek(s.document,e.document)}):e,s],[r,s,e])}var lW=We("sheet"),uW=Z.createResponsiveComponent(ve);function Xb(t){let o=to(),{page:e,screen:n,scrollRef:r,changeRequest:i}=t;return FB(e.id,n,r),bh(0),!o||n&&n.revision!==void 0||n?.changeRequest&&i&&["merged","archived"].includes(i.status)?ae.createElement(dW,{...t}):ae.createElement(pW,{...t,hiveBranch:o})}function dW(t){let{space:o,page:e}=t,n=Ie(),r=e.document?Qr(n.store.getDocument(o.key,e.document)):void 0,i=ae.useMemo(()=>r?ju(r):Yu(e.id),[r]),[a]=qw(o.key,e.id,i);return ae.createElement(KB,{...t,value:a,onChange:()=>{}})}function pW(t){let{hiveBranch:o,space:e,page:n,analyticsContext:r,readOnly:i,setShowToC:a,showToC:s}=t,l=sd();ge(o);let u=Y0({branch:o,pageId:n.id,presence:{userId:l.uid,userDisplayName:rk(l)},readOnly:i});ae.useEffect(()=>()=>{u.dataSync.flushBatchUpdates()},[u]),ae.useEffect(()=>{o.openPage(u.pageId)},[]);let d=vB({analyticsContext:r,hivePage:u}),p=q0(u),m=ae.useMemo(()=>[p],[p]),[f,h,y]=$0(u),[S]=qw(e.key,n.id,f),w=ae.useCallback(x=>{y(x),x.value.document!==x.initialValue.document&&d()},[y]),R=ae.useCallback(async x=>{let E=[],A=await IC({kind:"space_file",space:e.key},x);return await o.change(I=>{A.forEach(L=>{let B=pT(L,l.uid);E.push({kind:"file",file:B.id}),I.insertFile(B)})}),E.forEach((I,L)=>{lW.info(`file ${I.file} uploaded (${L+1} / ${E.length})`)}),E},[e.key,l.uid,o]),k=ae.useCallback(async(x,E)=>{let[A]=await IC({kind:"space_file",space:e.key},[E]);await o.change(I=>{I.updateFile(x.file,A)})},[e.key,o]);return ae.createElement(KB,{...t,value:S,onChange:w,selections:h,uploadFiles:R,updateFile:k,editorPlugins:m,setShowToC:a,showToC:s,hivePage:u})}function KB(t){let{space:o,revision:e,page:n,changeRequest:r,readOnly:i=!0,value:a,onChange:s,selections:l,uploadFiles:u,updateFile:d,withComments:p,analyticsContext:m,withToC:f,outline:h,toolbar:y,footer:S,withDiff:w,scrollRef:R,sideColumnStickyTop:k,editorPlugins:x,setShowToC:E,showToC:A,hivePage:I}=t,{color:L}=xi(),{mode:B}=ae.useContext(Fn),Y=ae.useRef(null),$=Ga(),G=$I(),q=ue(),J=ot(),ie=ae.useRef(),{sections:ye,sectionIDs:Pe}=ae.useMemo(()=>{let qe=_k(a.document,ie.current),Br=Dg(a.document,qe).filter(Ci=>Ci.parentType==="document"&&Ci.type!==null&&[Ue,je,Bo].includes(Ci.type));return{sectionIDs:qe,sections:Br}},[a.document,ie]);ie.current=Pe;let Je=ae.useRef(null),jt=ae.useCallback(()=>{Em(Je.current)},[Je,Em]),Oo=ye.length>1,Or=!h||J,On=zB(ye,R),Dr=ae.useCallback(qe=>{re({...m,...qe})},[m]),{desktopSidebarWidth:ir}=ae.useContext(sa),{customBreakpointsOutlineStyles:Do,customBreakpointsPageBodyStyles:qo}=ae.useMemo(()=>{let qe=B==="public-content"?1280:Vf(2,ir);return{customBreakpointsOutlineStyles:{[qe]:"hidden"},customBreakpointsPageBodyStyles:{[qe]:C.justifyCenter}}},[B,ir]),dc=jS(ir,Ry),Dn=e.conflicts?.pages[n.id],Ar=La(a.document),oe=Ar&&Object.keys(e.pages).length===1&&!i,{diffs:X}=ae.useContext($b),ne=X.has(n.id),[he,_e]=T1({isDiffViewEnabled:w,isCommentMarginVisible:p,isFullPage:f||Or}),tt=d1(),Qe=ae.useCallback(qe=>{qe?tt.highlight(qe,{highlighting:!1,postButton:!0}):tt.highlight(null)},[tt]),Ze=vy(),it=bf("AI_DRAWINGS"),ut=bf("AI_EDITOR_COMPLETIONS"),uo=ae.useMemo(()=>({withImages:{filesManager:Ze,onPaste:u||(async()=>[])},withAPIs:{filesManager:Ze},withCompletions:ut?{generateBlockCompletion:async(qe,Br)=>(await I?.completions.generateBlockCompletion({nodeKey:qe,prompt:Br}))?.completion?.richText??null}:void 0,withDrawings:{filesManager:Ze,updateDrawing:d||(async()=>{}),uploadDrawings:u||(async()=>[]),...it?{generateDiagram:async(qe,Br)=>(await I?.completions.generateDiagram({nodeKey:qe,prompt:Br}))?.mermaid??null,generateDiagramSuggestions:async qe=>(await I?.completions.generateDiagramSuggestions({nodeKey:qe}))?.suggestions??[]}:{}},withFiles:{filesManager:Ze,onPaste:u||(async()=>[])},withTables:{cards:{coverImageFilesManager:Ze},columnTypes:{files:{filesManager:Ze}}}}),[Ze,u,d,it,ut,I]),Xo=ae.useMemo(()=>({uploadFiles:u}),[u]),An=!$.overlay&&Ar&&!i;ae.useEffect(()=>{An&&Em(Je.current)},[n.id,An,Je,Em]);let Ji=zi(n),Mu=pd(n)&&!!Ji.cover,_u=Ji.coverSize,Ta=!Ji.pagination||o.showPagination===!1,pc=ae.useMemo(()=>({type:"document",editable:!i,spaceId:o.key,theme:L}),[o.key,L,i]),Pl=DI(No("listSpaceIntegrationsBlocks",{spaceId:o.key}),ae.useCallback(qe=>{let Br={};return qe.forEach(Ci=>{Br[Ci.name]=Ci.blocks}),Br},[])),ig=ae.useCallback(()=>{let{data:qe}=Ll(No("listIntegrations"));return qe?Hg(qe.items):{}},[]);return ae.createElement(ae.Fragment,null,Mu&&_u==="full"?ae.createElement(F,{style:B==="public-content"&&!f?jb.pageCoverBleedFull:null},ae.createElement(jw,{revision:e,page:n,readOnly:i,analyticsContext:m})):null,ae.createElement(up.View,{ref:Y,style:[C.flex1,C.row]},E&&ae.createElement(F,{style:jb.tocHoverArea},ae.createElement(Ua,{tooltip:A?"Hide Table of Contents":"Show Table of Contents",preferredPlacement:"top"},(qe,Br)=>ae.createElement(Ot,{label:A?"Hide Table of Contents":"Show Table of Contents",style:jb.tocButton,kind:"blank",onPress:()=>{E(Ci=>!Ci)},leadingIcon:A?b.PanelLeftClose.CSS:b.PanelLeftOpen.CSS,iconOnly:!0,ref:Br,preventFocusOnPress:!0,...qe.events}))),ae.createElement(jB,{style:[O.flex.flex1,O.flex.column]},Mu&&_u==="hero"?ae.createElement(Od,null,ae.createElement(F,{style:[O.flex.flex1,O.margin.top400]},ae.createElement(jw,{revision:e,page:n,readOnly:i,analyticsContext:m}))):null,ae.createElement(ve,{tag:"main",style:[C.flex1,C.column]},ae.createElement(Od,null,ae.createElement(Z.View,{style:[C.flex1,C.row],customBreakpointsStyles:qo},ae.createElement(up.View,{style:[C.flex1]},ae.createElement(EB,{space:o,revision:e,page:n,changeRequest:r,readOnly:i,onSubmitDescription:jt,analyticsContext:m,withDiff:w,toolbar:y})))),ae.createElement(Z.View,{desktopStyle:J?void 0:g.Padding.bottom700},Dn!==void 0?ae.createElement(he,{renderMode:"marginless-centered"},ae.createElement(RB,{space:o,page:n,revision:e,document:a.document,pageIsDiff:w,conflictType:Dn,analyticsContext:m})):null,i&&Ar&&n.pages.length?ae.createElement(he,{renderMode:"centered"},ae.createElement(BB,{subPages:n.pages.map(qe=>e.pages[qe]),revision:e})):ae.createElement(C1,{withComments:p,spaceKey:o.key,pageKey:n.id,changeRequestKey:r?.key},ae.createElement(GB,{ref:Je,value:a,selections:l,onChange:s,readOnly:i,isDiff:ne,logAnalyticsEvent:Dr,blocks:uo,onContentPaste:Xo,placeholder:"Enter your content here\u2026",sectionIDs:Pe,selectedSection:$.screen.hash||null,blockLayoutComponent:he,rightGutterComponent:_e,integrationBlocksContext:pc,integrationsBlocksSubscription:Pl,integrationBlocksRemote:G,suggestIntegrations:ig,onBlockHover:Qe,plugins:x}),oe?ae.createElement(he,{renderMode:"centered"},ae.createElement(NB,{space:o,analyticsContext:m,changeRequest:r})):null),oe?null:ae.createElement(Od,{style:O.margin.top600},ae.createElement(Z.View,{style:[C.flex1,C.row],customBreakpointsStyles:qo},ae.createElement(up.View,{style:[C.flex1]},ae.createElement(Z.View,null,Ta?null:ae.createElement(AB,{analyticsContext:m,space:o,revision:e,page:n,style:g.Margin.bottom600}),S||null))))))),Or?null:ae.createElement(uW,{tag:"aside",accessibilityLabel:q("page_outline"),testID:"page.outline",style:[Xw.pageSideColumn,g.Margin.vertical600,{top:k!==void 0?k:g.large,maxHeight:k!==void 0?`calc(100vh - ${k}px)`:`calc(100vh - ${US+g.large}px)`},B==="app"?Xw.pageSideMaxWidth:Xw.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:dc},customBreakpointsStyles:Do},Oo?ae.createElement(h,{sections:ye,activeSection:On}):null)))}var Xw=up.StyleSheet.create({pageSideMaxWidth:{maxWidth:Hc},pageSidePublicMaxWidth:{maxWidth:Hc},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:Hr+2*zt},pageBodyWithComments:{maxWidth:Hr+zt,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:zt},pageBodyMobileRightPadding:{paddingRight:tn},pageBodyPDFRightPadding:{paddingRight:tn},pageBodyDesktopLeftMargin:{marginLeft:zt},pageBodyMobileLeftMargin:{marginLeft:tn},pageBodyPDFLeftMargin:{marginLeft:tn}});c();var Qw=v(P()),YB=v(H());function Zb(t){let{withPageOutline:o=!0}=t;return Qw.createElement(Z.View,{style:[C.row,C.justifyCenter],desktopStyle:[g.Padding.top900,Qb.pageSheetLoadingDesktop,o&&Qb.pageSheetLoadingDesktopWithOutline],mobileStyle:[g.Padding.top400,Qb.pageSheetLoadingMobile]},Qw.createElement(Mo,{size:"xlarge",style:Qb.pageBody}))}var Qb=YB.StyleSheet.create({pageSheetLoadingDesktop:{paddingRight:zt,paddingLeft:zt},pageSheetLoadingDesktopWithOutline:{paddingRight:Hc+zt},pageSheetLoadingMobile:{paddingLeft:tn,paddingRight:tn},pageBody:{maxWidth:Hr+2*zt}});c();var Xn=v(P());c();var et=v(P()),ha=v(H());function $B(t){let{revision:o,analyticsContext:e,page:n,onClose:r}=t,i=et.useRef(null),[,a]=T(N),[s,l]=et.useState(n.title),[u,d]=et.useState(n.emoji),[p,m]=et.useState("slug"in n&&n.slug?n.slug:""),[f,h]=et.useState(n.type==="link"?n.target:void 0),y=to(),S=s.length>0&&(n.type==="link"?!!f:!0),w=Mn(o,n.id),R=w?ao(o,w.id):"",k=n.type!=="link"?ox(o,n.id,s):"",x=async()=>{S&&(ge(y),await y.change(I=>{I.updatePage(n.id,n.type!=="link"?{title:s,emoji:u,slug:p?xC(p):void 0}:{title:s,emoji:u,target:f})}),n.title!==s&&re({...e,type:"edit_page_title",pageKind:n.type}),n.type!=="link"&&p&&n.slug!==p&&re({...e,type:"edit_page_path",pageKind:n.type}),n.emoji!==u&&re({...e,...u?{type:"edit_pick_page_emoji",pageKind:n.type,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.type}}),r())},E=I=>{i.current?.close(),d(I)},A=et.useMemo(()=>u?gt(_o,{code:u}):null,[u]);return et.createElement(Co,{title:"Edit page",onClose:r,footer:et.createElement(ha.View,{style:[C.row,C.justifyEnd]},et.createElement(W,{kind:"secondary",onPress:r,style:g.Margin.right200},"Cancel"),et.createElement(uf,{disabled:!S,kind:"primary",onPress:x},"Save"))},et.createElement(ha.View,{style:[g.Margin.bottom600]},et.createElement(ha.View,{style:[g.Margin.bottom200]},et.createElement(nd,null,"Title")),et.createElement(ha.View,{style:[C.row,C.alignItemsEnd]},et.createElement(ha.View,{style:[g.Margin.right400]},et.createElement(Sc,{ref:i,wrapper:Ii,anchor:({ref:I,opened:L,toggle:B})=>et.createElement(W,{ref:I,active:L,onPress:B,kind:"secondary",size:"large",icon:A||b.EmojiReaction})},et.createElement(Vn,{kind:"wide"},et.createElement(py,{onPick:E,onRemove:u?()=>E(void 0):void 0})))),et.createElement(ha.View,{style:[C.flex1]},et.createElement(At,{size:"large",value:s,onChangeText:l,onSubmit:x})))),n.type==="link"?et.createElement(ha.View,null,et.createElement(_y,{label:"Reference",size:"large",value:f,onChangeValue:h})):et.createElement(ha.View,null,et.createElement(At,{label:"Slug",size:"large",prefix:`${R}/`,value:p,placeholder:k,onChangeText:m,onSubmit:x,feedback:p&&!ik(p)?{type:"warning",message:et.createElement(et.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",et.createElement(ha.Text,{style:[a.Bold]},xC(p)),".")}:void 0})))}c();var wr=v(P());c();var ya=v(P()),Zw=v(H());function JB(t){let{onClose:o,onSubmit:e}=t,[n,r]=ya.useState(""),[i,a]=ya.useState(),s=async()=>{i?e(cT({title:n,target:i})):o()};return ya.createElement(Co,{title:"Insert link",onClose:o,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:ya.createElement(Zw.View,{style:[C.row,C.justifyEnd]},ya.createElement(W,{kind:"secondary",onPress:o,style:g.Margin.right200},"Cancel"),ya.createElement(W,{kind:"primary",onPress:s,disabled:!i},"Insert"))},ya.createElement(Zw.View,{style:[g.Margin.bottom600]},ya.createElement(At,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:n,onChangeText:r})),ya.createElement(_y,{label:"To",size:"large",placeholder:"Paste in or type a url",value:i,onChangeValue:a}))}function qB(t){let{space:o,revision:e,changeRequest:n,analyticsContext:r,parent:i}=t,{navigateToPage:a}=Gc(),[s,l]=wr.useState(null),u=to(),d=wr.useCallback(y=>{ge(u);let S=u.syncChange(w=>{let R=typeof y=="function"?y(w):y;return w.insertPage(R,{into:i}),R});re({...r,type:"edit_create_page",pageKind:S.type}),S.type!=="link"&&a(u.revision,S.id,{preserveSideSheet:!0})},[u,a]),p=wr.useCallback(()=>{ge(u);let y=u.syncChange(S=>{let w=Qk({title:S.getUniquePageTitle("Group",!0)}),R=nf({title:S.getUniquePageTitle("Page",!0)});return S.insertPage(w,{into:i}),S.insertPage(R,{into:w.id}),R});re({...r,type:"edit_create_page",pageKind:"group"}),a(u.revision,y.id,{preserveSideSheet:!0})},[e,u,a]),m=wr.useMemo(()=>se({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:b.Page,title:"New document page",trigger:()=>{d(y=>nf({title:y.getUniquePageTitle("Page",!0)}))}},i?null:{key:"insertPage.group",icon:b.AddPageGroup,title:"New group",trigger:()=>{p()}},{key:"insertPage.link",icon:b.Link,title:"New link",trigger:()=>{l("link")}}].filter(le)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:b.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(le)}]}),[e,i,p,d]),f=()=>{l(null)};return[wr.createElement(wr.Fragment,null,wr.createElement(St,null,s==="link"?wr.createElement(JB,{onClose:f,onSubmit:y=>{d(y),l(null)}}):null),wr.createElement(St,null,s==="import"?wr.createElement(cp,{space:o,changeRequest:n,page:i,analyticsContext:r,onClose:f}):null)),m,d]}function ev(t,o=[]){let{space:e,revision:n,changeRequest:r,page:i,analyticsContext:a,readOnly:s}=t,[l,u]=Xn.useState(null),d=Ie(),p=to(),{getNavigationHref:m,navigateToPage:f}=Gc(),h=Xn.useContext(Fn),y=ue(),S=Qg(),[w,R,k]=qB({space:e,revision:n,changeRequest:r,parent:i.id,analyticsContext:a}),x=Object.keys(n.pages).length>1,E=Xn.useMemo(()=>se({groups:[s?null:{key:"pageEdit",commands:[i.type!=="link"?{key:"pageEdit.insert",icon:b.AddPageGroup,title:"Insert subpage",descendant:()=>R,trigger:()=>{k(I=>nf({title:I.getUniquePageTitle("Page",!0)}))}}:null,i.type!=="link"?{key:"pageEdit.import",icon:b.Download,title:"Import subpages",trigger:()=>{u("import")}}:null,i.type==="document"&&pd(i)?{key:"pageEdit.addCover",icon:b.Image,title:"Add cover",trigger:async()=>{ge(p),await p.change(I=>{I.addPageCover(i.id)}),re({...a,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:b.Type,title:i.type==="link"?"Edit":"Rename",trigger:()=>{u("edit")}},{key:"pageEdit.duplicate",icon:b.PageDuplicate,title:"Duplicate",trigger:async()=>{ge(p);let I=await d.duplicateContent({contentId:p.contentId,branchId:p.branchId},{contentId:p.contentId,branchId:p.branchId,pageId:i.id});re(zg(e,i,{...a,type:"edit_duplicate_page",pageKind:i.type})),i.type!=="link"&&f(p.revision,I.pageId)}},i.type==="document"?{key:"pageEdit.options",icon:b.Options,title:"Options",trigger:()=>{f(n,i.id,{sideSheet:{type:"page"}})}}:null,x?{key:"pageEdit.delete",icon:b.Trashcan,title:"Delete",trigger:()=>{u("delete")}}:null].filter(le)},{key:"pageRead",commands:[i.type==="document"&&(e.hasPDFExport||h.mode!=="public-content")?{key:"pageRead.export",icon:b.PDF,title:y("export_pdf"),testID:"page.exportButton",trigger:()=>{f(n,i.id,{sideSheet:{type:"share",tab:"pdf"}})}}:null,i.type!=="link"?{key:"pageRead.copyURL",icon:b.Link,title:y("copy_link"),trigger:()=>{let I=m(n,i.id),L=`${window.location.origin}${I}`;S.writeTextAndNotify(L,{title:"Page URL copied to clipboard"})}}:null,i.type!=="link"&&e.showEditOnGitProvider&&e.git?.url&&e.git?.installationProvider&&i.git?.filePath&&h.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:ZI[e.git?.installationProvider],title:y("edit_on_github",eT[e.git?.installationProvider]),trigger:()=>{window.location.assign(`${e.git?.url}/${i.git?.filePath}`)}}:null,...o].filter(le)}].filter(le)}),[s,e,n,i,x,h.mode,m,f,r,o,d,p]),A=()=>{u(null)};return[Xn.createElement(Xn.Fragment,null,w,Xn.createElement(St,null,l==="edit"?Xn.createElement($B,{revision:n,page:i,analyticsContext:a,onClose:A}):null),Xn.createElement(St,null,l==="delete"?Xn.createElement(qb,{space:e,page:i,revision:n,analyticsContext:a,onClose:A}):null),Xn.createElement(St,null,l==="import"?Xn.createElement(cp,{space:e,changeRequest:r,page:i.id,analyticsContext:a,onClose:A}):null)),E]}var fW=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function XB(t,o){let e=typeof t=="number"?t:t?.value,n=typeof t=="number"?"px":t?.unit;return`${e||100}${n||o}`}function QB(t,o){return typeof t=="number"?`${t}px`:t?.unit==="px"?`${t.value}${t.unit}`:o}async function mW(t,o,e,n){let r=o.nodes.toArray().map(s=>{let{ref:l,refDark:u}=s.data.toFrozenObject();return n==="dark"&&u?u:l}),i={url:"",broken:!0},a=r.map(s=>qO(t,s,e).then(({uri:l})=>typeof l!="string"||l===""?i:{url:l,broken:!1}).catch(()=>i));return Promise.all(a)}function ZB(t){let{node:o,parent:e,isSelected:n,attributes:r,editor:i}=t,{readOnly:a}=i,{ref:s,refDark:l,height:u,width:d}=o.data.toFrozenObject(),p=db(i,o.key),{logAnalyticsEvent:m}=Ce.useContext(ce),f=Ny(s,l),h=Ie(),y=dt(),[,S]=T(eR),w=Td(),R=U.useInteractiveState(),k=e.nodes.size>1,x=Sn({disabled:!k,...Gn({id:o.key,type:"block",blockType:o.type,previewLabel:"Move image"})}),E=U.useInteractiveState(),A=Is(),[I,L]=Ce.useState(null),B=Zo.getImageAltText(o),Y=XB(d,"%"),$=XB(u,"%"),G=QB(u,"auto"),q=QB(d,"100%"),J=()=>{L("alt")},ie=()=>{L(null)},ye=async()=>{if(!f||!f.uri)return;let Je=await mW(h,e,y,A.color),jt=e.getChildIndex(o.key);w.open(Je,jt)},Pe=Je=>{if(!f)return;m({type:"edit_page_document_edit_block_property",blockType:Zi,blockProperty:"size",fromValue:void 0,toValue:Je.label});let jt=bW(f,Je.size);i.change(Oo=>{u&&Oo.removeDataPathByKey(o.key,["height"]),jt?Oo.insertDataByKey(o.key,["width"],jt):Oo.removeDataPathByKey(o.key,["width"])})};return Ce.createElement(Ce.Fragment,null,Ce.createElement(St,null,I==="alt"?Ce.createElement(Kb,{...t,onClose:ie}):null),Ce.createElement(as.View,{style:[C.alignItemsCenter,C.flex1]},Ce.createElement(as.View,{ref:x.setNodeRef,style:[S.imageWrapper,{maxWidth:Y,maxHeight:$}],...R.events,...r},Ce.createElement(Xt,{...t},f?Ce.createElement(U.TouchableOpacity,{onPress:ye,style:C.alignItemsCenter},Ce.createElement(en,{width:q,height:G,source:f,accessibilityLabel:B,loading:p?"priority":"lazy",style:[S.image,x.isDragging&&mt.translucent]})):Ce.createElement(gW,{accessibilityLabel:B})),a?null:Ce.createElement(Ce.Fragment,null,(n||R.hovered)&&!x.isDragging?Ce.createElement(hW,{...t,openAltTextModal:J,setSize:Pe}):null,Ce.createElement(Ha,{theme:{color:"dark"}},k?Ce.createElement(as.View,{ref:x.setActivatorNodeRef,style:[S.imageDragHandle,{display:(R.hovered||E.hovered)&&!x.isDragging?"flex":"none"}],...E.events,...x.listeners},Ce.createElement(b.GrabberVertical,{size:_.ICON_S,style:[S.imageDragHandleIcon]})):null)))),Ce.createElement(ol,{...t,isSelected:t.isSelected||R.hovered}))}function gW(t){let{style:o,...e}=t,[,n]=T(N),[,r]=T(eR);return Ce.createElement(as.View,{style:[C.alignItemsCenter,C.justifyCenter,r.brokenImage,g.Padding.all600,o],...e},Ce.createElement(as.View,null,Ce.createElement(b.CloudOff,{size:_.ICON_L,style:[n.textMuted]})),Ce.createElement(as.View,{style:[g.Margin.top400]},Ce.createElement(as.Text,{style:[n.Caption,n.textMuted]},"Could not load image")))}function hW(t){let{editor:o,node:e,openAltTextModal:n,setSize:r}=t,i=Is(),[,a]=T(eR),[s,l]=Ce.useState(!1),u=qr(WI),d=e.data.toFrozenObject(),p=()=>{o.change(m=>{e&&ke.isTextRange(m.value.selection)&&!m.value.selection.hasEdgeIn(e)&&m.collapseToStartOf(e),m.focus()}),l(!0)};return Ce.createElement(Ce.Fragment,null,Ce.createElement(as.View,{style:[a.imageToolbar,d.refDark?a.imageToolbarWith2Buttons:null,C.row,s?a.imageToolbarOpen:null]},s?Ce.createElement(Ce.Fragment,null,Ce.createElement(yW,{onPress:r,...t}),Ce.createElement(W,{title:"ALT text",size:"small",icon:b.AltText,style:[g.Margin.right200],onPress:n}),Ce.createElement(Gb,{editor:o,node:e,style:O.margin.right200}),Ce.createElement(W,{size:"small",icon:b.X,onPress:()=>l(!1)})):Ce.createElement(Ce.Fragment,null,d.refDark?Ce.createElement(W,{size:"small",icon:i.color==="light"?b.ThemeDark:b.ThemeLight,title:`Image has a ${i.color==="light"?"dark":"light"} mode alternative.
Toggle theme to see it.`,onPress:()=>{u(i.color==="light"?"dark":"light")},style:[g.Margin.right200]}):null,Ce.createElement(W,{size:"small",icon:b.MoreVertical,onPress:p}))))}function yW(t){let{editor:o,node:e,onPress:n}=t,r=Ce.useRef(null),i=fW.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=fe(r),s=()=>{a.open(se({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(le)})),o.change(l=>{e&&ke.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(e)&&l.collapseToStartOf(e),l.focus()})};return Ce.createElement(Ce.Fragment,null,Ce.createElement(W,{ref:r,active:a.opened,size:"small",rightIcon:b.ChevronDown,onPress:s},"Size"))}function bW(t,o){let e=t.width||on.PAGE_BODY_MAX_WIDTH;if(o===100)return;let n=Math.min(e,on.PAGE_BODY_MAX_WIDTH);return Math.round(n*(o/100))}var eR=j.create({imageWrapper:{position:"relative",borderRadius:_.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:_.RADIUS_M,maxWidth:"100%"},imageToolbar:t=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:_.RADIUS_M,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"solid",backgroundColor:t.colors.background.mid,overflow:"hidden",width:42,transition:"width 50ms ease-in-out"}),imageToolbarWith2Buttons:{width:76},imageToolbarOpen:{width:188},imageDragHandle:{position:"absolute",top:g.small,left:g.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:Q.BLACK,textShadowRadius:3,color:Q.WHITE},brokenImage:t=>({borderRadius:_.RADIUS_M,backgroundColor:t.colors.background.muted})});c();var Ve=v(P());c();var tR=JSON.parse('{"tooltip":"tooltip_8qsEs","brokenImage":"brokenImage_F5FWc"}');function eL(t){let{editor:o,node:e,parent:n,ancestors:r}=t,i=db(o,e.key),a=Ve.useRef(null),s=Cr(n.object==="block"?n:null),l=e.data.get("size","original"),u=r.some(p=>p.object==="inline"&&p.type===Ln),d=p=>Ve.createElement(jd,{...p,...t,style:O.textAlign.verticalAlignMiddle,touchableStlye:[l==="line"?C.alignItemsCenter:null]},Ve.createElement(Ve.Suspense,{fallback:Ve.createElement(Se,{size:"small"})},Ve.createElement(vW,{node:e,parentLineHeight:s,size:l,ref:a,withPriorityLoading:i})));return o.readOnly?d(u?{}:{onPress:()=>{a.current?.openInGallery()}}):Ve.createElement(SW,{...t,anchor:d})}var vW=Ve.forwardRef(function(o,e){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=o,{ref:s,refDark:l}=n.data.toFrozenObject(),u=Zo.getImageAltText(n),d=Ny(s,l),p=Td();Ve.useImperativeHandle(e,()=>({openInGallery:()=>{d?.uri&&p.open([{url:d.uri}])}}),[d?.uri]);let m={};i==="original"?m={maxWidth:300}:m={maxHeight:r,height:r,width:"auto"};let f=Ve.createElement(CW,{accessibilityLabel:u});return d?Ve.createElement(en,{accessibilityLabel:u,source:d,style:m,errorFallback:f,loading:a?"priority":"lazy"}):f});function CW(t){let{accessibilityLabel:o}=t,[,e]=T(N);return Ve.createElement(F,{style:tR.brokenImage,"aria-label":o},Ve.createElement(b.CloudOff,{size:_.ICON_M,style:e.textMuted}))}function SW(t){let{node:o,anchor:e,isFocused:n,editor:r}=t,{logAnalyticsEvent:i}=Ve.useContext(ce),a=Ve.useRef(null),[s,l]=Ve.useState(null),u=n&&r.value.selection.isCollapsed,[d,p]=Ve.useState(!1);Ve.useEffect(()=>{if(u){p(!0);return}let y=setTimeout(()=>{p(!1)},300);return()=>{clearTimeout(y)}},[u]);let m=()=>{r.change(y=>{y.collapseToStartOf(o).focus()})},f=y=>{r.change(S=>{S.insertDataByKey(o.key,["size"],y),S.collapseToStartOf(o).focus()})},h=()=>{i({type:"edit_page_document_edit_block_type",fromType:bc,toType:Zi}),r.change(y=>{Zo.replaceInlineImageWithBlock(y,o)})};return Qu(()=>{a.current?.updatePosition()},[o.data]),Ve.createElement(Ve.Fragment,null,Ve.createElement(St,null,s==="alt"?Ve.createElement(Kb,{...t,onClose:()=>l(null)}):null),Ve.createElement(Wa,{ref:a,opened:u||d,anchor:({ref:y})=>e({ref:y,onPress:m})},Ve.createElement(Vn,{kind:"tooltip"},Ve.createElement(F,{style:tR.tooltip},Ve.createElement(W,{size:"small",title:"Inline size",onPress:()=>f("line"),icon:b.ImageSizeSmall}),Ve.createElement(W,{size:"small",title:"Original size",onPress:()=>f("original"),icon:b.ImageSizeLarge}),Ve.createElement(W,{size:"small",title:"Convert to block",onPress:h,icon:b.ImageSizeBlock}),Ve.createElement(Gb,{editor:r,node:o}),Ve.createElement(W,{size:"small",title:"ALT text",onPress:()=>l("alt"),icon:b.AltText})))))}c();var tL=v(P());function oL(t){let{children:o,attributes:e}=t;return tL.createElement(Ht,{tag:"strong",style:yo.Bold,...e},o)}c();var nL=v(P());function rL(t){let{children:o,attributes:e}=t;return nL.createElement(Ht,{tag:"em",style:yo.Italic,...e},o)}c();var iL=v(P());function aL(t){let{children:o,attributes:e}=t;return iL.createElement(Ht,{tag:"span",style:yo.Strikethrough,...e},o)}c();var sL=v(P());function cL(t){let{children:o,attributes:e}=t,[,n]=T(wW);return oI(),sL.createElement(Ht,{tag:"code",style:[n.markCode],...e},o)}var wW=j.create({markCode:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.medium,paddingLeft:g.xsmall,paddingRight:g.xsmall,fontFamily:jg})});c();var lL=v(P());function uL(t){let{children:o,mark:e,attributes:n}=t,r=e.data.toObject(),i=xi(),a=r.background&&r.background!=="default",s=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:Q.lightModeText.base}:null;s&&(l=ly.find(d=>d.key===r.text)||null);let u=a?uy.find(d=>d.key===r.background):null;return lL.createElement(Ht,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},o)}c();var ss=v(P()),nv=v(H());c();var Go=v(P()),Om=v(H());c();var dL=JSON.parse('{"exitHint":"exitHint_xASL-","show":"show_HIlHf"}');function tv(t){let{node:o,anchor:e,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=t,{formula:s}=o.data.toFrozenObject(),l=Go.useRef(null),[u,d]=Go.useState(!1),[p,m]=Go.useState(!1),[f,h]=Xu(s,[s]),[,y]=T(N),S=()=>{d(!1),m(!1)},w=()=>{u||(a.change(E=>{Yt(E.value.selection)&&E.collapseToStartOf(o).focus()}),d(!0))};Go.useEffect(()=>{u&&l.current?.focus()},[u]),Go.useEffect(()=>{r&&w()},[r]);let R=E=>{h(E),m(!1)},k=()=>{S(),a.change(E=>{E.blur(),E.insertDataByKey(o.key,["formula"],o.object==="inline"?f.replace(/\n/g," "):f)})},x=()=>{S(),a.change(E=>{if(E.blur(),E.insertDataByKey(o.key,["formula"],o.object==="inline"?f.replace(/\n/g," "):f),o.object==="block")Ct(E);else{let A=o.getFirstText()?.key;if(A){let I=E.value.document.getNextText(A);I&&E.collapseToStartOf(I)}}E.focus()})};return a.readOnly?e({formula:s}):Go.createElement(lE,{opened:u,onClose:k,wrapper:Yx,anchor:({ref:E})=>e({ref:E,isFocused:n&&i||u,onPress:w,formula:f,onError:()=>{m(!0)}})},Go.createElement(Vn,{kind:"tooltip"},Go.createElement(Om.View,null,Go.createElement(At,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:f,onChangeText:R,placeholder:"Enter your TeX formula",onSubmit:x,kind:"inverted",textStyle:p?[y.danger]:void 0}),Go.createElement(RW,null),p?Go.createElement(Ua,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(E,A)=>Go.createElement(Om.View,{ref:A,style:PW.blockErrorBadge,...E.events},Go.createElement(vo,{icon:b.ExclamationCircle,kind:"danger"}))):null)))}function RW(){return Go.createElement(pe,{style:[dL.exitHint,de.uiAction,de.colorMuted,O.text.notSelectable],contentEditable:!1},"Exit with"," ",Go.createElement(yn,{inverted:!0,style:[O.flex.inline],shortcut:ze.EDITOR_EXIT_BLOCK}))}var PW=Om.StyleSheet.create({blockErrorBadge:{position:"absolute",bottom:g.small,left:g.small}});c();var ov=rh("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent-OAC5XRUC.min.js"));function pL(t){return ss.createElement(tv,{anchor:({formula:o,onError:e,...n})=>ss.createElement(xe,{...t},ss.createElement(Xt,{...t,...n},ss.createElement(ss.Suspense,{fallback:ss.createElement(ci,null)},ss.createElement(nv.ScrollView,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:kW.container},ss.createElement(ov,{formula:o,inline:!1,onError:e}))))),...t})}var kW=nv.StyleSheet.create({container:{marginLeft:"auto",marginRight:"auto"}});c();var ll=v(P());function fL(t){return ll.createElement(tv,{anchor:({formula:o,onError:e,...n})=>ll.createElement(jd,{...t,...n},ll.createElement(ll.Suspense,{fallback:ll.createElement(Se,{size:"small"})},ll.createElement(ov,{formula:o,inline:!0,onError:e}))),...t})}c();var Zt=v(P());c();var mL=v(P()),rv=mL.createContext(new Map);c();c();var rR=v(P());c();c();var oR=v(P()),gL=v(H());var hL={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:b.ColumnTypeCheckbox,ValueComponent:xW,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o&&e(!1);break;case"enter":e(!o);break}}};function xW(t){let{value:o,readOnly:e,onValueChange:n,style:r}=t;return oR.default.createElement(gL.View,{style:[r,C.flex1,C.row,C.alignItemsCenter]},oR.default.createElement(Pc,{value:o,onValueChange:n,readOnly:e}))}c();var pi=v(P()),Dm=v(H());var yL={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:b.PageLink,ValueComponent:IW};function IW(t){let{value:o,selected:e,readOnly:n,displayMode:r,style:i,onValueChange:a}=t,s=pi.default.useRef(null),l=fe(s),u=dt(),d=Ie(),p=()=>{l.open(Yn(a,u,d,{accept:["page","file","space","collection","anchor","url"]}))};return pi.default.createElement(Dm.View,{ref:s,style:[C.row,C.wrap,C.flex1,C.alignItemsCenter,i]},pi.default.createElement(pi.default.Suspense,{fallback:pi.default.createElement(Se,null)},o?pi.default.createElement(Dm.View,{style:[C.flex1,C.row]},pi.default.createElement(TW,{contentRef:o})):null,(r==="block"||e)&&!n?pi.default.createElement(W,{icon:b.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:p},r==="block"?"Select target":null):null))}function TW(t){let{contentRef:o}=t,[e]=pw([o]),[,n]=T(N);return e?pi.default.createElement(Dm.View,{style:[C.row,C.alignItemsCenter]},e.icon?pi.default.createElement(Dm.View,{style:[g.Margin.right200]},pi.default.createElement(e.icon,{size:_.ICON_M,style:[n.textMuted]})):null,pi.default.createElement(za,{url:e.href,onPress:r=>{r.preventDefault(),e.open()},style:[n.Body]},e.title)):null}c();var Rr=v(P()),ba=v(H());var bL={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:b.ColumnTypeFile,ValueComponent:EW};function EW(t){let{value:o,selected:e,readOnly:n,displayMode:r,onValueChange:i,style:a}=t,{blocks:{withTables:s}}=Rr.default.useContext(ce),l=s?async()=>{let d=await s.columnTypes.files.filesManager.prompt({title:"Select file"});i([...o,...d.filter(p=>p.kind==="file").map(p=>p.file)])}:null,u=s?d=>{let p=[...o];p.splice(d,1),i(p)}:null;return Rr.default.createElement(ba.View,{style:[C.row,C.wrap,C.flex1,o.length>0?DW.filesList:null,a]},Rr.default.createElement(Rr.default.Suspense,{fallback:Rr.default.createElement(Se,null)},o.map((d,p)=>Rr.default.createElement(OW,{key:d,fileId:d,editable:n||!u?void 0:{onRemove:()=>u(p)}}))),(r==="block"||e)&&!n&&l?Rr.default.createElement(W,{icon:b.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function OW(t){let{fileId:o,editable:e}=t,[,n]=T(N),r=U.useInteractiveState(),i=Rr.default.useRef(null),a=fe(i),s=nt({kind:"file",file:o}),l=s.resolution?.extra?.file;return Rr.default.createElement(ba.TouchableOpacity,{onPress:()=>{e?a.open(se({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:b.Trashcan,trigger:()=>{e.onRemove()}},l?{key:"download",title:"Download",icon:b.Download,trigger:()=>{Ds(s.href)}}:null].filter(le)}]})):s.href&&Ds(s.href)},...r.events},Rr.default.createElement(ba.View,{ref:i,style:[C.row,C.alignItemsCenter,g.Margin.right200]},Rr.default.createElement(ba.View,{style:[g.Margin.right200]},Rr.default.createElement(Vd,{file:l,size:_.BUTTON_S})),Rr.default.createElement(ba.View,null,Rr.default.createElement(ba.Text,{style:[n.Body,r.active||a.opened?n.primary:n.text]},l?.name||"Deleted"))))}var DW=ba.StyleSheet.create({filesList:{gap:g.small}});c();var nR=v(P()),dp=v(H());var vL={title:"Number",description:"",IconComponent:b.Numbers,ValueComponent:AW,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(null);break;case"enter":typeof o!="number"&&e(0);break}}};function AW(t){let{readOnly:o,value:e,onValueChange:n,onSelectionChange:r,style:i}=t,[,a]=T(N),s=[a.Body,BW.numberInput,a.textMid,i],l=()=>{r(!0)};return o?nR.default.createElement(dp.Text,{style:s},typeof e=="number"?String(e):""):nR.default.createElement(dp.TextInput,{style:s,value:typeof e=="number"?String(e):"",onChangeText:u=>n(Number(u)),onFocus:l})}var BW=dp.StyleSheet.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});c();var gu=v(P()),Am=v(H());var LW=8,MW={info:Q.primary.light,merge:Q.violet.light,upgrade:Q.fuchsia.light,danger:Q.scarlet.light},CL={title:"Rating",description:"",IconComponent:b.ColumnTypeRating,ValueComponent:NW,commands:_W,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(0);break;case"enter":break}}};function _W(t){let{definition:o,setDefinition:e}=t;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:b.MaximumValue,descendant:()=>se({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:o.max===n+1,trigger:()=>{e({...o,max:n+1})}}))}]})}]}]}function NW(t){let{value:o,definition:e,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=t,[s,l]=T(FW),[u,d]=gu.default.useState(0),p=[...Array(e.max+1).keys()].slice(1),m=S=>{r(S===o?null:S)},f=S=>{i||d(S)},h=l.circleBase,y=n?{backgroundColor:MW[n]}:l.circleActiveDefault;return gu.default.createElement(Am.View,{style:[C.row,C.flex1,C.alignItemsCenter,a]},p.map(S=>gu.default.createElement(U.WithInteractiveState,{key:String(S),onHoverIn:()=>f(S),onHoverOut:()=>f(0)},({events:w})=>gu.default.createElement(Am.TouchableOpacity,{...w,onPress:()=>m(S)},gu.default.createElement(VW,{size:LW+2*(S-1),style:[u===0&&o&&o>=S||u>=S?y:h,{marginRight:g.xsmall}]})))))}function VW({size:t,style:o}){return gu.default.createElement(Am.View,{style:[{width:t,height:t,borderRadius:t/2},o]})}var FW=j.create({circleBase:t=>({backgroundColor:t.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:Q.primary.light})});c();var SL=v(XN()),Qn=v(P()),cs=v(H());var wL={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:b.ColumnTypeSelect,ValueComponent:UW,commands:HW,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o.length>0&&e([]);break}}};function HW(t){let{definition:o,setDefinition:e}=t;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:b.OptionAdd,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}},{key:"select.options",title:"Manage options",icon:b.OptionManage,descendant:()=>RL(t)}]}]}function RL(t){let{definition:o,setDefinition:e,openModal:n}=t,{options:r}=o,i=r.map((a,s)=>{let l=u=>{let d=[...r];d[s]={...a,label:u},e({...o,options:d})};return{key:a.value,title:a.label,descendant:()=>se({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:b.Edit,trigger:()=>{n(u=>Qn.default.createElement(WW,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:b.Trashcan,trigger:()=>{let u=[...r];u.splice(s,1),e({...o,options:u})}}]}]})}});return se({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let s=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===s)?[{key:"add_new_option",title:s,icon:b.Plus,trigger:()=>{let u={value:hg(),label:s,color:"blue"},[,d]=e({...o,options:[...r,u]});return RL(d)}},...i]:i}}]})}function WW(t){let{option:o,definition:e,onSave:n,onClose:r}=t,{options:i}=e,a=[...i].filter(f=>f.label!==o.label),[s,l]=Qn.default.useState(o),u=f=>f.length===0?"The label can not be empty":a.filter(y=>y.label===f).length>0?"Another option already exists with this label":null,d=()=>{n(s.label),r()},p=f=>{l({...s,label:f})},m=u(s.label);return Qn.default.createElement(Co,{title:"Edit option",footer:Qn.default.createElement(cs.View,{style:[C.row,C.justifyEnd]},Qn.default.createElement(W,{kind:"secondary",onPress:r,style:g.Margin.right200},"Cancel"),Qn.default.createElement(W,{kind:"primary",onPress:d,disabled:!!m},"Save")),onClose:r},Qn.default.createElement(cs.View,null,Qn.default.createElement(At,{autoFocus:!0,value:s.label,label:"Label",onChangeText:p,feedback:m?{type:"danger",message:m}:void 0})))}function UW(t){let{value:o,selected:e,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:s,style:l}=t,u=Qn.default.useRef(null),d=fe(u),[,p]=T(N),m=()=>{d.open(zW(n,o,r))},f=Qn.default.createElement(cs.View,{style:[C.row,C.wrap,C.flex1,o.length>0?KW.optionsList:null]},o.map(h=>{let y=n.options.find(S=>S.value===h);return y?Qn.default.createElement(mI,{key:y.value,deletable:!a&&n.multiple,kind:i??"info",onPress:()=>n.multiple?r(o.filter(S=>S!==y.value)):null,size:"small"},y.label):null}));return a||s==="inline"&&!e?f:Qn.default.createElement(cs.TouchableOpacity,{ref:u,onPress:m,style:[l]},Qn.default.createElement(cs.View,{style:[C.row,C.flex1,C.alignItemsCenter]},f,s==="inline"?Qn.default.createElement(cs.View,{style:[g.Margin.left200]},Qn.default.createElement(b.ChevronDown,{size:_.ICON_XS,style:p.textMuted})):null))}function zW(t,o,e){return se({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:t.options.map(n=>{let r=o.includes(n.value);return{key:n.value,title:n.label,...t.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{e(r?o.filter(i=>i!==n.value):(0,SL.default)(t.multiple?[...o,n.value]:[n.value]))}}})}]})}var KW=cs.StyleSheet.create({optionsList:{gap:g.small}});c();var iv=v(P()),av=v(H());var PL={title:"Text",description:"",IconComponent:b.ColumnTypeText,ValueComponent:jW,commands:GW};function GW(t){let{definition:o}=t,{textAlignment:e}=o,n={left:b.AlignTextLeft,center:b.AlignTextCenter,right:b.AlignTextRight};return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>kL(t),icon:n[e]}]}]}function kL(t){let{definition:o,setDefinition:e}=t;return se({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:b.AlignTextLeft},{label:"Center",value:"center",icon:b.AlignTextCenter},{label:"Right",value:"right",icon:b.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:o.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=e({...o,textAlignment:n.value});return kL(r)}}))}]})}function jW(t){let{value:o,definition:e,style:n,readOnly:r}=t;return o==null?null:iv.default.createElement(av.View,{style:[C.flex1,!r&&YW.editableFragment,n]},iv.default.createElement(Uc.Provider,{value:e.textAlignment},iv.default.createElement(fr,{fragment:o})))}var YW=av.StyleSheet.create({editableFragment:{cursor:"text"}});c();var Zn=v(P()),Ki=v(H());var xL={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:b.Users,ValueComponent:JW,commands:$W};function $W(t){let{definition:o,setDefinition:e}=t;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:b.Team,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}}]}]}function JW(t){let{value:o,selected:e,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:s}=t,l=Zn.default.useRef(null),u=fe(l),d=f=>{let h=[...o];h.splice(f,1),a(h)},p=()=>{u.open(se({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:f=>_l.read({query:f.query.text,types:["users"]}).map(y=>y.index!=="users"?null:{key:y.object.objectID,title:y.object.displayName,icon:({size:S})=>Zn.default.createElement(Nl,{user:y.object,size:S}),trigger:()=>{a([...o,y.object.objectID])}}).filter(le)}]}))},m=i.multiple?"Add users":"Replace";return Zn.default.createElement(Ki.View,{style:[C.flex1,C.row,s]},Zn.default.createElement(Ki.View,{style:[C.row,C.wrap,C.flex1,o.length>0?XW.filesList:null]},Zn.default.createElement(Zn.default.Suspense,{fallback:null},o.map((f,h)=>Zn.default.createElement(qW,{key:f,userId:f,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||e)&&!n?Zn.default.createElement(W,{ref:l,icon:i.multiple?b.Plus:b.ChevronDown,title:r==="block"?void 0:m,kind:"secondary",size:"small",onPress:p,active:u.opened},r==="block"?m:null):null)}function qW(t){let{userId:o,readOnly:e,onRemove:n}=t,[,r]=T(N),i=U.useInteractiveState(),a=Zn.default.useRef(null),s=fe(a),[l]=Ic([nk(o)]);return Zn.default.createElement(Ki.TouchableOpacity,{onPress:()=>{s.open(se({position:{width:"small"},groups:[{key:"user",commands:[e?null:{key:"remove",title:"Remove",icon:b.Trashcan,trigger:()=>{n()}}].filter(le)}]}))},...i.events},Zn.default.createElement(Ki.View,{ref:a,style:[C.row,C.alignItemsCenter,g.Margin.right200]},l?Zn.default.createElement(Ki.View,{style:[g.Margin.right200]},Zn.default.createElement(Nl,{user:l,size:_.BUTTON_S})):null,Zn.default.createElement(Ki.View,null,Zn.default.createElement(Ki.Text,{style:[r.Body,i.active||s.opened?r.primary:r.text]},l?.displayName||"Deleted"))))}var XW=Ki.StyleSheet.create({filesList:{gap:g.small}});var fi={checkbox:hL,number:vL,text:PL,files:bL,select:wL,users:xL,rating:CL,"content-ref":yL},IL=["text","number","checkbox","select","users","files","content-ref","rating"];function ls(t){return t.title||fi[t.type].title}function pp(t){let{record:o,definition:e,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:s,definitionColorKind:l,style:u}=t,{ValueComponent:d}=fi[t.definition.type],p=h=>{i.change(y=>{te.setRecordValue(y,a,o.key,e.id,h)})},m=h=>{h&&i.change(y=>{te.moveTableSelection(y,a,{recordId:o.key,definitionId:e.id})})},f=rR.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:s,value:o.value.values[e.id],definitionColorKind:l,definition:e,onValueChange:p,onSelectionChange:m,style:u});return e.type==="text"?f:rR.createElement(ve,{style:C.flex1,onClick:h=>{h.stopPropagation(),m(!0)}},f)}c();function Zs(t,o={}){return se({search:"Select column type",groups:[{key:"types",commands:IL.map(e=>{let n=fi[e];return{key:e,icon:n.IconComponent,title:n.title,...o.selectedType?{type:1,selected:o.selectedType===e}:{selected:void 0},trigger:()=>{t(e)}}})}]})}c();var ul=v(P()),hu=v(H());function TL(t){return t.readOnly?ul.createElement(QW,{...t}):ul.createElement(ZW,{...t})}function QW(t){let{definition:o,style:e}=t,[,n]=T(N);return ul.createElement(hu.Text,{style:[C.row,o.type==="text"?sv[o.textAlignment]:null,n.Body,n.textMid,n.Medium,sv.columnHeader,e],selectable:!0},ls(o))}function ZW(t){let{editor:o,nodeKey:e,definition:n,style:r}=t,[i,a]=T(N),s=m=>{o.change(f=>{te.renameColumn(f,e,n.id,m)})},l=n.title||"",u=ls(n),d=ul.useMemo(()=>hu.StyleSheet.flatten([r,a.Body,a.textMid,a.Medium,sv.columnHeader,n.type==="text"?sv[n.textAlignment]:null]),[r,n]),p=ul.useMemo(()=>ch(l||u||"",d),[l,u,d]);return ul.createElement(ni,{component:hu.TextInput,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:s,style:[d,p===void 0?{}:{width:p,maxWidth:"100%"}]})}var sv=hu.StyleSheet.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});c();var OL=v(P()),EL=["info","merge","upgrade","danger"];function eU(t,o){let{definitionColorsKindsMap:e}=o.reduce((n,r)=>{let i=t[r];if(i.type==="rating"||i.type==="select"){let a=EL[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%EL.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return e}function DL(t,o){return OL.default.useMemo(()=>eU(t,o),[t])}c();var gi=v(P());c();c();c();var iR=v(P());function AL(t){return iR.default.createElement(iR.default.Fragment,null)}c();c();function fp(t,o,e={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=e;return se({search:r,groups:[{key:"columns",commands:Object.entries(t).filter(([s,l])=>a(l)).map(([s,l])=>{let u=fi[l.type],d=n.includes(s);return{key:s,title:ls(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>o(i?d?n.filter(p=>p!==s):[...n,s]:d?[]:[s])}})}]})}c();function xn(t,o,e,n){let{focus:r="end",definition:i,record:a}=n;if(!e.selection.definitionId)return!1;let s=e.records.findIndex(p=>p.key===e.selection.recordId),l=e.view.columns.indexOf(e.selection.definitionId),u=e.records["relative"in a?s+a.relative:a.absolute],d=e.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(te.moveTableSelection(t,o,{recordId:u.key,definitionId:d},r),!0)}function yu(t,o,e,n){let r=e.records.findIndex(a=>a.key===e.selection.recordId),i=e.records["relative"in n?r+n.relative:n.absolute];return i?(te.moveTableSelection(t,o,{recordId:i.key,definitionId:void 0}),!0):!1}var BL=(t,o,e,n)=>{if(!e.selection.definitionId&&e.selection.recordId)return oU(t,o,e,n);if(e.selection.definitionId&&e.selection.recordId)return tU(t,o,e,n)},tU=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"move-up":case"move-down":{xn(n,o,e,{definition:{relative:t==="move-up"?-1:1},record:{relative:0},focus:t==="move-up"?"end":"start"})||xn(n,o,e,{definition:{absolute:t==="move-up"?e.view.columns.length-1:0},record:{relative:t==="move-up"?-r:r},focus:t==="move-up"?"end":"start"})||(t==="move-up"?Gu(n,o):Ct(n,o));break}case"move-left":case"move-right":{xn(n,o,e,{definition:{absolute:0},record:{relative:t==="move-left"?-1:1},focus:t==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!xn(n,o,e,{definition:{relative:1},record:{relative:0},focus:"end"})&&!xn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=te.insertEmptyRecord(n,o.key);te.moveTableSelection(n,o,{recordId:i,definitionId:e.view.columns[0]},"start")}break}case"backspace":{xn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"})||te.moveTableSelection(n,o,{recordId:e.selection.recordId,definitionId:void 0});break}}},oU=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"tab":{yu(n,o,e,{relative:1});break}case"shift+tab":{yu(n,o,e,{relative:-1});break}case"move-left":case"move-right":{yu(n,o,e,{relative:t==="move-left"?-1:1})||(t==="move-left"?Gu(n,o):Ct(n,o));break}case"move-up":case"move-down":{yu(n,o,e,{relative:t==="move-up"?-r:r})||(t==="move-up"?Gu(n,o):Ct(n,o));break}case"backspace":{yu(n,o,e,{relative:-1})||yu(n,o,e,{relative:1}),te.removeRecord(n,o.key,e.selection.recordId);break}case"enter":{xn(n,o,e,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};c();var ec=v(P());c();var cv=v(P());function LL(t){let{editor:o,nodeKey:e,defaultTextDefinitionId:n}=t,[,r]=T(nU),[,i]=T(N),a=()=>{o.change(s=>{let l=te.insertEmptyRecord(s,e);te.moveTableSelection(s,e,{recordId:l,definitionId:n})})};return cv.createElement(U.TouchableOpacity,{style:[C.flex1,r.cardPlaceholder,C.row,C.alignItemsCenter,C.justifyCenter,g.Padding.all400],activeStyle:r.cardPlaceholderActive,onPress:a},cv.createElement(U.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},cv.createElement(b.Plus,{size:_.ICON_M,style:[g.Margin.right200]}),"New card"))}var nU=j.create({cardPlaceholder:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:t=>({borderColor:t.colors.primary.main})});c();var sn=v(P()),pl=v(H());c();var lv=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz"}');c();var dl=v(P()),ML=v(H());function _L(t){let{nodeKey:o,editor:e,record:n,view:r,visible:i,onExpand:a,draggableState:s,filesManager:l}=t,{setNodeRef:u,isDragging:d,listeners:p}=s,m=dl.useRef(null),f=ki(m,u),h=fe(m),y=dt(),S=Ie(),w=r.coverDefinition?n.value.values[r.coverDefinition]?.length>0:!1,R=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,k=async()=>{let[A]=await l.prompt({title:"Select file",accept:"images",acceptURL:!1});!A||A.kind!=="file"||e.change(I=>{te.cards.setCardCoverForRecord(I,o,n.key,A)})},x=()=>Yn(A=>{e.change(I=>{te.cards.setCardTargetForRecord(I,o,n.key,A)})},y,S,{accept:["page","file","space","collection","anchor","url"]}),E=A=>{A.preventDefault(),A.stopPropagation(),h.open(se({groups:[{key:"actions",commands:[{key:"actions.target",icon:b.PageLink,...R?{title:"Target link",descendant:()=>se({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:b.Replace,trigger:()=>x()},{key:"target.remove",title:"Remove target",icon:b.Trashcan,trigger:()=>{e.change(I=>{te.cards.removeCardTargetForRecord(I,o,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>x()}},{key:"actions.cover",icon:b.Image,...w?{title:"Cover",descendant:()=>se({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:b.Replace,trigger:()=>{k()}},{key:"cover.remove",title:"Remove cover",icon:b.Trashcan,trigger:()=>{e.change(I=>{te.cards.removeCardCoverForRecord(I,o,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{k()}}},{key:"actions.delete",title:"Delete",icon:b.Trashcan,trigger:()=>{e.change(I=>{te.removeRecord(I,o,n.key)})}}]}]}))};return dl.createElement(ML.TouchableWithoutFeedback,{onPressIn:A=>{A.preventDefault(),A.stopPropagation()}},dl.createElement(F,{style:[O.flex.row,O.flex.alignItemsCenter,lv.controlButtons,d&&O.display.opacity50],inlineStyle:h.opened||i?{opacity:1}:void 0},dl.createElement(Dt,{ref:f,kind:"secondary",size:"small",leadingIcon:b.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:d?void 0:`Click for options.
Drag to move.`,onClick:E,preventFocusOnPress:!0,style:{cursor:d?"grabbing":"grab"},...p}),dl.createElement(F,{style:[O.flex.columnGap200,O.margin.leftAuto]},dl.createElement(W,{kind:"secondary",size:"small",rounded:!0,icon:b.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}c();var aR=v(P()),uv=v(H());function NL(t){let{coverRef:o}=t,[,e]=T(rU),n=nt(o),r=n.resolution?.extra?.file,i=n&&r&&gc(r)?aa(r.downloadURL,{width:371}):null;return i?aR.createElement(uv.View,{style:e.cardCover},aR.createElement(uv.Image,{source:{uri:i},style:e.cardImage})):null}var rU=j.create({cardCover:t=>({backgroundColor:t.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function VL(t){let{nodeKey:o,definition:e,editor:n,readOnly:r,record:i,view:a,selected:s,selectedBy:l,isLastInRow:u,beforeOrderIndex:d,afterOrderIndex:p,onExpand:m}=t,[,f]=T(iU),[,h]=T(N),y=ts(l),[S,w]=sn.useState(),R=_n(S),{blocks:{withTables:k}}=sn.useContext(ce),x={type:"table-record",id:i.key,blockKey:o,previewLabel:"Move card"},E=Sn({disabled:r,...Gn(x)}),A=br({shouldAccept:sn.useCallback(G=>G.type==="table-record"&&i.key!==G.id&&o===G.blockKey,[i.key]),onDrop:G=>{n.change(q=>{te.moveRecord(q,o,G.id,R.current==="before"?{before:d,after:i.value.orderIndex}:{before:i.value.orderIndex,after:p})})},onHoverMove:({xPosition:G})=>{let q=G==="right"?"after":"before";S!==q&&w(q)}}),I=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,L=nt(I),B=()=>{n.change(G=>{te.moveTableSelection(G,o,{recordId:i.key}),G.focus()})},Y=a.coverDefinition&&i.value.values[a.coverDefinition]?.[0]?i.value.values[a.coverDefinition]?.[0]:null,$=sn.createElement(pl.View,{style:[C.flex1,g.Padding.all400,!Y&&!r&&g.Margin.vertical400,!r&&f.editableArea]},a.columns.map((G,q)=>{let J=e[G],ie=sn.createElement(pp,{record:i,selected:!1,definition:J,nodeKey:o,editor:n,readOnly:r});return sn.createElement(pl.View,{key:G,style:[q<a.columns.length-1?g.Margin.bottom200:null]},a.hideColumnTitle?null:sn.createElement(pl.View,null,sn.createElement(pl.Text,{style:[h.Label,h.textMid]},J.title)),ie)}));return sn.createElement(Aw,{style:[C.flex1],readOnly:r,selected:s,selectionColor:y.base,onSelect:B},sn.createElement(F,{style:[lv.targetCard,O.flex.flex1,E.isDragging&&O.display.opacity50,eI,{[th]:A.isOver&&(!u||u&&S==="before"),[td]:A.isOver&&u&&S==="after"}],ref:A.setNodeRef},sn.createElement(Es,{style:[C.flex1,C.column],...I?{component:U.TouchableOpacity,href:r?L.href:void 0,onPress:G=>{G.preventDefault(),L?.open()}}:{component:U.View}},Y?sn.createElement(NL,{coverRef:{kind:"file",file:Y}}):null,r?$:sn.createElement(pl.TouchableWithoutFeedback,{onPressIn:G=>{G.preventDefault(),G.stopPropagation()}},$),!k?.cards||r?null:sn.createElement(_L,{nodeKey:o,editor:n,record:i,view:a,visible:s,onExpand:m,draggableState:E,filesManager:k.cards.coverImageFilesManager}))))}var iU=j.create({editableArea:{cursor:"text"}});function FL(t){let{nodeKey:o,editor:e,readOnly:n,definition:r,records:i,view:a,selection:s,selections:l,openRecord:u}=t,d=ed(),p=ec.useMemo(()=>a.columns.find(h=>r[h].type==="text")||void 0,[a.columns,r]),m=ec.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:Ee(a.cardSize)}},[a.cardSize]),f=ec.useCallback(({item:h,index:y})=>{if(h.key==="new")return ec.createElement(LL,{editor:e,nodeKey:o,defaultTextDefinitionId:p});let S=!s.definitionId&&s.recordId===h.key,w=l.find(R=>R.recordId===h.key&&!R.definitionId);return ec.createElement(VL,{nodeKey:o,editor:e,readOnly:n,definition:r,record:h,view:a,selected:S||!!w,selectedBy:S?void 0:w?.clientId,isLastInRow:m[d]===1||(y+1)%m[d]===0,beforeOrderIndex:y>0?i[y-1].value.orderIndex:void 0,afterOrderIndex:y<i.length-1?i[y+1].value.orderIndex:void 0,onExpand:()=>u(h.key)})},[o,e,n,r,a,s.recordId,!!s.definitionId,p,u,l]);return ec.createElement(Qx,{data:n?i:[...i,{key:"new"}],renderItem:f,numColumnsPerScreen:m,columnSpacing:g.medium,rowSpacing:g.medium})}var HL={IconComponent:b.Cards3Columns,title:"Cards",recordName:"card",definitionName:"field",selectableView:!1,ViewComponent:FL,DefinitionSettingsComponent:AL,commands:aU,onKeyDown:BL};function aU(t){let{view:o,setView:e}=t;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:b.Image,descendant:()=>sU(t)},{key:"cards.selectTarget",title:"Target link",icon:b.PageLink,descendant:()=>cU(t)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:b.Cards3Columns,type:1,selected:o.cardSize==="medium",trigger:()=>{let[n]=e({...o,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:b.Cards2Columns,type:1,selected:o.cardSize==="large",trigger:()=>{let[n]=e({...o,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:b.EyeOff,type:2,enabled:!o.hideColumnTitle,trigger:()=>{let[n]=e({...o,hideColumnTitle:!o.hideColumnTitle});return n}},{key:"cards.definitions",title:"Fields",icon:b.EyeOff,descendant:()=>WL(t)}]}]}function sU(t){let{view:o,definition:e,setView:n}=t;return fp(e,r=>{n({...o,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:o.coverDefinition?[o.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function cU(t){let{view:o,definition:e,setView:n}=t;return fp(e,r=>{n({...o,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:o.targetDefinition?[o.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function WL(t){let{view:o,definition:e,setView:n}=t;return fp(e,r=>{let[,i]=n({...o,columns:r});return WL(i)},{multiple:!0,search:"Select visible columns\u2026",selected:o.columns})}c();c();var Bm=v(P());c();var zL=v(yg()),Mt=v(P()),Gi=v(H());var tc=Mt.createContext(new Map),KL=Mt.forwardRef((t,o)=>{let{nodeKey:e,editor:n,view:r,children:i}=t,{readOnly:a}=n,[,s]=T(GL),[l]=Gs.useDimensions(),u=ot(),d=u?l.width:l.width-2,{widths:p,totalWidth:m}=Mt.useMemo(()=>cb(r,d,u),[d,r.columns,r.columnWidths]),[f,h]=Mt.useState({left:!1,right:!1});Mt.useEffect(()=>{h(k=>({left:m>d?k.left:!1,right:m>d?k.right:!1}))},[m,d]);let y=_n(f),S=Mt.useCallback(k=>{let{contentOffset:x,contentSize:E,layoutMeasurement:A}=k.nativeEvent,I=x.x>0,L=x.x<E.width-A.width;y.current.left===I&&y.current.right===L||h({left:I,right:L})},[]),w=Mt.useCallback((k,x)=>{let E=p.get(k);ge(E),n.change(A=>{A.setDataByKey(e,["view","columnWidths",k],(0,zL.default)(E.width+x,sb,mm),{normalize:!1}),A.setDataByKey(e,["view","useNewSizing"],!0,{normalize:!1})})},[p]),R=(k,x)=>{n.change(E=>{te.moveColumn(E,e,x.id,k)})};return Mt.createElement(Gi.View,{ref:o},Mt.createElement(tc.Provider,{value:p},Mt.createElement(Gi.ScrollView,{horizontal:!0,style:s.tableScrollWrapper,onScroll:S,scrollEventThrottle:100,contentContainerStyle:s.tableWrapper},i,a?null:[...r.columns].reverse().reduce((k,x,E,A)=>{let I=p.get(x);return ge(I),Mt.createElement(lU,{key:x,columnId:x,columnAfterId:A[E-1],tableKey:e,controller:I.controller,width:I.animated,onResizeComplete:w,onDropBefore:L=>R(x,L)},k)},null))),!u&&f.left?Mt.createElement(Gi.View,{style:s.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&f.right?Mt.createElement(Gi.View,{style:s.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function lU(t){let{tableKey:o,columnId:e,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:s,onResizeComplete:l}=t,[u,d]=T(GL),p=Mt.useMemo(()=>Gi.PanResponder.create({onStartShouldSetPanResponder:(h,y)=>!1,onStartShouldSetPanResponderCapture:(h,y)=>!1,onMoveShouldSetPanResponder:(h,{dx:y})=>!0,onMoveShouldSetPanResponderCapture:(h,y)=>!1,onPanResponderGrant:(h,{dx:y})=>{},onPanResponderMove:(h,{dx:y})=>{r.setValue(y)},onPanResponderTerminationRequest:(h,y)=>!1,onPanResponderRelease:(h,{dx:y})=>{l(e,y)},onPanResponderTerminate:(h,y)=>{}}),[e,r,l]),m=U.useInteractiveState(p.panHandlers),f=br({shouldAccept:Mt.useCallback(h=>h.type==="table-definition"&&e!==h.id&&n!==h.id&&o===h.blockKey,[e,n,o]),onDrop:h=>{h.type==="table-definition"&&s(h)}});return Mt.createElement(Gi.Animated.View,{style:[d.columnLine,{left:i}]},Mt.createElement(Gi.View,{ref:f.setNodeRef,style:d.blockGrabber,...m.events},Mt.createElement(Gi.View,{style:[d.blockGrabberBar,(m.hovered||m.dragging||f.isOver)&&{backgroundColor:u.colors.primary.main}]})),a)}var dv=10,UL=3,GL=j.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:t=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:Q.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:t=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:Q.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(dv/2),bottom:0,width:dv,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:dv/2-UL/2,bottom:0,width:UL,borderRadius:_.RADIUS_M},blockGrabberPlus:{position:"absolute",top:g.small,left:-(_.BUTTON_XS/2)+dv/2}});function jL(t){let{view:o,columnId:e,setView:n}=t,r=Bm.default.useContext(tc);function i(a){if(a){let{[e]:s,...l}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:l})}else n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e]:r.get(e)?.width||Xc}})}return Bm.default.createElement(Bm.default.Fragment,null,Bm.default.createElement(lh,{value:typeof o.columnWidths?.[e]>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}c();var YL=(t,o,e,n)=>{let r=(i=e.selection.definitionId)=>{if(!i)return;let a=e.records.findIndex(d=>d.key===e.selection.recordId),s=e.records[a],l=e.records[a+1],u=te.insertEmptyRecord(n,o.key,{before:s.value.orderIndex,after:l?.value.orderIndex});te.moveTableSelection(n,o,{recordId:u,definitionId:i},"start")};switch(t){case"move-up":case"move-down":{xn(n,o,e,{definition:{relative:0},record:{relative:t==="move-up"?-1:1},focus:t==="move-up"?"end":"start"})||(t==="move-up"?Gu(n,o):Ct(n,o));break}case"tab":case"move-right":{let i=t==="tab"?"select":"start";xn(n,o,e,{definition:{relative:1},record:{relative:0},focus:i})||!xn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:i})&&t==="tab"&&r(e.view.columns[0]);break}case"shift+tab":case"move-left":{let i=t==="shift+tab"?"select":"end";xn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:i})||xn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(xn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;e.selection.recordId&&te.isRowEmpty(o,e.selection.recordId)?(xn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"}),te.removeRecord(n,o.key,e.selection.recordId)):xn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};c();var tr=v(P()),hv=v(H());c();var ji=v(P());c();var pv=g.Padding.left400;c();var Pr=v(P()),oc=v(H());var fv=Pr.default.forwardRef(function(o,e){let{recordKey:n,columnId:r,selected:i,selectedBy:a,width:s,children:l,header:u=!1,isFirstColumn:d=!1,isFirstRow:p=!1,isLastColumn:m=!1,isLastRow:f=!1,onPress:h,readOnly:y,...S}=o,w=Pr.default.useRef(null),R=ki(w,e),[,k]=T(uU),E={backgroundColor:ts(a).base};Pr.default.useEffect(()=>{i&&w.current&&ah(w.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let A=Pr.default.createElement(oc.Animated.View,{ref:R,style:[k.cell,C.row,C.alignItemsCenter,d?k.farLeftCell:{},p?k.topCell:{},f?k.bottomCell:{},p&&d?k.topLeftCell:{},p&&m?k.topRightCell:{},f&&d?k.bottomLeftCell:{},f&&m?k.bottomRightCell:{},u?k.columnHeader:{},p?yo.Bold:{},{width:s}]},l,i?Pr.default.createElement(Pr.default.Fragment,null,Pr.default.createElement(oc.View,{style:[k.cellSelectionBorderTop,E]}),Pr.default.createElement(oc.View,{style:[k.cellSelectionBorderBottom,E]}),Pr.default.createElement(oc.View,{style:[k.cellSelectionBorderRight,E]}),Pr.default.createElement(oc.View,{style:[k.cellSelectionBorderLeft,E]})):null);return Pr.default.createElement(ve,{style:[k.unsetDefaultTH,C.row,C.justifyCenter],tag:u?"th":"td"},y?Pr.default.createElement(Pr.default.Fragment,null,A):Pr.default.createElement(oc.TouchableWithoutFeedback,{...S},A))}),er=1,uU=j.create({unsetDefaultTH:{textAlign:"left"},cell:t=>({position:"relative",paddingVertical:g.small,paddingHorizontal:g.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:t.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(er/2),left:-Math.floor(er/2),right:-Math.floor(er/2),height:er},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(er/2),left:-Math.floor(er/2),right:-Math.floor(er/2),height:er},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(er/2),top:-Math.floor(er/2),right:-Math.floor(er/2),width:er},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(er/2),top:-Math.floor(er/2),left:-Math.floor(er/2),width:er},topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:t=>({backgroundColor:"transparent"})});var JL=ji.memo(function(o){let{editor:e,nodeKey:n,readOnly:r,definition:i,view:a}=o,s=ji.useContext(tc),[,l]=T(fU);return ji.createElement(ve,{tag:"thead"},ji.createElement(ve,{style:[C.row,l.background],tag:"tr"},a.columns.map((u,d)=>{let p=i[u],m=s.get(u);return ge(m),ji.createElement(pU,{key:u,columnId:u,editor:e,nodeKey:n,columnDef:p,view:a,readOnly:r,width:m.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),$L=U.createInteractiveHandle("table-column"),dU=U.createInteractiveComponent(ve);function pU(t){let{columnDef:o,readOnly:e,editor:n,nodeKey:r,view:i,...a}=t;return ji.createElement(dU,{handle:$L},ji.createElement(fv,{focusable:!1,readOnly:e,...a},ji.createElement(TL,{editor:n,nodeKey:r,definition:o,readOnly:e,style:[C.flex1,a.isFirstColumn&&!e?pv:null]}),e?null:ji.createElement(mv,{editor:n,nodeKey:r,view:i,definition:o,descendantOf:$L,icon:b.GrabberVertical,rounded:!0})))}var fU=j.create({background:t=>({backgroundColor:t.colors.background.mid,borderBottomColor:t.colors.border.mid,borderBottomWidth:2})});c();var xt=v(P()),Lm=v(H());var qL=U.createInteractiveHandle("table-row"),mU=U.createInteractiveComponent(ve),ZL=xt.memo(xt.forwardRef(function(o,e){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:s,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:p,afterOrderIndex:m,selectedColumnId:f,selections:h,definitionColorKinds:y,openRecord:S,style:w}=o,R=xt.useContext(tc),k=mi[l.type],x={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},E=Sn({...Gn(x),disabled:i}),A=(G,q)=>{r.change(J=>{te.moveRecord(J,n,G.id,q)})},I=xt.useRef(null),L=fe(I),B=()=>{L.open(se({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:`Open ${k.recordName}`,icon:b.Maximize,trigger:()=>{S(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:b.TableInsertRowAbove,trigger:()=>{r.change(G=>{te.insertEmptyRecord(G,n,{after:a.value.orderIndex,before:p})})}},{key:"table.row.insertBelow",title:"Insert below",icon:b.TableInsertRow,trigger:()=>{r.change(G=>{te.insertEmptyRecord(G,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:m})})}},{key:"table.row.addColumn",icon:b.TableInsertColumn,title:`Add ${k.definitionName}`,trigger:()=>{r.change(G=>{te.insertColumn(G,n,te.createColumnFromType("text"))})},descendant:()=>Zs(G=>{r.change(q=>{te.insertColumn(q,n,te.createColumnFromType(G))})})},{key:"table.row.remove",title:`Delete ${k.recordName}`,icon:b.Trashcan,trigger:()=>{r.change(G=>{te.removeRecord(G,n,a.key)})}}]}]}))},[,Y]=T(eM),$=xt.createElement(mU,{ref:e,handle:qL,style:[C.row,E.isDragging&&mt.translucent,w],tag:"tr"},l.columns.map((G,q)=>{let J=s[G],ie=f===G,ye=h?.find(jt=>jt.definitionId===G),Pe=y[G],Je=xt.createElement(pp,{definitionColorKind:Pe,record:a,selected:ie,definition:J,nodeKey:n,editor:r,readOnly:i});return xt.createElement(fv,{key:G,recordKey:a.key,columnId:G,width:R.get(G).animated,selected:ie||!!ye,selectedBy:ie?void 0:ye?.clientId,isFirstColumn:q===0,isLastColumn:q===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:jt=>{jt.type!=="keydown"&&(jt.preventDefault(),r.change(Oo=>{te.moveTableSelection(Oo,n,{recordId:a.key,definitionId:G})}))},readOnly:i},q>0||i?Je:xt.createElement(xt.Fragment,null,xt.createElement(U.View.Child,{descendantOf:qL,ref:E.setNodeRef,style:[C.justifyCenter,Y.rowGrabber],inactiveStyle:L.opened?{}:mt.hidden,activeStyle:mt.visible},xt.createElement(W,{ref:I,size:"xsmall",rounded:!0,kind:"grey",active:L.opened,title:`Click for options.
Drag to move.`,icon:b.GrabberVertical,onPress:B,...E.listeners})),xt.createElement(Lm.View,{style:[C.flex1,C.justifyCenter,pv]},Je)))}));return i?$:xt.createElement(Lm.View,null,$,xt.createElement(XL,{currentItem:x,position:"before",onDrop:G=>A(G,{before:p,after:a.value.orderIndex})}),d?xt.createElement(XL,{currentItem:x,position:"after",onDrop:G=>A(G,{before:a.value.orderIndex,after:m})}):null)}));function XL(t){let{currentItem:o,position:e,onDrop:n}=t,r=U.useInteractiveState(),[,i]=T(eM),{logAnalyticsEvent:a}=xt.useContext(ce),s=br({shouldAccept:xt.useCallback(l=>l.type==="table-record"&&o.id!==l.id&&o.blockKey===l.blockKey,[o.id,o.blockKey]),onDrop:l=>{l.type==="table-record"&&(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(l))}});return xt.createElement(Lm.View,{ref:s.setNodeRef,style:[i.insertionLineWrapper,e==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},xt.createElement(Lm.View,{style:[i.insertionLineBar,(r.hovered&&r.dragging||s.isOver)&&i.insertionLineBarHovered]}))}var gv=10,QL=3,eM=j.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:gv},insertionLineBefore:{top:-(gv/2)},insertionLineAfter:{bottom:-(gv/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:gv/2-QL/2,height:QL,borderRadius:_.RADIUS_M},insertionLineBarHovered:t=>({backgroundColor:t.colors.primary.main}),rowGrabber:{position:"absolute",left:g.xsmall,bottom:"auto",zIndex:10}});var gU=20;function tM(t){let{view:o,editor:e,nodeKey:n}=t,[r,i]=tr.useState(),a=tr.useCallback(s=>{s!==null&&i(s)},[]);return tr.createElement(KL,{editor:e,nodeKey:n,view:o,ref:a},tr.createElement(hU,{...t,parentRef:r}))}function hU(t){let{selection:o,selections:e,records:n,definition:r,view:i,readOnly:a,editor:s,nodeKey:l,parentRef:u,openRecord:d}=t,{mode:p}=tr.useContext(Fn),m=s.value.document.getNode(l),f=tr.useContext(tc),h=uI({enabled:p==="app"&&n.length>gU,parentRef:u?{current:u}:void 0,getEstimatedItemHeight:R=>Tw(m,String(R.key),f),list:n.map(R=>({key:R.key}))}),y=DL(r,i.columns),w=!(i.hideHeader||a&&te.isHeaderEmpty({definition:r,view:i,records:{}}))||!!o.recordId;return tr.createElement(ve,{tag:"table"},w?tr.createElement(JL,{definition:r,view:i,editor:s,nodeKey:l,readOnly:a}):null,tr.createElement(ve,{tag:"tbody"},h.map(([R,k,x],E)=>{let A=n[E],I=E>0?n[E-1]:void 0,L=n[E+1],B=e.filter(Y=>Y.recordId===A.key);return k?tr.createElement(ZL,{key:A.key,ref:R.nodeRef,selectedColumnId:o.recordId===A.key?o.definitionId:void 0,selections:B.length>0?B:void 0,record:A,definition:r,view:i,readOnly:a,editor:s,nodeKey:l,isFirstRow:!w&&E===0,isLastRow:E===n.length-1,beforeOrderIndex:I?.value.orderIndex,afterOrderIndex:L?.value.orderIndex,definitionColorKinds:y,openRecord:d,...R.nodeProps}):tr.createElement(hv.View,{key:A.key,style:{height:x},ref:R.nodeRef},tr.createElement(hv.Text,null,te.getTableRowPlainText(m,A.value)))})))}var oM={IconComponent:b.Table,title:"Table",recordName:"row",definitionName:"column",selectableView:!0,ViewComponent:tM,DefinitionSettingsComponent:jL,commands:bU,definitionCommands:yU,onKeyDown:YL};function yU(t){let{view:o,definition:e,setView:n}=t,r=typeof o.columnWidths?.[e.id]>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:b.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e.id]:Xc}});else{let{[e.id]:i,...a}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:a})}}}]}]}function bU(t){let{view:o,setView:e}=t;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!o.hideHeader,trigger:()=>{let[n]=e({...o,hideHeader:!o.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=o;e({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Visible columns",icon:b.Eye,descendant:()=>nM(t)}]}]}function nM(t){let{view:o,definition:e,setView:n}=t;return fp(e,r=>{let[,i]=n({...o,columns:r});return nM(i)},{multiple:!0,search:"Select visible columns",selected:o.columns})}var mi={grid:oM,cards:HL};function mv(t){let{nodeKey:o,editor:e,view:n,definition:r,descendantOf:i,icon:a,rightIcon:s,rounded:l}=t,[,u]=T(vU),d=gi.useRef(null),p=fe(d),m=U.useInteractiveState(),f=Sn({...Gn({id:r.id,type:"table-definition",blockKey:o,previewLabel:ls(r)})}),[h,y]=gi.useState(null),S=I=>{e.change(L=>{te.setColumnDefinition(L,o,r.id,I)})},w=()=>{let L=e.value.document.assertBlock(o).data.toFrozenObject(),B=L.definition[r.id];return[k(L.view,B),R(L.view,B)]},R=(I,L)=>({definition:L,view:I,setView:B=>(e.change(Y=>{te.setView(Y,o,B)}),w()),setDefinition:B=>(S(B),w()),openModal:B=>{y({type:"command",modal:gi.createElement(B,{definition:L,onClose:()=>y(null)})})}}),k=(I,L)=>{let B=fi[L.type],Y=mi[I.type],$=R(I,L);return se({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:B.title,icon:B.IconComponent,descendant:()=>Zs(G=>{y({type:"change_type",columnType:G})},{selectedType:L.type})}]},...B.commands?B.commands($):[],...Y.definitionCommands?Y.definitionCommands($):[],{key:"definition.danger",commands:[{key:"definition.add",title:`Add ${Y.definitionName}`,icon:b.TableInsertColumn,trigger:()=>{e.change(G=>{let q=[...I.columns].findIndex(J=>L.id===J);te.insertColumn(G,o,te.createColumnFromType("text"),q+1)})},descendant:()=>Zs(G=>{let q=[...I.columns].findIndex(J=>L.id===J);e.change(J=>{te.insertColumn(J,o,te.createColumnFromType(G),q+1)})})},{key:"definition.hide",title:`Hide ${Y.definitionName}`,icon:b.EyeOff,trigger:()=>{e.change(G=>{te.hideColumn(G,o,L.id)})}},{key:"definition.delete",title:`Delete ${Y.definitionName}`,icon:b.Trashcan,trigger:()=>{y({type:"delete"})}}]}]})},x=()=>{p.open(k(n,r))},E=I=>{y(null),I&&e.change(L=>{te.removeColumn(L,o,r.id)})},A=I=>{y(null),I&&h?.type==="change_type"&&S(te.changeColumnType(r,h.columnType))};return gi.createElement(gi.Fragment,null,h?.type==="delete"?gi.createElement(mf,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:E},"Do you really want to delete this column and all of its data?"):null,h?.type==="change_type"?gi.createElement(mf,{title:"Change column type",confirmButtonText:"Change",onComplete:A},"You are about to change this column type from ",r.type," to"," ",h.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,h?.type==="command"?h.modal:null,gi.createElement(U.View.Child,{...m.events,descendantOf:i,ref:f.setNodeRef,style:[C.justifyCenter,u.columnGrabber],inactiveStyle:p.opened||m.focused?{}:mt.hidden,activeStyle:mt.visible,focusStyle:mt.translucent,...f.listeners},gi.createElement(W,{kind:"grey",size:"small",ref:d,title:`Click for options.
Drag to move.`,active:p.opened,icon:a,rightIcon:s,rounded:l,onPress:x})))}var vU=j.create({columnGrabber:{position:"absolute",right:g.xsmall,bottom:"auto"}});function yv(t,o,e){let n=o.data.toFrozenObject(),r=mi[n.view.type],i=r.commands?r.commands(rM(t,n,o.key,e)):[];return{...ct(t,o.key,[{key:"views",commands:Object.entries(mi).map(([a,s])=>({key:a,title:s.title,icon:s.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{t.change(u=>{te.setView(u,o.key,{type:a})});let l=t.value.document.assertBlock(o.key);return yv(t,l,e)}}))},{key:"table",commands:[{key:"addColumn",icon:b.ArrowRight,title:`Add ${r.definitionName}`,trigger:()=>{t.change(a=>{te.insertColumn(a,o.key,te.createColumnFromType("text"))})},descendant:()=>Zs(a=>{t.change(s=>{te.insertColumn(s,o.key,te.createColumnFromType(a))})})},{key:"insertRow",icon:b.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{t.change(a=>{te.insertEmptyRecord(a,o.key)})}}]},...i,...e]),search:"Select action\u2026"}}function rM(t,o,e,n){return{view:o.view,definition:o.definition,setView:r=>{t.change(a=>{te.setView(a,e,r)});let i=t.value.document.assertBlock(e);return[yv(t,i,n),rM(t,i.data.toFrozenObject(),e,n)]}}}c();var aM=v(qN()),co=v(P()),nc=v(H());c();var Yi=v(P()),cR=v(H());c();var sR=JSON.parse('{"definitionWrapper":"definitionWrapper_0vx5U","grabberWrapper":"grabberWrapper_WLh-V"}');var iM=U.createInteractiveHandle("record-column-value-line");function lR(t){let{nodeKey:o,editor:e,readOnly:n,record:r,view:i,definition:a,style:s}=t,[,l]=T(CU),u=Sn({...Gn({id:a.id,type:"table-definition",blockKey:o,previewLabel:ls(a)}),disabled:n}),d=br({shouldAccept:Yi.useCallback(p=>p.type!=="table-definition"?!1:a.id!==p.id&&o===p.blockKey,[a.id,o]),onDrop:p=>{e.change(m=>{te.moveColumn(m,o,p.id,a.id)})}});return Yi.createElement(F,{ref:d.setNodeRef,style:[O.flex.column,O.flex.flex1,sR.definitionWrapper,u.isDragging&&O.display.opacity50,oh,{[td]:d.isOver}]},Yi.createElement(U.View,{handle:iM,style:s},Yi.createElement(cR.View,{style:[C.row,C.alignItemsCenter,g.Margin.bottom100]},Yi.createElement(F,{style:[O.position.relative,O.flex.alignItemsCenter]},Yi.createElement(zE,{style:[O.padding.right200,sR.grabberWrapper],ref:u.setNodeRef,size:"medium"}),Yi.createElement(cR.View,{style:[C.flex1]},Yi.createElement(nd,null,ls(a)))),n?null:Yi.createElement(mv,{nodeKey:o,editor:e,view:i,definition:a,descendantOf:iM,icon:fi[a.type].IconComponent,rightIcon:b.ChevronDown})),Yi.createElement(pp,{nodeKey:o,editor:e,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,g.Padding.vertical200,g.Padding.horizontal400]})))}var CU=j.create({recordValueBox:t=>({borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,borderRadius:t.radiuses.large,minHeight:_.BUTTON_L})});function sM(t){let{nodeKey:o,editor:e,readOnly:n,record:r,records:i,view:a,definition:s,openRecord:l,onClose:u}=t,[,d]=T(N),[,p]=T(SU),[m,f]=co.useState(!1),h=mi[a.type],y=a.columns,S=co.useMemo(()=>(0,aM.default)(Object.keys(s),y),[y,a,s]),w=co.useMemo(()=>i.findIndex(x=>x.key===r.key),[i,r.key]),R=i[w-1],k=i[w+1];return co.createElement(Co,{title:`Edit ${h.recordName}`,size:"large",footer:co.createElement(nc.View,{style:[C.row,C.alignItemsCenter,C.justifySpaceBetween]},n?null:co.createElement(W,{icon:b.Trashcan,kind:"secondary",size:"medium",onPress:()=>{e.change(x=>{te.removeRecord(x,o,r.key)}),u()}},`Delete ${h.recordName}`),co.createElement(nc.View,{style:[C.row,C.alignItemsCenter]},co.createElement(W,{icon:b.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!R,onPress:()=>{R&&l(R.key)}}),co.createElement(nc.View,{style:[g.Padding.horizontal400]},co.createElement(nc.Text,{style:[d.Body,d.textMuted]},`${w+1} of ${i.length}`)),co.createElement(W,{icon:b.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!k,onPress:()=>{k&&l(k.key)}}))),onClose:u},co.createElement(nc.View,null,y.map((x,E)=>co.createElement(lR,{key:x,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:s[x],style:[g.Margin.bottom400,E===0?null:g.Margin.top100]}))),S.length>0||!n?co.createElement(nc.View,{style:[C.row,C.justifySpaceBetween]},S.length>0?co.createElement(W,{icon:m?b.ChevronUp:b.ChevronDown,kind:"grey",size:"medium",onPress:()=>{f(x=>!x)}},m?"Hide":`Show hidden ${h.definitionName}s`):null,n?null:co.createElement(fh,{icon:b.Plus,kind:"grey",size:"medium",palette:()=>Zs(x=>{e.change(E=>{te.insertColumn(E,o,te.createColumnFromType(x))})})},"Add ",h.definitionName)):null,m?co.createElement(nc.View,{style:[p.hiddenColumnsGroup,g.Margin.top400,g.Padding.top400]},S.map((x,E)=>co.createElement(lR,{key:x,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:s[x],style:[g.Margin.bottom400,E===0?null:g.Margin.top100]}))):null)}var SU=j.create({hiddenColumnsGroup:t=>({borderTopWidth:1,borderTopColor:t.colors.border.mid,borderTopStyle:"dashed"})});c();function cM(t){return te.defaultRecordSortedKeys(t).map(e=>({key:e,value:t.records[e]}))}function lM(t){let{node:o,editor:e,isFocused:n,selections:r}=t,i=o.data.toFrozenObject(),{blocks:{withTables:a}}=Zt.useContext(ce),s=e.readOnly||typeof a>"u",l=Zt.useMemo(()=>cM(i),[i]),[u,d]=Zt.useState(null),p=Zt.useMemo(()=>u===null?null:l.find(k=>k.key===u),[l,u]),m=Zt.useCallback(k=>{d(k)},[d]),f=Zt.useMemo(()=>{let k=[],x=[];return r.forEach(E=>{let A=te.getTableSelection(e.value.document,E,o);k.push(A),!A.recordId&&!A.definitionId&&x.push(E)}),{states:k,filtered:Da.create(x)}},[l,o,s,r]),h=Zt.useMemo(()=>s?{}:te.getTableSelection(e.value.document,e.value.selection,o),[l,o,s,e.value.selection]),y={view:i.view,definition:i.definition,records:l,selection:h,selections:f.states},S=Zt.useContext(rv);S.set(o.key,y),Zt.useEffect(()=>()=>{S.delete(o.key)},[S,o.key]);let w=mi[y.view.type],R=Li(e,o.key);return Zt.createElement(Zt.Fragment,null,Zt.createElement(xe,{...t,palette:yv(e,o,R?[R]:[])},Zt.createElement(Xt,{...t,selectable:w.selectableView,isFocused:n&&!h.definitionId&&!h.recordId,selections:f.filtered,onSelect:()=>{e.change(k=>{te.moveTableSelection(k,o,{}),k.focus()})}},Zt.createElement(lI,{readOnly:!!p},Zt.createElement(w.ViewComponent,{editor:t.editor,nodeKey:o.key,readOnly:s,openRecord:m,...y})))),p?Zt.createElement(sM,{editor:t.editor,nodeKey:o.key,readOnly:s,view:y.view,records:y.records,definition:y.definition,record:p,openRecord:m,onClose:()=>{d(null)}}):null)}c();var bu=v(Pi()),vv=v(P());var uM=(0,bu.isKeyHotkey)("enter"),wU=(0,bu.isKeyHotkey)("shift+enter"),dM=(0,bu.isKeyHotkey)("mod+enter"),uR=(0,bu.isKeyHotkey)("tab"),bv=(0,bu.isKeyHotkey)("shift+tab"),pM=(0,bu.isKeyHotkey)("backspace");function fM(){let t=vv.useContext(rv);return[vv.useMemo(()=>({onKeyDown:(...e)=>RU(t,...e)}),[t])]}function RU(t,o,e,n){if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"&&o.key!=="ArrowRight"&&o.key!=="ArrowLeft"&&!(uM(o)&&!wU(o))&&!dM(o)&&!pM(o)&&!uR(o)&&!bv(o))return;let{selection:r}=e.value;if(!Yt(r)||!r.isCollapsed&&!uR(o)&&!bv(o))return;let i=te.getCurrentTable(e.value);if(!i)return;let{table:a,fragment:s}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(dM(o))return o.preventDefault(),Ct(e,a),e;let l=t.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,p=l.selection.definitionId?u.definition[l.selection.definitionId]:null,m=mi[l.view.type],f=p?fi[p.type]:null,h=S=>{if(!f||!f.onKeyDown||!d||!p)return!1;let w=!1;return f.onKeyDown(S,d.values[p.id],R=>{w=!0,te.setRecordValue(e,a.key,l.selection.recordId,l.selection.definitionId,R)}),w},y=S=>{m.onKeyDown&&m.onKeyDown(S,a,l,e)};if(uM(o)){if(s&&!r.hasAnchorAtEndOf(s))return;o.preventDefault(),h("enter")||y("enter")}else if(pM(o)){if(s&&!r.hasAnchorAtStartOf(s))return;o.preventDefault(),h("backspace")||y("backspace")}else if(uR(o)||bv(o))o.preventDefault(),y(bv(o)?"shift+tab":"tab");else if(o.key==="ArrowDown"){if(s&&!kU(s,r))return;o.preventDefault(),y("move-down")}else if(o.key==="ArrowUp"){if(s&&!PU(s,r))return;o.preventDefault(),y("move-up")}else if(o.key==="ArrowRight"){if(s&&!r.hasAnchorAtEndOf(s))return;o.preventDefault(),y("move-right")}else if(o.key==="ArrowLeft"){if(s&&!r.hasAnchorAtStartOf(s))return;o.preventDefault(),y("move-left")}return e}function PU(t,o){let e=t.nodes.first();return e?o.hasAnchorIn(e):!1}function kU(t,o){let e=t.nodes.last();return e?o.hasAnchorIn(e):!1}c();var lo=v(P()),Rv=v(H());c();var mM=v(P()),gM=v(H());function dR(t){let{children:o}=t,[,e]=T(xU);return mM.default.createElement(gM.View,{style:[e.blockTabsBody]},o)}var xU=j.create({blockTabsBody:t=>({border:`1px solid ${t.colors.border.main}`,backgroundColor:t.colors.background.main,paddingHorizontal:kw,borderRadius:t.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});c();var Cv=v(P()),pR=v(H());function fR(t){let{children:o}=t,[,e]=T(IU);return Cv.default.createElement(pR.View,{style:e.blockTabsHeader},Cv.default.createElement(eh,{style:e.blockTabsHeaderContainer},Cv.default.createElement(pR.View,{style:e.blockTabsHeaderContent},o)))}var IU=j.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:t=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:t.radiuses.medium,borderTopLeftRadius:t.radiuses.medium,pointerEvents:"auto"})});c();var Eo=v(P()),LM=v(OM()),rc=v(H());c();var vu=v(P()),Sv=v(H());var BM=vu.default.forwardRef(function(o,e){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:s,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:p,children:m,...f}=o;return vu.default.createElement(Sv.View,{style:[AM.tabItemControls,n&&AM.tabItemControlsActive],...f,ref:e},vu.default.createElement(DM,{position:"before",onDrop:s,onInsert:u}),m,a?vu.default.createElement(DM,{position:"after",onDrop:l,onInsert:d}):null)});function DM(t){let{position:o,onDrop:e,onInsert:n}=t,r=br({shouldAccept:vu.default.useCallback(i=>i.type==="tab",[]),onDrop:i=>{i.type==="tab"&&e(i.id)}});return vu.default.createElement(pf,{ref:r.setNodeRef,dropHovered:r.isOver,position:o==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:b.Plus,onPress:n}})}var AM=Sv.StyleSheet.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function bR(t){let{editor:o,tab:e,index:n,active:r,isFirst:i,isLast:a,onSelect:s}=t,{readOnly:l}=o,u=e.data?e.data.get("title"):"Untitled",d=Sn({disabled:l,...Gn({type:"tab",id:e.key,previewLabel:"Move tab"})}),p=y=>{o.change(S=>{let w=S.value.document.getParent(e.key);if(!w)return;let R=ta.createTabsItem("Untitled");S.insertNodeByKey(w.key,n+y,R);let k=S.value.document.getDescendant(R.key);k&&S.collapseToStartOf(k).focus(),s(R)})},m=y=>{o.change(S=>{S.setNodeByKey(e.key,{data:e.data.merge({title:y})})})},f=(y,S)=>{o.change(w=>{S==="before"?w.moveBeforeNodeByKey(y,e.key):w.moveAfterNodeByKey(y,e.key);let R=w.value.document.getDescendant(y);R&&w.collapseToStartOf(R).focus()})},h=()=>{o.change(y=>{y.removeNodeByKey(e.key)})};return l?Eo.default.createElement(rc.TouchableWithoutFeedback,{onPress:()=>s(e)},Eo.default.createElement(yR,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:o,tab:e})):Eo.default.createElement(rc.TouchableWithoutFeedback,{onPress:()=>s(e)},Eo.default.createElement(BM,{onInsertLeft:()=>p(0),onInsertRight:()=>p(1),onDropBefore:y=>f(y,"before"),onDropAfter:y=>f(y,"after"),onDelete:h,...t},Eo.default.createElement(yR,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:m,editor:o,tab:e,withOptions:!0,isDragging:d.isDragging,dragHandle:d})))}var yR=Eo.default.forwardRef((t,o)=>{let{title:e,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:s=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:p,tab:m,dragHandle:f,...h}=t,[y,S]=Eo.default.useState(e),[w,R]=T(VU),k=d?()=>{d(y||"")}:void 0;Eo.default.useEffect(()=>{S(e)},[e]);let x=Eo.default.useRef(null),E=ki(x,f?.setNodeRef),A=fe(x),I=()=>{A.open(se({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:b.Trashcan,trigger:()=>{p.change(L=>{ta.removeTab(L,m.key)})}}]}]}))};return Eo.default.createElement(U.View,{ref:o,style:[R.blockTabsBodyItem,g.Padding.vertical100,r&&R.blockTabsBodyItemActive,i&&R.blockTabsBodyItemFirst,a&&R.blockTabsBodyItemLast],...h},Eo.default.createElement(rc.View,{style:R.flexPadding}),Eo.default.createElement(rc.View,{style:[R.blockTabsBodyItemTitleContainer,s&&mt.translucent,g.Padding.vertical100]},l?Eo.default.createElement(Eo.default.Fragment,null,Eo.default.createElement(LM.default,{value:y,inputStyle:{...Xe.Label,color:w.colors.text.main,backgroundColor:"transparent",border:"none",...Jg.Bold,padding:0,margin:0,lineHeight:"22px"},title:y,placeholder:n,onChange:L=>S(L.target.value),onBlur:k})):Eo.default.createElement(rc.Text,{style:[yo.Label,R.blockTabsBodyItemReadonlyTitle,r&&R.blockTabsBodyItemTitleReadonlyActive]},y||n)),u?Eo.default.createElement(U.View.Child,{style:[R.tabItemOptions],inactiveStyle:A.opened||l?mt.visible:mt.hidden,activeStyle:mt.visible},Eo.default.createElement(W,{ref:E,kind:"grey",size:"small",rounded:!0,active:A.opened,onPress:I,icon:b.GrabberVertical,title:`Click for options.
Drag to move.`,...f?.listeners})):null,Eo.default.createElement(rc.View,{style:R.flexPadding}))});yR.displayName="TabItem";var VU=j.create({blockTabsBodyItem:t=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:t.colors.border.main,borderLeftColor:"transparent",backgroundColor:t.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:t=>({borderLeftColor:t.colors.border.main,borderTopLeftRadius:t.radiuses.medium}),blockTabsBodyItemLast:t=>({borderTopRightRadius:t.radiuses.medium}),blockTabsBodyItemActive:t=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:t.colors.background.main,borderBottomColor:t.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:t=>({color:t.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:t=>({color:t.colors.text.main}),tabItemOptions:{marginLeft:g.medium,display:"flex",alignItems:"center",justifyContent:"center"}});c();var _M=v(P()),wv=v(H());function vR(t){let{active:o,children:e,...n}=t;return _M.default.createElement(wv.View,{style:[MM.blockTabsItem,o&&MM.blockTabsItemActive],...n},e)}var MM=wv.StyleSheet.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});c();var _m=v(P());var FU=5,NM={activeKeys:{},activeTitles:[]},HU=Vt({key:"tabsAtom",default:NM,effects:[ra.recoilEffect("@recoil/tabsAtom",NM)]});function VM(t){let{sections:o,selected:e}=_m.useContext(Ai),n=_m.useMemo(()=>{let u=new Map;return t.blockNodes.forEach(d=>{let p=$u();[...o.entries()].filter(([m])=>d.getNode(m)).forEach(([m,f])=>{p.set(m,f)}),u.set(d.key,p)}),u},[o,t]),[r,i]=fn(HU),[a,s]=Xu(!1,[e]),l=Rc();return _m.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:UU(u,t))||WU(r,t,a,n,e)||(d?zU(r,t):null)||t.blockNodes.first(),m=>{let f=m.data.get("title");s(!0),i(h=>({activeKeys:{...h.activeKeys,[t.key]:m.key},activeTitles:f?h.activeTitles.filter(y=>y!==f).concat([f]).slice(-FU):h.activeTitles}))}]},[l,r,i,a,n,e])}function WU(t,o,e,n,r){let i=t.activeKeys[o.key];return e&&i?o.blockNodes.find(a=>a.key===i):o.blockNodes.find(a=>[...n.get(a.key)?.values()||[]].includes(r||""))}function UU(t,o){if(t.selection.isFocused)return o.blockNodes.find(e=>ke.isTextRange(t.selection)&&(t.selection.hasAnchorIn(e)||t.selection.hasFocusIn(e)))}function zU(t,o){return o.blockNodes.map(e=>{let n=e.data.get("title");return{node:e,score:t.activeTitles.indexOf(n)}}).filter(({score:e})=>e>=0).sortBy(({score:e})=>-e).map(({node:e})=>e).first()||void 0}function FM(t){let{node:o,children:e,editor:n}=t,[r,i]=VM(o),a=o.getChildIndex(r.key),s=ot(),l=lo.default.useRef(null),u=lo.default.useRef(null),d=lo.default.useCallback(f=>{let h=l.current;h&&h.measureInWindow((y,S)=>{u.current=S}),n.readOnly||n.change(y=>{y.blur()}),i(f)},[n,i]);lo.default.useEffect(()=>{let{current:f}=u;f&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((y,S)=>{window.scrollBy(0,S-f)})}))},[r]);let p=o.blockNodes.map((f,h)=>lo.default.createElement(bR,{key:f.key,editor:n,tab:f,index:h,active:h===a,isFirst:h===0,isLast:h===o.nodes.size-1,onSelect:y=>d(y)})),m=lo.default.Children.map(e,(f,h)=>lo.default.createElement(vR,{key:f&&typeof f=="object"&&"key"in f?f.key:h,active:h===a},f));return s?lo.default.createElement(xe,{...t},lo.default.createElement(Rv.View,{ref:l},lo.default.Children.map(e,(f,h)=>{let y=o.nodes.toArray()[h];return lo.default.createElement(xe,{key:y.key,...t},lo.default.createElement(Rv.View,{ref:l},lo.default.createElement(fR,null,lo.default.createElement(bR,{editor:n,key:y.key,tab:y,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),lo.default.createElement(dR,null,lo.default.createElement(vR,{active:!0},f))))}))):lo.default.createElement(xe,{...t},lo.default.createElement(Rv.View,{ref:l},lo.default.createElement(fR,null,p),lo.default.createElement(dR,null,m)))}c();var CR=v(P()),HM=v(H());function WM(t){let{attributes:o,children:e}=t;return CR.default.createElement(xe,{...t},CR.default.createElement(HM.View,{...o},e))}c();var Nm=v(Pi());var UM={onKeyDown:KU};function KU(t,o){let{value:e}=o;return Ao(e.selection)?null:(0,Nm.default)("backspace",t)&&e.isCollapsed?GU(t,o):(0,Nm.default)("enter",t)?jU(t,o):(0,Nm.default)("mod+enter",t)?YU(t,o):(0,Nm.default)("mod+a",t)?$U(t,o):null}function GU(t,o){let{value:e}=o,n=ta.getCurrentTab(e);return!n||!Qp(n)?null:(t.preventDefault(),ta.removeTab(o,n.key))}function jU(t,o){let{value:e}=o,n=ta.getCurrentTab(e);if(!n||n.nodes.size<=1||!Qp(n.blockNodes.last()))return null;let r=e.document.getClosest(e.startKey,u=>"type"in u&&u.type===lr);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");t.preventDefault();let s=n.blockNodes.last();s&&o.removeNodeByKey(s.key);let l=Tt.create({type:be,nodes:[bg.create("")]});return o.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function YU(t,o){let{value:e}=o;if(!ta.getCurrentTab(e))return null;let r=e.document.getClosest(e.startKey,s=>"type"in s&&s.type===lr);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");if(i.getChildIndex(r.key)<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");return t.preventDefault(),Ct(o,r),o}function $U(t,o){let{value:e}=o,n=ta.getCurrentTab(e);return n?(t.preventDefault(),o.collapseToStartOf(n).extendToEndOf(n)):null}var zM={renderNode:JU,renderVirtualNode:qU,renderMark:XU,estimateNodeSize:(t,o)=>{let e=Mi(t,o);return{height:uu(t,o,{blockSpacing:e})}}};function JU(t){if(Tt.isBlock(t.node)&&!jp.isInline(t.parent)){let o=t;switch(t.node.type){case be:return $e.createElement(BA,{...o,node:t.node,parent:t.parent});case fo:case $t:case mo:return $e.createElement(hA,{...o,node:t.node,parent:t.parent});case Qo:return $e.createElement(yA,{...o,node:t.node,parent:t.parent});case Ue:case je:case at:return $e.createElement(pB,{...o,node:t.node,parent:t.parent});case Mr:return $e.createElement(lM,{...o,node:t.node,parent:t.parent});case cr:return $e.createElement(M2,{...o,node:t.node,parent:t.parent});case Aa:return $e.createElement(V2,{...o,node:t.node,parent:t.parent});case gn:return $e.createElement(gB,{...o,node:t.node,parent:t.parent});case Zi:return $e.createElement(ZB,{...o,node:t.node,parent:t.parent});case Cs:return $e.createElement(lB,{...o,node:t.node,parent:t.parent});case Bn:return $e.createElement(K2,{...o,node:t.node,parent:t.parent});case Bo:return $e.createElement(AD,{...o,node:t.node,parent:t.parent});case po:return $e.createElement(FA,{...o,node:t.node,parent:t.parent});case Jt:return $e.createElement(NA,{...o,node:t.node,parent:t.parent});case lr:return $e.createElement(FM,{...o,node:t.node,parent:t.parent});case Lr:return $e.createElement(WM,{...o,node:t.node,parent:t.parent});case Il:return $e.createElement(pL,{...o,node:t.node,parent:t.parent});case Ku:return $e.createElement(qA,{...o,node:t.node,parent:t.parent});case Rs:return $e.createElement($A,{...o,node:t.node,parent:t.parent});case Zr:return $e.createElement(Z2,{...o,node:t.node,parent:t.parent});case vs:return $e.createElement(cB,{...o,node:t.node,parent:t.parent});case ei:return $e.createElement(j2,{...o,node:t.node,parent:t.parent});case Ss:return $e.createElement(tB,{...o,node:t.node,parent:t.parent})}}if(jp.isInline(t.node)&&!yc.isDocument(t.parent))switch(t.node.type){case Ln:return $e.createElement(dA,{...t,node:t.node,parent:t.parent});case bc:return $e.createElement(eL,{...t,node:t.node,parent:t.parent});case vg:return $e.createElement(fL,{...t,node:t.node,parent:t.parent});case Cg:return $e.createElement(O1,{...t,node:t.node,parent:t.parent})}return null}function qU(t){switch(t.node.type){case Ue:case je:case at:return $e.createElement(fB,{...t,key:t.node.key})}}function XU(t){switch(t.mark.type){case ur:return $e.createElement(oL,{...t});case dr:return $e.createElement(rL,{...t});case ti:return $e.createElement(aL,{...t});case go:return $e.createElement(cL,{...t});case Jp:return $e.createElement(uL,{...t});case Sg:case Rg:case wg:return $e.createElement(ZA,{...t})}return null}var GB=rt.memo(rt.forwardRef(function(o,e){let{value:n,selections:r=Da.create(),onChange:i,placeholder:a,logAnalyticsEvent:s,readOnly:l=!1,style:u,sectionIDs:d,selectedSection:p,isDiff:m,blockLayoutComponent:f,rightGutterComponent:h,integrationBlocksContext:y,integrationBlocksRemote:S,integrationsBlocksSubscription:w,onBlockHover:R,suggestIntegrations:k,blocks:x,onContentPaste:E,plugins:A}=o,{mode:I}=rt.useContext(Fn),L=rt.useRef(null),B=ki(L,e),Y=rt.useMemo(()=>r.filter(Yt).filter(Do=>Do.isSet),[r]),$=rt.useMemo(()=>({...JS,...f?{blockLayoutComponent:f}:{},...h?{rightGutterComponent:h}:{},...k?{suggestIntegrations:k}:{},onBlockHover:R,integrationBlocksContext:y,integrationsBlocksSubscription:w,blocks:x,onContentPaste:E}),[R,y,w,x,k,E]);s&&($.logAnalyticsEvent=s),$.integrationBlocksRemote=S;let[,G]=T(N),q=O2($),[J]=fM(),ie=mA($),ye=aI(n.document,cr),Pe=rt.useMemo(()=>[zM,J,D2,F2,WA,UM,LA,bA,ie,...RA,TA,Q2,iA,Y2,$2,eA,D1,ye,YA,q,B2,d2,A2,...A??[]],[q,ie,ye,A]),Je=ot(),jt=La(n.document);rt.useEffect(()=>{if(L.current?.value.isFocused)return Ph(L.current?.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[L.current?.value.isFocused,L.current?.value.selection.isCollapsed]);let Oo=rt.useRef(null),Or=L.current?.value?.selection?Ao(L.current?.value?.selection):!1;rt.useEffect(()=>{let Do=Or?"block":"text";Oo.current&&Do!==Oo.current&&s?.({type:"edit_switch_selection_mode",selectionMode:Do}),Oo.current=Or?"block":"text"},[Or]);let[On,Dr]=rt.useState(null),ir=rt.useMemo(()=>({sections:d||$u(),active:On,selected:p,setActive:Dr}),[d,On]);return rt.createElement(Ai.Provider,{value:ir},rt.createElement(ce.Provider,{value:$},rt.createElement(Gs.View,{style:[mp.editor,u],isPDF:Je},l?null:rt.createElement(va.TouchableWithoutFeedback,{onPress:()=>{L.current?.change(Do=>AC(Do,"DOCUMENT_START"))}},rt.createElement(va.View,{style:[mp.editorFocusArea,mp.editorFocusAreaTop]})),jt&&a&&!n.isFocused&&!l?rt.createElement($.blockLayoutComponent,{renderMode:"centered"},rt.createElement(va.View,{style:[mp.placeholder]},rt.createElement(va.Text,{style:[G.Body,G.textLight]},a))):null,rt.createElement(dI,{ref:B,testID:"page.contentEditor",value:n,onChange:i,readOnly:l,selections:Y,plugins:Pe,virtualize:I==="app",enableBlockContainment:l&&!m},!l&&Yt(n.selection)?rt.createElement(KD,{value:n,selection:n.selection}):null),l?null:rt.createElement(va.TouchableWithoutFeedback,{onPress:()=>{L.current?.change(Do=>AC(Do,"DOCUMENT_END"))}},rt.createElement(va.View,{style:[mp.editorFocusArea,mp.editorFocusAreaBottom]})))))})),mp=va.StyleSheet.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:g.large,top:-g.large},editorFocusAreaBottom:{height:g.large,bottom:-g.large},placeholder:{position:"absolute",top:g.small}});c();function Em(t){t&&t.change(o=>{La(o.value.document)||o.collapseToStartOf(t.value.document),o.focus()})}c();var kr=v(P());c();c();var Ym=v(P());c();var us=v(P());c();var or=v(P());c();var Cu="right-scroll-bar-position",Su="width-before-scroll-bar",SR="with-scroll-bars-hidden",wR="--removed-body-scroll-bar-size";c();c();function KM(t,o){return typeof t=="function"?t(o):t&&(t.current=o),t}c();var GM=v(P());function jM(t,o){var e=(0,GM.useState)(function(){return{value:t,callback:o,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=o,e.facade}c();function Vm(t,o){return jM(o||null,function(e){return t.forEach(function(n){return KM(n,e)})})}c();c();c();function YM(t){return t}function $M(t,o){o===void 0&&(o=YM);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:t},useMedium:function(i){var a=o(i,n);return e.push(a),function(){e=e.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;e.length;){var a=e;e=[],a.forEach(i)}e={push:function(s){return i(s)},filter:function(){return e}}},assignMedium:function(i){n=!0;var a=[];if(e.length){var s=e;e=[],s.forEach(i),a=e}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),e}}}};return r}function Fm(t,o){return o===void 0&&(o=YM),$M(t,o)}function wu(t){t===void 0&&(t={});var o=$M(null);return o.options=mn({async:!0,ssr:!1},t),o}c();var JM=v(P()),qM=function(t){var o=t.sideCar,e=kl(t,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=o.read();if(!n)throw new Error("Sidecar medium not found");return JM.createElement(n,mn({},e))};qM.isSideCarExport=!0;function Ru(t,o){return t.useMedium(o),qM}var Pv=wu();var RR=function(){},kv=or.forwardRef(function(t,o){var e=or.useRef(null),n=or.useState({onScrollCapture:RR,onWheelCapture:RR,onTouchMoveCapture:RR}),r=n[0],i=n[1],a=t.forwardProps,s=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,p=t.shards,m=t.sideCar,f=t.noIsolation,h=t.inert,y=t.allowPinchZoom,S=t.as,w=S===void 0?"div":S,R=kl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),k=m,x=Vm([e,o]),E=mn(mn({},R),r);return or.createElement(or.Fragment,null,d&&or.createElement(k,{sideCar:Pv,removeScrollBar:u,shards:p,noIsolation:f,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:e}),a?or.cloneElement(or.Children.only(s),mn(mn({},E),{ref:x})):or.createElement(w,mn({},E,{className:l,ref:x}),s))});kv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kv.classNames={fullWidth:Su,zeroRight:Cu};c();c();var _t=v(P());c();var Hm="data-focus-lock",xv="data-focus-lock-disabled",XM="data-no-focus-lock",QM="data-autofocus-inside",ZM="data-no-autofocus";var o_=v(P());c();var gp=v(P());var hp={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},e_=function(o){var e=o.children;return gp.createElement(gp.Fragment,null,gp.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:hp}),e,e&&gp.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:hp}))};e_.propTypes={};e_.defaultProps={children:null};c();var Iv=Fm({},function(t){var o=t.target,e=t.currentTarget;return{target:o,currentTarget:e}}),Tv=Fm(),t_=Fm(),Ev=wu({async:!0});var ZU=[],PR=_t.forwardRef(function(o,e){var n,r=_t.useState(),i=r[0],a=r[1],s=_t.useRef(),l=_t.useRef(!1),u=_t.useRef(null),d=o.children,p=o.disabled,m=o.noFocusGuards,f=o.persistentFocus,h=o.crossFrame,y=o.autoFocus,S=o.allowTextSelection,w=o.group,R=o.className,k=o.whiteList,x=o.hasPositiveIndices,E=o.shards,A=E===void 0?ZU:E,I=o.as,L=I===void 0?"div":I,B=o.lockProps,Y=B===void 0?{}:B,$=o.sideCar,G=o.returnFocus,q=o.focusOptions,J=o.onActivation,ie=o.onDeactivation,ye=_t.useState({}),Pe=ye[0],Je=_t.useCallback(function(){u.current=u.current||document&&document.activeElement,s.current&&J&&J(s.current),l.current=!0},[J]),jt=_t.useCallback(function(){l.current=!1,ie&&ie(s.current)},[ie]);(0,o_.useEffect)(function(){p||(u.current=null)},[]);var Oo=_t.useCallback(function(Dn){var Ar=u.current;if(Ar&&Ar.focus){var K=typeof G=="function"?G(Ar):G;if(K){var oe=typeof K=="object"?K:void 0;u.current=null,Dn?Promise.resolve().then(function(){return Ar.focus(oe)}):Ar.focus(oe)}}},[G]),Or=_t.useCallback(function(Dn){l.current&&Iv.useMedium(Dn)},[]),On=Tv.useMedium,Dr=_t.useCallback(function(Dn){s.current!==Dn&&(s.current=Dn,a(Dn))},[]),ir=zs((n={},n[xv]=p&&"disabled",n[Hm]=w,n),Y),Do=m!==!0,qo=Do&&m!=="tail",dc=Vm([e,Dr]);return _t.createElement(_t.Fragment,null,Do&&[_t.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:hp}),x?_t.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:hp}):null],!p&&_t.createElement($,{id:Pe,sideCar:Ev,observed:i,disabled:p,persistentFocus:f,crossFrame:h,autoFocus:y,whiteList:k,shards:A,onActivation:Je,onDeactivation:jt,returnFocus:Oo,focusOptions:q}),_t.createElement(L,zs({ref:dc},ir,{className:R,onBlur:On,onFocus:Or}),d),qo&&_t.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:hp}))});PR.propTypes={};PR.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var n_=PR;c();function kR(t){var o=window,e=o.setImmediate;typeof e<"u"?e(t):setTimeout(t,1)}var r_=n_;c();var Ov=wu(),Dv="data-focus-on-hidden";var i_=us.forwardRef(function(t,o){var e=us.useState(!1),n=e[0],r=e[1],i=t.children,a=t.autoFocus,s=t.shards,l=t.enabled,u=l===void 0?!0:l,d=t.scrollLock,p=d===void 0?!0:d,m=t.focusLock,f=m===void 0?!0:m,h=t.returnFocus,y=h===void 0?!0:h,S=t.inert,w=t.allowPinchZoom,R=t.sideCar,k=t.className,x=t.shouldIgnore,E=t.style,A=t.as,I=kl(t,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),L=R,B=n.onActivation,Y=n.onDeactivation,$=kl(n,["onActivation","onDeactivation"]),G=mn(mn({},$),{sideCar:R,shards:s,allowPinchZoom:w,as:A,inert:S,style:E,enabled:u&&p});return us.createElement(us.Fragment,null,us.createElement(r_,{ref:o,sideCar:R,disabled:!(n&&u&&f),returnFocus:y,autoFocus:a,shards:s,onActivation:B,onDeactivation:Y,className:k,whiteList:x,lockProps:G,as:kv},i),u&&us.createElement(L,mn({},I,{sideCar:Ov,setLockProps:r,shards:s})))});c();c();c();var k_=v(P());c();c();c();function Wm(t,o){return Wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wm(t,o)}function xR(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,Wm(t,o)}var Av=v(P());function ez(t,o){function e(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function s(){a=t(i.map(function(u){return u.props})),o(a)}var l=function(u){xR(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var p=d.prototype;return p.componentDidMount=function(){i.push(this),s()},p.componentDidUpdate=function(){s()},p.componentWillUnmount=function(){var f=i.indexOf(this);i.splice(f,1),s()},p.render=function(){return Av.default.createElement(r,this.props)},d}(Av.PureComponent);return Ox(l,"displayName","SideEffect("+e(r)+")"),l}}var a_=ez;c();c();c();c();var nr=function(t){for(var o=Array(t.length),e=0;e<t.length;++e)o[e]=t[e];return o},Um=function(t){return Array.isArray(t)?t:[t]};c();var tz=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var o=window.getComputedStyle(t,null);return!o||!o.getPropertyValue?!1:o.getPropertyValue("display")==="none"||o.getPropertyValue("visibility")==="hidden"},s_=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},c_=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},oz=function(t,o){return!t||c_(t)||!tz(t)&&o(s_(t))},IR=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=oz(o,IR.bind(void 0,t));return t.set(o,n),n},nz=function(t,o){return t&&!c_(t)?iz(t)?o(s_(t)):!1:!0},TR=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=nz(o,TR.bind(void 0,t));return t.set(o,n),n},ER=function(t){return t.dataset},rz=function(t){return t.tagName==="BUTTON"},l_=function(t){return t.tagName==="INPUT"},OR=function(t){return l_(t)&&t.type==="radio"},u_=function(t){return!((l_(t)||rz(t))&&(t.type==="hidden"||t.disabled))},iz=function(t){var o=t.getAttribute(ZM);return![!0,"true",""].includes(o)},zm=function(t){var o;return!!(t&&(!((o=ER(t))===null||o===void 0)&&o.focusGuard))},yp=function(t){return!zm(t)},d_=function(t){return!!t};c();var az=function(t,o){var e=t.tabIndex-o.tabIndex,n=t.index-o.index;if(e){if(!t.tabIndex)return 1;if(!o.tabIndex)return-1}return e||n},DR=function(t,o,e){return nr(t).map(function(n,r){return{node:n,index:r,tabIndex:e&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!o||n.tabIndex>=0}).sort(az)};c();c();var p_=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var AR=p_.join(","),sz="".concat(AR,", [data-focus-guard]"),f_=function(t,o){var e;return nr(((e=t.shadowRoot)===null||e===void 0?void 0:e.children)||t.children).reduce(function(n,r){return n.concat(r.matches(o?sz:AR)?[r]:[],f_(r))},[])},Bv=function(t,o){return t.reduce(function(e,n){return e.concat(f_(n,o),n.parentNode?nr(n.parentNode.querySelectorAll(AR)).filter(function(r){return r===n}):[])},[])},m_=function(t){var o=t.querySelectorAll("[".concat(QM,"]"));return nr(o).map(function(e){return Bv([e])}).reduce(function(e,n){return e.concat(n)},[])};var BR=function(t,o){return nr(t).filter(function(e){return IR(o,e)}).filter(function(e){return u_(e)})},LR=function(t,o){return o===void 0&&(o=new Map),nr(t).filter(function(e){return TR(o,e)})},Km=function(t,o,e){return DR(BR(Bv(t,e),o),!0,e)},MR=function(t,o){return DR(BR(Bv(t),o),!1)},g_=function(t,o){return BR(m_(t),o)},fl=function(t,o){return t.shadowRoot?fl(t.shadowRoot,o):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,o)?!0:nr(t.children).some(function(e){return fl(e,o)})};c();var cz=function(t){for(var o=new Set,e=t.length,n=0;n<e;n+=1)for(var r=n+1;r<e;r+=1){var i=t[n].compareDocumentPosition(t[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&o.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&o.add(n)}return t.filter(function(a,s){return!o.has(s)})},h_=function(t){return t.parentNode?h_(t.parentNode):t},bp=function(t){var o=Um(t);return o.filter(Boolean).reduce(function(e,n){var r=n.getAttribute(Hm);return e.push.apply(e,r?cz(nr(h_(n).querySelectorAll("[".concat(Hm,'="').concat(r,'"]:not([').concat(xv,'="disabled"])')))):[n]),e},[])};c();var y_=function(t){return t.activeElement?t.activeElement.shadowRoot?y_(t.activeElement.shadowRoot):t.activeElement:void 0},vp=function(){return document.activeElement?document.activeElement.shadowRoot?y_(document.activeElement.shadowRoot):document.activeElement:void 0};var lz=function(t){return t===document.activeElement},uz=function(t){return!!nr(t.querySelectorAll("iframe")).some(function(o){return lz(o)})},Lv=function(t){var o=document&&vp();return!o||o.dataset&&o.dataset.focusGuard?!1:bp(t).some(function(e){return fl(e,o)||uz(e)})};c();var _R=function(){var t=document&&vp();return t?nr(document.querySelectorAll("[".concat(XM,"]"))).some(function(o){return fl(o,t)}):!1};c();c();c();var dz=function(t,o){return o.filter(OR).filter(function(e){return e.name===t.name}).filter(function(e){return e.checked})[0]||t},Mv=function(t,o){return OR(t)&&t.name?dz(t,o):t},b_=function(t){var o=new Set;return t.forEach(function(e){return o.add(Mv(e,t))}),t.filter(function(e){return o.has(e)})};c();var NR=function(t){return t[0]&&t.length>1?Mv(t[0],t):t[0]},VR=function(t,o){return t.length>1?t.indexOf(Mv(t[o],t)):o};var FR="NEW_FOCUS",v_=function(t,o,e,n){var r=t.length,i=t[0],a=t[r-1],s=zm(e);if(!(e&&t.indexOf(e)>=0)){var l=e!==void 0?o.indexOf(e):-1,u=n?o.indexOf(n):l,d=n?t.indexOf(n):-1,p=l-u,m=o.indexOf(i),f=o.indexOf(a),h=b_(o),y=e!==void 0?h.indexOf(e):-1,S=y-(n?h.indexOf(n):l),w=VR(t,0),R=VR(t,r-1);if(l===-1||d===-1)return FR;if(!p&&d>=0)return d;if(l<=m&&s&&Math.abs(p)>1)return R;if(l>=f&&s&&Math.abs(p)>1)return w;if(p&&Math.abs(S)>1)return d;if(l<=m)return R;if(l>f)return w;if(p)return Math.abs(p)>1?d:(r+d+p)%r}};c();var pz=function(t){return function(o){var e,n=(e=ER(o))===null||e===void 0?void 0:e.autofocus;return o.autofocus||n!==void 0&&n!=="false"||t.indexOf(o)>=0}},C_=function(t,o,e){var n=t.map(function(i){var a=i.node;return a}),r=LR(n.filter(pz(e)));return r&&r.length?NR(r):NR(LR(o))};c();var WR=function(t,o){return o===void 0&&(o=[]),o.push(t),t.parentNode&&WR(t.parentNode.host||t.parentNode,o),o},HR=function(t,o){for(var e=WR(t),n=WR(o),r=0;r<e.length;r+=1){var i=e[r];if(n.indexOf(i)>=0)return i}return!1},_v=function(t,o,e){var n=Um(t),r=Um(o),i=n[0],a=!1;return r.filter(Boolean).forEach(function(s){a=HR(a||s,s)||a,e.filter(Boolean).forEach(function(l){var u=HR(i,l);u&&(!a||fl(u,a)?a=u:a=HR(u,a))})}),a},S_=function(t,o){return t.reduce(function(e,n){return e.concat(g_(n,o))},[])};var fz=function(t,o){var e=new Map;return o.forEach(function(n){return e.set(n.node,n)}),t.map(function(n){return e.get(n)}).filter(d_)},w_=function(t,o){var e=document&&vp(),n=bp(t).filter(yp),r=_v(e||t,t,n),i=new Map,a=MR(n,i),s=Km(n,i).filter(function(m){var f=m.node;return yp(f)});if(!(!s[0]&&(s=a,!s[0]))){var l=MR([r],i).map(function(m){var f=m.node;return f}),u=fz(l,s),d=u.map(function(m){var f=m.node;return f}),p=v_(d,l,e,o);return p===FR?{node:C_(a,d,S_(n,i))}:p===void 0?p:u[p]}};c();var UR=function(t){var o=bp(t).filter(yp),e=_v(t,t,o),n=new Map,r=Km([e],n,!0),i=Km(o,n).filter(function(a){var s=a.node;return yp(s)}).map(function(a){var s=a.node;return s});return r.map(function(a){var s=a.node,l=a.index;return{node:s,index:l,lockItem:i.indexOf(s)>=0,guard:zm(s)}})};c();var mz=function(t,o){"focus"in t&&t.focus(o),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus()},zR=0,KR=!1,R_=function(t,o,e){e===void 0&&(e={});var n=w_(t,o);if(!KR&&n){if(zR>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),KR=!0,setTimeout(function(){KR=!1},1);return}zR++,mz(n.node,e.focusOptions),zR--}};var GR=R_;var gz=function(){return document&&document.activeElement===document.body},hz=function(){return gz()||_R()},Sp=null,Cp=null,wp=null,Gm=!1,yz=function(){return!0},bz=function(o){return(Sp.whiteList||yz)(o)},vz=function(o,e){wp={observerNode:o,portaledElement:e}},Cz=function(o){return wp&&wp.portaledElement===o};function P_(t,o,e,n){var r=null,i=t;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==t)return;r=null}else break}while((i+=e)!==o);r&&(r.node.tabIndex=0)}var Sz=function(o){return o&&"current"in o?o.current:o},wz=function(o){return o?!!Gm:Gm==="meanwhile"},Rz=function t(o,e,n){return e&&(e.host===o&&(!e.activeElement||n.contains(e.activeElement))||e.parentNode&&t(o,e.parentNode,n))},Pz=function(o,e){return e.some(function(n){return Rz(o,n,n)})},Nv=function(){var o=!1;if(Sp){var e=Sp,n=e.observed,r=e.persistentFocus,i=e.autoFocus,a=e.shards,s=e.crossFrame,l=e.focusOptions,u=n||wp&&wp.portaledElement,d=document&&document.activeElement;if(u){var p=[u].concat(a.map(Sz).filter(Boolean));if((!d||bz(d))&&(r||wz(s)||!hz()||!Cp&&i)&&(u&&!(Lv(p)||d&&Pz(d,p)||Cz(d,u))&&(document&&!Cp&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(o=GR(p,Cp,{focusOptions:l}),wp={})),Gm=!1,Cp=document&&document.activeElement),document){var m=document&&document.activeElement,f=UR(p),h=f.map(function(y){var S=y.node;return S}).indexOf(m);h>-1&&(f.filter(function(y){var S=y.guard,w=y.node;return S&&w.dataset.focusAutoGuard}).forEach(function(y){var S=y.node;return S.removeAttribute("tabIndex")}),P_(h,f.length,1,f),P_(h,-1,-1,f))}}}return o},x_=function(o){Nv()&&o&&(o.stopPropagation(),o.preventDefault())},Vv=function(){return kR(Nv)},I_=function(o){var e=o.target,n=o.currentTarget;n.contains(e)||vz(n,e)},kz=function(){return null},xz=function(o){var e=o.children;return k_.createElement("div",{onBlur:Vv,onFocus:I_},e)};xz.propTypes={};var T_=function(){Gm="just",setTimeout(function(){Gm="meanwhile"},0)},Iz=function(){document.addEventListener("focusin",x_),document.addEventListener("focusout",Vv),window.addEventListener("blur",T_)},Tz=function(){document.removeEventListener("focusin",x_),document.removeEventListener("focusout",Vv),window.removeEventListener("blur",T_)};function Ez(t){return t.filter(function(o){var e=o.disabled;return!e})}function Oz(t){var o=t.slice(-1)[0];o&&!Sp&&Iz();var e=Sp,n=e&&o&&o.id===e.id;Sp=o,e&&!n&&(e.onDeactivation(),t.filter(function(r){var i=r.id;return i===e.id}).length||e.returnFocus(!o)),o?(Cp=null,(!n||e.observed!==o.observed)&&o.onActivation(),Nv(!0),kR(Nv)):(Tz(),Cp=null)}Iv.assignSyncMedium(I_);Tv.assignMedium(Vv);t_.assignMedium(function(t){return t({moveFocusInside:GR,focusInside:Lv})});var E_=a_(Ez,Oz)(kz);var yUe=Ru(Ev,E_);c();c();var Nt=v(P());c();c();var Fv=v(P());c();c();c();var A_=v(P());c();c();var O_;var D_=function(){if(O_)return O_;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Dz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var o=D_();return o&&t.setAttribute("nonce",o),t}function Az(t,o){t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}function Bz(t){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(t)}var jR=function(){var t=0,o=null;return{add:function(e){t==0&&(o=Dz())&&(Az(o,e),Bz(o)),t++},remove:function(){t--,!t&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}};var YR=function(){var t=jR();return function(o,e){A_.useEffect(function(){return t.add(o),function(){t.remove()}},[o&&e])}};var Pu=function(){var t=YR(),o=function(e){var n=e.styles,r=e.dynamic;return t(n,r),null};return o};c();var Lz={left:0,top:0,right:0,gap:0},$R=function(t){return parseInt(t||"",10)||0},Mz=function(t){var o=window.getComputedStyle(document.body),e=o[t==="padding"?"paddingLeft":"marginLeft"],n=o[t==="padding"?"paddingTop":"marginTop"],r=o[t==="padding"?"paddingRight":"marginRight"];return[$R(e),$R(n),$R(r)]},JR=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Lz;var o=Mz(t),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,n-e+o[2]-o[0])}};var _z=Pu(),Nz=function(t,o,e,n){var r=t.left,i=t.top,a=t.right,s=t.gap;return e===void 0&&(e="margin"),`
  .`.concat(SR,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cu,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Su,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Cu," .").concat(Cu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Su," .").concat(Su,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(wR,": ").concat(s,`px;
  }
`)},qR=function(t){var o=t.noRelative,e=t.noImportant,n=t.gapMode,r=n===void 0?"margin":n,i=Fv.useMemo(function(){return JR(r)},[r]);return Fv.createElement(_z,{styles:Nz(i,!o,r,e?"":"!important")})};c();var XR=!1;if(typeof window<"u")try{jm=Object.defineProperty({},"passive",{get:function(){return XR=!0,!0}}),window.addEventListener("test",jm,jm),window.removeEventListener("test",jm,jm)}catch{XR=!1}var jm,ku=XR?{passive:!1}:!1;c();var Vz=function(t){return t.tagName==="TEXTAREA"},B_=function(t,o){var e=window.getComputedStyle(t);return e[o]!=="hidden"&&!(e.overflowY===e.overflowX&&!Vz(t)&&e[o]==="visible")},Fz=function(t){return B_(t,"overflowY")},Hz=function(t){return B_(t,"overflowX")},QR=function(t,o){var e=o;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var n=L_(t,e);if(n){var r=M_(t,e),i=r[1],a=r[2];if(i>a)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},Wz=function(t){var o=t.scrollTop,e=t.scrollHeight,n=t.clientHeight;return[o,e,n]},Uz=function(t){var o=t.scrollLeft,e=t.scrollWidth,n=t.clientWidth;return[o,e,n]},L_=function(t,o){return t==="v"?Fz(o):Hz(o)},M_=function(t,o){return t==="v"?Wz(o):Uz(o)},zz=function(t,o){return t==="h"&&o==="rtl"?-1:1},__=function(t,o,e,n,r){var i=zz(t,window.getComputedStyle(o).direction),a=i*n,s=e.target,l=o.contains(s),u=!1,d=a>0,p=0,m=0;do{var f=M_(t,s),h=f[0],y=f[1],S=f[2],w=y-S-i*h;(h||w)&&L_(t,s)&&(p+=w,m+=h),s=s.parentNode}while(!l&&s!==document.body||l&&(o.contains(s)||o===s));return(d&&(r&&p===0||!r&&a>p)||!d&&(r&&m===0||!r&&-a>m))&&(u=!0),u};var Hv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},N_=function(t){return[t.deltaX,t.deltaY]},V_=function(t){return t&&"current"in t?t.current:t},Kz=function(t,o){return t[0]===o[0]&&t[1]===o[1]},Gz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},jz=0,Rp=[];function F_(t){var o=Nt.useRef([]),e=Nt.useRef([0,0]),n=Nt.useRef(),r=Nt.useState(jz++)[0],i=Nt.useState(function(){return Pu()})[0],a=Nt.useRef(t);Nt.useEffect(function(){a.current=t},[t]),Nt.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=ek([t.lockRef.current],(t.shards||[]).map(V_),!0).filter(Boolean);return y.forEach(function(S){return S.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var s=Nt.useCallback(function(y,S){if("touches"in y&&y.touches.length===2)return!a.current.allowPinchZoom;var w=Hv(y),R=e.current,k="deltaX"in y?y.deltaX:R[0]-w[0],x="deltaY"in y?y.deltaY:R[1]-w[1],E,A=y.target,I=Math.abs(k)>Math.abs(x)?"h":"v";if("touches"in y&&I==="h"&&A.type==="range")return!1;var L=QR(I,A);if(!L)return!0;if(L?E=I:(E=I==="v"?"h":"v",L=QR(I,A)),!L)return!1;if(!n.current&&"changedTouches"in y&&(k||x)&&(n.current=E),!E)return!0;var B=n.current||E;return __(B,S,y,B==="h"?k:x,!0)},[]),l=Nt.useCallback(function(y){var S=y;if(!(!Rp.length||Rp[Rp.length-1]!==i)){var w="deltaY"in S?N_(S):Hv(S),R=o.current.filter(function(E){return E.name===S.type&&E.target===S.target&&Kz(E.delta,w)})[0];if(R&&R.should){S.cancelable&&S.preventDefault();return}if(!R){var k=(a.current.shards||[]).map(V_).filter(Boolean).filter(function(E){return E.contains(S.target)}),x=k.length>0?s(S,k[0]):!a.current.noIsolation;x&&S.cancelable&&S.preventDefault()}}},[]),u=Nt.useCallback(function(y,S,w,R){var k={name:y,delta:S,target:w,should:R};o.current.push(k),setTimeout(function(){o.current=o.current.filter(function(x){return x!==k})},1)},[]),d=Nt.useCallback(function(y){e.current=Hv(y),n.current=void 0},[]),p=Nt.useCallback(function(y){u(y.type,N_(y),y.target,s(y,t.lockRef.current))},[]),m=Nt.useCallback(function(y){u(y.type,Hv(y),y.target,s(y,t.lockRef.current))},[]);Nt.useEffect(function(){return Rp.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",l,ku),document.addEventListener("touchmove",l,ku),document.addEventListener("touchstart",d,ku),function(){Rp=Rp.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,ku),document.removeEventListener("touchmove",l,ku),document.removeEventListener("touchstart",d,ku)}},[]);var f=t.removeScrollBar,h=t.inert;return Nt.createElement(Nt.Fragment,null,h?Nt.createElement(i,{styles:Gz(r)}):null,f?Nt.createElement(qR,{gapMode:"margin"}):null)}var cze=Ru(Pv,F_);c();var zv=v(P());c();var Yz=function(t){if(typeof document>"u")return null;var o=Array.isArray(t)?t[0]:t;return o.ownerDocument.body},Pp=new WeakMap,Wv=new WeakMap,Uv={},ZR=0,$z=function(t,o,e,n){var r=Array.isArray(t)?t:[t];Uv[e]||(Uv[e]=new WeakMap);var i=Uv[e],a=[],s=new Set,l=new Set(r),u=function(p){!p||s.has(p)||(s.add(p),u(p.parentNode))};r.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(m){if(s.has(m))d(m);else{var f=m.getAttribute(n),h=f!==null&&f!=="false",y=(Pp.get(m)||0)+1,S=(i.get(m)||0)+1;Pp.set(m,y),i.set(m,S),a.push(m),y===1&&h&&Wv.set(m,!0),S===1&&m.setAttribute(e,"true"),h||m.setAttribute(n,"true")}})};return d(o),s.clear(),ZR++,function(){a.forEach(function(p){var m=Pp.get(p)-1,f=i.get(p)-1;Pp.set(p,m),i.set(p,f),m||(Wv.has(p)||p.removeAttribute(n),Wv.delete(p)),f||p.removeAttribute(e)}),ZR--,ZR||(Pp=new WeakMap,Pp=new WeakMap,Wv=new WeakMap,Uv={})}},H_=function(t,o,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),r=o||Yz(t);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),$z(n,r,e,"aria-hidden")):function(){return null}};c();var W_=v(P());var Jz=Pu(),qz=`
 [`+Dv+`] {
   pointer-events: none !important;
 }
`,U_=function(){return W_.createElement(Jz,{styles:qz})};var ml=v(P()),z_=function(t){return"current"in t?t.current:t};function K_(t){var o=t.setLockProps,e=t.onEscapeKey,n=t.onClickOutside,r=t.shards,i=t.onActivation,a=t.onDeactivation,s=t.noIsolation,l=(0,ml.useState)(void 0),u=l[0],d=l[1],p=(0,ml.useRef)(null),m=(0,ml.useRef)(0);return zv.useEffect(function(){var f=function(w){w.defaultPrevented||(w.code==="Escape"||w.key==="Escape"||w.keyCode===27)&&e&&e(w)},h=function(w){w.defaultPrevented||w.target===p.current||w instanceof MouseEvent&&w.button!==0||r&&r.map(z_).some(function(R){return R&&R.contains(w.target)||R===w.target})||n&&n(w)},y=function(w){h(w),m.current=w.touches.length},S=function(w){m.current=w.touches.length};if(u)return document.addEventListener("keydown",f),document.addEventListener("mousedown",h),document.addEventListener("touchstart",y),document.addEventListener("touchend",S),function(){document.removeEventListener("keydown",f),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",S)}},[u,n,e]),(0,ml.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,ml.useEffect)(function(){var f=function(){return null},h=!1,y=function(w){s||(f=H_(ZP([w],(r||[]).map(z_)),document.body,Dv)),d(function(){return w})},S=function(){f(),h||d(null)};return o({onMouseDown:function(w){p.current=w.target},onTouchStart:function(w){p.current=w.target},onActivation:y,onDeactivation:S}),function(){h=!0,o(!1)}},[]),zv.createElement(U_,null)}var G_=Ru(Ov,K_);var Xz=function(t){return Ym.createElement(G_,mn({},t))},eP=Ym.forwardRef(function(t,o){return Ym.createElement(i_,mn({},t,{ref:o,sideCar:Xz}))});var ds=v(H()),o3=v(t3());function n3(t){let o=kr.useRef(null),[e,n]=fn(VS),{medias:r,currentIndex:i}=e,a=()=>{n({medias:[],currentIndex:0})},s=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(p=>({...p,currentIndex:d}))};return Cc({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},o),ri(r.length?{Left:()=>s(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?kr.createElement(Nn,{ref:o},kr.createElement(eP,null,kr.createElement(ds.View,{style:xp.imagesZoonPortal},kr.createElement(o3.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>kr.createElement(ds.View,{style:xp.indactor},kr.createElement(ds.View,{style:xp.indicatorElement}),kr.createElement(ds.View,{style:[xp.indicatorElement,C.alignItemsCenter,C.justifyCenter]},kr.createElement(ds.Text,{style:xp.indicatorText},`${d}/${r.length}`)),kr.createElement(ds.View,{style:[xp.indicatorElement,C.alignItemsEnd,C.justifyCenter]},kr.createElement(W,{icon:b.X,defaultTextStyle:{color:Q.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>kr.createElement(W,{icon:b.ChevronLeft,defaultTextStyle:{color:Q.WHITE},onPress:()=>s()}),renderArrowRight:()=>kr.createElement(W,{icon:b.ChevronRight,defaultTextStyle:{color:Q.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var xp=ds.StyleSheet.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:Q.WHITE}});c();var Dp=v(P());c();var cn=v(P()),Ip=v(H());function r3(t){return cn.createElement(a3,{...t})}function i3(t){let{space:o,onClose:e}=t,{navigate:n}=we(),r=cn.useCallback(()=>{n({screen:{type:"space",space:o.key,organization:o.organization},overlay:{type:"integrations",space:o.key,organization:o.organization,...o.git?.integration?{integration:o.git.integration}:{category:"gitsync"}}})},[n,o]);return cn.createElement(a3,{onPressGitSync:()=>{e(),r()},...t})}function a3(t){let{sources:o,pickSource:e,onPressGitSync:n,onClose:r}=t,[,i]=T(s3);return cn.createElement(ph,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:cn.createElement(Ti,{icon:b.GitHub.CSS,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:n}]:void 0})},cn.createElement(Ip.View,{style:[i.cardsWrapper]},o.map(({title:a,name:s,source:l,icon:u})=>cn.createElement(fK,{key:a,title:s,onPress:()=>e(l),icon:u}))))}function fK(t){let{title:o,description:e,icon:n,onPress:r,style:i}=t,[,a]=T(N),[,s]=T(s3);return cn.createElement(U.TouchableOpacity,{style:[C.row,C.alignItemsCenter,g.Padding.vertical200,g.Padding.right200,s.importCard,i],onPress:r},cn.createElement(Ip.View,{style:g.Margin.left200},typeof n=="function"?cn.createElement(n,{size:_.ICON_L}):cn.createElement(en,{source:n,style:s.importCardImage})),cn.createElement(Ip.View,{style:g.Margin.left200},cn.createElement(Ip.View,null,cn.createElement(U.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},o)),cn.createElement(Ip.View,null,cn.createElement(U.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},e))))}var s3=j.create({importCard:t=>({borderWidth:1,borderColor:t.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:g.small,marginRight:g.small,marginBottom:g.small}),importCardImage:{width:_.ICON_L,height:_.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-g.small}});c();function Tu(t){return"organization"in t}c();var Jv=v(P());c();var ps=v(P());c();var Sa=v(P()),yl=v(H());c();var Ca=v(P()),Tp=v(H());c();var hl=v(P()),c3=v(H());function l3(t){let{fileIcon:o,files:e,setFiles:n}=t,[,r]=T(N),i=Lo(o,{style:r.primary},[o]),a=hl.useCallback(({item:s})=>{let l=()=>{n(u=>u.filter(d=>d.key!==s.key))};return hl.createElement(Os,{layout:"wide",icon:i,title:s.file.name,buttons:[s.uploaded||s.failed?null:hl.createElement(Se,{size:"medium"}),s.failed?hl.createElement(W,{tint:Q.scarlet.base,icon:b.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,hl.createElement(W,{icon:b.X,title:"Remove",onPress:l})]})},[o,n]);return hl.createElement(c3.FlatList,{data:e,renderItem:a})}function Yv(t){let{getSpace:o,files:e,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:s=1/0}=t,[,l]=T(N),u=bo(),d=(h,y)=>{n(S=>S.map(w=>w.key===h?{...w,...y}:w))},p=async h=>{let y=await o();try{let S=await dk({kind:"space_import",space:y.id},h.file);d(h.key,{uploaded:S})}catch(S){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:b.Alert.CSS}),d(h.key,{failed:!0}),S}},m=h=>{let y=[];for(let S of h){if(e.length>=s){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${s} file for this operation`,timeout:5e3});break}if(S.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${Mf(209715200)}`,details:`Please try a different file that's below ${Mf(209715200)}`,timeout:5e3});continue}let w={key:hg(),file:S};y.push(w)}n(S=>S.concat(y)),y.forEach(S=>p(S))};return Ca.createElement(Ca.Fragment,null,Ca.createElement(Tp.View,null,Ca.createElement(Zx,{icon:r,onDropFiles:m,onPress:async()=>{let h=await xI();m(h)},hint:`Drop your ${i} file here or choose a file`})),a?Ca.createElement(Tp.View,{style:g.Margin.top200},Ca.createElement(Tp.Text,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",Ca.createElement(za,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))):null,e.length>0?Ca.createElement(Tp.View,{style:[g.Margin.top400]},Ca.createElement(l3,{fileIcon:r,files:e,setFiles:n})):null)}c();var qm=v(P()),d3=v(H());function Ep(t){let{title:o,subtitle:e,onClose:n,onSubmit:r,children:i}=t;return qm.default.createElement(ph,{title:o,subtitle:e,footer:qm.default.createElement(d3.View,{style:[C.row,C.justifyEnd]},qm.default.createElement(W,{kind:"secondary",onPress:n,style:g.Margin.right200},"Back"),qm.default.createElement(W,{kind:"primary",onPress:r},"Start import")),onClose:n},i)}function p3(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=t,[,l]=T(N),[u,d]=Sa.useState([]),m=u.some(h=>!h.uploaded)||u.length===0;return Sa.createElement(Ep,{...t,onSubmit:async()=>{if(!m){let h=await o();i(u.map(y=>y.uploaded?.downloadURL).filter(le),h)}}},r.length>0?Sa.createElement(yl.View,{style:[g.Margin.bottom400]},r.map((h,y)=>Sa.createElement(yl.View,{key:y,style:[C.row]},Sa.createElement(yl.View,{style:[g.Margin.right200]},Sa.createElement(yl.Text,{style:[l.Body,l.textMid]},`${y+1}.`)),Sa.createElement(yl.View,{style:C.flex1},Sa.createElement(yl.Text,{style:[l.Body,l.textMid]},h))))):null,Sa.createElement(Yv,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:s}))}c();var $v=v(P());function f3(t){let o=$v.useRef(),{createSpace:e}=GO({organization:t.organization});return $v.useMemo(()=>async()=>{if(o.current)return o.current;if(!e)throw new Error("Cannot import into shared space due to incorrect hook usage");return o.current=await e(!1),o.current},[e,o])}c();var ln=v(P()),ac=v(H());c();var wa=v(P()),Eu=v(H());function m3(t){let{url:o,setURL:e,placeholder:n="e.g. https://mysite.com/file",supportedFormats:r=[],validate:i=wi}=t,[,a]=T(N),s=i(o);return wa.createElement(wa.Fragment,null,wa.createElement(Eu.View,null,wa.createElement(At,{size:"large",placeholder:n,value:o,cleareable:!0,onChangeText:e,feedback:o&&!s?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?wa.createElement(Eu.View,{style:[g.Margin.top200,C.row,C.alignItemsCenter]},wa.createElement(Eu.View,null,wa.createElement(b.InfoCircle,{size:_.ICON_S,style:a.info})),wa.createElement(Eu.View,{style:[g.Margin.left200,C.flex1]},wa.createElement(Eu.Text,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function g3(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=t,[,l]=T(N),[u,d]=ln.useState([]),[p,m]=ln.useState(""),[f,h]=ln.useState("files"),y=u.some(k=>!k.uploaded),S=k=>wi(k),w=(y||u.length===0)&&(!p||!S(p));return ln.createElement(Ep,{...t,onSubmit:async()=>{if(!w){let k=await o();i(f==="files"?u.map(x=>x.uploaded?.downloadURL).filter(le):[p],k)}}},r.length>0?ln.createElement(ac.View,{style:[g.Margin.bottom400]},r.map((k,x)=>ln.createElement(ac.View,{key:x,style:[C.row]},ln.createElement(ac.View,{style:[g.Margin.right200]},ln.createElement(ac.Text,{style:[l.Body,l.textMid]},`${x+1}.`)),ln.createElement(ac.View,{style:C.flex1},ln.createElement(ac.Text,{style:[l.Body,l.textMid]},k))))):null,ln.createElement(kc,{style:O.margin.bottom200,withBorder:!0},ln.createElement(kc.Tab,{active:f==="files",onPress:()=>h("files")},"Files"),ln.createElement(kc.Tab,{active:f==="url",onPress:()=>h("url")},"URL")),ln.createElement(ac.View,{style:[C.column,g.Margin.top200]},f==="files"?ln.createElement(Yv,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:s}):null,f==="url"?ln.createElement(m3,{url:p,validate:S,setURL:m,placeholder:"https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}c();var xr=v(P()),Op=v(H());function h3(t){let{title:o="Import a Website",subtitle:e="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=t,[i,a]=xr.useState(""),[,s]=T(N),l=i?wi(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return xr.createElement(Ep,{...t,title:o,subtitle:e,onSubmit:u},xr.createElement(Op.View,{style:[g.Margin.bottom200]},xr.createElement(ni,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),xr.createElement(Op.View,{style:g.Margin.bottom400},xr.createElement(Op.Text,{style:[s.Caption,s.textMuted]},"GitBook has limits for imported content,"," ",xr.createElement(za,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?xr.createElement(xr.Suspense,{fallback:null},xr.createElement(mK,{url:i})):null)}function mK(t){let{url:o}=t,[{data:e}]=Ei([No("getEmbedByUrl",{},{query:{url:o}})],{throwOnError:!1});return e?xr.createElement(Op.View,{style:[g.Margin.bottom400]},xr.createElement(qa,{title:e.title,details:e.site,icon:gt(Fa,{source:{uri:e.icon||void 0}}),onPress:()=>{Ds(o)}})):null}function y3(t){return Tu(t.target)?ps.createElement(hK,{...t,target:t.target}):ps.createElement(gK,{...t,target:t.target})}function gK(t){let o=ps.useCallback(async()=>"id"in t.target.space?t.target.space:OI(await EI({operationId:"getSpaceById",params:{spaceId:t.target.space.key}})).data,[t.target.space]);return ps.createElement(b3,{...t,getSpace:o})}function hK(t){let o=f3(t.target);return o?ps.createElement(b3,{...t,getSpace:o}):null}function b3(t){let{sourceInfo:o,startImport:e,target:n,setSource:r,getSpace:i,onBack:a}=t,{source:s}=o??{};if(o===void 0||s===void 0)return null;switch(s){case"website":case"github-wiki":return ps.createElement(h3,{target:n,title:o.title,subtitle:o.subtitle,getSpace:i,startImport:e,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let l=s==="zip"||s==="confluence"||s==="notion";return ps.createElement(p3,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,limitWarning:l})}case"open-api":return ps.createElement(g3,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,fileUploadsLimit:1,limitWarning:!0});default:Ee(s)}}c();var It=v(P());c();var cP="https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var lP="https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var uP="https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var dP="https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var pP="https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function v3(){let[t]=T(),[,o]=T(N),e=Lo(b.FileCode,{style:o.primary}),n=Lo(b.FileText,{style:{color:Q.scarlet.light}}),r=Lo(b.FileWord,{style:{color:Q.primary.light}}),i=Lo(b.FileCode,{style:{color:Q.violet.light}}),a=Lo(b.FileZIP,{style:{color:Q.orange.light}}),s=Lo(b.GitHub,{style:{color:t.colors.text.main}}),l=Lo(b.Notion,{style:{color:t.colors.text.main}}),u=Lo(Fa,{source:{uri:cP}}),d=Lo(Fa,{source:{uri:pP}}),p=Lo(Fa,{source:{uri:lP}}),m=Lo(Fa,{source:{uri:uP}}),f=Lo(Fa,{source:{uri:dP}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:e,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:b.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:b.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:b.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:b.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:b.FileZIP,steps:[It.createElement(pe,null,"Go to ",It.createElement(pe,{style:[de.uiEmphasize]},"Space Settings")," for the space you're looking to export and select the"," ",It.createElement(pe,{style:[de.uiEmphasize]},"Content tools")," section."),It.createElement(pe,null,"Click on the ",It.createElement(pe,{style:[de.uiEmphasize]},"Export")," tab, and select ",It.createElement(pe,{style:[de.uiEmphasize]},"HTML"),", then hit"," ",It.createElement(pe,{style:[de.uiEmphasize]},"Next, and Export"),"."),It.createElement(pe,null,"Choose ",It.createElement(pe,{style:[de.uiEmphasize]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[It.createElement(pe,null,"Go to the Workspace you're looking to export and select the"," ",It.createElement(pe,{style:[de.uiEmphasize]},"\u2026")," button in the top right."),It.createElement(pe,null,"Choose ",It.createElement(pe,{style:[de.uiEmphasize]},"Export All as Markdown"))],fileIcon:b.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:s,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:b.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:p,source:"dropbox-paper",steps:[It.createElement(pe,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),It.createElement(pe,null,"Click ",It.createElement(pe,{style:[de.uiEmphasize]},"Export"),"."),It.createElement(pe,null,"Select ",It.createElement(pe,{style:[de.uiEmphasize]},".docx")," and click"," ",It.createElement(pe,{style:[de.uiEmphasize]},"Download"),"."),It.createElement(pe,null,"Drag your downloaded files to the box below to import.")],fileIcon:b.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:m,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[It.createElement(pe,null,"Click on ",It.createElement(pe,{style:[de.uiEmphasize]},"File ",">"," Download"),"."),It.createElement(pe,null,"Choose between ",It.createElement(pe,{style:[de.uiEmphasize]},"Microsoft Word")," or"," ",It.createElement(pe,{style:[de.uiEmphasize]},"Web Page"),".")],fileIcon:b.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:f,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:b.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function C3({target:t,onStartImport:o,onComplete:e,onBack:n}){let[r,i]=Jv.useState(null),a=v3(),s=bo(),l=m=>{m&&(Tu(t)?re(Ug(t.organization,{type:"templates_pick_import",source:m})):re(Ft(t.space,{type:"edit_pick_import",source:m}))),i(m)},u=async(m,f)=>{if(!r)return;let h=await Ka(),y={url:m,source:r};if(Tu(t)||!t.page&&!t.changeRequest)return h.spaces.importContent(f.id,y);if(t.page&&t.changeRequest)return h.spaces.importContentInChangeRequestPageById(f.id,t.changeRequest,t.page,y);if(t.page)return h.spaces.importContentInPageById(f.id,t.page,y);if(t.changeRequest)return h.spaces.importContentInChangeRequest(f.id,t.changeRequest,y)},d=async(m,f)=>{if(r){re(bx(f,void 0,{type:"edit_import",source:r})),o?o(f):n();try{(await s.notifyProgress(Zk(m,async S=>{let w=await u(S,f);return w?w.data:void 0},{concurrency:2,stopOnError:!1}),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(S=>S&&S.totalResources!==S.importedResources)?s.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:b.Alert.CSS,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(s.notify({icon:b.CheckCircle.CSS,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),e&&e(f))}catch(h){throw s.notify({kind:"danger",title:"Error while importing docs",details:mc(h,"Please try again or contact support if the problem persists."),icon:b.Alert.CSS}),h}}},p=a.find(({source:m})=>m===r);return{modals:Jv.createElement(y3,{sourceInfo:p,startImport:d,target:t,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function MB(t){let{target:o,onStartImport:e,onComplete:n,onClose:r}=t,{modals:i,source:a,sources:s,onSelectSource:l}=C3({onStartImport:d=>{e?e(d):r()},onComplete:n,onBack:()=>l(null),target:o}),[{result:u}]=Rh([Tu(o)?null:oa("key"in o.space?o.space.key:o.space.id)]);return Dp.createElement(Dp.Fragment,null,a?i:u?Dp.createElement(i3,{space:u,sources:s,pickSource:l,onClose:r}):Dp.createElement(r3,{sources:s,pickSource:l,onClose:r}))}c();var S3=v(P());var wK=5,w3=Vt({key:"recentSearches",default:[],effects:[ra.recoilEffect("@recoil/recentSearches",[])]});function R3(){return ar(w3)}function P3(t){let o=qr(w3);S3.useEffect(()=>{if(!t)return;let e=setTimeout(()=>{o(n=>n.includes(t)?n:[t,...n.slice(0,wK-1)])},3e3);return()=>clearTimeout(e)},[t])}c();var k3=v(P());function x3(t,o){let{space:e,organization:n}=o,r=yh();k3.useEffect(()=>{if(!t)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:t};e?re(Ft(e,a)):n?re(Ug(n,a)):re(a)},700);return()=>{clearTimeout(i)}},[t])}c();var fs=v(P());c();var I3=rh("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-AQ4CVB52.min.js"));function T3(t){let{content:o}=t,{selectedTab:e,changeSelectedTab:n,opened:r,close:i}=c1("share");return fs.createElement(St,null,r?fs.createElement(Co,{size:"xlarge",onClose:i},fs.createElement(fs.Suspense,{fallback:fs.createElement(CI,{sidebar:fs.createElement(Mo,{size:"large"})},fs.createElement(Mo,{size:"large"}))},fs.createElement(I3,{tab:e||nT(o),onChangeTab:n,...t}))):null)}c();var Me=v(P());c();var hi=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq","fullResponse":"fullResponse_adSl0","prompts":"prompts_Th3zf","answerWrapper":"answerWrapper_Uizn-","queryHeading":"queryHeading_kpHvY","prompt":"prompt_F-9A-","icon":"icon_281MC","actions":"actions_FNzrP","relatedQueries":"relatedQueries_nIpkZ","blankSlateNoAiAnswer":"blankSlateNoAiAnswer_rz6wQ","buttons":"buttons_Q48Sx"}');c();var yi=v(P());c();var bl=v(P());function E3(t){let{answer:o,singleSpace:e,organization:n}=t,{navigate:r}=we(),i=Ie(),a=bl.useMemo(()=>RK(i,o,e,n),[i,o,e,n]),s=bl.useCallback(d=>{switch(re({type:"ai_search_open_source"}),d.type){case"space":r({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:"",query:void 0}});break;case"page":r({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:d.path,query:void 0}});break;case"snippet":r({screen:{type:"snippet",snippet:d.snippet.id,organization:d.organization,query:void 0}});break;case"entity":d.targetURL&&gh(d.targetURL);break;default:Ee(d)}},[r]),l=bl.useCallback(d=>{switch(d.type){case"space":return{icon:Zu(gt(_o,{code:px(d.space)})),title:d.space.title||Va,action:"Go to space"};case"page":return{icon:b.Page.CSS,title:d.page.title,subtitle:d.ancestors.filter(m=>m.id!==d.page.id).map(m=>m.title).join(" \u203A "),nested:!e,action:"Go to page"};case"snippet":let p=HS(d.snippet);return{title:S1(d.snippet),icon:p.object==="user"?Zu(gt(JI,{userId:p.id})):b.Snippet.CSS,action:"Go to snippet"};case"entity":return{icon:b.ArrowCurveDownRight.CSS,title:d.title,body:d.body,action:"Open"};default:Ee(d)}},[e]),u=bl.useCallback(d=>{if(d?.type==="entityType")return{icon:d.integration?Zu(gt(qI,{integrationId:d.integration,bordered:!1})):b.Database.CSS,title:d.title}},[]);return bl.createElement(xc,{data:a,getKey:IK,renderItem:l,renderGroup:u,getGroupKey:TK,groupItem:EK,onOpen:s})}function RK(t,o,e,n){let r=new Map,i=[];II(o.sources,s=>{switch(s.type){case"entity":let{entityType:l,entityId:u,integration:d}=s;if(!n)return null;let p=kK(u,l,n);if(!p)return null;let m=p.entityType.includes(`${d}:`)?p.entityType.split(`${d}:`)[1]:p.entityType;i.push({type:"entity",id:p.entityId,title:p.properties.title,body:p.properties.description,targetURL:p.properties.url,groups:[{type:"entityType",entityType:p.entityType,title:sE(m),integration:d}]});break;case"capture":let{captureId:f}=s;if(!n)return null;let h=PK(f,n);if(!h)return null;i.push({type:"snippet",snippet:h,organization:n});break;case"page":let y=xK(s.space,s.page,t);if(!y)return null;let S=qu(y.revision,y.page.id),w={type:"page",space:y.space,page:y.page,ancestors:S,path:ao(y.revision,y.page.id)};if(e){i.push(w);break}i.some(k=>k.type==="space"&&k.space.key===y.space.key)||i.push({type:"space",space:y.space}),r.set(y.space.key,(r.get(y.space.key)||[]).concat(w));break;default:Ee(s)}});let a=[];for(let s of i)s&&(a.push(s),s.type==="space"&&(r.get(s.space.key)||[]).forEach(u=>{a.push(u)}));return a}function PK(t,o){return GC(Ll({operationId:"getSnippet",params:{organizationId:o,snippetId:t}}))?.data}function kK(t,o,e){return GC(Ll({operationId:"getEntity",params:{organizationId:e,entityType:o,entityId:t}}))?.data}function xK(t,o,e){let n=wh([oa(t)])[0]?.result;if(!n)return;let r=Qr(e.store.getRevision(t,n.revision));if(!r)return;let i=r.pages[o];if(!(!i||i.type!=="document"))return{space:n,page:i,revision:r}}function IK(t){switch(t.type){case"space":return`space:${t.space.key}`;case"page":return`page:${t.space.key}/${t.page.id}`;case"snippet":return`snippet:${t.snippet.id}`;case"entity":return`entity:${t.groups[0].entityType}:${t.id}`;default:Ee(t)}}function TK(t){return t&&t.type==="entityType"?t.entityType:""}function EK(t){if(t.type==="entity")return t.groups[0]}c();var O3=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_pxFSA","sourcesHeadingButton":"sourcesHeadingButton_YdnnI"}');function D3(t){let{answer:o,singleSpace:e,organization:n}=t,[r,i]=yi.useState(!1),a=ue();return yi.createElement(F,{style:[O.flex.column]},yi.createElement(F,{style:[O.flex.row]},yi.createElement(F,{style:[O.flex.flex1]},yi.createElement(Dt,{size:"small",trailingIcon:r?b.ChevronDown.CSS:b.ChevronRight.CSS,onPress:()=>{i(!r)},style:[O3.sourcesHeadingButton,de.uiSmall,de.colorMuted,O.backgroundColor.transparent,O.padding.all0],preventFocusOnPress:!0,label:a("search_answer_sources",`${o.sources.length}`)}))),r?yi.createElement(F,{style:O.margin.top400},yi.createElement(yi.Suspense,{fallback:yi.createElement(Mo,{size:"medium"})},yi.createElement(E3,{answer:o,singleSpace:e,organization:n}))):null)}c();var ms=v(P());function A3(t){let{query:o,answer:e,size:n="small"}=t,[r,i]=ms.useState(!1),a=bo(),s=Qg(),l=ue(),u=()=>{s.writeTextAndNotify(e.text)},d=()=>{re({type:"ai_search_upvote_answer",query:o,answer:e.text}),i(!0),a.notify({icon:b.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})},p=()=>{re({type:"ai_search_downvote_answer",query:o,answer:e.text}),i(!0),a.notify({icon:b.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})};return ms.createElement(F,{style:[O.flex.row,O.flex.gap200]},ms.createElement(W,{size:n,title:l("search_answer_copy"),icon:b.Copy,onPress:u}),r?null:ms.createElement(ms.Fragment,null,ms.createElement(W,{size:n,icon:b.ThumbsUp,title:l("search_answer_feedback_upvote"),onPress:d,style:g.Margin.left100}),ms.createElement(W,{size:n,icon:b.ThumbsDown,title:l("search_answer_feedback_downvote"),onPress:p,style:g.Margin.left100})))}c();var mP=v(P());c();var fP=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function B3(t){let{size:o=_.ICON_L}=t;return mP.createElement(F,{style:fP.aiSearchSpinner,inlineStyle:{width:o,height:o}},mP.createElement(b.AILens.CSS,{style:fP.aiSearchSpinnerIcon}))}function L3(t){let{query:o,target:e}=t,n=Me.useCallback((r,i,a)=>{re(e.space?Ft(e.space,{type:"ai_search_crash",query:o.query}):{type:"ai_search_crash",query:o.query})},[o]);return Me.createElement(lg,{fallback:()=>Me.createElement(BK,null),onError:n},Me.createElement(Me.Suspense,{fallback:Me.createElement(DK,null)},Me.createElement(OK,{...t})))}function OK(t){let{target:o,query:e,onAnswerLoaded:n,onSubmitQuery:r}=t,[{data:{answer:i}}]=Ei([o.space?No("askQueryInSpace",{spaceId:o.space.key},{query:{},body:{query:e.query}}):No("askInOrganization",{organizationId:o.organization},{query:{},body:{query:e.query}})]);if(Me.useEffect(()=>{re(o.space?Ft(o.space,{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!i,hasFollowupQuestions:!!i&&i.followupQuestions.length>0}):{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!i,hasFollowupQuestions:!!i&&i.followupQuestions.length>0})},[e,i,o.space]),Me.useEffect(()=>{i&&n?.()},[i,n]),!i)return Me.createElement(AK,{organizationKey:o.organization});let a=s=>{re(o.space?Ft(o.space,{type:"ai_search_pick_followup",query:e.query,followup:s,previousQueriesCount:e.previousQueries.length}):{type:"ai_search_pick_followup",query:e.query,followup:s,previousQueriesCount:e.previousQueries.length}),r(s)};return Me.createElement(F,{style:[O.flex.column,hi.fullResponse]},Me.createElement(pe,{style:[hi.queryHeading,O.text.capitalizeFirstLetter,de.uiHeadingMedium]},e.query),Me.createElement(F,{style:hi.answerWrapper},Me.createElement(F,{style:[de.uiBase,de.colorMuted]},Me.createElement(ad,{markdown:i.text}))),Me.createElement(F,{style:hi.actions},Me.createElement(A3,{query:e.query,answer:i,size:"medium"})),Me.createElement(D3,{answer:i,singleSpace:!!o.space,organization:o.organization}),i.followupQuestions.length>0?Me.createElement(F,{style:hi.relatedQueries},Me.createElement(pe,{style:[de.uiSmall,de.colorMuted,O.margin.all400]},"Related queries"),Me.createElement(F,{style:hi.prompts},i.followupQuestions.map(s=>Me.createElement(F,{key:s,style:[hi.prompt,O.cursor.pointer],as:"button",type:"button",onClick:l=>{l.preventDefault(),a(s)}},Me.createElement(b.SearchOrAsk.CSS,{style:hi.icon}),Me.createElement(pe,{style:[de.uiSmall,de.colorBase,O.text.alignCenter]},s))))):null)}function DK(t){let[o,e]=Me.useState(!1),n=ue();return Me.useEffect(()=>{let r=setTimeout(()=>{e(!0)},3e3);return()=>{clearTimeout(r)}},[]),Me.createElement(Ts,{icon:B3,title:n("search_answer_loading"),style:O.padding.top200},Me.createElement(pe,{style:[hi.loadingDelayedText,o&&hi.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function AK(t){let{organizationKey:o}=t,e=ue(),{navigate:n}=we();return Me.createElement(F,{style:hi.blankSlateNoAiAnswer},Me.createElement(pe,{style:[de.uiHeadingMedium,de.colorBase]},e("search_answer_none_title")),Me.createElement(pe,{style:[de.colorBase]},e("search_answer_none_details")),o?Me.createElement(F,{style:hi.buttons},Me.createElement(Ot,{kind:"primary",leadingIcon:b.Integrations.CSS,label:"Connect integrations",onPress:()=>{n({overlay:{type:"integrations",organization:o,category:"captures",space:void 0}})}}),Me.createElement(Ot,{kind:"secondary",leadingIcon:b.VSCode.CSS,label:"Record with VSCode",onPress:()=>{window.open("vscode:extension/GitBook.gitbook-vscode","_blank","noopener, noreferer")}})):null)}function BK(t){let o=ue();return Me.createElement(Ts,{icon:b.Alert,title:o("search_answer_error_title")},o("search_answer_error_details"))}c();var M3=v(P());function qv(t){let[{data:o}]=Ei([t===null?null:t.space?No("getRecommendedQuestionsInSpace",{spaceId:t.space.key}):No("getRecommendedQuestionsInOrganization",{organizationId:t.organization})],{suspend:!1,throwOnError:!1});return M3.useMemo(()=>o?o.questions.map(e=>({type:"recommended-question",question:e})):[],[o])}c();var LK=v(P());var MK=Vt({key:"recentAISearches",default:[],effects:[ra.recoilEffect("@recoil/recentAISearches",[])]});function Xv(){return ar(MK)}c();var sc=v(P());function _3(t){let{allowEnterToOpen:o,target:e,onSubmitAIQuery:n}=t,r=ue(),i=Xv(),a=qv(e),s=sc.useCallback(p=>{switch(p.type){case"recent-search":return{icon:b.Search.CSS,title:p.query,action:r("search_ask")};case"recommended-question":return{icon:b.SearchOrAsk.CSS,title:p.question,action:r("search_ask")};default:Ee(p)}},[r]),l=sc.useCallback(p=>{switch(p){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(p,m)=>{switch(p.type){case"recent-search":{n(p.query),re({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:m});break}case"recommended-question":re({type:"ai_search_pick_suggestion_question"}),n(p.question);break;default:Ee(p)}},d=sc.useMemo(()=>[...i.map(m=>({type:"recent-search",query:m})),...a],[i,a]);return d.length===0?sc.createElement(Ts,null,r("search_blankslate_ai")):sc.createElement(F,{style:[O.flex.flex1,O.flex.column]},sc.createElement(xc,{data:d,getKey:_K,renderItem:s,renderGroup:l,groupItem:NK,getGroupKey:VK,onOpen:u,style:O.padding.all400,allowEnterToOpen:o}))}function _K(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recommended-question":return`recommended-question:${t.question}`;default:Ee(t)}}function NK(t){return t.type}function VK(t){return t}c();var N3=v(P());var FK=10,HK=Vt({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[ra.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function V3(){let[t,o]=fn(HK),e=N3.useCallback(n=>{o(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-FK)}:{query:n,previousQueries:[]})},[o]);return[t,e]}c();var Xm=v(P());function F3(t,o,e){let n=Xm.useCallback(a=>{switch(a.type){case"ask-gitbook":{o(a.query,"click_ask_gitbook");break}default:Ee(a.type)}},[o]),r=Xm.useCallback(a=>{switch(a.type){case"ask-gitbook":return{title:a.query,icon:b.SearchOrAsk.CSS,action:"Ask GitBook",standout:!0};default:Ee(a.type)}},[]);return{suggestion:Xm.useMemo(()=>{let a=t.trim();return!e||!zK(t)?null:{type:"ask-gitbook",key:`ask-gitbook:${a}`,query:a}},[t,e]),onOpenSuggestion:n,onRenderSuggestion:r}}var WK=["who","what","where","when","why","how","explain","is","are","was","were","do","does","did","which","whom","whose","can","have","give","tell","show","find"],UK=new Set(WK);function zK(t){if(t.length>25||t.includes("?")||t.includes(" "))return!0;let o=t.toLowerCase().trim().split(/\s+/);if(o.length===0)return!1;for(let e of o)if(UK.has(e))return!0;return!1}c();var H3=v(P());c();var Qv=JSON.parse('{"blockWrapper":"blockWrapper_8BIg7","pageWrapper":"pageWrapper_BkhZI"}');function jB(t){let{children:o,style:e}=t;return H3.createElement(F,{style:[Qv.pageWrapper,O.margin.vertical0,O.margin.horizontalAuto,e]},o)}c();var W3=v(P());function Od(t){let{children:o,style:e}=t;return W3.createElement(F,{style:[Qv.blockWrapper,O.margin.vertical0,O.margin.horizontalAuto,e]},o)}c();var Yo=v(P());c();var U3=JSON.parse('{"background":"background_8ngQa"}');var KK=We("app:crash");function Qm(t){let{children:o}=t,e=Yo.useCallback((n,r,i)=>{KK.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),re({type:"crash",crashType:gP(n),sentryEvent:i})},[]);return Yo.createElement(lg,{fallback:n=>Yo.createElement(GK,{...n}),onError:e,beforeCapture:$K},o)}function GK(t){let{eventId:o,error:e}=t,n=()=>{jP({eventId:o||void 0})},r=()=>{window.location.reload()};bh();let i=()=>{switch(gP(e)){case"network-crash":return Yo.createElement(YK,{onReload:r,...t});case"crash":default:return Yo.createElement(jK,{onShareFeedback:n,onReload:r,...t})}};return Yo.createElement(F,{style:[O.flex.column,O.height.minFull,U3.background]},i())}function jK(t){let o=ue(),{onReload:e,onShareFeedback:n}=t;return Yo.createElement(df,{title:o("something_wrong"),action:Yo.createElement(Yo.Fragment,null,Yo.createElement(Ot,{label:o("reload"),kind:"primary",size:"medium",onPress:e,style:O.margin.right200,preventFocusOnPress:!0}),Yo.createElement(Ot,{label:o("let_us_know"),kind:"secondary",size:"medium",onPress:n,preventFocusOnPress:!0}))},o("we_have_been_notified"))}function YK(t){let{onReload:o}=t,e=ue(),n=()=>{window.open("https://docs.gitbook.com/resources/firewall-safelist","_blank")};return Yo.createElement(df,{title:e("connection_lost"),icon:b.CloudOff.CSS,action:Yo.createElement(Yo.Fragment,null,Yo.createElement(Ot,{label:e("reload"),kind:"primary",size:"medium",onPress:o,style:O.margin.right200,preventFocusOnPress:!0}),Yo.createElement(Ot,{preventFocusOnPress:!0,label:e("network_troubleshooting"),size:"medium",leadingIcon:b.Link.CSS,onPress:n}))},e("device_offline"))}function $K(t,o){switch(gP(o)){case"network-crash":t.setTag("error_category","network-crash");break;case"crash":default:t.setTag("error_category","react-crash")}}function gP(t){return t.name==="FirebaseError"&&t.code==="unavailable"?"network-crash":"crash"}c();var vi=v(P());c();var hP=v(P());function Zv(t){let{children:o,ssrRequestPath:e,ssrRouterContext:n}=t;return n?hP.createElement(s1,{location:e,context:n},o):hP.createElement(MS,null,o)}c();var eC=v(P());function z3(t="https://policies.gitbook.com/privacy/cookies",o=!1){let e=bo(),n=ue();eC.useEffect(()=>{if(!o)return;let r=!1;if(Kg()!==null)return;let i=e.notify({title:n("cookies"),details:n("cookie_prompt",eC.createElement(za,{url:t},n("cookie_policy"))),timeout:0,icon:b.Cookies.CSS,actions:[{label:n("reject_all"),onPress:()=>{r=!0,VC(!1),i()}}],onClose:()=>{r||VC(!0)}})},[])}c();var me=v(P()),gs=v(H());c();var K3=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');c();var Ir=v(P()),Ou=v(H());var{TOC_DESKTOP_WIDTH:JK}=on,qK=Z.createResponsiveComponent(Ou.TouchableOpacity),XK=U.createInteractiveComponent(qK),yP=JK-g.large-g.large;function tC(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=t,[,s]=T(N),{getNavigationLinkProps:l}=we(),d={color:$a(n)==="light"?Q.lightModeText.base:Q.darkModeText.base},p=(e?e?.publishedTitle||e?.title:o.publishedTitle||o.title)||Va,m=p.length>14,f=m?2:1,h=Qi(o);return Ir.createElement(XK,{style:[C.row,C.alignItemsCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:o.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:p},r?Ir.createElement(Z.View,{style:[C.flex1,C.row,C.alignItemsCenter,Zm.headerDesktop],mobileStyle:Zm.logoMobile,desktopStyle:Zm.logoDesktop},Ir.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},Ir.createElement(en,{source:{uri:aa(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:yP,width:"auto",height:"auto"}})),Ir.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},Ir.createElement(en,{source:{uri:aa(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:yP,width:"auto",height:"auto"}}))):Ir.createElement(Ou.View,{style:[Zm.headerDesktop,C.flex1,C.row,C.justifyStart,C.alignItemsCenter]},Ir.createElement(Ou.View,null,Ir.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},Ir.createElement(jC,{content:e||o,renderFor:"public-content",size:_.BUTTON_L,style:[g.Margin.right400]})),Ir.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},Ir.createElement(jC,{content:e||o,renderFor:"public-content",size:_.ICON_XL,style:[g.Margin.right400]}))),Ir.createElement(Z.Text,{style:Zm.textOverflow,mobileStyle:[s.Heading3],desktopStyle:[m?s.Heading3:s.Heading2]},Ir.createElement(U.Text.Child,{style:[d],numberOfLines:f,ellipsizeMode:"tail",inactiveStyle:s.text,activeStyle:h==="bold"?s.textStandout:s.primary},p))))}var Zm=Ou.StyleSheet.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:yP}});c();var Du=v(P()),eg=v(H());c();var bi=v(P()),vl=v(H());var QK=Z.createResponsiveComponent(U.TouchableOpacity),ZK=U.createInteractiveComponent(Z.View);function bP(t){return`hsla(${Ex(t.colors.text.primary).h}, 60%, 70%, 0.1)`}var G3=bi.forwardRef(function(o,e){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:s="primary",children:l,expanded:u=!1,onChevronPress:d,active:p=!1,onPress:m,textStyle:f,href:h}=o,y=U.useInteractiveState(),[S,w]=T(eG),[,R]=T(N),k=s==="primary"?R.textMid:R.textMuted,x=p?R.primary:k,E=m?QK:ZK,A=u?b.ChevronDown:b.ChevronRight;return bi.createElement(E,{ref:e,...y.events,style:[w.tocMenuItem,g.Padding.horizontal200,g.Margin.right200,n?null:g.Margin.bottom100,p?{backgroundColor:bP(S)}:null],hoverStyle:m&&!p?w.tocMenuItemHovered:null,mobileStyle:w.tocMenuItemMobile,desktopStyle:w.tocMenuItemDesktop,onPress:m,href:h&&m?h:void 0},r?bi.createElement(vl.View,{style:[g.Margin.right400]},bi.createElement(r,{size:_.ICON_M,style:[x,f]})):null,i?bi.createElement(vl.View,{style:[g.Margin.right400]},bi.createElement(i,{size:_.ICON_M,style:[x,f]})):null,bi.createElement(vl.Text,{style:[C.flex1,g.Padding.vertical100,s==="group"?R.GroupTitle:R.Label,x,f,p?R.Bold:null]},l),d?bi.createElement(vl.TouchableOpacity,{style:[C.row,C.alignItemsCenter],onPress:d},bi.createElement(A,{size:_.ICON_S,style:x})):null,a?bi.createElement(vl.View,{style:w.tocMenuItemRightIcon},bi.createElement(a,{size:_.ICON_M,style:R.textMuted})):null)}),eG=j.create({tocMenuItem:t=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:t.radiuses.medium,minHeight:_.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:t=>({backgroundColor:t.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:g.small,marginRight:(_.S-_.ICON_M)/2}});var vP=150,tG=200,oG=150;function oC(t){let[,o]=T(j3);return Du.createElement(Z.View,{style:o.wrapper,mobileStyle:[o.wrapperMobile,g.Margin.vertical200,g.Margin.horizontal200],desktopStyle:[o.wrapperDesktop,g.Margin.vertical200,g.Margin.horizontal100]},Du.createElement(eg.ScrollView,null,t.children))}function nC(t){let{title:o,kind:e="default",active:n=!1,onPress:r,isLast:i}=t,[a,s]=T(j3),[,l]=T(N);return Du.createElement(U.TouchableOpacity,{hoverStyle:s.menuItemHovered,style:[s.menuItem,g.Padding.vertical100,g.Padding.horizontal200,i?null:g.Margin.bottom100,n?{backgroundColor:bP(a)}:null],onPress:r},Du.createElement(eg.View,{style:[C.row,C.alignItemsCenter,C.justifySpaceBetween]},Du.createElement(U.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,e==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},o),Du.createElement(eg.View,{style:[g.Margin.left400]},t.rightElement)))}var j3=j.create({wrapper:t=>({backgroundColor:t.colors.background.main}),wrapperDesktop:{minWidth:vP,maxWidth:tG,maxHeight:oG},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:t=>({borderRadius:t.radiuses.large}),menuItemHovered:t=>({backgroundColor:t.colors.background.muted})});c();var In=v(P()),Au=v(H());function Ap(t){let{backgroundColor:o,currentPage:e,collection:n,variants:r,currentVariant:i,revision:a}=t,{getNavigationLinkProps:s}=we(),l=ue(),u=In.useRef(null),[,d]=T(N),p=In.useMemo(()=>e?ao(a,e.id):"",[e]);return In.createElement(Sc,{ref:u,wrapper:Ii,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:m,toggle:f,opened:h})=>{let y=h?b.ChevronUp:b.ChevronDown;return In.createElement(W,{ref:m,size:"medium",rightIcon:y,kind:$a(o||Q.WHITE)?"default_bold":"default",alignItems:"start",onPress:f,style:[g.Padding.horizontal0]},In.createElement(Au.View,{style:[Y3.variantsPicker]},In.createElement(Au.Text,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||Va)))}},In.createElement(Vn,{kind:"menu",preferredAlignment:"start"},In.createElement(In.Suspense,{fallback:In.createElement(Mo,{size:"small"})},In.createElement(oC,null,r.map((m,f,h)=>In.createElement(nC,{key:m.key,title:m.title,active:m.key===i.key,isLast:f===h.length-1,rightElement:m.key===n.primarySpace?In.createElement(Au.Text,{style:[d.textMuted,d.Uppercase,Y3.mainLabel]},l("main")):null,...s({screen:{space:m.key,page:p}},()=>{u.current?.close()})}))))))}var Y3=Au.StyleSheet.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:vP}});c();var Cl=v(P());var nG={color:Gp,radius:fk},Ra=Cl.createContext([nG,()=>{}]),$3="@gitbook/themeMode";function rG(t,o){let[e,n]=Cl.useState(()=>{if(typeof window>"u"||!t.themeModeTogglable)return o;let i=ra.get($3);return i!==null?i:o});return{themeMode:e,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return ra.set($3,a),re(hx(t,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function J3(t){let{content:o,isPreview:e,children:n}=t,{color:r,radius:i}=gk(o),{themeMode:a,toggleThemeMode:s}=rG(o,r);Cl.useEffect(()=>{window?.document.body.classList.remove("theme-overlay")},[]);let l=e?r:a??r;return na(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),Cl.createElement(Ra.Provider,{value:[{color:l,radius:i},s]},n)}c();var rC=v(P());function $o(t){let[{color:o}]=rC.useContext(Ra);return rC.useMemo(()=>Cy(t,o),[o,t])}c();var iC=v(P());var tg=iC.forwardRef(function(o,e){let{contentRef:n,style:r,kind:i="default",...a}=o,s=nt(n);return iC.createElement(za,{ref:e,url:s.href,onPress:l=>{l.nativeEvent.metaKey||l.nativeEvent.ctrlKey||(l.preventDefault(),s.open())},kind:i,sameWebTab:!1,style:[yo.Body,yo.SemiBold,r],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:o.title,...a},o.title)});c();var aC=v(P());function Bu(t){let{content:o,mode:e="switch"}=t,[{color:n},r]=aC.useContext(Ra),{headerBackgroundColor:i}=$o(o);return aC.createElement(_E,{onValueChange:r,value:n==="dark",mode:e,backgroundColor:i})}c();var X3=v(P());c();var q3=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function sC(t){let{children:o,style:e}=t;return X3.createElement(F,{style:[q3.publicContainer,e]},o)}c();var cc=v(P()),SP=v(H());c();function CP(t){switch(qh(t)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:Q.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:Q.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:Q.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:Q.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:Q.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:Q.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:Q.darkModeText.base}}}function Q3(t){let[,{open:o}]=Sh(),e=ue();return cc.createElement(W,{icon:b.SearchPublic,onPress:()=>o(),accessibilityLabel:e("search"),...t})}function Z3(t){let{contentTheme:o,headerBackgroundColor:e}=t,[,{open:n}]=Sh(),r=ue(),{textColor:i}=CP(e);return cc.createElement(W,{icon:b.SearchPublic,size:"medium",kind:o==="bold"?"default_bold":"default",alignItems:"start",onPress:()=>n(),style:[g.Padding.horizontal0],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function cC(t){let{headerBackgroundColor:o=Q.WHITE,hasAISearch:e=!1}=t,[,{open:n}]=Sh(),r=ue(),[,i]=T(N),[,a]=T(iG),{backgroundColor:s,textColor:l}=CP(o),u=r(e?"search_placeholder_ask":"search"),d=e?b.SearchOrAsk:b.SearchPublic;return cc.createElement(U.TouchableOpacity,{style:[{backgroundColor:s},a.searchBarButton,C.row,C.justifySpaceBetween,C.alignItemsCenter,g.Padding.left400,g.Padding.right200],activeStyle:a.searchBarButtonActive,accessibilityLabel:u,onPress:()=>n()},cc.createElement(SP.View,{style:[C.row,C.alignItemsCenter]},cc.createElement(d,{size:_.ICON_XS,style:[{color:l},g.Margin.right200]}),cc.createElement(U.Text.Child,{style:[i.Label,{color:l}],activeStyle:i.text},u)),cc.createElement(SP.View,null,cc.createElement(yn,{shortcut:ze.SEARCH_OPEN})))}var iG=j.create({searchBarButton:t=>({width:"100%",height:_.BUTTON_L,borderRadius:t.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:t=>({borderColor:t.colors.border.mid})});var{PAGE_BODY_DESKTOP_H_PADDING:aG,TOC_DESKTOP_WIDTH:sG,PUBLIC_DESKTOP_HEADER_HEIGHT:cG,PUBLIC_MOBILE_HEADER_HEIGHT:lG}=on,uG=Z.createResponsiveComponent(W),dG=Z.createResponsiveComponent(ve);function tN(t){let{space:o}=t,e=xi(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=$o(o),s=me.useMemo(()=>({...e,color:$a(n)}),[n,e]);return me.createElement(Ha,{theme:s},r?me.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},me.createElement(eN,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):me.createElement(eN,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function eN(t){let{space:o,headerDisabled:e,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:s,collectionSpaces:l,currentPage:u}=t,[,d]=T(hG[e?"none":Qi(o)==="default"?"defaultWithBorder":"default"]),p=hf(fn(_f),me.useState(!1)),f=zi(u).tableOfContents,h=[Sl.searchWrapper,g.Padding.left600,g.Padding.right200],[y]=me.useContext(Ra);return me.createElement(me.Fragment,null,me.createElement(dG,{tag:"header",desktopStyle:Sl.desktopHeight,mobileStyle:Sl.mobileHeight,style:[d.spaceHeader,C.row,C.alignItemsCenter,e?null:{backgroundColor:n}]},me.createElement(sC,{style:[O.padding.horizontal200,O.flex.alignItemsCenter,K3.withStickyHeader]},f?me.createElement(uG,{desktopStyle:"hidden",mobileStyle:"visible",icon:b.Menu,style:g.Margin.right200,kind:"grey",rounded:!0,title:p.opened?"Hide Table of Content":"Show Table of Content",onPress:p.toggle}):null,me.createElement(tC,{space:o,collection:s,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[Sl.autoWidth,g.Padding.left0,g.Padding.right400,C.shrink1,C.justifyStart,f?null:g.Margin.left200],desktopStyle:[Sl.autoWidth,g.Padding.left400,g.Padding.right600,C.justifyStart]}),l&&s?.publishingType==="variants"?me.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},me.createElement(Ap,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:s,revision:a,variants:l,currentVariant:o})):null,me.createElement(pG,{space:o,linkColor:i}),o.themeModeTogglable?me.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},me.createElement(Bu,{content:o})):null,me.createElement(Ha,{theme:y},me.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,Sl.searchBarContainer,C.flex1]},me.createElement(cC,{contentTheme:Qi(o),headerBackgroundColor:n,hasAISearch:o.hasAISearch})),me.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},me.createElement(Z3,{contentTheme:Qi(o),headerBackgroundColor:n}))))),me.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},me.createElement(Ha,{theme:y},me.createElement(gG,{space:o}))))}function pG(t){let{space:o,linkColor:e}=t;return me.createElement(Z.View,{style:[C.row,C.justifyEnd,C.alignItemsCenter,C.flex1,g.Padding.left400],mobileStyle:"hidden"},(o.headerLinks||[]).map((n,r,i)=>n.title?me.createElement(fG,{key:n.title,headerLink:n,linkColor:e}):null))}function fG(t){let{headerLink:o,linkColor:e}=t,n=U.useInteractiveState({hoverDelay:250}),r=U.useInteractiveState(),i=a=>me.createElement(tg,{ref:a.ref,style:[g.Padding.horizontal400,e?{color:e}:null],title:o.title,contentRef:o.to,...a.events});return o.links&&o.links.length>0?me.createElement(Wa,{opened:n.hovered||r.hovered,wrapper:Ii,anchor:({ref:a})=>i({ref:a,events:n.events})},me.createElement(Vn,{kind:"menu",preferredAlignment:"start"},me.createElement(gs.View,{...r.events},me.createElement(oC,null,o.links.map((a,s,l)=>me.createElement(mG,{key:s,link:a,isLast:s===l.length-1})))))):i({})}function mG(t){let{link:o,isLast:e}=t,n=nt(o.to);return me.createElement(nC,{kind:"link",title:o.title,isLast:e,onPress:r=>{r.nativeEvent.metaKey||r.nativeEvent.ctrlKey||(r.preventDefault(),n.open())}})}function gG(t){let{space:o}=t,[e,n]=me.useState(!1),[,{headerLinksMobile:r}]=T(yG),i=e?b.ChevronDown:b.ChevronRight;return!o.headerLinks||o.headerLinks.length===0?null:me.createElement(gs.View,{style:[Sl.headerLinksMobile,r,C.justifyCenter,g.Padding.all400]},me.createElement(gs.View,{style:[Sl.headerLinksMobileButton]},me.createElement(W,{size:"large",rightIcon:i,alignItems:"start",onPress:()=>n(a=>!a),style:[g.Padding.horizontal0]},"Links")),e?me.createElement(gs.View,null,o.headerLinks.map((a,s,l)=>a.title?me.createElement(oN,{space:o,link:a,isLast:s===l.length-1}):null)):null)}function oN(t){let{link:o,space:e,isLast:n}=t,[r,i]=me.useState(!1),a="links"in o?o.links||[]:[],s=r?b.ChevronDown:b.ChevronRight,l=Qi(e);return me.createElement(gs.View,{style:[C.column]},me.createElement(gs.View,{style:[C.row,C.alignItemsCenter]},me.createElement(tg,{style:[g.Padding.top200,n?null:g.Padding.bottom200],kind:l==="bold"?"bold":"default",title:o.title,contentRef:o.to}),a.length>0?me.createElement(W,{size:"large",kind:"link",rightIcon:s,alignItems:"start",onPress:()=>i(u=>!u),style:[g.Padding.horizontal0]}):null),r?me.createElement(gs.View,{style:[g.Margin.left200,g.Margin.bottom200]},a.map((u,d,p)=>me.createElement(oN,{key:d,space:e,link:u,isLast:d===p.length-1}))):null)}var hG={none:j.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1})}),default:j.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:j.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1,position:"sticky",top:0})})},yG=j.create({headerLinksMobile:t=>({backgroundColor:t.colors.background.main,borderBottomWidth:1,borderBottomColor:t.colors.border.main})}),Sl=gs.StyleSheet.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:233},autoWidth:{width:"auto"},tocDesktop:{width:sG},headerLinks:{paddingHorizontal:aG-g.medium},headerLinksMobile:{minHeight:_.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:lG},desktopHeight:{height:cG}});c();var Jo=v(P());c();var Yr=v(P()),lC=v(H());c();var Pa=v(P()),wl=v(H());function nN(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,i=vx(),[,a]=T(N),s=ue(),[{result:l,error:u}]=Rh([ux(o.key,n.id,i)]);if(u)return null;let d=p=>{p!==l?.rating&&(re({...r,type:"public_content_page_feedback_post",rating:p}),tk(m=>{dx(m,{space:o.key,page:n.id,revision:e.id,visitorId:i,rating:p,previousRating:l?.rating})}))};return Pa.createElement(wl.View,{style:[C.row,C.alignItemsCenter]},Pa.createElement(wl.View,null,Pa.createElement(wl.Text,{style:[a.GroupTitle,a.textMuted]},s("was_it_helpful"))),Pa.createElement(wl.View,{style:[C.row,C.alignItemsCenter]},Pa.createElement(wP,{tooltip:s("poor_content"),active:l?.rating==="bad",rating:"bad",onPress:d}),Pa.createElement(wP,{tooltip:s("ok_content"),active:l?.rating==="ok",rating:"ok",onPress:d}),Pa.createElement(wP,{tooltip:s("excellent_content"),active:l?.rating==="good",rating:"good",onPress:d})))}function wP(t){let{active:o,tooltip:e,rating:n,onPress:r}=t;return Pa.createElement(Ua,{tooltip:e},(i,a)=>Pa.createElement(wl.TouchableOpacity,{ref:a,onPress:()=>r(n),style:[g.Margin.left200],accessibilityLabel:e,...i.events},Pa.createElement(tT,{active:o,interactive:!0,rating:n,size:_.BUTTON_S})))}c();var ka=v(P()),Bp=v(H()),rN=v(DE());var RP=28,bG=U.createInteractiveComponent(Ax);function Lp(t){return ka.createElement(Dl,null,ka.createElement(vG,{...t}))}function vG(t){let{space:o,floating:e}=t,[n,r]=T(CG),[,i]=T(N),a=ue(),s=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:o.key}),l=`https://${Oa.homepage.domain}/?${s.toString()}`,u=()=>{re(Ft(o,{type:"public_content_click_trademark"}))};return ka.createElement(Bp.View,{style:e&&r.floatingWrapper},e?ka.createElement(rN.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,ka.createElement(Bp.View,{style:e&&[g.Padding.horizontal400,g.Padding.bottom400,r.floatingBackground]},ka.createElement(U.TouchableOpacity,{style:[C.row,C.alignItemsCenter,...e?[r.trademarkFloating,g.Padding.vertical400,g.Padding.horizontal400]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},ka.createElement(bG,{size:RP,style:i.textMuted,activeStyle:i.primary}),ka.createElement(Bp.View,{style:[C.flex1,g.Padding.left400]},ka.createElement(U.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",ka.createElement(Bp.Text,{style:i.Bold},"GitBook")))))))}var CG=j.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:g.medium},floatingBackground:t=>({backgroundColor:t.colors.background.main}),tradeMarkDefault:t=>({backgroundColor:"transparent"}),trademarkFloating:t=>({backgroundColor:t.colors.background.standout,borderRadius:t.radiuses.xlarge})});function iN(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,[,i]=T(N),[,a]=T(SG),s=ue(),l=tf(n.edits),u=fd(n),d=!!l,p=o.hasPublicFeedback,m=!o.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!p)return null;let f=Yr.createElement(Sb,null,Yr.createElement(Yr.Suspense,{fallback:null},Yr.createElement(nN,{space:o,revision:e,page:n,analyticsContext:r})));return Yr.createElement(lC.View,{style:[g.Padding.top600,a.footer]},Yr.createElement(Z.View,{tabletStyle:C.column,desktopStyle:C.row,style:[C.alignItemsCenter,C.justifySpaceBetween]},d?Yr.createElement(Z.View,{tabletStyle:g.Margin.bottom400,style:m?[]:[C.flex1]},Yr.createElement(lC.Text,{style:[i.textMuted,i.Label]},s("last_modified",Yr.createElement(bI,{value:new Date(l.updatedAt),onlyDate:!1})))):null,m?Yr.createElement(Lp,{space:o,floating:!1}):null,p?Yr.createElement(Z.View,{tabletStyle:m?"hidden":"visible",desktopStyle:"visible"},f):null),m&&p?Yr.createElement(Z.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[C.row,C.flex1,C.justifyCenter,g.Margin.top600]},f):null)}var SG=j.create({footer:t=>({borderTopColor:t.colors.border.mid,borderTopWidth:1})});c();var xa=v(P()),Mp=v(H());var wG=U.createInteractiveComponent(oi),RG={[Ue]:null,[je]:g.Margin.left200,[Bo]:null},aN=xa.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=T(N),[,i]=T(sN),a=ue();return xa.createElement(Mp.View,{style:[i.pageOutline]},xa.createElement(Mp.View,{style:[C.row,C.alignItemsCenter,g.Padding.horizontal600,g.Margin.bottom200]},xa.createElement(Mp.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(s=>s.type===null||s.type===at?null:xa.createElement(PG,{key:s.key,section:s,active:n===s.key})))});function PG(t){let{section:o,active:e}=t,[,n]=T(N),[,r]=T(sN),{navigateToHash:i}=we();return xa.createElement(U.TouchableOpacity,{style:[C.row,g.Padding.horizontal600,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?xa.createElement(Nr,{backgroundColor:eu[o.tag]||Q.orange.base,style:[r.sectionTag,g.Margin.right100,C.alignSelfCenter]},xa.createElement(Mp.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,xa.createElement(wG.Child,{style:[n.Label,n.textMid,o.type&&RG[o.type],...e?[n.primary,n.Medium]:[]],hoverStyle:n.primary},o.title))}var sN=j.create({pageOutline:t=>({maxWidth:on.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:g.xsmall,marginBottom:g.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:_.XXS,height:_.XXS,paddingHorizontal:g.small,justifyContent:"center"}});c();var Rl=v(P());function cN(t){let{space:o,page:e}=t,[{color:n},r]=Rl.useContext(Ra),i=ue(),{headerDisabled:a}=$o(o),{tableOfContents:s}=zi(e),l=!s&&a,u=[l?{key:"pageRead.switchTheme",icon:n==="light"?b.ThemeDark:b.ThemeLight,title:i(n==="light"?"switch_to_dark_theme":"switch_to_light_theme"),trigger:r}:null].filter(le),[d,p]=ev(t,u);return Rl.createElement(Rl.Fragment,null,d,l&&Rl.createElement(Q3,{kind:"grey",size:"large",title:"Search",rounded:!0}),Rl.createElement(fh,{palette:p,icon:b.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}c();var _p=v(P());c();var Ia=v(P()),mC=v(H());c();var kG=750,xG=g.xxlarge,IG=kG+2*xG,PP=300,TG=220;function lN(t=0){return t+PP+IG+TG}c();var ng=v(P()),uC=v(H());c();var Tn=v(P()),og=v(H());function kP(t){return Tn.createElement(Tn.Suspense,{fallback:Tn.createElement(uN,{...t})},Tn.createElement(EG,{...t}))}function EG(t){let{treePage:o}=t,{page:e}=o,n=nt(e.type==="link"?e.target:void 0);return Tn.createElement(uN,{...t,contentRef:n})}function uN(t){let{revision:o,treePage:e,parent:n,currentPage:r,contentRef:i,isLastPage:a}=t,{page:s}=e,{getNavigationHref:l,navigateToPage:u}=Gc(),d=r?r.id:null,p=d===s.id,m=!!d&&vT(o,s.id,d),[f,h]=Tn.useState(m),[,y]=T(OG),S=w=>{w.isDefaultPrevented()||w.nativeEvent.metaKey||w.nativeEvent.ctrlKey||(w.preventDefault(),s.type==="document"?u(o,s.id):s.type==="link"&&i?.open())};return Tn.useEffect(()=>{m&&h(!0)},[m]),Tn.createElement(og.View,{style:[s.type==="group"&&g.Margin.vertical400]},Tn.createElement(G3,{isLast:a,kind:s.type==="group"?"group":!n||n.type==="group"?"primary":"secondary",icon:s.emoji?gt(_o,{code:s.emoji}):void 0,rightIcon:s.type==="link"?i?i.secondaryIcon:Se:void 0,active:p,expanded:f,onPress:s.type==="group"?void 0:S,href:(()=>s.type==="link"?i?.href:l(o,s.id))(),onChevronPress:e.pages.length>0&&s.type==="document"?w=>{w.preventDefault(),h(R=>!R)}:void 0},s.title),(f||s.type==="group")&&e.pages.length>0?Tn.createElement(og.View,{style:[y.tocItemChildren,...s.type==="group"?[g.Margin.left0]:[g.Margin.left200,g.Margin.top100,g.Margin.bottom200]]},e.pages.map((w,R)=>Tn.createElement(og.View,{style:s.type==="group"?null:g.Margin.left200,key:w.renderKey},Tn.createElement(kP,{...t,treePage:w,isLastPage:R===e.pages.length-1,parent:s}))),s.type==="group"?null:Tn.createElement(og.View,{style:y.tocItemChildrenLine})):null)}var OG=j.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:t=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:t.colors.border.main})});function dC(t){let{showingTrademark:o,revision:e}=t,n=ng.useMemo(()=>$C(e.pages,e.rootPages),[e]);return ng.createElement(uC.ScrollView,{style:C.flex1,contentContainerStyle:[g.Padding.vertical400,o?DG.scrollviewWithTrademark:null]},n.map((r,i)=>ng.createElement(kP,{key:r.renderKey,...t,treePage:r,isLastPage:i===n.length-1})))}var DG=uC.StyleSheet.create({scrollviewWithTrademark:{paddingBottom:g.medium+RP+2*g.medium}});c();var rr=v(P()),pC=v(H());function fC(t){let{space:o,collection:e,collectionSpaces:n,currentPage:r,revision:i}=t,[,a]=T(dN),{headerBackgroundColor:s,headerLogoURL:l,headerDisabled:u}=$o(o),d=n&&e?.publishingType==="variants"?rr.createElement(Ap,{key:"variants-picker",currentVariant:o,collection:e,variants:n,revision:i,currentPage:r}):null;return rr.createElement(rr.Fragment,null,u?rr.createElement(rr.Fragment,null,rr.createElement(AG,{key:"space-header",space:o,collection:e,headerBackgroundColor:s,headerLogoURL:l,variantsSwitcher:d}),rr.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,C.row,C.justifySpaceBetween,C.alignItemsCenter,g.Margin.right400]},rr.createElement(pC.View,{style:[C.flex1,C.row,g.Margin.vertical400]},rr.createElement(cC,{key:"search-bar",headerBackgroundColor:s,hasAISearch:o.hasAISearch})),o.themeModeTogglable?rr.createElement(pC.View,{style:[g.Margin.left400]},rr.createElement(Bu,{content:o,mode:"button"})):null)):null)}function AG(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=t,[,a]=T(dN);return rr.createElement(Z.View,{style:[a.spaceTitleWrapper,C.row,C.justifyCenter,C.alignItemsCenter],mobileStyle:"hidden",desktopStyle:"visible"},rr.createElement(tC,{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:C.flex1}),rr.createElement(pC.View,{style:[C.alignSelfCenter,g.Margin.horizontal200]},i))}var dN=j.create({searchBarSection:t=>({borderColor:t.colors.border.mid,borderBottomWidth:1}),selectedTab:t=>({borderLeftColor:t.colors.primary.main,borderLeftWidth:2}),hoverTab:t=>({backgroundColor:t.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:_.BUTTON_M,lineHeight:_.BUTTON_M,borderRadius:0,paddingHorizontal:g.medium},mainBadge:{fontFamily:Bx,fontSize:Yg.xxsmall,lineHeight:_.BUTTON_M,...Jg.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:t=>({height:_.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:BG}=on;function pN(t){let{space:o}=t,e=ue(),{headerDisabled:n}=$o(o),[,r]=T(LG[n?"none":"default"]),{desktopSidebarWidth:i}=Ia.useContext(sa),a=Ia.useMemo(()=>({[lN(i)]:"visible"}),[i]),s=!o.hideTrademark;return Ia.createElement(Z.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,C.row,C.justifyEnd]},Ia.createElement(ve,{tag:"nav",accessibilityLabel:e("table_of_contents"),style:[MG.tocDesktop,C.column]},Ia.createElement(mC.View,{style:[C.flex1,g.Padding.left600]},Ia.createElement(fC,{...t}),Ia.createElement(dC,{...t,showingTrademark:s})),s?Ia.createElement(Lp,{floating:!0,space:o}):null))}var LG={none:j.create({tocDesktopWrapper:t=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})}),default:j.create({tocDesktopWrapper:t=>({position:"sticky",top:g.xxlarge,height:`calc(100vh - ${BG}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})})},MG=mC.StyleSheet.create({tocDesktop:{width:PP}});c();var Gt=v(P()),$i=v(H());var _G=Z.createResponsiveComponent($i.Animated.View),NG=Z.createResponsiveComponent($i.Animated.createAnimatedComponent($i.TouchableOpacity));function mN(t){let{currentPage:o,space:e,collection:n,collectionSpaces:r,revision:i}=t,a=ue(),s=hf(fn(_f),Gt.useState(!1)),[,l]=T(N),{sidebarMobileLeft:u,showOverlay:d}=PI(s),[p,m]=T(gN);Gt.useEffect(()=>{s.close()},[o?.id]);let f=!e.hideTrademark,h=r&&n?.publishingType==="variants"?Gt.createElement(Ap,{key:"variants-picker",currentVariant:e,collection:n,variants:r,revision:i,currentPage:o}):null,y=!!e.themeModeTogglable,S=y?Gt.createElement($i.View,{style:[g.Margin.right400]},Gt.createElement(Bu,{content:e,mode:"button"})):null;return Gt.createElement(Nn,null,Gt.createElement(_G,{style:[m.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Gt.createElement(ve,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[C.column,C.flex1]},Gt.createElement($i.View,{style:C.flex1},Gt.createElement(VG,{key:"mobile-closing-bar",switcher:h??S}),y&&h?Gt.createElement($i.View,{style:[C.row,C.justifySpaceBetween,C.alignItemsCenter,g.Padding.vertical200,g.Padding.horizontal400,m.mobileChangeAppearance]},Gt.createElement($i.Text,{style:[l.Label,l.text]},a("theme_change_appearance")),Gt.createElement(Bu,{content:e})):null,Gt.createElement(fC,{...t}),Gt.createElement($i.View,{style:[g.Padding.left400,C.flex1,m.sidebarWrapper]},Gt.createElement(dC,{...t,showingTrademark:f}))),f?Gt.createElement(Lp,{floating:!0,space:e}):null)),Gt.createElement(NG,{style:[m.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-hh.WIDTH.MOBILE,0],outputRange:[p.colors.backdrop.transparent,p.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:s.closeMobile}))}function VG(t){let[,o]=T(gN),e=hf(fn(_f),Gt.useState(!1));return Gt.createElement(Z.View,{style:[o.mobileClosingBar,g.Padding.horizontal200,C.justifySpaceBetween,C.alignItemsCenter,C.row],mobileStyle:"visible",desktopStyle:"hidden"},Gt.createElement(W,{icon:b.X,size:"large",kind:"default",onPress:()=>e.closeMobile(),style:[C.alignSelfCenter,g.Padding.horizontal200],accessibilityLabel:"Close"}),t.switcher)}var fN=10,gN=j.create({sidebar:t=>({backgroundColor:t.colors.background.main,width:hh.WIDTH.MOBILE,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:fN}),sidebarWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:_.BUTTON_M,height:_.BUTTON_M,top:(_.M-_.BUTTON_M)/2,left:hh.WIDTH.MOBILE+_.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:fN-1},mobileClosingBar:t=>({height:_.L,borderBottomWidth:1,borderBottomColor:t.colors.border.mid,backgroundColor:t.colors.background.main}),mobileChangeAppearance:t=>({borderBottomWidth:1,borderColor:t.colors.border.mid})});function hN(t){return _p.createElement(_p.Fragment,null,_p.createElement(pN,{...t}),_p.createElement(mN,{...t}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:FG}=on;function yN(t){let{space:o,revision:e,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:s,currentPage:l}=t,u=ue(),[d,p]=T(HG);YE(o);let{headerDisabled:m}=$o(o),f=zi(l),h=nE();na(w=>{w.writeAsync([{type:"meta",name:"description",content:l&&l.description?l.description:""},{type:"meta",name:"og:description",content:l&&l.description?l.description:""},{type:"meta",name:"og:image",content:o.socialPreviewURL?aa(o.socialPreviewURL,{height:640,width:1280,fit:"contain"}):UG(o,e,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),o.visibility==="in-collection"?(w.setTitle(l?l.title:u("page_not_found"),i?.publishedTitle||i?.title||Va),w.writeAsync([{type:"meta",name:"robots",content:i?.visibility!=="public"?"noindex, nofollow":"index"}])):(w.setTitle(l?l.title:u("page_not_found"),o.publishedTitle||o.title||Va),w.writeAsync([{type:"meta",name:"robots",content:o.visibility!=="public"?"noindex, nofollow":"index"}]))}),cd(l?zg(o,l,{screen:"space",visibility:o.visibility,pageLayout:fd(l),diffMode:!1}):Ft(o,{screen:"space_page_notfound",visibility:o.visibility}),[o.key,l?.id]),y1(o,l?.id??null);let y=!!f.tableOfContents,S=!!f.outline;if(!l&&n.page){let[w]=NI([gx(o.key,n.page)]);if(w&&e.pages[w.page])return Jo.default.createElement(jO,{to:ao(e,w.page)})}return Jo.default.createElement(Jo.default.Fragment,null,Jo.default.createElement(zG,{space:i||o,assetHostname:s}),Jo.default.createElement(Z.View,{style:[C.flex1,p.spacePageContainerBg],mobileStyle:C.column,desktopStyle:C.row},Jo.default.createElement(sC,null,y?Jo.default.createElement(hN,{space:o,revision:e,currentPage:l?.type==="document"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,Jo.default.createElement(Nr,{style:[p.spacePageBody],backgroundColor:d.colors.background.main},Jo.default.createElement(Jo.default.Suspense,{fallback:Jo.default.createElement(Zb,{withPageOutline:l?.layout!=="landing"})},l&&l.type==="document"?Jo.default.createElement(Xb,{screen:n,key:WG(n,e,l),space:o,changeRequest:void 0,revision:e,page:l,scrollRef:h,readOnly:!0,withComments:!1,withToC:y,analyticsContext:r,outline:S?aN:void 0,toolbar:cN,footer:Jo.default.createElement(iN,{space:o,revision:e,page:l,analyticsContext:r}),sideColumnStickyTop:g.large+(m?0:FG)}):Jo.default.createElement(z2,{statusCode:404},Jo.default.createElement(df,{title:u("page_not_found"),action:Jo.default.createElement(MI,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:o.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}var HG=j.create({spacePageContainerBg:t=>({backgroundColor:t.colors.background.main}),spacePageBody:{flex:1}});function WG(t,o,e){let n=t.space;return n+=`/${t.changeRequest||"main"}`,n+=`/${o.conflicts?"conflicts":"normal"}`,n+=`/${e.id}`,t.diff&&(n+="/diff"),t.revision&&(n+="/revision"),n}function UG(t,o,e){let n=e&&o.rootPages[0]!==e.id?`/page/${e.id}`:"",{primaryColor:r,headerLogoURL:i}=Cy(t),a=Qi(t),s=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(hc(i||t.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${ug()}/share/space/thumbnail/${t.key}${n}.png?${s}`}function zG(t){let{space:o,assetHostname:e}=t,n=fx(o,"public-content"),[r]=T(),[i,a]=Jo.default.useState(n.iconURL||(n.emoji?`${e}${SI(n.emoji)}`:null));return Jo.default.useEffect(()=>{if(i)return;let s=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=s,l.height=s,u.fillStyle=r.colors.background.main,u.fillRect(0,0,s,s);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${s*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(o.title.slice(0,1),s/2,s/2),a(l.toDataURL("image/png"))},[o.title,a]),na(s=>{s.writeAsync([{type:"link",rel:"icon",href:i?hc(i):`${e}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?hc(i):`${e}/public/images/icon-512.png`}])}),null}c();var Fe=v(P()),Tr=v(H());var KG=Z.createResponsiveComponent(ve),bN=200,GG=4*(bN+g.small);function vN(t){let{space:o}=t,[,e]=T(N),[,n]=T($G),r=o.footer,{footerLogoURL:i}=$o(o);return Fe.createElement(Fe.Fragment,null,r?Fe.createElement(KG,{tag:"footer",style:[C.alignItemsCenter,n.footer]},Fe.createElement(Z.View,{desktopStyle:[hs.desktopContainer]},Fe.createElement(Z.View,{desktopStyle:C.row,mobileStyle:C.column},i?Fe.createElement(Z.View,{style:[C.row,C.alignItemsStart,g.Padding.top700,r?.copyright?null:g.Padding.bottom700],desktopStyle:g.Margin.horizontal900,mobileStyle:g.Margin.horizontal600},Fe.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},Fe.createElement(en,{source:{uri:i},style:hs.footerImageDesktop,loading:"lazy"})),Fe.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},Fe.createElement(Tr.View,{style:g.Margin.left600},Fe.createElement(en,{source:{uri:i},style:hs.footerImageMobile,loading:"lazy"})))):null,r?.linkGroups?Fe.createElement(Z.View,{style:[g.Padding.top700,i?C.alignItemsStart:C.alignItemsCenter,C.flex1,r?.copyright?null:g.Padding.bottom700],mobileStyle:C.alignItemsStart,tabletStyle:g.Padding.left600},Fe.createElement(Z.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:r.linkGroups.length<3&&!i?"visible":"hidden"},Fe.createElement(jG,{linkGroups:r.linkGroups})),Fe.createElement(Z.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:r.linkGroups.length>=3||i?"visible":"hidden"},Fe.createElement(YG,{linkGroups:r.linkGroups}))):null),r?.copyright?Fe.createElement(Z.View,{style:[C.flex1,g.Padding.vertical700]},Fe.createElement(Tr.Text,{style:[hs.copyright,e.textMuted]},r?.copyright)):null)):null)}function jG(t){let{linkGroups:o}=t,[,e]=T(N),n=[],r=o?.map(({title:i})=>i);return o?.forEach(i=>{i?.links?.forEach((a,s)=>{if(n[s]===void 0)return n[s]=[a];n[s].push(a)})}),Fe.createElement(Tr.View,{style:[C.flex1,C.justifyStart,C.row]},Fe.createElement(Tr.View,{style:hs.linkGroupColumnDesktop},Fe.createElement(Tr.View,{style:[C.flex1]},r?.map((i,a)=>Fe.createElement(Tr.View,{key:i,style:[C.alignItemsStart,a>0?g.Margin.top200:null]},Fe.createElement(Tr.Text,{style:[e.text,e.Heading3]},i))))),n.map((i,a)=>Fe.createElement(Tr.View,{key:a,style:hs.linkGroupColumnDesktop},Fe.createElement(CN,{links:i,renderMode:"horizontal"}))))}function YG(t){let{linkGroups:o}=t,[,e]=T(N);return Fe.createElement(Z.View,{style:[C.flex1,C.justifyStart,C.row],desktopStyle:[hs.linkGroupColumnsDesktop,C.row,C.wrap,C.shrink1],mobileStyle:C.column},o.map((n,r)=>Fe.createElement(Z.View,{key:r,desktopStyle:[hs.linkGroupColumnDesktop,g.Margin.top700],mobileStyle:[hs.linkGroupColumnMobile,g.Margin.top700,g.Margin.left600]},Fe.createElement(Tr.View,{style:C.alignItemsStart},Fe.createElement(Tr.Text,{style:[e.text,e.Heading3]},n.title)),Fe.createElement(CN,{links:n.links,renderMode:"vertical"}))))}function CN(t){let{links:o,renderMode:e}=t,[,n]=T(N);return Fe.createElement(Z.View,{style:[C.alignItemsStart,C.flex1,C.column],desktopStyle:e==="vertical"?g.Margin.top600:null,mobileStyle:g.Margin.top200},(o||[]).map((r,i)=>{let a=i===o.length-1;return r.title?Fe.createElement(Fe.Suspense,{fallback:null,key:r.title},Fe.createElement(Tr.View,{style:[hs.referenceLink,e==="horizontal"&&i>0?g.Margin.top200:null]},Fe.createElement(tg,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,e==="horizontal"?null:[g.Padding.top200,a?null:g.Padding.bottom200]]}))):null}))}var $G=j.create({footer:t=>({backgroundColor:t.colors.background.mid})}),hs=Tr.StyleSheet.create({linkGroupColumnsDesktop:{maxWidth:GG,marginTop:-g.xlarge},linkGroupColumnDesktop:{width:bN,marginLeft:g.small,paddingRight:g.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});c();var dn=v(P());c();var un=v(P());c();var rg=v(P());function SN(t){let{query:o,space:e,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=t,a=rg.useCallback(()=>{n("")},[n]);return o.query?rg.createElement(L3,{target:{space:e},query:o,onAnswerLoaded:a,onSubmitQuery:r}):rg.createElement(_3,{target:{space:e},onSubmitAIQuery:r,allowEnterToOpen:i})}c();var xP=v(P());c();var lc=v(P());function wN(t){let{space:o,onUpdateQuery:e,onSubmitAIQuery:n}=t,r=ue(),i=R3(),a=Xv(),s=qv(o.hasAISearch?{space:o}:null),l=lc.useCallback(m=>{switch(m.type){case"recent-search":return{icon:b.Search.CSS,title:m.query,action:r("search")};case"recent-question":return{icon:b.SearchOrAsk.CSS,title:m.question,action:r("search_ask")};case"recommended-question":return{icon:b.SearchOrAsk.CSS,title:m.question,action:r("search_ask")};default:Ee(m)}},[r]),u=lc.useCallback(m=>{switch(m){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(m,f)=>{switch(m.type){case"recent-search":{e(m.query),re(Ft(o,{type:"search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recent-question":{n(m.question),re(Ft(o,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f}));break}case"recommended-question":re(Ft(o,{type:"search_pick_suggestion_question"})),n(m.question);break;default:Ee(m)}},p=lc.useMemo(()=>{let m=o.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],f=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...m,...f,...s]},[i,a,s,o.hasAISearch]);return p.length===0?lc.createElement(Ts,null,r("search_blankslate")):lc.createElement(F,{style:[O.flex.flex1,O.flex.column]},lc.createElement(xc,{data:p,getKey:JG,renderItem:l,renderGroup:u,groupItem:qG,getGroupKey:XG,onOpen:d,style:[O.padding.horizontal400,O.padding.bottom400]}))}function JG(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recent-question":return`recent-question:${t.question}`;case"recommended-question":return`recommended-question:${t.question}`;default:Ee(t)}}function qG(t){return t.type}function XG(t){return t}c();var uc=v(P());function RN(t){let{space:o,hasAI:e,onSubmitAIQuery:n=()=>{}}=t,r=uc.useDeferredValue(t.query),i=ue(),{navigate:a}=we(),s=F3(r,n,e),l=oT({query:r,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:o.key}]}),u=s.suggestion?[s.suggestion,...l]:l,d=uc.useCallback(f=>{if(f.type==="ask-gitbook")return s.onRenderSuggestion(f);switch(f.type){case"page":return{title:f.title,icon:b.Page.CSS,subtitle:f.ancestors.filter(h=>h.type!=="group"&&h.id!==f.page.id).map(h=>h.title).join(" \u203A "),action:i("search_goto_page")};case"section":return{title:f.title,body:f.body,icon:b.Hash.CSS,nested:!0,action:i("search_goto_section")};default:throw new Error("Unexpected item type")}},[i,r,s.onRenderSuggestion]),p=uc.useCallback(f=>{if(f)return{title:f?.page?.title}},[]),m=uc.useCallback((f,h)=>{if(f.type==="ask-gitbook")return s.onOpenSuggestion(f);if(!(f.type!=="page"&&f.type!=="section"))switch(re(Ft(o,{type:"public_content_search_open_result",resultType:f.type,resultIndex:h})),f.type){case"page":a({screen:{type:"space",space:f.space.key,page:f.path,hash:void 0,query:void 0}});break;case"section":a({screen:{type:"space",space:f.space.key,page:f.path,hash:f.anchor,query:void 0}});break;default:Ee(f)}},[r,s.onOpenSuggestion]);return u.length===0?uc.createElement(Ts,null,i("search_blankslate_query",r)):uc.createElement(xc,{data:u,getKey:QG,renderItem:d,renderGroup:p,groupItem:ej,getGroupKey:ZG,onOpen:m,style:[O.padding.horizontal400,O.padding.bottom400]})}function QG(t){return t.key}function ZG(t){return t?t.type==="ask-gitbook"?t.type:t.page.id:""}function ej(t){return t.type==="ask-gitbook"?{type:"ask-gitbook"}:t.groups.find(o=>o.type==="page")}function PN(t){let{space:o,query:e,onUpdateQuery:n,onSubmitAIQuery:r}=t;return P3(e),x3(e,{space:o}),e?xP.createElement(RN,{space:o,query:e,hasAI:o.hasAISearch,onSubmitAIQuery:r}):xP.createElement(wN,{space:o,onUpdateQuery:n,onSubmitAIQuery:r})}function kN(t){let{space:o}=t,[e,{open:n,close:r,setQuery:i}]=_I();return ri({[ze.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),un.createElement(zx,null,typeof e=="string"?un.createElement(tj,{space:o,query:e,setQuery:i,close:r}):null)}function tj(t){let{space:o,query:e,setQuery:n,close:r}=t,i=ue(),a=un.useRef(null),[s,l]=V3(),[u,d]=un.useState(!1);cd({screen:"search",searchType:"search"},[]);let p=un.useCallback(h=>{n(h),a.current?.focus()},[n,a]),m=h=>{d(!1),n(h)},f=un.useCallback(h=>{o.hasAISearch&&(d(!0),n(h),l(h),a.current?.focus(),re(Ft(o,{type:"ai_search_submit",query:h,trigger:"press_enter"})))},[!o.hasAISearch,n,l,a]);return un.createElement(kI,{ref:a,inputIcon:o.hasAISearch?b.SearchOrAsk.CSS:b.Search.CSS,rightButton:o.hasAISearch?un.createElement(F,{style:[O.flex.row,O.flex.alignItemsCenter]},u&&e&&e!==s.query?un.createElement(F,{style:[O.margin.right400,O.flex.row,O.flex.alignItemsCenter]},un.createElement(F,{style:O.margin.right100},un.createElement(pe,{style:[de.uiSmall,de.colorMuted]},"Enter")),un.createElement(b.ArrowEnter.CSS,{style:[O.icons.xsmall,de.colorMuted]})):null):null,query:e,onQueryChange:m,onSubmitQuery:f,onClose:r,queryPlaceholder:o.hasAISearch?i("search_placeholder_ask"):i("search_placeholder")},!u||!o.hasAISearch?un.createElement(PN,{query:e,space:o,onUpdateQuery:p,onSubmitAIQuery:f}):un.createElement(SN,{query:s,space:o,onUpdateQuery:p,onSubmitAIQuery:f,allowEnterToOpen:e.length===0}))}c();var gC=v(P());var Np=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(t,o)=>{Np.has(t)||Np.set(t,[]),Np.get(t).push(o)},removeEventListener:(t,o)=>{if(!Np.has(t))return;let e=Np.get(t),n=e.indexOf(o);n!==-1&&e.splice(n,1)}});function xN(t,...o){let e=Np.get(t);e&&e.forEach(n=>{n(...o)})}function IN(t){if(gC.useContext(Fn).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");gC.useEffect(()=>(xN("load"),()=>{xN("unload")}),[t.key])}function hC(t){let{space:o,assetHostname:e,collection:n,collectionSpaces:r,usesCookies:i}=t,{locale:a}=dn.useContext(Fn),{screen:s}=Ga(),l=Ie(),u=b1(o.key,s),d=s.type==="space"&&typeof s.changeRequest=="string";if(d&&!u)throw new Xr.NotFound("Change request not found");let p=s.type==="space"&&s.revision,m=d&&u?u.revisionCurrent:p&&s.revision||o.revision,f=Qr(l.store.getRevision(o.key,m));if(!f)throw d?new Xr.NotFound("Change request not found"):s.type==="space"&&s.revision?new Xr.NotFound("Revision not found"):new Error("Expected revision");v1(o),IN(o);let h=dn.useMemo(()=>Ft(o,{}),[o.key,o.organization,o.collection]);if(s.type!=="space"||s.space!==o.key)throw new Error("screen should be the space we render");dn.useEffect(()=>{if(o.searchKey)return FI(o.searchKey)},[o.searchKey]),na(R=>{R.write({type:"font",font:o.font||"Inter",fontFamilyName:"gitbook-content-font"}),(s.revision||s.changeRequest||s.sideSheet)&&R.write({type:"meta",name:"robots",content:"noindex"}),R.setLang(a)}),z3(o.privacyPolicyURL,OS(o)||i);let[y,S]=rT(f,s.page),w={space:o.key,...S?{page:S.id}:{},...u?{changeRequest:u.key}:{revision:f.id}};return dn.createElement(dn.Fragment,null,y?dn.createElement(Ch,{to:{screen:y}}):null,dn.createElement(Z1,{value:w},dn.createElement(tN,{space:o,revision:f,collection:n,currentPage:S,collectionSpaces:r}),dn.createElement(yN,{space:o,revision:f,screen:s,analyticsContext:h,collection:n,collectionSpaces:r,assetHostname:e,currentPage:S}),dn.createElement(vN,{space:o}),dn.createElement(kN,{space:o}),dn.createElement(n3,null),dn.createElement(T3,{content:o,contentRef:oa(o.key)})))}c();var IP=v(P());c();function Vp(t){return t?t.endsWith("/")?t:`${t}/`:""}function TN(t,o){return e=>{let n=`/${Vp(t.basePath)}`;switch(e.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":case"snippet":case"snippets":case"insights":case"trash":throw new Error(`Cannot navigate to ${e.type} on public content`);case"home":{if(e.organization){let i=ld.read({type:"organization",organization:e.organization});n=sf(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=cx(e.user);n=sf(i);break}case"collection":{let i=ld.read({type:"collection",collection:e.collection});n=sf(i);break}case"space":{let i=ld.read({type:"space",space:e.space});i.hostname===t.hostname&&(!t.basePath||i.pathname.startsWith(t.basePath))||o?(t.shareLink&&(n+=Vp(t.shareLink)),i.pathname!==t.basePath&&(t.basePath?n+=Vp(ck(i.pathname,Vp(t.basePath))):n+=Vp(i.pathname))):n=sf(i),n+=oj(e);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:Ee(e)}let r;if(typeof e.query=="string"){let i=new URLSearchParams;i.set("q",e.query),r=`?${i.toString()}`}return{pathname:n,hash:e.hash,search:r}}}function oj(t){let o="";return t.revision&&(o+=`~/revisions/${t.revision}/`),t.changeRequest&&(o+=`~/changes/${t.changeRequest}/`),o+=`${t.page[0]==="/"?t.page.slice(1):t.page}`,t.sideSheet&&(o=`${Vp(o)}~/${t.sideSheet.type}${"tab"in t.sideSheet?`/${t.sideSheet.tab}`:""}`),o}c();function EN(t,o,e,n=[]){return r=>{let{spaceKey:i,pathname:a}=yk({currentSpaceKey:o,collectionSpaces:n,collection:e,pathname:r.pathname,paths:t}),s={type:"space",space:i,page:""};nj(s,ix(a)),r.hash&&(s.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(s.query=u),s}}function nj(t,o){_C(o,[{path:`/~/revisions/:revision/:page${Ng}`,onMatch:e=>{Object.assign(t,{page:e.params.page,revision:e.params.revision}),Fp(t,e,o)}},{path:"/~/revisions/:revision",onMatch:e=>{Object.assign(t,{revision:e.params.revision,page:""}),Fp(t,e,o)}},{path:`/~/changes/:changeRequest/:page${Ng}`,onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:e.params.page}),Fp(t,e,o)}},{path:"/~/changes/:changeRequest",onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:""}),Fp(t,e,o)}},{path:`/:page${Ng}`,onMatch:e=>{Object.assign(t,{page:e.params.page,diff:!1}),Fp(t,e,o)}},{path:"/",onMatch:e=>{Object.assign(t,{diff:!1,page:""}),Fp(t,e,o)}}])}function Fp(t,o,e){_C(e,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(t,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:o.path})}function yC(t,o,e,n,r){let i=l1(),a=(0,IP.useMemo)(()=>EN(t,e,n,r),[t.hostname,t.basePath,t.shareLink,e,n,r]),s={hostname:t.hostname,pathname:t.basePath},l=(0,IP.useMemo)(()=>TN({hostname:s.hostname,basePath:s.pathname,shareLink:t.shareLink},o),[t.hostname,t.basePath,t.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function ON(t){let{space:o,ssrRequestPath:e,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:s,assetHostname:l,preview:u=!1,usesCookies:d=!1}=t,p=yC({hostname:i,basePath:r,shareLink:s},u,o.key),{primaryColor:m}=$o(o);return vi.createElement(yf,{mode:"public-content",preview:u,locale:o.language},vi.createElement(vi.Suspense,{fallback:vi.createElement(Mo,{size:"large"})},vi.createElement(Dl,{primaryColor:m},vi.createElement(Qm,null,vi.createElement(Zv,{ssrRequestPath:e,ssrRouterContext:n},vi.createElement(vh,{persist:!1,...p},vi.createElement(by,null,a&&typeof window>"u"?vi.createElement(Mo,{size:"large"}):vi.createElement(hC,{space:o,assetHostname:l,usesCookies:d}))))))))}c();var En=v(P());function DN(t){let{collection:o,basePath:e,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:s,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:p=!1}=t,m=yC({hostname:n,basePath:e,shareLink:l},d,void 0,o,i),{primaryColor:f}=$o(o);if(!d&&o.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return En.createElement(yf,{mode:"public-content",preview:d,locale:o.language},En.createElement(Dl,{primaryColor:f},En.createElement(Qm,null,En.createElement(Zv,{ssrRequestPath:a,ssrRouterContext:s},En.createElement(vh,{persist:!1,...m},En.createElement(En.Suspense,{fallback:En.createElement(Mo,{size:"large"})},En.createElement(by,null,r&&typeof window>"u"?En.createElement(Mo,{size:"large"}):En.createElement(rj,{collection:o,collectionSpaces:i,assetHostname:u,usesCookies:p}))))))))}function rj(t){let{screen:o}=Ga();if(o.type!=="space")throw new Error("screen should be a space");let[e]=Ic([oa(o.space)]);if(!e)throw new Error("the space should exist");let{primaryColor:n}=$o(e);return En.createElement(yf,{locale:e.language},En.createElement(Dl,{primaryColor:n},En.createElement(Qm,null,En.createElement(hC,{...t,space:e}))))}c();var Er=v(P()),MN=v(H());c();var TP=v(P());async function ij(t){let o=await Ka(),{data:e}=await o.hive.generateSpaceHiveReadAccessToken(t);return Object.values(e.contents)}function AN(t){return t.client?TP.createElement(fS,{client:t.client},t.children):TP.createElement(fS,{endpoint:iT(),fetchContentAuthToken:ij,store:t.store},t.children)}c();var Lu=v(P());var EP=We("preview:child");function BN(t,o){let[e,n]=Lu.useState(t),[r,i]=Lu.useState(void 0);return aj(e.footer),Lu.useEffect(()=>{o&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(EP.info("receive message",a.origin,a.data),a.origin!==ug()&&a.origin!=="http://127.0.0.1:5001"))return;let s=ok(a.data.payload),l=a.data.previewID;EP.debug("update content with",s),n(s),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),EP.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[o]),[e,r]}function aj(t){let o=Lu.useRef(t);Qu(()=>{t&&t!==o.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),o.current=t},[t])}c();var LN=v(P());function OP(){LN.useEffect(()=>{typeof window>"u"},[])}function DP(t){let o="collection"in t?t.collection:t.space,[e,n]=BN(o,!!t.preview),r=t.hive&&t.hive.client?{client:t.hive.client}:{store:t.hive?.contentStore};return OP(),Er.createElement(FP,null,Er.createElement(J3,{content:e,isPreview:!!t.preview},Er.createElement(AN,{...r},Er.createElement(sj,{...t,content:e,previewID:n}))))}function sj(t){let{content:o,previewID:e}=t;OP();let[n]=Er.useContext(Ra);return Er.createElement(Ha,{theme:n},Er.createElement(Vx,{theme:n},Er.createElement(WO,null,Er.createElement(UE,null,Er.createElement(_x,{enabled:!0},"collection"in t?Er.createElement(DN,{...t,collection:o}):Er.createElement(ON,{...t,space:o})),e?Er.createElement(MN.View,{testID:e}):null))))}c();function AP(t){let o=new URLSearchParams(window.location.search),e=window.location.hash;if(o.has("jwt_token")){o.delete("jwt_token");let i=o.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${e||""}`)}let{dsn:n,tracesSampling:r}={...Oa.sentry,...Oa.sentry.publicContent};GP({dsn:n,release:QP,projectId:Oa.firebase.projectId,tracesSampling:r}),window.location.hostname!=="127.0.0.1"&&pk(t.hostname),qE({customToken:t.customToken,waitUserReady:!1})}c();function _N(t){t?.firestore&&Ml.fromJS(t.firestore),t?.head&&Lx.cache.fromJS(t.head),t?.contentURLs&&ld.fromJS(t.contentURLs),t?.contentRefs&&la.fromJS(t.contentRefs),t?.screenToContentRefs&&Py.fromJS(t.screenToContentRefs),t?.swaggers&&ru.fromJS(t.swaggers),t?.api&&TI.fromJS(t.api)}c();var NN=We("browser-compatibility");function VN(){let t=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||t.includes(window.location.hostname)?(NN.warning("The application is served over an unsupported hostname and has been made static."),!1):cj()?!0:(NN.warning("Your browser is missing required features, the application has been made static."),!1)}function cj(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch{return!1}return!(!window.Intl||![].flat)}c();function FN(t){document.readyState==="interactive"||document.readyState==="complete"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}c();var HN=v(ZN());function BP(t){return new ys("ssr.deserializeFromHTML").wrapSync(()=>{let e=HN.default.decompress(t);return e?JSON.parse(e):null})}VN()&&FN(()=>{lj()});async function lj(){let t=window.__GITBOOK_INITIAL_PROPS__,o=BP(t);AP(o),window.__GITBOOK_LAZY_MODULES__&&await rI(window.__GITBOOK_LAZY_MODULES__);let e=window.__GITBOOK_INITIAL_STATE__,n=BP(e);n?(_N(n),LP.AppRegistry.registerComponent("PublicContentApplication",()=>DP),LP.AppRegistry.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:o})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-LABHDNP2.min.js.map
